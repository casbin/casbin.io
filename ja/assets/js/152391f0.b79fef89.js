"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[4128],{908(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"rbac-with-domains","title":"RBAC with Domains","description":"\u30c9\u30e1\u30a4\u30f3\u3092\u4f7f\u7528\u3057\u305fRBAC\u306e\u4f7f\u7528\u6cd5","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/RBACWithDomains.mdx","sourceDirName":".","slug":"/rbac-with-domains","permalink":"/ja/docs/rbac-with-domains","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithDomains.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-domains","title":"RBAC with Domains","description":"\u30c9\u30e1\u30a4\u30f3\u3092\u4f7f\u7528\u3057\u305fRBAC\u306e\u4f7f\u7528\u6cd5","keywords":["RBAC with domains"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC with Pattern","permalink":"/ja/docs/rbac-with-pattern"},"next":{"title":"RBAC with Conditions","permalink":"/ja/docs/rbac-with-conditions"}}');var s=i(4848),d=i(8453);const c={id:"rbac-with-domains",title:"RBAC with Domains",description:"\u30c9\u30e1\u30a4\u30f3\u3092\u4f7f\u7528\u3057\u305fRBAC\u306e\u4f7f\u7528\u6cd5",keywords:["RBAC with domains"],authors:["hsluoyz"]},o=void 0,a={},r=[{value:"\u30c9\u30e1\u30a4\u30f3\u30c6\u30ca\u30f3\u30c8\u3068\u306e\u5f79\u5272\u5b9a\u7fa9",id:"\u30c9\u30e1\u30a4\u30f3\u30c6\u30ca\u30f3\u30c8\u3068\u306e\u5f79\u5272\u5b9a\u7fa9",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"\u30c9\u30e1\u30a4\u30f3\u30c6\u30ca\u30f3\u30c8\u3068\u306e\u5f79\u5272\u5b9a\u7fa9",children:"\u30c9\u30e1\u30a4\u30f3\u30c6\u30ca\u30f3\u30c8\u3068\u306e\u5f79\u5272\u5b9a\u7fa9"}),"\n",(0,s.jsx)(n.p,{children:"Casbin\u306eRBAC\u30ed\u30fc\u30eb\u306f\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u307e\u305f\u306f\u30c9\u30e1\u30a4\u30f3\u56fa\u6709\u306e\u3082\u306e\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30c9\u30e1\u30a4\u30f3\u56fa\u6709\u306e\u5f79\u5272\u3068\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u7570\u306a\u308b\u30c9\u30e1\u30a4\u30f3/\u30c6\u30ca\u30f3\u30c8\u306b\u3044\u308b\u3068\u304d\u306b\u3001\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u5f79\u5272\u304c\u7570\u306a\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002 \u3053\u308c\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u901a\u5e38\u7570\u306a\u308b\u30c6\u30ca\u30f3\u30c8\u306b\u3044\u308b\u5927\u898f\u6a21\u306a\u30b7\u30b9\u30c6\u30e0\u3001\u4f8b\u3048\u3070\u30af\u30e9\u30a6\u30c9\u306b\u3068\u3063\u3066\u975e\u5e38\u306b\u6709\u7528\u3067\u3059\u3002"}),"\n",(0,s.jsx)(n.p,{children:"\u30c9\u30e1\u30a4\u30f3/\u30c6\u30ca\u30f3\u30c8\u3068\u306e\u5f79\u5272\u5b9a\u7fa9\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3079\u304d\u3067\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[role_definition]\ng = _, _, _\n"})}),"\n",(0,s.jsxs)(n.p,{children:["3\u756a\u76ee\u306e",(0,s.jsx)(n.code,{children:"_"}),"\u306f\u30c9\u30e1\u30a4\u30f3/\u30c6\u30ca\u30f3\u30c8\u306e\u540d\u524d\u3092\u8868\u3057\u3001\u3053\u306e\u90e8\u5206\u306f\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002 \u305d\u306e\u5f8c\u3001\u30dd\u30ea\u30b7\u30fc\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csv",children:"p, admin, tenant1, data1, read\np, admin, tenant2, data2, read\n\ng, alice, admin, tenant1\ng, alice, user, tenant2\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u3053\u308c\u306f\u3001",(0,s.jsx)(n.code,{children:"tenant1"}),"\u306e",(0,s.jsx)(n.code,{children:"admin"}),"\u30ed\u30fc\u30eb\u304c",(0,s.jsx)(n.code,{children:"data1"}),"\u3092\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002 \u305d\u3057\u3066\u3001",(0,s.jsx)(n.code,{children:"alice"}),"\u306f",(0,s.jsx)(n.code,{children:"tenant1"}),"\u3067",(0,s.jsx)(n.code,{children:"admin"}),"\u30ed\u30fc\u30eb\u3092\u6301\u3061\u3001",(0,s.jsx)(n.code,{children:"tenant2"}),"\u3067",(0,s.jsx)(n.code,{children:"user"}),"\u30ed\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002 \u3057\u305f\u304c\u3063\u3066\u3001\u5f7c\u5973\u306f",(0,s.jsx)(n.code,{children:"data1"}),"\u3092\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u3057\u304b\u3057\u3001",(0,s.jsx)(n.code,{children:"alice"}),"\u306f",(0,s.jsx)(n.code,{children:"tenant2"}),"\u306e",(0,s.jsx)(n.code,{children:"admin"}),"\u3067\u306f\u306a\u3044\u306e\u3067\u3001",(0,s.jsx)(n.code,{children:"data2"}),"\u3092\u8aad\u3080\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u305d\u306e\u5f8c\u3001\u30de\u30c3\u30c1\u30e3\u30fc\u3067\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u30ed\u30fc\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[matchers]\nm = g(r.sub, p.sub, r.dom) && r.dom == p.dom && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4f8b\u306b\u3064\u3044\u3066\u306f\u3001",(0,s.jsx)(n.a,{href:"https://github.com/casbin/casbin/blob/master/examples/rbac_with_domains_model.conf",children:"rbac_with_domains_model.conf"}),"\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002"]}),"\n",(0,s.jsxs)(n.admonition,{title:"\u30c8\u30fc\u30af\u30f3\u540d\u306e\u898f\u7d04",type:"info",children:[(0,s.jsxs)(n.p,{children:["\u6ce8\uff1a\u6163\u4f8b\u7684\u306b\u3001\u30dd\u30ea\u30b7\u30fc\u5b9a\u7fa9\u306e\u30c9\u30e1\u30a4\u30f3\u30c8\u30fc\u30af\u30f3\u540d\u306f",(0,s.jsx)(n.code,{children:"dom"}),"\u3067\u30012\u756a\u76ee\u306e\u30c8\u30fc\u30af\u30f3\uff08",(0,s.jsx)(n.code,{children:"sub, dom, obj, act"}),"\uff09\u3068\u3057\u3066\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002\n\u73fe\u5728\u3001Golang Casbin\u306f\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u540d\u3068\u914d\u7f6e\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002 \u30c9\u30e1\u30a4\u30f3\u30c8\u30fc\u30af\u30f3\u540d\u304c",(0,s.jsx)(n.code,{children:"dom"}),"\u306e\u5834\u5408\u3001\u30c9\u30e1\u30a4\u30f3\u30c8\u30fc\u30af\u30f3\u306f\u8ffd\u52a0\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306a\u3057\u3067\u4efb\u610f\u306e\u4f4d\u7f6e\u306b\u914d\u7f6e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u30c9\u30e1\u30a4\u30f3\u30c8\u30fc\u30af\u30f3\u540d\u304c",(0,s.jsx)(n.code,{children:"dom"}),"\u3067\u306a\u3044\u5834\u5408\u3001\u30a8\u30f3\u30d5\u30a9\u30fc\u30b5\u30fc\u304c\u521d\u671f\u5316\u3055\u308c\u305f\u5f8c\u306b\u3001\u305d\u306e\u4f4d\u7f6e\u306b\u95a2\u4fc2\u306a\u304f",(0,s.jsx)(n.code,{children:"constant.DomainIndex"}),"\u306e\u305f\u3081\u306e",(0,s.jsx)(n.code,{children:"e.SetFieldIndex()"}),"\u3092\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# `domain` here for `dom`\n[policy_definition]\np = sub, obj, act, domain\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'e.SetFieldIndex("p", constant.DomainIndex, 3) // index starts from 0\nusers := e.GetAllUsersByDomain("domain1") // without SetFieldIndex, it will raise an error\n'})})]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>c,x:()=>o});var t=i(6540);const s={},d=t.createContext(s);function c(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);