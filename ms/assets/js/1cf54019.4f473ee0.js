"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[5154],{3658(e,a,n){n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"syntax-for-models","title":"Syntax for Models","description":"Sintaks untuk Model","source":"@site/i18n/ms/docusaurus-plugin-content-docs/current/SyntaxForModels.mdx","sourceDirName":".","slug":"/syntax-for-models","permalink":"/ms/docs/syntax-for-models","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/SyntaxForModels.mdx","tags":[],"version":"current","frontMatter":{"id":"syntax-for-models","title":"Syntax for Models","description":"Sintaks untuk Model","keywords":["syntax"],"authors":["nodece"]},"sidebar":"docs","previous":{"title":"Supported Models","permalink":"/ms/docs/supported-models"},"next":{"title":"Effector","permalink":"/ms/docs/effector"}}');var s=n(4848),t=n(8453);const r={id:"syntax-for-models",title:"Syntax for Models",description:"Sintaks untuk Model",keywords:["syntax"],authors:["nodece"]},d=void 0,l={},o=[{value:"Definisi permintaan",id:"definisi-permintaan",level:2},{value:"Takrifan Polisi",id:"takrifan-polisi",level:2},{value:"Kesan Dasar",id:"kesan-dasar",level:2},{value:"Constraint Definition",id:"constraint-definition",level:2},{value:"Constraint Types",id:"constraint-types",level:3},{value:"How Constraints Work",id:"how-constraints-work",level:3},{value:"Pemadanan",id:"pemadanan",level:2},{value:"Susunan ungkapan dalam pemadanan",id:"susunan-ungkapan-dalam-pemadanan",level:3},{value:"Pelbagai Jenis Bahagian",id:"pelbagai-jenis-bahagian",level:2},{value:"Tatabahasa Khas",id:"tatabahasa-khas",level:2},{value:"Penilaian Ekspresi",id:"penilaian-ekspresi",level:2}];function c(e){const a={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{TabItem:n,Tabs:i}=a;return n||p("TabItem",!0),i||p("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:["Konfigurasi model (CONF) harus mempunyai sekurang-kurangnya empat bahagian: ",(0,s.jsx)(a.code,{children:"[request_definition]"}),", ",(0,s.jsx)(a.code,{children:"[policy_definition]"}),", ",(0,s.jsx)(a.code,{children:"[policy_effect]"}),", dan ",(0,s.jsx)(a.code,{children:"[matchers]"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:["Jika model menggunakan Kontrol Akses Berbasis Peranan (RBAC), ia juga harus memasukkan bahagian ",(0,s.jsx)(a.code,{children:"[role_definition]"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:["If a model needs to enforce policy invariants for RBAC, it can optionally include the ",(0,s.jsx)(a.code,{children:"[constraint_definition]"})," section."]}),"\n"]}),"\n",(0,s.jsxs)(a.li,{children:["\n",(0,s.jsxs)(a.p,{children:["Konfigurasi model (CONF) boleh mengandungi komen. Komen bermula dengan simbol ",(0,s.jsx)(a.code,{children:"#"}),", dan semua yang berada selepas simbol ",(0,s.jsx)(a.code,{children:"#"})," akan dikomen keluar."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(a.h2,{id:"definisi-permintaan",children:"Definisi permintaan"}),"\n",(0,s.jsxs)(a.p,{children:["Bahagian ",(0,s.jsx)(a.code,{children:"[request_definition]"})," mentakrifkan argumen dalam fungsi ",(0,s.jsx)(a.code,{children:"e.Enforce(...)"}),"."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Dalam contoh ini, ",(0,s.jsx)(a.code,{children:"sub"}),", ",(0,s.jsx)(a.code,{children:"obj"}),", dan ",(0,s.jsx)(a.code,{children:"act"})," mewakili tiga klasik akses: subjek (entiti yang mengakses), objek (sumber yang diakses), dan tindakan (cara akses). Walau bagaimanapun, anda boleh menyesuaikan format permintaan anda sendiri. Sebagai contoh, anda boleh menggunakan ",(0,s.jsx)(a.code,{children:"sub, act"})," jika anda tidak perlu menentukan sumber tertentu, atau ",(0,s.jsx)(a.code,{children:"sub, sub2, obj, act"})," jika anda mempunyai dua entiti yang mengakses."]}),"\n",(0,s.jsx)(a.h2,{id:"takrifan-polisi",children:"Takrifan Polisi"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.code,{children:"[policy_definition]"})," adalah takrifan untuk satu polisi. Ia mentakrifkan makna polisi tersebut. Sebagai contoh, kami mempunyai model berikut:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[policy_definition]\np = sub, obj, act\np2 = sub, act\n"})}),"\n",(0,s.jsx)(a.p,{children:"Dan kami mempunyai polisi berikut (jika dalam fail polisi):"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-csv",children:"p, alice, data1, read\np2, bob, write-all-objects\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Setiap baris dalam polisi dipanggil peraturan polisi. Setiap peraturan polisi bermula dengan ",(0,s.jsx)(a.code,{children:"jenis polisi"}),", seperti ",(0,s.jsx)(a.code,{children:"p"})," atau ",(0,s.jsx)(a.code,{children:"p2"}),". Ia digunakan untuk memadankan takrifan polisi jika terdapat beberapa takrifan. Dasar di atas menunjukkan ikatan berikut. Ikatan ini boleh digunakan dalam penapis."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-text",children:"(alice, data1, read) -> (p.sub, p.obj, p.act)\n(bob, write-all-objects) -> (p2.sub, p2.act)\n"})}),"\n",(0,s.jsx)(a.admonition,{type:"tip",children:(0,s.jsxs)(a.p,{children:["Elemen dalam peraturan dasar sentiasa dianggap sebagai ",(0,s.jsx)(a.code,{children:"rentetan"}),". Sekiranya anda mempunyai sebarang pertanyaan mengenai ini, sila rujuk perbincangan di: ",(0,s.jsx)(a.a,{href:"https://github.com/casbin/casbin/issues/113",children:"https://github.com/casbin/casbin/issues/113"})]})}),"\n",(0,s.jsx)(a.h2,{id:"kesan-dasar",children:"Kesan Dasar"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.code,{children:"[policy_effect]"})," adalah definisi untuk kesan dasar. Ia menentukan sama ada permintaan akses harus diluluskan jika berbilang peraturan dasar sepadan dengan permintaan tersebut. Contohnya, satu peraturan membenarkan dan yang lain menafikan."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[policy_effect]\ne = some(where (p.eft == allow))\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Kesan dasar di atas bermakna jika terdapat sebarang peraturan dasar yang sepadan dengan ",(0,s.jsx)(a.code,{children:"benarkan"}),", kesan akhir adalah ",(0,s.jsx)(a.code,{children:"benarkan"})," (juga dikenali sebagai benarkan-timpa). ",(0,s.jsx)(a.code,{children:"p.eft"})," adalah kesan untuk satu dasar, dan ia boleh menjadi sama ada ",(0,s.jsx)(a.code,{children:"benarkan"})," atau ",(0,s.jsx)(a.code,{children:"nafi"}),". Ia adalah pilihan, dan nilai lalai ialah ",(0,s.jsx)(a.code,{children:"allow"}),". Oleh kerana kita tidak menentukannya di atas, ia menggunakan nilai lalai."]}),"\n",(0,s.jsx)(a.p,{children:"Satu lagi contoh untuk kesan dasar ialah:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[policy_effect]\ne = !some(where (p.eft == deny))\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Ini bermakna jika tiada peraturan dasar yang sepadan dengan ",(0,s.jsx)(a.code,{children:"deny"}),", kesan akhir ialah ",(0,s.jsx)(a.code,{children:"allow"})," (juga dikenali sebagai deny-override). ",(0,s.jsx)(a.code,{children:"some"})," bermakna terdapat sekurang-kurangnya satu peraturan dasar yang sepadan. ",(0,s.jsx)(a.code,{children:"any"})," bermakna semua peraturan dasar yang sepadan (tidak digunakan di sini). Kesan dasar juga boleh dihubungkaitkan dengan ungkapan logik:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[policy_effect]\ne = some(where (p.eft == allow)) && !some(where (p.eft == deny))\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Ini bermakna mesti ada sekurang-kurangnya satu peraturan dasar yang sepadan dengan ",(0,s.jsx)(a.code,{children:"allow"}),", dan tidak boleh ada peraturan dasar yang sepadan dengan ",(0,s.jsx)(a.code,{children:"deny"}),". Oleh itu, dengan cara ini, kedua-dua kebenaran dan penafian diluluskan disokong, dan penafian mengatasi."]}),"\n",(0,s.jsx)(a.admonition,{type:"note",children:(0,s.jsx)(a.p,{children:"Walaupun kita mereka bentuk sintaks kesan dasar seperti di atas, pelaksanaan semasa hanya menggunakan kesan dasar yang dikodkan secara keras. Ini kerana kami mendapati bahawa tidak ada keperluan yang besar untuk tahap fleksibiliti tersebut. Jadi buat masa ini, anda mesti menggunakan salah satu kesan polisi terbina dalam daripada menyesuaikan sendiri."})}),"\n",(0,s.jsx)(a.p,{children:"Kesan polisi terbina dalam yang disokong adalah:"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Kesan Polisi"}),(0,s.jsx)(a.th,{children:"Maksud"}),(0,s.jsx)(a.th,{children:"Contoh"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"some(where (p.eft == allow))"}),(0,s.jsx)(a.td,{children:"allow-override"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"/docs/supported-models#examples",children:"ACL, RBAC, dll."})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"!some(where (p.eft == deny))"}),(0,s.jsx)(a.td,{children:"tolak-mengatasi"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"/docs/supported-models#examples",children:"Tolak-mengatasi"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"beberapa(tempat (p.eft == benarkan)) && !beberapa(tempat (p.eft == tolak))"}),(0,s.jsx)(a.td,{children:"benarkan-dan-tolak"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"/docs/supported-models#examples",children:"Benarkan-dan-tolak"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"keutamaan(p.eft) || tolak"}),(0,s.jsx)(a.td,{children:"keutamaan"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"/docs/supported-models#examples",children:"Keutamaan"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"keutamaanSubjek(p.eft)"}),(0,s.jsx)(a.td,{children:"keutamaan berdasarkan peranan"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"/docs/supported-models#examples",children:"Subjek-Keutamaan"})})]})]})]}),"\n",(0,s.jsx)(a.h2,{id:"constraint-definition",children:"Constraint Definition"}),"\n",(0,s.jsxs)(a.p,{children:["The ",(0,s.jsx)(a.code,{children:"[constraint_definition]"})," section declares policy invariants for RBAC systems. Constraints ensure your role assignments stay valid by checking rules every time policies change. This section is optional and only works when RBAC is enabled (requires ",(0,s.jsx)(a.code,{children:"[role_definition]"}),")."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:'[constraint_definition]\nc = sod("finance_requester", "finance_approver")\nc2 = sodMax(["payroll_view", "payroll_edit", "payroll_approve"], 1)\nc3 = roleMax("superadmin", 2)\nc4 = rolePre("db_admin", "security_trained")\n'})}),"\n",(0,s.jsx)(a.h3,{id:"constraint-types",children:"Constraint Types"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Separation of Duties (sod)"})," - Prevents a user from holding two conflicting roles simultaneously. When Alice is assigned ",(0,s.jsx)(a.code,{children:"finance_requester"}),", the system blocks any attempt to also give her ",(0,s.jsx)(a.code,{children:"finance_approver"}),"."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:'c = sod("finance_requester", "finance_approver")\n'})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Separation of Duties Max (sodMax)"})," - Limits how many roles from a set each user can have. With ",(0,s.jsx)(a.code,{children:"sodMax"})," set to 1, a user managing payroll can either view, edit, or approve\u2014but never hold two of these roles at once."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:'c2 = sodMax(["payroll_view", "payroll_edit", "payroll_approve"], 1)\n'})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Role Cardinality (roleMax)"})," - Caps the total number of users who can have a specific role. Setting a limit of 2 for ",(0,s.jsx)(a.code,{children:"superadmin"})," means only two people in your organization can hold that role at any time."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:'c3 = roleMax("superadmin", 2)\n'})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"Prerequisite Role (rolePre)"})," - Requires users to have one role before they can receive another. Nobody gets ",(0,s.jsx)(a.code,{children:"db_admin"})," access unless they already have the ",(0,s.jsx)(a.code,{children:"security_trained"})," role."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:'c4 = rolePre("db_admin", "security_trained")\n'})}),"\n",(0,s.jsx)(a.h3,{id:"how-constraints-work",children:"How Constraints Work"}),"\n",(0,s.jsxs)(a.p,{children:["Constraints validate automatically when you modify grouping policies through methods like ",(0,s.jsx)(a.code,{children:"AddGroupingPolicy()"})," or ",(0,s.jsx)(a.code,{children:"RemoveGroupingPolicy()"}),". If a change would break a constraint, the operation fails and returns a constraint violation error\u2014the policy remains unchanged."]}),"\n",(0,s.jsx)(a.p,{children:"During model initialization, all existing constraints are checked against current policies. If any constraint is invalid (wrong syntax, missing RBAC setup, or violated by existing data), the model fails to load with a descriptive error."}),"\n",(0,s.jsx)(a.h2,{id:"pemadanan",children:"Pemadanan"}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.code,{children:"[pemadanan]"})," adalah definisi untuk pemadanan polisi. Pemadanan adalah ungkapan yang mentakrifkan bagaimana peraturan polisi dinilai terhadap permintaan."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[matchers]\nm = r.sub == p.sub && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,s.jsx)(a.p,{children:"Pemadanan di atas adalah yang paling mudah dan bermaksud bahawa subjek, objek, dan tindakan dalam permintaan harus sepadan dengan yang ada dalam peraturan polisi."}),"\n",(0,s.jsxs)(a.p,{children:["Operator aritmetik seperti ",(0,s.jsx)(a.code,{children:"+, -, *, /"})," dan operator logik seperti ",(0,s.jsx)(a.code,{children:"&&, ||, !"})," boleh digunakan dalam pemadanan."]}),"\n",(0,s.jsx)(a.h3,{id:"susunan-ungkapan-dalam-pemadanan",children:"Susunan ungkapan dalam pemadanan"}),"\n",(0,s.jsx)(a.p,{children:"Susunan ungkapan boleh memberi kesan yang besar kepada prestasi. Lihat contoh berikut untuk butiran lanjut:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-go",children:'const rbac_models = `\n[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n`\n\nfunc TestManyRoles(t *testing.T) {\n\n    m, _ := model.NewModelFromString(rbac_models)\n    e, _ := NewEnforcer(m, false)\n\n    roles := []string{"admin", "manager", "developer", "tester"}\n\n    // 2500 projects\n    for nbPrj := 1; nbPrj < 2500; nbPrj++ {\n        // 4 objects and 1 role per object (so 4 roles)\n        for _, role := range roles {\n            roleDB := fmt.Sprintf("%s_project:%d", role, nbPrj)\n            objectDB := fmt.Sprintf("/projects/%d", nbPrj)\n            e.AddPolicy(roleDB, objectDB, "GET")\n        }\n        jasmineRole := fmt.Sprintf("%s_project:%d", roles[1], nbPrj)\n        e.AddGroupingPolicy("jasmine", jasmineRole)\n    }\n\n    e.AddGroupingPolicy("abu", "manager_project:1")\n    e.AddGroupingPolicy("abu", "manager_project:2499")\n\n    // With same number of policies\n    // User \'abu\' has only two roles\n    // User \'jasmine\' has many roles (1 role per policy, here 2500 roles)\n\n    request := func(subject, object, action string) {\n        t0 := time.Now()\n        resp, _ := e.Enforce(subject, object, action)\n        tElapse := time.Since(t0)\n        t.Logf("RESPONSE %-10s %s\\t %s : %5v IN: %+v", subject, object, action, resp, tElapse)\n        if tElapse > time.Millisecond*100 {\n            t.Errorf("More than 100 milliseconds for %s %s %s : %+v", subject, object, action, tElapse)\n        }\n    }\n\n    request("abu", "/projects/1", "GET")        // really fast because only 2 roles in all policies and at the beginning of the casbin_rule table\n    request("abu", "/projects/2499", "GET")     // fast because only 2 roles in all policies\n    request("jasmine", "/projects/1", "GET")    // really fast at the beginning of the casbin_rule table\n\n    request("jasmine", "/projects/2499", "GET") // slow and fails the only 1st time   <<<< pb here\n    request("jasmine", "/projects/2499", "GET") // fast maybe due to internal cache mechanism\n\n    // same issue with non-existing roles\n    // request("jasmine", "/projects/999999", "GET") // slow fails the only 1st time   <<<< pb here\n    // request("jasmine", "/projects/999999", "GET") // fast maybe due to internal cache mechanism\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Masa penguatkuasaan mungkin sangat lama, sehingga 6 saat."}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"go test -run ^TestManyRoles$ github.com/casbin/casbin/v3 -v\n\n=== RUN   TestManyRoles\n    rbac_api_test.go:598: RESPONSE abu        /projects/1        GET :  true IN: 438.379\xb5s\n    rbac_api_test.go:598: RESPONSE abu        /projects/2499     GET :  true IN: 39.005173ms\n    rbac_api_test.go:598: RESPONSE jasmine    /projects/1        GET :  true IN: 1.774319ms\n    rbac_api_test.go:598: RESPONSE jasmine    /projects/2499     GET :  true IN: 6.164071648s\n    rbac_api_test.go:600: More than 100 milliseconds for jasmine /projects/2499 GET : 6.164071648s\n    rbac_api_test.go:598: RESPONSE jasmine    /projects/2499     GET :  true IN: 12.164122ms\n--- FAIL: TestManyRoles (6.24s)\nFAIL\nFAIL    github.com/casbin/casbin/v3     6.244s\nFAIL\n"})}),"\n",(0,s.jsx)(a.p,{children:"Walau bagaimanapun, jika kita menyesuaikan susunan ungkapan dalam penapis dan meletakkan ungkapan yang memakan lebih banyak masa seperti fungsi di belakang, masa pelaksanaan akan menjadi sangat singkat."}),"\n",(0,s.jsx)(a.p,{children:"Menukar susunan ungkapan dalam penapis dalam contoh di atas kepada:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[matchers]\nm = r.obj == p.obj && g(r.sub, p.sub) && r.act == p.act\n"})}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-bash",children:"go test -run ^TestManyRoles$ github.com/casbin/casbin/v3 -v\n=== RUN   TestManyRoles\n    rbac_api_test.go:599: RESPONSE abu        /projects/1        GET :  true IN: 786.635\xb5s\n    rbac_api_test.go:599: RESPONSE abu        /projects/2499     GET :  true IN: 4.933064ms\n    rbac_api_test.go:599: RESPONSE jasmine    /projects/1        GET :  true IN: 2.908534ms\n    rbac_api_test.go:599: RESPONSE jasmine    /projects/2499     GET :  true IN: 7.292963ms\n    rbac_api_test.go:599: RESPONSE jasmine    /projects/2499     GET :  true IN: 6.168307ms\n--- PASS: TestManyRoles (0.05s)\nPASS\nok      github.com/casbin/casbin/v3     0.053s\n"})}),"\n",(0,s.jsx)(a.h2,{id:"pelbagai-jenis-bahagian",children:"Pelbagai Jenis Bahagian"}),"\n",(0,s.jsxs)(a.p,{children:["Jika anda memerlukan pelbagai definisi polisi atau pelbagai penapis, anda boleh menggunakan ",(0,s.jsx)(a.code,{children:"p2"})," atau ",(0,s.jsx)(a.code,{children:"m2"})," sebagai contoh. Sebenarnya, keempat-empat bahagian yang dinyatakan di atas boleh menggunakan pelbagai jenis, dan sintaksnya adalah ",(0,s.jsx)(a.code,{children:"r"})," diikuti dengan nombor, seperti ",(0,s.jsx)(a.code,{children:"r2"})," atau ",(0,s.jsx)(a.code,{children:"e2"}),". Secara lalai, keempat-empat bahagian ini harus sepadan satu-dengan-satu. Sebagai contoh, bahagian ",(0,s.jsx)(a.code,{children:"r2"})," anda hanya akan menggunakan penapis ",(0,s.jsx)(a.code,{children:"m2"})," untuk memadankan polisi ",(0,s.jsx)(a.code,{children:"p2"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["Anda boleh menyampaikan ",(0,s.jsx)(a.code,{children:"EnforceContext"})," sebagai parameter pertama kaedah ",(0,s.jsx)(a.code,{children:"enforce"})," untuk menentukan jenis. ",(0,s.jsx)(a.code,{children:"EnforceContext"})," ditakrifkan seperti berikut:"]}),"\n",(0,s.jsxs)(i,{groupId:"langs",children:[(0,s.jsx)(n,{value:"Go",label:"Go",default:!0,children:(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-go",children:'EnforceContext{"r2","p2","e2","m2"}\ntype EnforceContext struct {\n    RType string\n    PType string\n    EType string\n    MType string\n}\n'})})}),(0,s.jsx)(n,{value:"Node.js",label:"Node.js",children:(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-javascript",children:"const enforceContext = new EnforceContext('r2', 'p2', 'e2', 'm2');\nclass EnforceContext {\n  constructor(rType, pType, eType, mType) {\n    this.pType = pType;\n    this.eType = eType;\n    this.mType = mType;\n    this.rType = rType;\n  }\n}\n"})})}),(0,s.jsx)(n,{value:"Java",label:"Java",children:(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'EnforceContext enforceContext = new EnforceContext("2");\npublic class EnforceContext {\n    private String pType;\n    private String eType;\n    private String mType;\n    private String rType;\n    public EnforceContext(String suffix) {\n      this.pType = "p" + suffix;\n      this.eType = "e" + suffix;\n      this.mType = "m" + suffix;\n      this.rType = "r" + suffix;\n    }\n}\n'})})})]}),"\n",(0,s.jsxs)(a.p,{children:["Berikut adalah contoh penggunaan. Sila rujuk kepada ",(0,s.jsx)(a.a,{href:"https://github.com/casbin/casbin/blob/master/examples/multiple_policy_definitions_model.conf",children:"model"})," dan ",(0,s.jsx)(a.a,{href:"https://github.com/casbin/casbin/blob/master/examples/multiple_policy_definitions_policy.csv",children:"polisi"}),". Permintaannya adalah seperti berikut:"]}),"\n",(0,s.jsxs)(i,{groupId:"langs",children:[(0,s.jsx)(n,{value:"Go",label:"Go",default:!0,children:(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-go",children:'// Pass in a suffix as a parameter to NewEnforceContext, such as 2 or 3, and it will create r2, p2, etc.\nenforceContext := NewEnforceContext("2")\n// You can also specify a certain type individually\nenforceContext.EType = "e"\n// Don\'t pass in EnforceContext; the default is r, p, e, m\ne.Enforce("alice", "data2", "read")        // true\n// Pass in EnforceContext\ne.Enforce(enforceContext, struct{ Age int }{Age: 70}, "/data1", "read")        //false\ne.Enforce(enforceContext, struct{ Age int }{Age: 30}, "/data1", "read")        //true\n'})})}),(0,s.jsx)(n,{value:"Node.js",label:"Node.js",children:(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-javascript",children:'// Pass in a suffix as a parameter to NewEnforceContext, such as 2 or 3, and it will create r2, p2, etc.\nconst enforceContext = new NewEnforceContext(\'2\');\n\n// You can also specify a certain type individually\nenforceContext.eType = "e"\n\n// Don\'t pass in EnforceContext; the default is r, p, e, m\ne.Enforce("alice", "data2", "read")        // true\n\n// Pass in EnforceContext\ne.Enforce(enforceContext, {Age: 70}, "/data1", "read")        //false\ne.Enforce(enforceContext, {Age: 30}, "/data1", "read")        //true\n'})})}),(0,s.jsx)(n,{value:"Java",label:"Java",children:(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'// Pass in a suffix as a parameter to NewEnforceContext, such as 2 or 3, and it will create r2, p2, etc.\nEnforceContext enforceContext = new EnforceContext("2");\n// You can also specify a certain type individually\nenforceContext.seteType("e");\n// Don\'t pass in EnforceContext; the default is r, p, e, m\ne.enforce("alice", "data2", "read");  // true\n// Pass in EnforceContext\n// TestEvalRule is located in https://github.com/casbin/jcasbin/blob/master/src/test/java/org/casbin/jcasbin/main/AbacAPIUnitTest.java#L56\ne.enforce(enforceContext, new AbacAPIUnitTest.TestEvalRule("alice", 70), "/data1", "read"); // false\ne.enforce(enforceContext, new AbacAPIUnitTest.TestEvalRule("alice", 30), "/data1", "read"); // true\n'})})})]}),"\n",(0,s.jsx)(a.h2,{id:"tatabahasa-khas",children:"Tatabahasa Khas"}),"\n",(0,s.jsxs)(a.p,{children:['Anda juga boleh menggunakan operator "in", yang merupakan satu-satunya operator dengan nama teks. Operator ini memeriksa tatasusunan di sebelah kanan untuk melihat sama ada ia mengandungi nilai yang sama dengan nilai di sebelah kiri. Kesamaan ditentukan dengan menggunakan operator ==, dan perpustakaan ini tidak menyemak jenis antara nilai-nilai tersebut. Selagi dua nilai boleh ditukar kepada interface'," dan masih boleh diperiksa untuk kesamaan dengan ==, ia akan bertindak seperti yang dijangkakan. Ambil perhatian bahawa anda boleh menggunakan parameter untuk tatasusunan, tetapi ia mestilah []interface","."]}),"\n",(0,s.jsxs)(a.p,{children:["Rujuk juga kepada ",(0,s.jsx)(a.a,{href:"https://github.com/casbin/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/examples/rbac_model_matcher_using_in_op.conf",children:"rbac_model_matcher_using_in_op"}),", ",(0,s.jsx)(a.a,{href:"https://github.com/casbin/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/examples/keyget2_model.conf",children:"keyget2_model"}),", dan ",(0,s.jsx)(a.a,{href:"https://github.com/casbin/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/examples/keyget_model.conf",children:"keyget_model"}),"."]}),"\n",(0,s.jsx)(a.p,{children:"Contoh:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj\n...\n[matchers]\nm = r.sub.Name in (r.obj.Admins)\n"})}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-go",children:'e.Enforce(Sub{Name: "alice"}, Obj{Name: "a book", Admins: []interface{}{"alice", "bob"}})\n'})}),"\n",(0,s.jsx)(a.h2,{id:"penilaian-ekspresi",children:"Penilaian Ekspresi"}),"\n",(0,s.jsx)(a.p,{children:"Penilaian pencocokan dalam Casbin dilaksanakan oleh penilai ekspresi dalam setiap bahasa. Casbin menggabungkan kekuatan mereka untuk menyediakan bahasa PERM yang seragam. Selain sintaks model yang diberikan di sini, penilai ekspresi ini mungkin menawarkan fungsi tambahan yang mungkin tidak didukung oleh bahasa atau implementasi lain. Harap berhati-hati ketika menggunakan fungsi ini."}),"\n",(0,s.jsx)(a.p,{children:"Penilai ekspresi yang digunakan oleh setiap implementasi Casbin adalah sebagai berikut:"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Implementasi"}),(0,s.jsx)(a.th,{children:"Bahasa"}),(0,s.jsx)(a.th,{children:"Penilai Ekspresi"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Casbin"}),(0,s.jsx)(a.td,{children:"Golang"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/casbin/govaluate",children:"https://github.com/casbin/govaluate"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"jCasbin"}),(0,s.jsx)(a.td,{children:"Java"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/killme2008/aviatorscript",children:"https://github.com/killme2008/aviatorscript"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Node-Casbin"}),(0,s.jsx)(a.td,{children:"Node.js"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/donmccurdy/expression-eval",children:"https://github.com/donmccurdy/expression-eval"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"PHP-Casbin"}),(0,s.jsx)(a.td,{children:"PHP"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/symfony/expression-language",children:"https://github.com/symfony/expression-language"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"PyCasbin"}),(0,s.jsx)(a.td,{children:"Python"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/danthedeckie/simpleeval",children:"https://github.com/danthedeckie/simpleeval"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Casbin.NET"}),(0,s.jsx)(a.td,{children:"C#"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/davideicardi/DynamicExpresso",children:"https://github.com/davideicardi/DynamicExpresso"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Casbin4D"}),(0,s.jsx)(a.td,{children:"Delphi"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/casbin4d/Casbin4D/tree/master/SourceCode/Common/Third%20Party/TExpressionParser",children:"https://github.com/casbin4d/Casbin4D/tree/master/SourceCode/Common/Third%20Party/TExpressionParser"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"casbin-rs"}),(0,s.jsx)(a.td,{children:"Rust"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/jonathandturner/rhai",children:"https://github.com/jonathandturner/rhai"})})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"casbin-cpp"}),(0,s.jsx)(a.td,{children:"C++"}),(0,s.jsx)(a.td,{children:(0,s.jsx)(a.a,{href:"https://github.com/ArashPartow/exprtk",children:"https://github.com/ArashPartow/exprtk"})})]})]})]}),"\n",(0,s.jsx)(a.admonition,{type:"note",children:(0,s.jsxs)(a.p,{children:["Jika anda menghadapi masalah prestasi dengan Casbin, ia mungkin disebabkan oleh kekurangan kecekapan penilaian ungkapan. Anda boleh menangani isu ini kepada Casbin atau penilaian ungkapan terus untuk mendapatkan nasihat tentang mempercepatkan prestasi. Untuk maklumat lanjut, sila rujuk bahagian ",(0,s.jsx)(a.a,{href:"/docs/benchmark",children:"Penanda Aras"}),"."]})})]})}function h(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}function p(e,a){throw new Error("Expected "+(a?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453(e,a,n){n.d(a,{R:()=>r,x:()=>d});var i=n(6540);const s={},t=i.createContext(s);function r(e){const a=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(t.Provider,{value:a},e.children)}}}]);