"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[246],{3905:(a,n,e)=>{e.d(n,{Zo:()=>u,kt:()=>m});var t=e(7294);function i(a,n,e){return n in a?Object.defineProperty(a,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[n]=e,a}function r(a,n){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable}))),e.push.apply(e,t)}return e}function s(a){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?r(Object(e),!0).forEach((function(n){i(a,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))}))}return a}function l(a,n){if(null==a)return{};var e,t,i=function(a,n){if(null==a)return{};var e,t,i={},r=Object.keys(a);for(t=0;t<r.length;t++)e=r[t],n.indexOf(e)>=0||(i[e]=a[e]);return i}(a,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);for(t=0;t<r.length;t++)e=r[t],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(a,e)&&(i[e]=a[e])}return i}var o=t.createContext({}),d=function(a){var n=t.useContext(o),e=n;return a&&(e="function"==typeof a?a(n):s(s({},n),a)),e},u=function(a){var n=d(a.components);return t.createElement(o.Provider,{value:n},a.children)},k={inlineCode:"code",wrapper:function(a){var n=a.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(a,n){var e=a.components,i=a.mdxType,r=a.originalType,o=a.parentName,u=l(a,["components","mdxType","originalType","parentName"]),p=d(e),m=i,c=p["".concat(o,".").concat(m)]||p[m]||k[m]||r;return e?t.createElement(c,s(s({ref:n},u),{},{components:e})):t.createElement(c,s({ref:n},u))}));function m(a,n){var e=arguments,i=n&&n.mdxType;if("string"==typeof a||i){var r=e.length,s=new Array(r);s[0]=p;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=a,l.mdxType="string"==typeof a?a:i,s[1]=l;for(var d=2;d<r;d++)s[d]=e[d];return t.createElement.apply(null,s)}return t.createElement.apply(null,e)}p.displayName="MDXCreateElement"},1323:(a,n,e)=>{e.r(n),e.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>k,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var t=e(7462),i=(e(7294),e(3905));const r={id:"frontend",title:"Frontend Usage",description:"Casbin.js adalah addon Casbin yang memudahkan pengurusan kawalan akses anda dalam aplikasi frontend.",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},s=void 0,l={unversionedId:"frontend",id:"frontend",title:"Frontend Usage",description:"Casbin.js adalah addon Casbin yang memudahkan pengurusan kawalan akses anda dalam aplikasi frontend.",source:"@site/i18n/ms/docusaurus-plugin-content-docs/current/FrontendUsage.mdx",sourceDirName:".",slug:"/frontend",permalink:"/ms/docs/frontend",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/FrontendUsage.mdx",tags:[],version:"current",frontMatter:{id:"frontend",title:"Frontend Usage",description:"Casbin.js adalah addon Casbin yang memudahkan pengurusan kawalan akses anda dalam aplikasi frontend.",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Log & Error Handling",permalink:"/ms/docs/log-error"},next:{title:"Editor",permalink:"/ms/docs/category/editor"}},o={},d=[{value:"Pemasangan",id:"pemasangan",level:2},{value:"Middleware Frontend",id:"middleware-frontend",level:2},{value:"Mulakan dengan Cepat",id:"mulakan-dengan-cepat",level:2},{value:"Objek Kebenaran",id:"objek-kebenaran",level:3},{value:"Penggunaan Lanjutan",id:"penggunaan-lanjutan",level:2},{value:"Senarai API",id:"senarai-api",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:3},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:3},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:3},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:3},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:3},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:3},{value:"Mengapa Casbin.js",id:"mengapa-casbinjs",level:2}],u={toc:d};function k(a){let{components:n,...e}=a;return(0,i.kt)("wrapper",(0,t.Z)({},u,e,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js"},"Casbin.js")," adalah addon Casbin yang memudahkan pengurusan kawalan akses anda dalam aplikasi frontend."),(0,i.kt)("h2",{id:"pemasangan"},"Pemasangan"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install casbin.js\nnpm install casbin\n")),(0,i.kt)("p",null,"atau"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add casbin.js\n")),(0,i.kt)("h2",{id:"middleware-frontend"},"Middleware Frontend"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Middleware"),(0,i.kt)("th",{parentName:"tr",align:null},"Jenis"),(0,i.kt)("th",{parentName:"tr",align:null},"Pengarang"),(0,i.kt)("th",{parentName:"tr",align:null},"Penerangan"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/react-authz"},"react-authz")),(0,i.kt)("td",{parentName:"tr",align:null},"React"),(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Pembungkus React untuk Casbin.js")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/daobeng/rbac-react"},"rbac-react")),(0,i.kt)("td",{parentName:"tr",align:null},"React"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/daobeng"},"@daobeng")),(0,i.kt)("td",{parentName:"tr",align:null},"Kawalan Akses Berbasis Peranan dalam React menggunakan HOCs, CASL dan Casbin.js")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/vue-authz"},"vue-authz")),(0,i.kt)("td",{parentName:"tr",align:null},"Vue"),(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Pembungkus Vue untuk Casbin.js")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/angular-authz"},"angular-authz")),(0,i.kt)("td",{parentName:"tr",align:null},"Angular"),(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Pembungkus Angular untuk Casbin.js")))),(0,i.kt)("h2",{id:"mulakan-dengan-cepat"},"Mulakan dengan Cepat"),(0,i.kt)("p",null,"Anda boleh menggunakan mod ",(0,i.kt)("inlineCode",{parentName:"p"},"manual")," dalam aplikasi frontend anda dan menetapkan kebenaran bila-bila masa yang anda inginkan."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'const casbinjs = require("casbin.js");\n// Set the user\'s permission:\n// He/She can read `data1` and `data2` objects and can write `data1` object\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Run casbin.js in manual mode, which requires you to set the permission manually.\nconst authorizer = new casbinjs.Authorizer("manual");\n')),(0,i.kt)("p",null,"Sekarang kita mempunyai pengarah, ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizer"),". Kita boleh mendapatkan peraturan kebenaran daripadanya dengan menggunakan API ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizer.can()")," dan ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizer.cannot()"),". Nilai pulangan dari kedua-dua API ini adalah Janji JavaScript (",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises"},"butiran di sini"),"), jadi kita harus menggunakan kaedah ",(0,i.kt)("inlineCode",{parentName:"p"},"then()")," pada nilai pulangan seperti ini:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.can("write", "data1");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you can write data1");\n    } else {\n        console.log("you cannot write data1");\n    }\n});\n// output: you can write data1\n')),(0,i.kt)("p",null,"API ",(0,i.kt)("inlineCode",{parentName:"p"},"cannot()")," digunakan dengan cara yang sama:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.cannot("read", "data2");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you cannot read data2");\n    } else {\n        console.log("you can read data2");\n    }\n});\n// output: you can read data2\n')),(0,i.kt)("p",null,"Dalam kod di atas, pemboleh ubah ",(0,i.kt)("inlineCode",{parentName:"p"},"success")," dalam parameter bermaksud permintaan mendapat hasil tanpa membuang ralat dan tidak bermaksud bahawa peraturan kebenaran adalah ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),". Pemboleh ubah ",(0,i.kt)("inlineCode",{parentName:"p"},"failed")," juga tidak berkaitan dengan peraturan kebenaran. Ia hanya masuk akal apabila sesuatu berlaku salah dalam proses permintaan."),(0,i.kt)("p",null,"Anda boleh merujuk kepada ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin-js/examples"},"contoh React")," kami untuk melihat penggunaan praktikal Casbin.js."),(0,i.kt)("h3",{id:"objek-kebenaran"},"Objek Kebenaran"),(0,i.kt)("p",null,"Casbin.js akan menerima objek JSON untuk mengendalikan kebenaran yang sepadan bagi pengunjung. Contohnya:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n')),(0,i.kt)("p",null,"Objek kebenaran di atas menunjukkan bahawa pengunjung boleh ",(0,i.kt)("inlineCode",{parentName:"p"},"membaca")," objek ",(0,i.kt)("inlineCode",{parentName:"p"},"data1")," dan ",(0,i.kt)("inlineCode",{parentName:"p"},"data2"),", manakala mereka hanya boleh ",(0,i.kt)("inlineCode",{parentName:"p"},"menulis")," objek ",(0,i.kt)("inlineCode",{parentName:"p"},"data1"),"."),(0,i.kt)("h2",{id:"penggunaan-lanjutan"},"Penggunaan Lanjutan"),(0,i.kt)("p",null,"Casbin.js menyediakan penyelesaian yang sempurna untuk mengintegrasikan pengurusan kawalan akses frontend anda dengan perkhidmatan Casbin backend anda."),(0,i.kt)("p",null,"Gunakan mod ",(0,i.kt)("inlineCode",{parentName:"p"},"auto")," dan tentukan titik akhir anda semasa memulakan ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorizer")," Casbin.js, ia akan secara automatik menyegerakkan kebenaran dan mengendalikan status frontend."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const casbinjs = require('casbin.js');\n\n// Set your backend Casbin service URL\nconst authorizer = new casbinjs.Authorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// Set your visitor.\n// Casbin.js will automatically sync the permission with your backend Casbin service.\nauthorizer.setUser(\"Tom\");\n\n// Evaluate the permission\nresult = authorizer.can(\"read\", \"data1\");\nresult.then((success, failed) => {\n    if (success) {\n        // Some frontend procedure ...\n    }\n});\n")),(0,i.kt)("p",null,"Sesuai dengan itu, anda perlu mendedahkan antara muka (contohnya, RestAPI) untuk menghasilkan objek kebenaran dan menyebarkannya ke frontend. Dalam pengawal API anda, panggil ",(0,i.kt)("inlineCode",{parentName:"p"},"CasbinJsGetUserPermission")," untuk membina objek kebenaran. Berikut adalah contoh dalam Beego:"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Pelayan titik akhir anda harus mengembalikan sesuatu seperti"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // Get the visitor from the GET parameters. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the frontend.\n    c.ServeJSON()\n}\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Pada masa ini, API ",(0,i.kt)("inlineCode",{parentName:"p"},"CasbinJsGetPermissionForUser")," hanya disokong dalam Go Casbin dan Node-Casbin. Jika anda ingin API ini disokong dalam bahasa lain, sila ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js/issues"},"naikkan isu")," atau tinggalkan komen di bawah.")),(0,i.kt)("h2",{id:"senarai-api"},"Senarai API"),(0,i.kt)("h3",{id:"setpermissionpermission-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"setPermission(permission: string)")),(0,i.kt)("p",null,"Tetapkan objek kebenaran. Selalu digunakan dalam mod ",(0,i.kt)("inlineCode",{parentName:"p"},"manual"),"."),(0,i.kt)("h3",{id:"setuseruser-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"setUser(user: string)")),(0,i.kt)("p",null,"Tetapkan identiti pengunjung dan kemas kini kebenaran. Selalu digunakan dalam mod ",(0,i.kt)("inlineCode",{parentName:"p"},"auto"),"."),(0,i.kt)("h3",{id:"canaction-string-object-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"can(action: string, object: string)")),(0,i.kt)("p",null,"Periksa jika pengguna boleh melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,i.kt)("h3",{id:"cannotaction-string-object-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"cannot(action: string, object: string)")),(0,i.kt)("p",null,"Periksa jika pengguna ",(0,i.kt)("strong",{parentName:"p"},"tidak boleh")," melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,i.kt)("h3",{id:"canallaction-string-objects-arrayobject"},(0,i.kt)("inlineCode",{parentName:"h3"},"canAll(action: string, objects: Array<object>)")),(0,i.kt)("p",null,"Periksa jika pengguna boleh melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("strong",{parentName:"p"},"semua")," objek dalam ",(0,i.kt)("inlineCode",{parentName:"p"},"objects"),"."),(0,i.kt)("h3",{id:"cananyaction-string-objects-arrayobject"},(0,i.kt)("inlineCode",{parentName:"h3"},"canAny(action: string, objects: Array<object>)")),(0,i.kt)("p",null,"Periksa jika pengguna boleh melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("strong",{parentName:"p"},"sebarang satu")," daripada ",(0,i.kt)("inlineCode",{parentName:"p"},"objects"),"."),(0,i.kt)("h2",{id:"mengapa-casbinjs"},"Mengapa Casbin.js"),(0,i.kt)("p",null,"Orang ramai mungkin tertanya-tanya mengenai perbezaan antara Node-Casbin dan Casbin.js. Secara ringkasnya, Node-Casbin adalah teras Casbin yang dilaksanakan dalam persekitaran NodeJS, dan biasanya digunakan sebagai alat pengurusan kawalan akses di hujung pelayan. Casbin.js adalah perpustakaan frontend yang membantu anda menggunakan Casbin untuk membenarkan pengguna halaman web anda di sisi klien."),(0,i.kt)("p",null,"Biasanya, tidak sesuai untuk membina secara langsung perkhidmatan Casbin dan melakukan tugas pemberian kuasa/penguatkuasaan dalam aplikasi web frontend kerana masalah-masalah berikut:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Apabila seseorang menghidupkan klien, enforcer akan diinisialisasi, dan ia akan menarik semua polisi dari lapisan tahanan backend. Kepadatan tinggi boleh membawa tekanan yang kuat ke atas pangkalan data dan menelan kos banyak lewatani rangkaian."),(0,i.kt)("li",{parentName:"ol"},"Memuatkan semua polisi ke sisi klien boleh membawa risiko keselamatan."),(0,i.kt)("li",{parentName:"ol"},"Sukar untuk memisahkan klien dan pelayan serta memudahkan pembangunan yang lincah.")),(0,i.kt)("p",null,"Kita memerlukan alat yang memudahkan proses penggunaan Casbin di frontend. Sebenarnya, teras Casbin.js adalah manipulasi kebenaran pengguna semasa di sisi klien. Seperti yang anda sebutkan, Casbin.js melakukan pengambilan dari titik akhir yang ditentukan. Prosedur ini akan menyegerakan kebenaran pengguna dengan perkhidmatan backend Casbin. Selepas mempunyai data kebenaran, pembangun boleh menggunakan antara muka Casbin.js untuk menguruskan tingkah laku pengguna di bahagian frontend."),(0,i.kt)("p",null,"Casbin.js mengelakkan dua masalah yang dinyatakan di atas: Perkhidmatan Casbin tidak akan lagi ditarik naik berulang kali, dan saiz mesej yang dihantar antara pelanggan dan pelayan dikurangkan. Kami juga mengelakkan menyimpan semua polisi di frontend. Pengguna hanya boleh mengakses kebenaran mereka sendiri, tetapi tidak mempunyai pengetahuan tentang model kawalan akses dan kebenaran pengguna lain. Selain itu, Casbin.js juga boleh memisahkan pelanggan dan pelayan secara cekap dalam pengurusan kebenaran."))}k.isMDXComponent=!0}}]);