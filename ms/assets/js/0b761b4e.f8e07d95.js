"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[4196],{3905:(a,e,n)=>{n.d(e,{Zo:()=>m,kt:()=>k});var t=n(7294);function r(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function i(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.push.apply(n,t)}return n}function o(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(a,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))}))}return a}function p(a,e){if(null==a)return{};var n,t,r=function(a,e){if(null==a)return{};var n,t,r={},i=Object.keys(a);for(t=0;t<i.length;t++)n=i[t],e.indexOf(n)>=0||(r[n]=a[n]);return r}(a,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(t=0;t<i.length;t++)n=i[t],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(a,n)&&(r[n]=a[n])}return r}var l=t.createContext({}),d=function(a){var e=t.useContext(l),n=e;return a&&(n="function"==typeof a?a(e):o(o({},e),a)),n},m=function(a){var e=d(a.components);return t.createElement(l.Provider,{value:e},a.children)},u={inlineCode:"code",wrapper:function(a){var e=a.children;return t.createElement(t.Fragment,{},e)}},c=t.forwardRef((function(a,e){var n=a.components,r=a.mdxType,i=a.originalType,l=a.parentName,m=p(a,["components","mdxType","originalType","parentName"]),c=d(n),k=r,s=c["".concat(l,".").concat(k)]||c[k]||u[k]||i;return n?t.createElement(s,o(o({ref:e},m),{},{components:n})):t.createElement(s,o({ref:e},m))}));function k(a,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof a||r){var i=n.length,o=new Array(i);o[0]=c;var p={};for(var l in e)hasOwnProperty.call(e,l)&&(p[l]=e[l]);p.originalType=a,p.mdxType="string"==typeof a?a:r,o[1]=p;for(var d=2;d<i;d++)o[d]=n[d];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8480:(a,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>s,frontMatter:()=>i,metadata:()=>p,toc:()=>d});var t=n(7462),r=(n(7294),n(3905));const i={id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC dengan Corak",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},o=void 0,p={unversionedId:"rbac-with-pattern",id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC dengan Corak",source:"@site/i18n/ms/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx",sourceDirName:".",slug:"/rbac-with-pattern",permalink:"/ms/docs/rbac-with-pattern",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx",tags:[],version:"current",frontMatter:{id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC dengan Corak",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"RBAC",permalink:"/ms/docs/rbac"},next:{title:"RBAC with Domains",permalink:"/ms/docs/rbac-with-domains"}},l={},d=[{value:"Mulakan dengan Cepat",id:"mulakan-dengan-cepat",level:2},{value:"Gunakan pemadanan corak dalam RBAC",id:"gunakan-pemadanan-corak-dalam-rbac",level:2}],m=a=>function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",e)},u=m("Tabs"),c=m("TabItem"),k={toc:d};function s(a){let{components:e,...i}=a;return(0,r.kt)("wrapper",(0,t.Z)({},k,i,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"mulakan-dengan-cepat"},"Mulakan dengan Cepat"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Gunakan corak dalam ",(0,r.kt)("inlineCode",{parentName:"p"},"g(_, _)"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Gunakan corak dengan domain."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Gunakan semua corak."),(0,r.kt)("p",{parentName:"li"},"Gabungkan penggunaan kedua-dua API."))),(0,r.kt)("p",null,"Seperti yang ditunjukkan di atas, setelah anda mencipta instance ",(0,r.kt)("inlineCode",{parentName:"p"},"enforcer"),", anda perlu mengaktifkan pencocokan corak melalui API ",(0,r.kt)("inlineCode",{parentName:"p"},"AddNamedMatchingFunc")," dan ",(0,r.kt)("inlineCode",{parentName:"p"},"AddNamedDomainMatchingFunc"),", yang menentukan bagaimana corak dicocokkan."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},'If you use the online editor, You can add a pattern matching function by clicking the "Add Role Matching" button in the lower left corner.\n',(0,r.kt)("img",{alt:"editor-tips",src:n(9523).Z,width:"690",height:"480"}))),(0,r.kt)("h2",{id:"gunakan-pemadanan-corak-dalam-rbac"},"Gunakan pemadanan corak dalam RBAC"),(0,r.kt)("p",null,"Kadang kala, anda mahu subjek, objek, atau domain/penyewa tertentu dengan corak tertentu diberi peranan secara automatik. Fungsi pemadanan corak dalam RBAC boleh membantu anda melakukan itu. Fungsi pemadanan corak berkongsi parameter dan nilai pulangan yang sama dengan fungsi penapis sebelumnya ",(0,r.kt)("a",{parentName:"p",href:"/docs/syntax-for-models#functions-in-matchers"},"matcher function"),"."),(0,r.kt)("p",null,"Fungsi pemadanan corak menyokong setiap parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"g"),"."),(0,r.kt)("p",null,"Kita tahu bahawa biasanya RBAC dinyatakan sebagai ",(0,r.kt)("inlineCode",{parentName:"p"},"g(r.sub, p.sub)")," dalam penapis. Kemudian kita boleh menggunakan polisi seperti:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n")),(0,r.kt)("p",null,"Jadi ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," boleh membaca semua buku termasuk ",(0,r.kt)("inlineCode",{parentName:"p"},"book 1")," dan ",(0,r.kt)("inlineCode",{parentName:"p"},"book 2"),". Tetapi mungkin terdapat beribu-ribu buku, dan sangat membosankan untuk menambah setiap buku ke dalam peranan buku (atau kumpulan) dengan satu peraturan ",(0,r.kt)("inlineCode",{parentName:"p"},"g"),"."),(0,r.kt)("p",null,"Tetapi dengan fungsi pencocokan pola, anda boleh menulis polisi dengan hanya satu baris:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"g, /book/:id, book_group\n")),(0,r.kt)("p",null,"Casbin akan secara automatik mencocokkan ",(0,r.kt)("inlineCode",{parentName:"p"},"/book/1")," dan ",(0,r.kt)("inlineCode",{parentName:"p"},"/book/2")," ke dalam pola ",(0,r.kt)("inlineCode",{parentName:"p"},"/book/:id")," untuk anda. Anda hanya perlu mendaftarkan fungsi tersebut dengan enforcer seperti:"),(0,r.kt)(u,{groupId:"langs",mdxType:"Tabs"},(0,r.kt)(c,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)(c,{value:"Node.js",label:"Node.js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n")))),(0,r.kt)("p",null,"Apabila menggunakan fungsi pencocokan pola dalam domain/penyewa, anda perlu mendaftarkan fungsi tersebut dengan enforcer dan model."),(0,r.kt)(u,{groupId:"langs",mdxType:"Tabs"},(0,r.kt)(c,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)(c,{value:"Node.js",label:"Node.js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n")))),(0,r.kt)("p",null,"Jika anda tidak memahami apa yang ",(0,r.kt)("inlineCode",{parentName:"p"},"g(r.sub, p.sub, r.dom)")," maksudkan, sila baca ",(0,r.kt)("a",{parentName:"p",href:"/docs/rbac-with-domains"},"rbac-with-domains"),". Secara ringkas, ",(0,r.kt)("inlineCode",{parentName:"p"},"g(r.sub, p.sub, r.dom)")," akan memeriksa sama ada pengguna ",(0,r.kt)("inlineCode",{parentName:"p"},"r.sub")," mempunyai peranan ",(0,r.kt)("inlineCode",{parentName:"p"},"p.sub")," dalam domain ",(0,r.kt)("inlineCode",{parentName:"p"},"r.dom"),". Jadi beginilah cara pencocokan pola berfungsi. Anda boleh melihat contoh lengkap ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307"},"di sini"),"."),(0,r.kt)("p",null,"Selain daripada sintaks pencocokan pola di atas, kita juga boleh menggunakan pola domain tulen."),(0,r.kt)("p",null,"Sebagai contoh, jika kita ingin ",(0,r.kt)("inlineCode",{parentName:"p"},"sub")," mempunyai akses dalam domain yang berbeza, ",(0,r.kt)("inlineCode",{parentName:"p"},"domain1")," dan ",(0,r.kt)("inlineCode",{parentName:"p"},"domain2"),", kita boleh menggunakan corak domain tulen:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n")),(0,r.kt)("p",null,"Dalam contoh ini, kita ingin ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," membaca dan menulis ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," dalam domain1 dan domain2. Pencocokan corak ",(0,r.kt)("inlineCode",{parentName:"p"},"*")," dalam ",(0,r.kt)("inlineCode",{parentName:"p"},"g")," membolehkan ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," mempunyai akses ke dua domain."),(0,r.kt)("p",null,"Dengan menggunakan pencocokan corak, terutama dalam senario yang lebih kompleks dan mempunyai banyak domain atau objek untuk dipertimbangkan, kita boleh melaksanakan ",(0,r.kt)("inlineCode",{parentName:"p"},"policy_definition")," dengan cara yang lebih elegan dan efektif."))}s.isMDXComponent=!0},9523:(a,e,n)=>{n.d(e,{Z:()=>t});const t=n.p+"assets/images/editor-tips-2c4bf3155a73f079c976e5ad118d5518.png"}}]);