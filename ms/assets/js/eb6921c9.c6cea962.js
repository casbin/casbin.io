"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[6430],{2665(e,a,n){n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>u,default:()=>o,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"k8s","title":"Authorization of Kubernetes","description":"Kubernetes (k8s) RBAC & ABAC pengantara kebenaran berdasarkan Casbin","source":"@site/i18n/ms/docusaurus-plugin-content-docs/current/K8sAuthz.mdx","sourceDirName":".","slug":"/k8s","permalink":"/ms/docs/k8s","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/K8sAuthz.mdx","tags":[],"version":"current","frontMatter":{"id":"k8s","title":"Authorization of Kubernetes","description":"Kubernetes (k8s) RBAC & ABAC pengantara kebenaran berdasarkan Casbin","keywords":["Kubernetes authorization","Kubernetes RBAC","Kubernetes ABAC","K8s-authz"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Performance Optimization","permalink":"/ms/docs/performance"},"next":{"title":"Admission Webhook for K8s","permalink":"/ms/docs/k8s-gatekeeper"}}');var t=n(4848),i=n(8453);const r={id:"k8s",title:"Authorization of Kubernetes",description:"Kubernetes (k8s) RBAC & ABAC pengantara kebenaran berdasarkan Casbin",keywords:["Kubernetes authorization","Kubernetes RBAC","Kubernetes ABAC","K8s-authz"],authors:["hsluoyz"]},u=void 0,l={},d=[{value:"Keperluan",id:"keperluan",level:2},{value:"Penggunaan",id:"penggunaan",level:2}];function c(e){const a={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz",children:"K8s-authz"})," adalah pengantara kebenaran Kubernetes (k8s) berdasarkan Casbin yang menggunakan RBAC (Kawalan Akses Berdasarkan Peranan) dan ABAC (Kawalan Akses Berdasarkan Atribut) untuk penguatkuasaan dasar. Pengantara ini bersepadu dengan webhook kebenaran pengesahan K8s untuk mengesahkan dasar yang ditakrifkan oleh Casbin untuk setiap permintaan yang dibuat kepada sumber K8s. Pengawal kebenaran tersuai didaftarkan dengan Kubernetes menggunakan ",(0,t.jsx)(a.code,{children:"ValidatingAdmissionWebhook"})," untuk melakukan pengesahan pada objek permintaan yang dihantar oleh pelayan API dan memberikan respons yang menunjukkan sama ada permintaan itu harus dibenarkan atau ditolak."]}),"\n",(0,t.jsxs)(a.p,{children:["Untuk menentukan bila hendak menghantar permintaan masuk ke pengawal kebenaran, webhook pengesahan telah dilaksanakan. Webhook ini memproksi permintaan untuk sebarang jenis sumber K8s atau sub-sumber dan melakukan pengesahan dasar. Pengguna hanya dibenarkan melakukan operasi pada sumber ini jika mereka diberi kuasa oleh penguat Casbin. ",(0,t.jsx)(a.a,{href:"/docs/get-started#new-a-casbin-enforcer",children:"Penguat"})," menyemak peranan pengguna seperti yang ditakrifkan dalam dasar. Kluster K8s adalah sasaran penempatan untuk middleware ini."]}),"\n",(0,t.jsx)(a.h2,{id:"keperluan",children:"Keperluan"}),"\n",(0,t.jsx)(a.p,{children:"Sebelum meneruskan, pastikan anda mempunyai yang berikut:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:["Kluster Kubernetes yang sedang berjalan. Anda boleh menyediakan kluster tempatan menggunakan Docker atau menyediakan ekosistem Kubernetes yang lengkap pada pelayan anda. Untuk arahan terperinci, rujuk ",(0,t.jsx)(a.a,{href:"https://kubernetes.io/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/",children:"panduan"})," ini untuk menyediakan kluster Kubernetes tempatan pada Windows atau ",(0,t.jsx)(a.a,{href:"https://www.digitalocean.com/community/tutorials/how-to-create-a-kubernetes-cluster-using-kubeadm-on-ubuntu-18-04",children:"panduan"})," ini untuk menyediakan kluster pada Linux."]}),"\n",(0,t.jsxs)(a.li,{children:["Kubectl CLI. Arahan untuk memasang Kubectl pada Windows boleh didapati ",(0,t.jsx)(a.a,{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/",children:"di sini"}),", dan untuk Linux ",(0,t.jsx)(a.a,{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/",children:"di sini"}),"."]}),"\n",(0,t.jsx)(a.li,{children:"OpenSSL"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"penggunaan",children:"Penggunaan"}),"\n",(0,t.jsx)(a.p,{children:"Ikuti langkah-langkah ini untuk menggunakan K8s-authz:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Hasilkan sijil dan kunci untuk setiap pengguna menggunakan OpenSSL. Jalankan skrip di bawah:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"./gen_cert.sh\n"})}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Bina imej Docker dari ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/master/Dockerfile",children:"Dockerfile"})," secara manual dengan menjalankan perintah berikut. Ingatlah untuk mengubah versi binaan dalam perintah dan dalam ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/718f58c46e3dbf79063b5b1c18348c2fee5de9e9/manifests/deployment.yaml#L18",children:"fail"})," penempatan sesuai."]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"docker build -t casbin/k8s_authz:0.1 .\n"})}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Tentukan polisi Casbin dalam fail ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/master/config/model.conf",children:"model.conf"})," dan ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/master/config/policy.csv",children:"policy.csv"}),". Untuk maklumat lanjut mengenai bagaimana polisi ini berfungsi, rujuk ",(0,t.jsx)(a.a,{href:"/docs/how-it-works",children:"dokumentasi"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Sebelum menerapkan, anda boleh mengubah port dalam fail ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/master/main.go",children:"main.go"}),", serta dalam konfigurasi webhook pengesahan ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/master/manifests/deployment.yaml",children:"fail"}),", berdasarkan keperluan khusus anda."]}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Terapkan pengawal pengesahan dan webhook pada kelompok Kubernetes dengan menjalankan perintah berikut:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"kubectl apply -f deployment.yaml\n"})}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Untuk pelayan pengeluaran, disarankan untuk membuat ",(0,t.jsx)(a.code,{children:"secret"})," Kubernetes untuk mengamankan sijil:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"kubectl create secret generic casbin -n default \\\n  --from-file=key.pem=certs/casbin-key.pem \\\n  --from-file=cert.pem=certs/casbin-crt.pem\n"})}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["After completing the above steps, you need to update the certificate directory in ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/3560551427c0431a9d4594ad1206f084ede37c49/main.go#L26",children:"main.go"})," and the ",(0,t.jsx)(a.a,{href:"https://github.com/casbin/k8s-authz/blob/3560551427c0431a9d4594ad1206f084ede37c49/manifests/deployment.yaml#L22",children:"manifests"})," with the directory of the created ",(0,t.jsx)(a.code,{children:"secret"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"Sekarang, pelayan ini sepatutnya sudah berjalan, bersedia untuk mengesahkan permintaan yang dibuat kepada sumber K8s dan menguatkuasakan dasar mengikut situasi."})]})}function o(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,a,n){n.d(a,{R:()=>r,x:()=>u});var s=n(6540);const t={},i=s.createContext(t);function r(e){const a=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function u(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:a},e.children)}}}]);