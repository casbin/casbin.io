"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[7796],{4861(n,e,a){a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"envoy","title":"Authorization of Service Mesh through Envoy","description":"Penggunaan Perkhidmatan Mesh melalui Envoy","source":"@site/i18n/ms/docusaurus-plugin-content-docs/current/EnvoyAuthz.mdx","sourceDirName":".","slug":"/envoy","permalink":"/ms/docs/envoy","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/EnvoyAuthz.mdx","tags":[],"version":"current","frontMatter":{"id":"envoy","title":"Authorization of Service Mesh through Envoy","description":"Penggunaan Perkhidmatan Mesh melalui Envoy","keywords":["Envoy","Envoy-authz","Istio"],"authors":["ashish493"]},"sidebar":"docs","previous":{"title":"Admission Webhook for K8s","permalink":"/ms/docs/k8s-gatekeeper"},"next":{"title":"Management","permalink":"/ms/docs/category/management"}}');var s=a(4848),r=a(8453);const t={id:"envoy",title:"Authorization of Service Mesh through Envoy",description:"Penggunaan Perkhidmatan Mesh melalui Envoy",keywords:["Envoy","Envoy-authz","Istio"],authors:["ashish493"]},o=void 0,l={},d=[{value:"Keperluan",id:"keperluan",level:2},{value:"Kerja Middleware",id:"kerja-middleware",level:2},{value:"Penggunaan",id:"penggunaan",level:2},{value:"Mengintegrasikan dengan Istio",id:"mengintegrasikan-dengan-istio",level:2}];function h(n){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.a,{href:"https://github.com/casbin/envoy-authz",children:"Envoy-authz"})," adalah middleware untuk Envoy yang melakukan penggunaan luar RBAC & ABAC melalui casbin. Middleware ini menggunakan ",(0,s.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/security/ext_authz_filter.html",children:"API penggunaan luar Envoy"})," melalui pelayan gRPC. Proksi ini boleh dilaksanakan pada sebarang jenis perkhidmatan mesh berasaskan Envoy, seperti Istio."]}),"\n",(0,s.jsx)(e.h2,{id:"keperluan",children:"Keperluan"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Envoi 1.17+"}),"\n",(0,s.jsx)(e.li,{children:"Istio atau sebarang jenis mesh perkhidmatan lain"}),"\n",(0,s.jsx)(e.li,{children:"kebergantungan grpc"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Kebergantungan dikendalikan menggunakan ",(0,s.jsx)(e.code,{children:"go.mod"}),"."]}),"\n",(0,s.jsx)(e.h2,{id:"kerja-middleware",children:"Kerja Middleware"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Pelanggan membuat permintaan HTTP."}),"\n",(0,s.jsx)(e.li,{children:"Proksi Envoy menghantar permintaan ke pelayan gRPC."}),"\n",(0,s.jsx)(e.li,{children:"Pelayan gRPC membenarkan permintaan berdasarkan dasar casbin."}),"\n",(0,s.jsx)(e.li,{children:"Jika dibenarkan, permintaan diteruskan; jika tidak, ia ditolak."}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Pelayan gRPC adalah berdasarkan protokol penampan dari ",(0,s.jsx)(e.a,{href:"https://github.com/envoyproxy/envoy/blob/master/api/envoy/service/auth/v2alpha/external_auth.proto",children:"external_auth.proto"})," dalam Envoy."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-protobuf",children:"// A generic interface for performing authorization checks on incoming\n// requests to a networked service.\nservice Authorization {\n  // Performs an authorization check based on the attributes associated with the\n  // incoming request and returns a status of `OK` or not `OK`.\n  rpc Check(v2.CheckRequest) returns (v2.CheckResponse);\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Dari fail protokol di atas, kita perlu menggunakan perkhidmatan ",(0,s.jsx)(e.code,{children:"Check()"})," di pelayan pengesahan."]}),"\n",(0,s.jsx)(e.h2,{id:"penggunaan",children:"Penggunaan"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Tentukan polisi Casbin dalam fail konfigurasi mengikut panduan ini ",(0,s.jsx)(e.a,{href:"/docs/how-it-works",children:"guide"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["Anda boleh mengesahkan/menguji polisi anda menggunakan ",(0,s.jsx)(e.a,{href:"/editor",children:"casbin-editor"})," dalam talian."]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Mulakan pelayan pengesahan dengan menjalankan:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"go build .\n./authz\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Muatkan konfigurasi Envoy:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"envoy -c authz.yaml -l info\n"})}),"\n",(0,s.jsx)(e.p,{children:"Setelah Envoy bermula, ia akan menahan permintaan untuk proses pengesahan."}),"\n",(0,s.jsx)(e.h2,{id:"mengintegrasikan-dengan-istio",children:"Mengintegrasikan dengan Istio"}),"\n",(0,s.jsxs)(e.p,{children:["Untuk membuat middleware ini berfungsi, anda perlu menghantar tajuk khas yang mengandungi nama pengguna dalam token JWT atau tajuk. Anda boleh merujuk kepada ",(0,s.jsx)(e.a,{href:"https://istio.io/v1.4/docs/tasks/policy-enforcement/control-headers/",children:"dokumentasi rasmi Istio"})," untuk maklumat lanjut mengenai pengubahsuaian ",(0,s.jsx)(e.code,{children:"Request Headers"}),"."]})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},8453(n,e,a){a.d(e,{R:()=>t,x:()=>o});var i=a(6540);const s={},r=i.createContext(s);function t(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);