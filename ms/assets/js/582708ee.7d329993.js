"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[2023],{921(a,e,n){n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"priority-model","title":"Priority Model","description":"Model Keutamaan Casbin untuk menguruskan polisi dengan keutamaan yang berbeza","source":"@site/i18n/ms/docusaurus-plugin-content-docs/current/PriorityModel.mdx","sourceDirName":".","slug":"/priority-model","permalink":"/ms/docs/priority-model","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx","tags":[],"version":"current","frontMatter":{"id":"priority-model","title":"Priority Model","description":"Model Keutamaan Casbin untuk menguruskan polisi dengan keutamaan yang berbeza","keywords":["priority model"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"OrBAC","permalink":"/ms/docs/orbac"},"next":{"title":"Usage Control (UCON)","permalink":"/ms/docs/ucon"}}');var t=n(4848),r=n(8453);const o={id:"priority-model",title:"Priority Model",description:"Model Keutamaan Casbin untuk menguruskan polisi dengan keutamaan yang berbeza",keywords:["priority model"],authors:["hsluoyz"]},s=void 0,d={},l=[{value:"Muat Polisi dengan Keutamaan Tersirat",id:"muat-polisi-dengan-keutamaan-tersirat",level:2},{value:"Muat Polisi dengan Keutamaan Eksplisit",id:"muat-polisi-dengan-keutamaan-eksplisit",level:2},{value:"Muat Polisi dengan Keutamaan Berdasarkan Peranan dan Hierarki Pengguna",id:"muat-polisi-dengan-keutamaan-berdasarkan-peranan-dan-hierarki-pengguna",level:2}];function c(a){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...a.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"Casbin menyokong memuatkan polisi dengan keutamaan."}),"\n",(0,t.jsx)(e.h2,{id:"muat-polisi-dengan-keutamaan-tersirat",children:"Muat Polisi dengan Keutamaan Tersirat"}),"\n",(0,t.jsx)(e.p,{children:"Ia sangat mudah: susunan menentukan keutamaan; polisi yang muncul lebih awal mempunyai keutamaan yang lebih tinggi."}),"\n",(0,t.jsx)(e.p,{children:"model.conf:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ini",children:"[policy_effect]\ne = priority(p.eft) || deny\n"})}),"\n",(0,t.jsx)(e.h2,{id:"muat-polisi-dengan-keutamaan-eksplisit",children:"Muat Polisi dengan Keutamaan Eksplisit"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsxs)(e.p,{children:["Lihat juga: ",(0,t.jsx)(e.a,{href:"https://github.com/casbin/casbin/issues/550",children:"casbin#550"})]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Nilai keutamaan yang lebih kecil menunjukkan keutamaan yang lebih tinggi. Jika terdapat watak bukan angka dalam keutamaan, ia akan diletakkan terakhir bukannya membuang ralat."}),"\n",(0,t.jsxs)(e.admonition,{title:"Konvensyen nama token",type:"info",children:[(0,t.jsxs)(e.p,{children:['Nama token keutamaan yang biasa digunakan dalam definisi polisi ialah "priority". Untuk menggunakan yang disesuaikan, anda perlu memanggil ',(0,t.jsx)(e.code,{children:"e.SetFieldIndex()"})," dan memuat semula polisi (lihat contoh lengkap di ",(0,t.jsx)(e.a,{href:"https://github.com/casbin/casbin/pull/1044",children:"TestCustomizedFieldIndex"}),")."]}),(0,t.jsx)(e.p,{children:"model.conf:"}),(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ini",children:"[policy_definition]\np = customized_priority, sub, obj, act, eft\n"})}),(0,t.jsx)(e.p,{children:"Contoh kod Golang:"}),(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'})})]}),"\n",(0,t.jsxs)(e.p,{children:["Pada masa ini, keutamaan eksplisit hanya menyokong ",(0,t.jsx)(e.code,{children:"AddPolicy"})," & ",(0,t.jsx)(e.code,{children:"AddPolicies"}),". Jika ",(0,t.jsx)(e.code,{children:"UpdatePolicy"})," telah dipanggil, anda tidak sepatutnya mengubah atribut keutamaan."]}),"\n",(0,t.jsx)(e.p,{children:"model.conf:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,t.jsx)(e.p,{children:"policy.csv"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csv",children:"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n"})}),"\n",(0,t.jsx)(e.p,{children:"permintaan:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csv",children:"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority \n"})}),"\n",(0,t.jsx)(e.h2,{id:"muat-polisi-dengan-keutamaan-berdasarkan-peranan-dan-hierarki-pengguna",children:"Muat Polisi dengan Keutamaan Berdasarkan Peranan dan Hierarki Pengguna"}),"\n",(0,t.jsxs)(e.p,{children:["Struktur yang diwarisi bagi peranan dan pengguna hanya boleh berupa pelbagai pokok, bukan graf. Jika seorang pengguna mempunyai pelbagai peranan, anda perlu memastikan pengguna itu mempunyai tahap yang sama dalam pokok yang berbeza. Jika dua peranan mempunyai tahap yang sama, polisi (yang berkaitan dengan peranan) yang muncul lebih awal mempunyai keutamaan yang lebih tinggi. Untuk butiran lanjut, lihat juga ",(0,t.jsx)(e.a,{href:"https://github.com/casbin/casbin/pull/833",children:"casbin#833"})," dan ",(0,t.jsx)(e.a,{href:"https://github.com/casbin/casbin/issues/831",children:"casbin#831"}),"."]}),"\n",(0,t.jsx)(e.p,{children:"model.conf:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n"})}),"\n",(0,t.jsx)(e.p,{children:"policy.csv"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csv",children:"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n"})}),"\n",(0,t.jsx)(e.p,{children:"Permintaan:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-csv",children:"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n"})}),"\n",(0,t.jsx)(e.p,{children:"Hierarki peranan kelihatan seperti ini:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n"})}),"\n",(0,t.jsx)(e.p,{children:"Keutamaan secara automatik kelihatan seperti ini:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n"})})]})}function u(a={}){const{wrapper:e}={...(0,r.R)(),...a.components};return e?(0,t.jsx)(e,{...a,children:(0,t.jsx)(c,{...a})}):c(a)}},8453(a,e,n){n.d(e,{R:()=>o,x:()=>s});var i=n(6540);const t={},r=i.createContext(t);function o(a){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function s(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(t):a.components||t:o(a.components),i.createElement(r.Provider,{value:e},a.children)}}}]);