"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[7187],{5380(e,a,o){o.r(a),o.d(a,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"performance","title":"Performance Optimization","description":"Otimiza\xe7\xe3o de desempenho do Casbin","source":"@site/i18n/pt/docusaurus-plugin-content-docs/current/Performance.mdx","sourceDirName":".","slug":"/performance","permalink":"/pt/docs/performance","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/Performance.mdx","tags":[],"version":"current","frontMatter":{"id":"performance","title":"Performance Optimization","description":"Otimiza\xe7\xe3o de desempenho do Casbin","keywords":["optimization"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Benchmarks","permalink":"/pt/docs/benchmark"},"next":{"title":"Authorization of Kubernetes","permalink":"/pt/docs/k8s"}}');var n=o(4848),i=o(8453);const t={id:"performance",title:"Performance Optimization",description:"Otimiza\xe7\xe3o de desempenho do Casbin",keywords:["optimization"],authors:["hsluoyz"]},r=void 0,d={},c=[{value:"Tr\xe1fego de Alto Volume",id:"tr\xe1fego-de-alto-volume",level:4},{value:"Alto N\xfamero de Regras de Pol\xedtica",id:"alto-n\xfamero-de-regras-de-pol\xedtica",level:4}];function m(e){const a={a:"a",admonition:"admonition",h4:"h4",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.p,{children:"Quando aplicado em um ambiente de produ\xe7\xe3o com milh\xf5es de usu\xe1rios ou permiss\xf5es, voc\xea pode encontrar uma degrada\xe7\xe3o de desempenho na aplica\xe7\xe3o do Casbin. H\xe1 geralmente duas causas:"}),"\n",(0,n.jsx)(a.h4,{id:"tr\xe1fego-de-alto-volume",children:"Tr\xe1fego de Alto Volume"}),"\n",(0,n.jsx)(a.p,{children:"O n\xfamero de solicita\xe7\xf5es recebidas por segundo \xe9 muito grande, por exemplo, 10.000 solicita\xe7\xf5es/s para uma \xfanica inst\xe2ncia do Casbin. Nesses casos, uma \xfanica inst\xe2ncia do Casbin geralmente n\xe3o \xe9 suficiente para lidar com todas as solicita\xe7\xf5es. H\xe1 duas poss\xedveis solu\xe7\xf5es:"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsxs)(a.p,{children:["Use multithreading para habilitar m\xfaltiplas inst\xe2ncias do Casbin, assim voc\xea pode utilizar totalmente todos os n\xfacleos da m\xe1quina. Para mais detalhes, veja: ",(0,n.jsx)(a.a,{href:"/docs/multi-threading",children:"Multi-threading"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsxs)(a.p,{children:["Implante inst\xe2ncias do Casbin em um cluster (m\xfaltiplas m\xe1quinas) e use Watcher para garantir que todas as inst\xe2ncias do Casbin estejam consistentes. Para mais detalhes, veja: ",(0,n.jsx)(a.a,{href:"/docs/watchers",children:"Watchers"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsx)(a.p,{children:"Voc\xea pode usar ambos os m\xe9todos acima ao mesmo tempo, por exemplo, implantar o Casbin em um cluster de 10 m\xe1quinas onde cada m\xe1quina tem 5 threads servindo simultaneamente as solicita\xe7\xf5es de aplica\xe7\xe3o do Casbin."})}),"\n",(0,n.jsx)(a.h4,{id:"alto-n\xfamero-de-regras-de-pol\xedtica",children:"Alto N\xfamero de Regras de Pol\xedtica"}),"\n",(0,n.jsx)(a.p,{children:"Em um ambiente de nuvem ou multi-tenant, podem ser necess\xe1rias milh\xf5es de regras de pol\xedtica. Cada chamada de aplica\xe7\xe3o ou at\xe9 mesmo o carregamento das regras de pol\xedtica no tempo inicial pode ser muito lento. Esses casos geralmente podem ser mitigados de v\xe1rias maneiras:"}),"\n",(0,n.jsxs)(a.ol,{children:["\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsx)(a.p,{children:"Verifique se o seu modelo ou pol\xedtica do Casbin est\xe1 bem projetado. Um modelo e pol\xedtica bem escritos abstraem a l\xf3gica duplicada para cada usu\xe1rio/tenant e reduzem o n\xfamero de regras para um n\xedvel muito pequeno (< 100). Por exemplo, voc\xea pode compartilhar algumas regras padr\xe3o entre todos os tenants e permitir que os usu\xe1rios personalizem suas regras mais tarde. Regras personalizadas podem substituir as regras padr\xe3o. Se voc\xea tiver mais perguntas, por favor, abra uma issue no GitHub no reposit\xf3rio do Casbin."}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsxs)(a.p,{children:["Fa\xe7a sharding para permitir que um executor do Casbin carregue apenas um pequeno conjunto de regras de pol\xedtica. Por exemplo, o executor_0 pode atender do tenant_0 ao tenant_99, enquanto o executor_1 pode atender do tenant_100 ao tenant_199. Para carregar apenas um subconjunto de todas as regras de pol\xedtica, veja: ",(0,n.jsx)(a.a,{href:"/docs/policy-subset-loading",children:"Policy Subset Loading"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(a.li,{children:["\n",(0,n.jsxs)(a.p,{children:["Conceda permiss\xf5es a pap\xe9is RBAC em vez de diretamente aos usu\xe1rios. A implementa\xe7\xe3o do RBAC do Casbin \xe9 feita por uma \xe1rvore de heran\xe7a de pap\xe9is (como um cache). Assim, dado um usu\xe1rio como Alice, o Casbin leva apenas tempo O(1) para consultar a \xe1rvore RBAC para a rela\xe7\xe3o usu\xe1rio-papel e realizar a aplica\xe7\xe3o. Se suas regras g n\xe3o mudam frequentemente, ent\xe3o a \xe1rvore RBAC n\xe3o precisar\xe1 ser constantemente atualizada. Veja os detalhes desta discuss\xe3o aqui: ",(0,n.jsx)(a.a,{href:"https://github.com/casbin/casbin/issues/681#issuecomment-763801583",children:"https://github.com/casbin/casbin/issues/681#issuecomment-763801583"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(a.admonition,{type:"note",children:(0,n.jsx)(a.p,{children:"Voc\xea pode tentar todos os m\xe9todos acima ao mesmo tempo."})})]})}function l(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},8453(e,a,o){o.d(a,{R:()=>t,x:()=>r});var s=o(6540);const n={},i=s.createContext(n);function t(e){const a=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function r(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),s.createElement(i.Provider,{value:a},e.children)}}}]);