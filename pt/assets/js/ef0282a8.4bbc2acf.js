"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[7354],{3905:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>u});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var d=n.createContext({}),p=function(e){var a=n.useContext(d),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},m=function(e){var a=p(e.components);return n.createElement(d.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},s=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),s=p(t),u=r,g=s["".concat(d,".").concat(u)]||s[u]||c[u]||o;return t?n.createElement(g,l(l({ref:a},m),{},{components:t})):n.createElement(g,l({ref:a},m))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=s;var i={};for(var d in a)hasOwnProperty.call(a,d)&&(i[d]=a[d]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}s.displayName="MDXCreateElement"},6932:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=t(7462),r=(t(7294),t(3905));const o={id:"policy-storage",title:"Policy Storage",description:"Armazenamento de Pol\xedtica",keywords:["policy storage"],authors:["hsluoyz"]},l=void 0,i={unversionedId:"policy-storage",id:"policy-storage",title:"Policy Storage",description:"Armazenamento de Pol\xedtica",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/PolicyStorage.mdx",sourceDirName:".",slug:"/policy-storage",permalink:"/pt/docs/policy-storage",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/PolicyStorage.mdx",tags:[],version:"current",frontMatter:{id:"policy-storage",title:"Policy Storage",description:"Armazenamento de Pol\xedtica",keywords:["policy storage"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Model Storage",permalink:"/pt/docs/model-storage"},next:{title:"Policy Subset Loading",permalink:"/pt/docs/policy-subset-loading"}},d={},p=[{value:"Carregando pol\xedtica de um arquivo .CSV",id:"carregando-pol\xedtica-de-um-arquivo-csv",level:2},{value:"API do Adaptador",id:"api-do-adaptador",level:2},{value:"Formato de Armazenamento de Banco de Dados",id:"formato-de-armazenamento-de-banco-de-dados",level:2},{value:"Detalhes do Adaptador",id:"detalhes-do-adaptador",level:2}],m={toc:p};function c(e){let{components:a,...t}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"No Casbin, o armazenamento de pol\xedtica \xe9 implementado como um ",(0,r.kt)("a",{parentName:"p",href:"/docs/adapters"},"adaptador"),"."),(0,r.kt)("h2",{id:"carregando-pol\xedtica-de-um-arquivo-csv"},"Carregando pol\xedtica de um arquivo .CSV"),(0,r.kt)("p",null,"Esta \xe9 a maneira mais comum de usar o Casbin. \xc9 f\xe1cil de entender para iniciantes e conveniente para compartilhar quando voc\xea pede ajuda \xe0 equipe do Casbin."),(0,r.kt)("p",null,"O conte\xfado do arquivo ",(0,r.kt)("inlineCode",{parentName:"p"},".CSV")," ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/examples/rbac_policy.csv"},"examples/rbac","_","policy.csv")," \xe9 o seguinte:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, data1, read\np, bob, data2, write\np, data2_admin, data2, read\np, data2_admin, data2, write\ng, alice, data2_admin\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Se o seu arquivo cont\xe9m v\xedrgulas, voc\xea deve envolv\xea-las em aspas duplas. Por exemplo:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-csv"},'p, alice, "data1,data2", read    --correct\np, alice, data1,data2, read        --incorrect (the whole phrase "data1,data2" should be wrapped in double quotes)\n')),(0,r.kt)("p",{parentName:"admonition"},"Se o seu arquivo cont\xe9m v\xedrgulas e aspas duplas, voc\xea deve envolver o campo em aspas duplas e duplicar quaisquer aspas duplas incorporadas."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-csv"},'p, alice, data, "r.act in (""get"", ""post"")"        --correct\np, alice, data, "r.act in ("get", "post")"            --incorrect (you should use "" to escape "")\n')),(0,r.kt)("p",{parentName:"admonition"},"Problema relacionado: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/886"},"casbin#886"))),(0,r.kt)("h2",{id:"api-do-adaptador"},"API do Adaptador"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"M\xe9todo"),(0,r.kt)("th",{parentName:"tr",align:null},"Tipo"),(0,r.kt)("th",{parentName:"tr",align:null},"Descri\xe7\xe3o"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"LoadPolicy()"),(0,r.kt)("td",{parentName:"tr",align:null},"b\xe1sico"),(0,r.kt)("td",{parentName:"tr",align:null},"Carregar todas as regras de pol\xedtica do armazenamento")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SavePolicy()"),(0,r.kt)("td",{parentName:"tr",align:null},"b\xe1sico"),(0,r.kt)("td",{parentName:"tr",align:null},"Salvar todas as regras de pol\xedtica no armazenamento")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"AddPolicy()"),(0,r.kt)("td",{parentName:"tr",align:null},"opcional"),(0,r.kt)("td",{parentName:"tr",align:null},"Adicionar uma regra de pol\xedtica ao armazenamento")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RemovePolicy()"),(0,r.kt)("td",{parentName:"tr",align:null},"opcional"),(0,r.kt)("td",{parentName:"tr",align:null},"Remover uma regra de pol\xedtica do armazenamento")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RemoveFilteredPolicy()"),(0,r.kt)("td",{parentName:"tr",align:null},"opcional"),(0,r.kt)("td",{parentName:"tr",align:null},"Remover regras de pol\xedtica que correspondam ao filtro do armazenamento")))),(0,r.kt)("h2",{id:"formato-de-armazenamento-de-banco-de-dados"},"Formato de Armazenamento de Banco de Dados"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Seu arquivo de pol\xedtica")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, data2_admin, data2, read\np, data2_admin, data2, write\ng, alice, admin\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Estrutura de banco de dados correspondente (como MySQL)")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"id"),(0,r.kt)("th",{parentName:"tr",align:null},"ptype"),(0,r.kt)("th",{parentName:"tr",align:null},"v0"),(0,r.kt)("th",{parentName:"tr",align:null},"v1"),(0,r.kt)("th",{parentName:"tr",align:null},"v2"),(0,r.kt)("th",{parentName:"tr",align:null},"v3"),(0,r.kt)("th",{parentName:"tr",align:null},"v4"),(0,r.kt)("th",{parentName:"tr",align:null},"v5"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"p"),(0,r.kt)("td",{parentName:"tr",align:null},"data2","_","admin"),(0,r.kt)("td",{parentName:"tr",align:null},"data2"),(0,r.kt)("td",{parentName:"tr",align:null},"read"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"p"),(0,r.kt)("td",{parentName:"tr",align:null},"data2","_","admin"),(0,r.kt)("td",{parentName:"tr",align:null},"data2"),(0,r.kt)("td",{parentName:"tr",align:null},"write"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"g"),(0,r.kt)("td",{parentName:"tr",align:null},"alice"),(0,r.kt)("td",{parentName:"tr",align:null},"admin"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Significado de cada coluna")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"id"),": A chave prim\xe1ria no banco de dados. N\xe3o existe como parte da ",(0,r.kt)("inlineCode",{parentName:"p"},"pol\xedtica casbin"),". A forma como \xe9 gerado depende do adaptador espec\xedfico.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"ptype"),": Corresponde a ",(0,r.kt)("inlineCode",{parentName:"p"},"p"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"g"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"g2"),", etc.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"v0-v5"),": Os nomes das colunas n\xe3o t\xeam um significado espec\xedfico e correspondem aos valores no ",(0,r.kt)("inlineCode",{parentName:"p"},"policy csv")," da esquerda para a direita. O n\xfamero de colunas depende de quantas voc\xea define por si mesmo. Em teoria, pode haver um n\xfamero infinito de colunas, mas geralmente apenas ",(0,r.kt)("strong",{parentName:"p"},"6")," colunas s\xe3o implementadas no adaptador. Se isso n\xe3o for suficiente para voc\xea, por favor, envie um problema para o reposit\xf3rio do adaptador correspondente."))),(0,r.kt)("h2",{id:"detalhes-do-adaptador"},"Detalhes do Adaptador"),(0,r.kt)("p",null,"Para mais detalhes sobre o uso da API do adaptador e o design da estrutura da tabela do banco de dados, por favor, visite: ",(0,r.kt)("a",{parentName:"p",href:"/docs/adapters"},"/docs/adapters")))}c.isMDXComponent=!0}}]);