"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[3734],{8268(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"frontend","title":"Frontend Integration","description":"Casbin.js - \u044d\u0442\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a Casbin, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0431\u043b\u0435\u0433\u0447\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430","source":"@site/i18n/ru/docusaurus-plugin-content-docs/current/FrontendUsage.mdx","sourceDirName":".","slug":"/frontend","permalink":"/ru/docs/frontend","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/FrontendUsage.mdx","tags":[],"version":"current","frontMatter":{"id":"frontend","title":"Frontend Integration","description":"Casbin.js - \u044d\u0442\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a Casbin, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0431\u043b\u0435\u0433\u0447\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430","keywords":["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Logging & Error Handling","permalink":"/ru/docs/log-error"},"next":{"title":"Editors & Tools","permalink":"/ru/docs/category/editors--tools"}}');var t=s(4848),r=s(8453);const a={id:"frontend",title:"Frontend Integration",description:"Casbin.js - \u044d\u0442\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043a Casbin, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0431\u043b\u0435\u0433\u0447\u0430\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u043c \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},o=void 0,c={},d=[{value:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430",id:"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430",level:2},{value:"Frontend Frameworks",id:"frontend-frameworks",level:2},{value:"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442",id:"\u0431\u044b\u0441\u0442\u0440\u044b\u0439-\u0441\u0442\u0430\u0440\u0442",level:2},{value:"\u041e\u0431\u044a\u0435\u043a\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f",id:"\u043e\u0431\u044a\u0435\u043a\u0442-\u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f",level:3},{value:"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435",id:"\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u043e\u0435-\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:3},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:3},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:3},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:3},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:3},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:3},{value:"\u041f\u043e\u0447\u0435\u043c\u0443 Casbin.js",id:"\u043f\u043e\u0447\u0435\u043c\u0443-casbinjs",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin.js",children:"Casbin.js"})," is a Casbin extension that simplifies access control management in frontend applications."]}),"\n",(0,t.jsx)(n.h2,{id:"\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430",children:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install casbin.js\nnpm install casbin\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u0438\u043b\u0438"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn add casbin.js\n"})}),"\n",(0,t.jsx)(n.h2,{id:"frontend-frameworks",children:"Frontend Frameworks"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Framework"}),(0,t.jsx)(n.th,{children:"\u0422\u0438\u043f"}),(0,t.jsx)(n.th,{children:"\u0410\u0432\u0442\u043e\u0440"}),(0,t.jsx)(n.th,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/react-authz",children:"react-authz"})}),(0,t.jsx)(n.td,{children:"React"}),(0,t.jsx)(n.td,{children:"Casbin"}),(0,t.jsx)(n.td,{children:"\u041e\u0431\u0435\u0440\u0442\u043a\u0430 React \u0434\u043b\u044f Casbin.js"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/daobeng/rbac-react",children:"rbac-react"})}),(0,t.jsx)(n.td,{children:"React"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/daobeng",children:"@daobeng"})}),(0,t.jsx)(n.td,{children:"Role-Based Access Control in React using Higher-Order Components, CASL, and Casbin.js"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/vue-authz",children:"vue-authz"})}),(0,t.jsx)(n.td,{children:"Vue"}),(0,t.jsx)(n.td,{children:"Casbin"}),(0,t.jsx)(n.td,{children:"\u041e\u0431\u0435\u0440\u0442\u043a\u0430 Vue \u0434\u043b\u044f Casbin.js"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/angular-authz",children:"angular-authz"})}),(0,t.jsx)(n.td,{children:"Angular"}),(0,t.jsx)(n.td,{children:"Casbin"}),(0,t.jsx)(n.td,{children:"\u041e\u0431\u0435\u0440\u0442\u043a\u0430 Angular \u0434\u043b\u044f Casbin.js"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u0431\u044b\u0441\u0442\u0440\u044b\u0439-\u0441\u0442\u0430\u0440\u0442",children:"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442"}),"\n",(0,t.jsxs)(n.p,{children:["Configure Casbin.js in ",(0,t.jsx)(n.code,{children:"manual"})," mode to set permissions explicitly in your frontend application:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'const casbinjs = require("casbin.js");\n// Set the user\'s permission:\n// He/She can read `data1` and `data2` objects and can write `data1` object\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Run casbin.js in manual mode, which requires you to set the permission manually.\nconst authorizer = new casbinjs.Authorizer("manual");\n'})}),"\n",(0,t.jsxs)(n.p,{children:["With an authorizer instance, you can check permissions using ",(0,t.jsx)(n.code,{children:"authorizer.can()"})," and ",(0,t.jsx)(n.code,{children:"authorizer.cannot()"}),". Both methods return JavaScript Promises (",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises",children:"see MDN documentation"}),"), so use the ",(0,t.jsx)(n.code,{children:"then()"})," method to handle results:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'result = authorizer.can("write", "data1");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you can write data1");\n    } else {\n        console.log("you cannot write data1");\n    }\n});\n// output: you can write data1\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"cannot()"})," method works identically:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'result = authorizer.cannot("read", "data2");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you cannot read data2");\n    } else {\n        console.log("you can read data2");\n    }\n});\n// output: you can read data2\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"success"})," parameter indicates that the query completed without errors\u2014not that permission was granted. Similarly, ",(0,t.jsx)(n.code,{children:"failed"})," relates to query errors, not permission denial."]}),"\n",(0,t.jsxs)(n.p,{children:["See our ",(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/examples",children:"React example"})," for practical Casbin.js usage."]}),"\n",(0,t.jsx)(n.h3,{id:"\u043e\u0431\u044a\u0435\u043a\u0442-\u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f",children:"\u041e\u0431\u044a\u0435\u043a\u0442 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f"}),"\n",(0,t.jsx)(n.p,{children:"Casbin.js uses a JSON object to represent visitor permissions. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This object indicates that the visitor can read both ",(0,t.jsx)(n.code,{children:"data1"})," and ",(0,t.jsx)(n.code,{children:"data2"})," objects but can only write to ",(0,t.jsx)(n.code,{children:"data1"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u043e\u0435-\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435",children:"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435"}),"\n",(0,t.jsx)(n.p,{children:"Casbin.js provides seamless integration between frontend access control and your backend Casbin service."}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"auto"})," mode and specify your backend endpoint when initializing the Casbin.js ",(0,t.jsx)(n.code,{children:"Authorizer"}),". It will automatically synchronize permissions and manage frontend authorization state:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const casbinjs = require('casbin.js');\n\n// Set your backend Casbin service URL\nconst authorizer = new casbinjs.Authorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// Set your visitor.\n// Casbin.js will automatically sync the permission with your backend Casbin service.\nauthorizer.setUser(\"Tom\");\n\n// Evaluate the permission\nresult = authorizer.can(\"read\", \"data1\");\nresult.then((success, failed) => {\n    if (success) {\n        // Some frontend procedure ...\n    }\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["On the backend, expose an endpoint (such as a REST API) that generates the permission object for the frontend. \u0412 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0435 API \u0432\u044b\u0437\u043e\u0432\u0438\u0442\u0435 ",(0,t.jsx)(n.code,{children:"CasbinJsGetUserPermission"})," \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f. This Beego example demonstrates the pattern:"]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"Your endpoint should return a response like:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'})})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // Get the visitor from the GET parameters. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the frontend.\n    c.ServeJSON()\n}\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Currently, ",(0,t.jsx)(n.code,{children:"CasbinJsGetPermissionForUser"})," is available only in Go Casbin and Node-Casbin. To request support in other languages, please ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin.js/issues",children:"open an issue"})," or leave a comment below."]})}),"\n",(0,t.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsx)(n.h3,{id:"setpermissionpermission-string",children:(0,t.jsx)(n.code,{children:"setPermission(permission: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the permission object. Used primarily in ",(0,t.jsx)(n.code,{children:"manual"})," mode."]}),"\n",(0,t.jsx)(n.h3,{id:"setuseruser-string",children:(0,t.jsx)(n.code,{children:"setUser(user: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the visitor identity and refreshes permissions. Used primarily in ",(0,t.jsx)(n.code,{children:"auto"})," mode."]}),"\n",(0,t.jsx)(n.h3,{id:"canaction-string-object-string",children:(0,t.jsx)(n.code,{children:"can(action: string, object: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user can perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.code,{children:"object"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"cannotaction-string-object-string",children:(0,t.jsx)(n.code,{children:"cannot(action: string, object: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user ",(0,t.jsx)(n.strong,{children:"cannot"})," perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.code,{children:"object"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"canallaction-string-objects-arrayobject",children:(0,t.jsx)(n.code,{children:"canAll(action: string, objects: Array<object>)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user can perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.strong,{children:"all"})," objects in ",(0,t.jsx)(n.code,{children:"objects"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"cananyaction-string-objects-arrayobject",children:(0,t.jsx)(n.code,{children:"canAny(action: string, objects: Array<object>)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user can perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.strong,{children:"any"})," object in ",(0,t.jsx)(n.code,{children:"objects"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"\u043f\u043e\u0447\u0435\u043c\u0443-casbinjs",children:"\u041f\u043e\u0447\u0435\u043c\u0443 Casbin.js"}),"\n",(0,t.jsx)(n.p,{children:"People often wonder about the distinction between Node-Casbin and Casbin.js. Node-Casbin is Casbin's core implementation for Node.js environments, typically deployed at the server level for access control management. Casbin.js is a frontend library that helps you apply Casbin authorization logic at the client side for webpage users."}),"\n",(0,t.jsx)(n.p,{children:"Directly building a Casbin service for frontend authorization presents several issues:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"When a client connects, the enforcer initializes and pulls all policies from backend storage. High concurrency can strain databases and consume significant network bandwidth."}),"\n",(0,t.jsx)(n.li,{children:"Exposing all policies to clients creates security vulnerabilities."}),"\n",(0,t.jsx)(n.li,{children:"Tight coupling between client and server complicates development and maintenance."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Casbin.js addresses these challenges by managing user permissions at the client level. The core functionality involves synchronizing the current user's permissions with the backend Casbin service through a fetch operation. Once permission data is retrieved, developers can use Casbin.js interfaces to control user behavior at the frontend."}),"\n",(0,t.jsx)(n.p,{children:"This approach eliminates repeated enforcer initialization, reduces message size between client and server, and avoids exposing all policies at the frontend. Users access only their own permissions without knowledge of the access control model or other users' permissions. Additionally, Casbin.js effectively decouples client and server authorization logic."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);