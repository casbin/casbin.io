"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[7365],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=r.createContext({}),p=function(e){var t=r.useContext(g),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(g.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,g=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=p(n),c=a,m=u["".concat(g,".").concat(c)]||u[c]||s[c]||l;return n?r.createElement(m,o(o({ref:t},d),{},{components:n})):r.createElement(m,o({ref:t},d))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=u;var i={};for(var g in t)hasOwnProperty.call(t,g)&&(i[g]=t[g]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2042:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const l={id:"log-error",title:"\u0416\u0443\u0440\u043d\u0430\u043b & \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a",description:"Logging and error handling in Casbin",keywords:["log","error","error handling"],authors:["hsluoyz"]},o=void 0,i={unversionedId:"log-error",id:"log-error",title:"\u0416\u0443\u0440\u043d\u0430\u043b & \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a",description:"Logging and error handling in Casbin",source:"@site/i18n/ru/docusaurus-plugin-content-docs/current/LogError.mdx",sourceDirName:".",slug:"/log-error",permalink:"/ru/docs/log-error",draft:!1,editUrl:"https://crowdin.com/project/casbin-website/ru",tags:[],version:"current",frontMatter:{id:"log-error",title:"\u0416\u0443\u0440\u043d\u0430\u043b & \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a",description:"Logging and error handling in Casbin",keywords:["log","error","error handling"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"\u0421\u043b\u0443\u0436\u0431\u0430 \u041a\u0430\u0441\u0431\u0438\u043d\u0430",permalink:"/ru/docs/service"},next:{title:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430",permalink:"/ru/docs/frontend"}},g={},p=[{value:"\u0412\u0435\u0434\u0435\u043d\u0438\u0435 \u0436\u0443\u0440\u043d\u0430\u043b\u0430",id:"\u0432\u0435\u0434\u0435\u043d\u0438\u0435-\u0436\u0443\u0440\u043d\u0430\u043b\u0430",level:2},{value:"Use different loggers for different enforcers",id:"use-different-loggers-for-different-enforcers",level:3},{value:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u044b",id:"\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435-\u043b\u043e\u0433\u0433\u0435\u0440\u044b",level:4},{value:"\u041a\u0430\u043a \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043b\u043e\u0433\u0433\u0435\u0440",id:"\u043a\u0430\u043a-\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c-\u043b\u043e\u0433\u0433\u0435\u0440",level:4},{value:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a",id:"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430-\u043e\u0448\u0438\u0431\u043e\u043a",level:2},{value:"Enable and disable",id:"enable-and-disable",level:2}],d=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,a.kt)("div",t)},s=d("Tabs"),u=d("TabItem"),c={toc:p};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u0432\u0435\u0434\u0435\u043d\u0438\u0435-\u0436\u0443\u0440\u043d\u0430\u043b\u0430"},"\u0412\u0435\u0434\u0435\u043d\u0438\u0435 \u0436\u0443\u0440\u043d\u0430\u043b\u0430"),(0,a.kt)("p",null,"Casbin uses the built-in ",(0,a.kt)("inlineCode",{parentName:"p"},"log")," to print logs to the console by default, like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-log"},"2017/07/15 19:43:56 [\u0417\u0430\u043f\u0440\u043e\u0441: \u0430\u043b\u044c, \u0434\u0430\u043d\u043d\u044b\u04351, \u0447\u0442\u0435\u043d\u0438\u0435 ---\x3e true]\n")),(0,a.kt)("p",null,"Logging is not enabled by default. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0435\u0433\u043e \u0447\u0435\u0440\u0435\u0437 ",(0,a.kt)("inlineCode",{parentName:"p"},"Enforcer.EnableLog()")," \u0438\u043b\u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"NewEnforcer()"),"."),(0,a.kt)("p",null,"::note"),(0,a.kt)("p",null,"We already support logging the model, enforce request, role, and policy in Golang. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043b\u043e\u0433 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 Casbin. \u0415\u0441\u043b\u0438 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 Python, pycasbin \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0437\u0430\u043f\u0438\u0441\u0438 \u043b\u043e\u0433\u043e\u0432 Python. The pycasbin package makes a call to ",(0,a.kt)("inlineCode",{parentName:"p"},"logging.getLogger()")," to set the logger. \u041d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0438\u043a\u0430\u043a\u043e\u0439 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0436\u0443\u0440\u043d\u0430\u043b\u0430, \u043a\u0440\u043e\u043c\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043b\u043e\u0433\u0433\u0435\u0440\u0430 \u0432 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438. If no logging is initialized within the parent application, you will not see any log messages from pycasbin. At the same time, when you enable log in pycasbin, it will use the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casbin/pycasbin/blob/c33cabfa0ac65cd09cf812a65e71794d64cb5132/casbin/util/log.py#L6C1-L6C1"},"default log configuration"),". For other pycasbin extensions, you can refer to the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.djangoproject.com/en/4.2/topics/logging/"},"Django logging docs")," if you are a Django user. For other Python users, you should refer to the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/logging.config.html"},"Python logging docs")," to configure the logger. :::"),(0,a.kt)("h3",{id:"use-different-loggers-for-different-enforcers"},"Use different loggers for different enforcers"),(0,a.kt)("p",null,"Every enforcer can have its own logger to log information, and it can be changed at runtime."),(0,a.kt)("p",null,"And you can use a proper logger via the last parameter of ",(0,a.kt)("inlineCode",{parentName:"p"},"NewEnforcer()"),". If you are using this way to initialize your enforcer, you don't need to use the enabled parameter because the priority of the enabled field in the logger is higher."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'// \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043b\u043e\u0433\u0433\u0435\u0440 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043a\u0430\u043a \u043b\u043e\u0433\u0433\u0435\u0440 e1.\n// This operation can also be seen as changing the logger of e1 at runtime.\ne1.SetLogger(&Log.DefaultLogger{})\n\n// \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u043b\u043e\u0433\u0433\u0435\u0440 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0436\u0443\u0440\u043d\u0430\u043b\u0438\u0441\u0442\u0430 e2.\ne2.SetLogger(&YouOwnLogger)\n\n// Set your logger when initializing enforcer e3.\ne3, _ := casbin.NewEnforcer("\u041f\u0440\u0438\u043c\u0435\u0440/rbac_model.conf", a, logger)\n')),(0,a.kt)("h4",{id:"\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435-\u043b\u043e\u0433\u0433\u0435\u0440\u044b"},"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u044b"),(0,a.kt)("p",null,"\u041c\u044b \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043b\u043e\u0433\u0433\u0435\u0440\u044b, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043c\u043e\u0447\u044c \u0432\u0430\u043c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e."),(0,a.kt)(s,{groupId:"langs",mdxType:"Tabs"},(0,a.kt)(u,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Logger"),(0,a.kt)("th",{parentName:"tr",align:null},"\u0410\u0432\u0442\u043e\u0440"),(0,a.kt)("th",{parentName:"tr",align:null},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/log/default_logger.go"},"Default logger (built-in)")),(0,a.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,a.kt)("td",{parentName:"tr",align:null},"\u041b\u043e\u0433\u0433\u0435\u0440 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f golang log.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://github.com/casbin/zap-logger"},"Zap logger")),(0,a.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,a.kt)("td",{parentName:"tr",align:null},"Using ",(0,a.kt)("a",{parentName:"td",href:"https://github.com/uber-go/zap"},"zap"),", provide json encoded log and you can customize more with your own zap-logger."))))),(0,a.kt)(u,{value:"PHP",label:"PHP",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Logger"),(0,a.kt)("th",{parentName:"tr",align:null},"\u0410\u0432\u0442\u043e\u0440"),(0,a.kt)("th",{parentName:"tr",align:null},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://github.com/php-casbin/psr3-bridge"},"logger psr3-bridge")),(0,a.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,a.kt)("td",{parentName:"tr",align:null},"\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u044b\u0439 \u0441 ",(0,a.kt)("a",{parentName:"td",href:"https://www.php-fig.org/psr/psr-3/"},"PSR-3")," \u043c\u043e\u0441\u0442.")))))),(0,a.kt)("h4",{id:"\u043a\u0430\u043a-\u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c-\u043b\u043e\u0433\u0433\u0435\u0440"},"\u041a\u0430\u043a \u0437\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043b\u043e\u0433\u0433\u0435\u0440"),(0,a.kt)("p",null,"\u0412\u0430\u0448 \u043b\u043e\u0433\u0433\u0435\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/log/logger.go#L20"},"Logger"),"."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u041c\u0435\u0442\u043e\u0434"),(0,a.kt)("th",{parentName:"tr",align:null},"\u0422\u0438\u043f"),(0,a.kt)("th",{parentName:"tr",align:null},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"EnableLog()"),(0,a.kt)("td",{parentName:"tr",align:null},"mandatory"),(0,a.kt)("td",{parentName:"tr",align:null},"Control whether to print the message.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u0412\u043a\u043b\u044e\u0447\u0435\u043d\u043e ()"),(0,a.kt)("td",{parentName:"tr",align:null},"mandatory"),(0,a.kt)("td",{parentName:"tr",align:null},"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u043b\u043e\u0433\u0433\u0435\u0440\u0430.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LogModel()"),(0,a.kt)("td",{parentName:"tr",align:null},"mandatory"),(0,a.kt)("td",{parentName:"tr",align:null},"Log info related to the model.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LogEnforce()"),(0,a.kt)("td",{parentName:"tr",align:null},"mandatory"),(0,a.kt)("td",{parentName:"tr",align:null},"Log info related to enforcing.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LogRole()"),(0,a.kt)("td",{parentName:"tr",align:null},"mandatory"),(0,a.kt)("td",{parentName:"tr",align:null},"Log info related to the role.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LogPolicy()"),(0,a.kt)("td",{parentName:"tr",align:null},"mandatory"),(0,a.kt)("td",{parentName:"tr",align:null},"Log info related to the policy.")))),(0,a.kt)("p",null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0439 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u043b\u043e\u0433")," ",(0,a.kt)("inlineCode",{parentName:"p"},"Enforcer.SetLogger()"),"."),(0,a.kt)("p",null,"Here is an example of how to customize a logger for Golang:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'\u0438\u043c\u043f\u043e\u0440\u0442 (\n    "fmt"\n    "log"\n    "strings"\n)\n\n// DefaultLogger - \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u0436\u0443\u0440\u043d\u0430\u043b\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c golang log.\ntype DefaultLogger struct {\n    enabled bool\n}\n\nfunc (l *DefaultLogger) EnableLog(enable bool) {\n    l. nabled = enable\n}\n\nfunc (l *DefaultLogger) IsEnabled() bool {\n    return l.enabled\n}\n\nfunc (l *DefaultLogger) LogModel(model [][]string) {\n    if !l. nabled {\n        return\n    }\n    var str strings.Builder\n    str. riteString("\u041c\u043e\u0434\u0435\u043b\u044c: ")\n    \u0434\u043b\u044f _, v := range model {\n        str. riteString(fmt.Sprintf("%v\\n", v))\n    }\n\n    log.Println(str. tring())\n}\n\nfunc (l *DefaultLogger) LogEnforce(matcher string, request []interface{}, result bool, explains [][]string) {\n    if !l. nabled {\n        return\n    }\n\n    var reqStr strings.Builder\n    reqStr. riteString("\u0417\u0430\u043f\u0440\u043e\u0441: ")\n    \u0434\u043b\u044f i, rval := request {\n        if i ! len(request)-1 {\n            reqStr. riteString(fmt. printf("%v, ", rval))\n        } else {\n            reqStr. riteString(fmt. printf("%v", rval))\n        }\n    }\n    reqStr. riteString(fmt.Sprintf(" ---\x3e %t\\n", \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442))\n\n    reqStr. riteString("\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u0445\u0438\u0442\u043e\u0432: ")\n    \u0434\u043b\u044f i, pval := range \u043e\u0431\u044a\u044f\u0441\u043d\u044f\u0435\u0442 {\n        if i ! len(explains)-1 {\n            reqStr. riteString(fmt. printf("%v, ", pval))\n        } else {\n            reqStr. riteString(fmt. printf("%v \\n", pval))\n        }\n    }\n\n    log. rintln(reqStr. tring())\n}\n\nfunc (l *DefaultLogger) LogPolicy(policy map[string][][]string) {\n    if !l. nabled {\n        return\n    }\n\n    var str \u0441\u0442\u0440\u043e\u043a. uilder\n    str. riteString("\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430: ")\n    \u0434\u043b\u044f k, v := range policy {\n        str.WriteString(fmt. printf("%s : %v\\n", k, v))\n    }\n\n    log.Println(str. tring())\n}\n\nfunc (l *DefaultLogger) LogRole(roles []string) {\n    if !l. nabled {\n        return\n    }\n\n    log.Println("\u0420\u043e\u043b\u0438: ", \u0440\u043e\u043b\u0438)\n}\n')),(0,a.kt)("h2",{id:"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430-\u043e\u0448\u0438\u0431\u043e\u043a"},"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a"),(0,a.kt)("p",null,"Errors or panics may occur when you use Casbin for reasons like:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Invalid syntax in the model file (.conf)."),(0,a.kt)("li",{parentName:"ol"},"Invalid syntax in the policy file (.csv)."),(0,a.kt)("li",{parentName:"ol"},"Custom errors from storage adapters, e.g., MySQL fails to connect."),(0,a.kt)("li",{parentName:"ol"},"Casbin's bug.")),(0,a.kt)("p",null,"There are five main functions you may need to be aware of for errors or panics:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u0424\u0443\u043d\u043a\u0446\u0438\u044f"),(0,a.kt)("th",{parentName:"tr",align:null},"\u041f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0435"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://godoc.org/github.com/casbin/casbin#NewEnforcer"},"NewEnforcer()")),(0,a.kt)("td",{parentName:"tr",align:null},"Returns an error")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://godoc.org/github.com/casbin/casbin#Enforcer.LoadModel"},"LoadModel()")),(0,a.kt)("td",{parentName:"tr",align:null},"Returns an error")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://godoc.org/github.com/casbin/casbin#Enforcer.LoadPolicy"},"LoadPolicy()")),(0,a.kt)("td",{parentName:"tr",align:null},"Returns an error")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://godoc.org/github.com/casbin/casbin#Enforcer.SavePolicy"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0438 ()")),(0,a.kt)("td",{parentName:"tr",align:null},"Returns an error")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://godoc.org/github.com/casbin/casbin#Enforcer.Enforce"},"Enforce()")),(0,a.kt)("td",{parentName:"tr",align:null},"Returns an error")))),(0,a.kt)("p",null,"::note"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"NewEnforcer()")," calls ",(0,a.kt)("inlineCode",{parentName:"p"},"LoadModel()")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"LoadPolicy()")," internally. So you don't have to call the latter two when using ",(0,a.kt)("inlineCode",{parentName:"p"},"NewEnforcer()"),"."),(0,a.kt)("p",null,":::"),(0,a.kt)("h2",{id:"enable-and-disable"},"Enable and disable"),(0,a.kt)("p",null,"\u0421\u0438\u043b\u043e\u0440 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d \u0447\u0435\u0440\u0435\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u044e ",(0,a.kt)("inlineCode",{parentName:"p"},"Enforcer.EnableEnforce()"),". \u041a\u043e\u0433\u0434\u0430 \u043e\u043d \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d, ",(0,a.kt)("inlineCode",{parentName:"p"},"Enforcer.Enforce()")," \u0432\u0441\u0435\u0433\u0434\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),". Other operations like adding or removing policies are not affected. \u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'e := casbin.NewEnforcer("examples/basic_model.conf", "examples/basic_policy.csv")\n\n// \u0432\u0435\u0440\u043d\u0435\u0442 false.\n// \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u044d\u043d\u0441\u0438\u043b\u0438\u0430\u0440 \u0432\u043a\u043b\u044e\u0447\u0435\u043d.\ne.Enforce("non-authorized-user", "data1", "read")\n\n// Disable the enforcer at runtime.\ne.EnableEnforce(false)\n\n// \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0438\u0441\u0442\u0438\u043d\u0443 \u0437\u0430 \u043b\u044e\u0431\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.\ne.Enforce("non-authorized-user", "data1", "read")\n\n// \u041f\u043e\u0432\u0442\u043e\u0440\u044f\u0439\u0442\u0435 \u0432\u043a\u043b.\ne.EnableEnforce(true)\n\n// \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 false.\ne.Enforce("non-authorized-user", "data1", "read")\n')))}m.isMDXComponent=!0}}]);