"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[1173],{4850(e,r,i){i.r(r),i.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>d,metadata:()=>a,toc:()=>s});const a=JSON.parse('{"id":"priority-model","title":"Priority Model","description":"Modelo de Prioridad de Casbin para gestionar pol\xedticas con diferentes prioridades","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/PriorityModel.mdx","sourceDirName":".","slug":"/priority-model","permalink":"/es/docs/priority-model","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx","tags":[],"version":"current","frontMatter":{"id":"priority-model","title":"Priority Model","description":"Modelo de Prioridad de Casbin para gestionar pol\xedticas con diferentes prioridades","keywords":["priority model"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"OrBAC","permalink":"/es/docs/orbac"},"next":{"title":"Usage Control (UCON)","permalink":"/es/docs/ucon"}}');var n=i(4848),o=i(8453);const d={id:"priority-model",title:"Priority Model",description:"Modelo de Prioridad de Casbin para gestionar pol\xedticas con diferentes prioridades",keywords:["priority model"],authors:["hsluoyz"]},t=void 0,l={},s=[{value:"Cargar Pol\xedtica con Prioridad Impl\xedcita",id:"cargar-pol\xedtica-con-prioridad-impl\xedcita",level:2},{value:"Cargar Pol\xedtica con Prioridad Expl\xedcita",id:"cargar-pol\xedtica-con-prioridad-expl\xedcita",level:2},{value:"Cargar Pol\xedtica con Prioridad Basada en Jerarqu\xeda de Rol y Usuario",id:"cargar-pol\xedtica-con-prioridad-basada-en-jerarqu\xeda-de-rol-y-usuario",level:2}];function c(e){const r={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.p,{children:"Casbin soporta la carga de pol\xedticas con prioridad."}),"\n",(0,n.jsx)(r.h2,{id:"cargar-pol\xedtica-con-prioridad-impl\xedcita",children:"Cargar Pol\xedtica con Prioridad Impl\xedcita"}),"\n",(0,n.jsx)(r.p,{children:"Es bastante simple: el orden determina la prioridad; las pol\xedticas que aparecen primero tienen mayor prioridad."}),"\n",(0,n.jsx)(r.p,{children:"model.conf:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ini",children:"[policy_effect]\ne = priority(p.eft) || deny\n"})}),"\n",(0,n.jsx)(r.h2,{id:"cargar-pol\xedtica-con-prioridad-expl\xedcita",children:"Cargar Pol\xedtica con Prioridad Expl\xedcita"}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsxs)(r.p,{children:["Tambi\xe9n ver: ",(0,n.jsx)(r.a,{href:"https://github.com/casbin/casbin/issues/550",children:"casbin#550"})]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Un valor de prioridad menor indica una mayor prioridad. Si hay un car\xe1cter no num\xe9rico en la prioridad, se colocar\xe1 al final en lugar de lanzar un error."}),"\n",(0,n.jsxs)(r.admonition,{title:"Convenci\xf3n de nombres de tokens",type:"info",children:[(0,n.jsxs)(r.p,{children:['El nombre de token de prioridad convencionalmente utilizado en la definici\xf3n de la pol\xedtica es "priority". Para usar uno personalizado, necesitas invocar ',(0,n.jsx)(r.code,{children:"e.SetFieldIndex()"})," y recargar las pol\xedticas (ver el ejemplo completo en ",(0,n.jsx)(r.a,{href:"https://github.com/casbin/casbin/pull/1044",children:"TestCustomizedFieldIndex"}),")."]}),(0,n.jsx)(r.p,{children:"model.conf:"}),(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ini",children:"[policy_definition]\np = customized_priority, sub, obj, act, eft\n"})}),(0,n.jsx)(r.p,{children:"Ejemplo de c\xf3digo en Golang:"}),(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-go",children:'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'})})]}),"\n",(0,n.jsxs)(r.p,{children:["Actualmente, la prioridad expl\xedcita solo soporta ",(0,n.jsx)(r.code,{children:"AddPolicy"})," & ",(0,n.jsx)(r.code,{children:"AddPolicies"}),". Si se ha llamado a ",(0,n.jsx)(r.code,{children:"UpdatePolicy"}),", no deber\xedas cambiar el atributo de prioridad."]}),"\n",(0,n.jsx)(r.p,{children:"model.conf:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,n.jsx)(r.p,{children:"policy.csv"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csv",children:"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n"})}),"\n",(0,n.jsx)(r.p,{children:"solicitud:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csv",children:"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority \n"})}),"\n",(0,n.jsx)(r.h2,{id:"cargar-pol\xedtica-con-prioridad-basada-en-jerarqu\xeda-de-rol-y-usuario",children:"Cargar Pol\xedtica con Prioridad Basada en Jerarqu\xeda de Rol y Usuario"}),"\n",(0,n.jsxs)(r.p,{children:["La estructura heredada de roles y usuarios solo puede ser m\xfaltiples \xe1rboles, no gr\xe1ficos. Si un usuario tiene m\xfaltiples roles, tienes que asegurarte de que el usuario tenga el mismo nivel en diferentes \xe1rboles. Si dos roles tienen el mismo nivel, la pol\xedtica (asociada con el rol) que apareci\xf3 primero tiene mayor prioridad. Para m\xe1s detalles, tambi\xe9n ver ",(0,n.jsx)(r.a,{href:"https://github.com/casbin/casbin/pull/833",children:"casbin#833"})," y ",(0,n.jsx)(r.a,{href:"https://github.com/casbin/casbin/issues/831",children:"casbin#831"}),"."]}),"\n",(0,n.jsx)(r.p,{children:"model.conf:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n"})}),"\n",(0,n.jsx)(r.p,{children:"policy.csv"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csv",children:"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n"})}),"\n",(0,n.jsx)(r.p,{children:"Solicitud:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csv",children:"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n"})}),"\n",(0,n.jsx)(r.p,{children:"La jerarqu\xeda de roles se ve as\xed:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n"})}),"\n",(0,n.jsx)(r.p,{children:"La prioridad autom\xe1ticamente se ve as\xed:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-text",children:"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n"})})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453(e,r,i){i.d(r,{R:()=>d,x:()=>t});var a=i(6540);const n={},o=a.createContext(n);function d(e){const r=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),a.createElement(o.Provider,{value:r},e.children)}}}]);