"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[3047],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>u});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),d=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=d(e.components);return a.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=d(t),u=r,k=p["".concat(s,".").concat(u)]||p[u]||c[u]||i;return t?a.createElement(k,o(o({ref:n},m),{},{components:t})):a.createElement(k,o({ref:n},m))}));function u(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=p;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},4119:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=t(7462),r=(t(7294),t(3905));const i={id:"menu-permissions",title:"Menu Permissions",description:"Ejemplo para Permisos de Men\xfa",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},o=void 0,l={unversionedId:"menu-permissions",id:"menu-permissions",title:"Menu Permissions",description:"Ejemplo para Permisos de Men\xfa",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/MenuPermissions.mdx",sourceDirName:".",slug:"/menu-permissions",permalink:"/es/docs/menu-permissions",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/MenuPermissions.mdx",tags:[],version:"current",frontMatter:{id:"menu-permissions",title:"Menu Permissions",description:"Ejemplo para Permisos de Men\xfa",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},sidebar:"docs",previous:{title:"Data Permissions",permalink:"/es/docs/data-permissions"},next:{title:"Extensions",permalink:"/es/docs/category/extensions"}},s={},d=[{value:"1. Archivos de Configuraci\xf3n",id:"1-archivos-de-configuraci\xf3n",level:3},{value:"1.1 Visi\xf3n General",id:"11-visi\xf3n-general",level:4},{value:"1.2 Definiciones de Permisos (Pol\xedticas)",id:"12-definiciones-de-permisos-pol\xedticas",level:4},{value:"1.3 Roles y Asociaciones de Usuarios",id:"13-roles-y-asociaciones-de-usuarios",level:4},{value:"1.4 Jerarqu\xeda de Elementos del Men\xfa",id:"14-jerarqu\xeda-de-elementos-del-men\xfa",level:4},{value:"1.5 Herencia de Permisos del Men\xfa y Reglas Predeterminadas",id:"15-herencia-de-permisos-del-men\xfa-y-reglas-predeterminadas",level:4},{value:"<strong>Distinci\xf3n Entre Negaciones Expl\xedcitas y Predeterminadas</strong>: Si a un rol, como <code>ROLE_ADMIN</code>, se le niega expl\xedcitamente el acceso a un elemento del men\xfa, como <code>AdminSubMenu_deny</code> (marcado como <code>deny</code>), entonces incluso si este rol es heredado por otro rol (por ejemplo, <code>ROLE_ROOT</code>), el rol heredero no tiene permiso de acceso al elemento del men\xfa denegado.",id:"distinci\xf3n-entre-negaciones-expl\xedcitas-y-predeterminadas-si-a-un-rol-como-role_admin-se-le-niega-expl\xedcitamente-el-acceso-a-un-elemento-del-men\xfa-como-adminsubmenu_deny-marcado-como-deny-entonces-incluso-si-este-rol-es-heredado-por-otro-rol-por-ejemplo-role_root-el-rol-heredero-no-tiene-permiso-de-acceso-al-elemento-del-men\xfa-denegado",level:4},{value:"ROLE_ADMIN",id:"role_admin",level:4},{value:"2. Control de Permiso de Men\xfa",id:"2-control-de-permiso-de-men\xfa",level:3}],m={toc:d};function c(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Comenzamos presentando un ejemplo de Spring Boot que presenta un sistema de men\xfa. Este ejemplo aprovecha jCasbin para gestionar los permisos del men\xfa. En \xfaltima instancia, tiene como objetivo abstraer un middleware, espec\xedficamente para permisos de men\xfa, que podr\xeda extenderse a otros lenguajes soportados por Casbin, como Go y Python."),(0,r.kt)("h3",{id:"1-archivos-de-configuraci\xf3n"},"1. Archivos de Configuraci\xf3n"),(0,r.kt)("p",null,"Necesitas configurar la gesti\xf3n de roles y permisos en el archivo ",(0,r.kt)("inlineCode",{parentName:"p"},"policy.csv"),", junto con las relaciones padre-hijo entre los elementos del men\xfa. Para m\xe1s detalles, por favor consulta ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jcasbin/jcasbin-menu-permission"},"este repositorio de GitHub"),"."),(0,r.kt)("h4",{id:"11-visi\xf3n-general"},"1.1 Visi\xf3n General"),(0,r.kt)("p",null,"Usando ",(0,r.kt)("inlineCode",{parentName:"p"},"policy.csv"),", puedes configurar de manera flexible los permisos de rol y las estructuras de men\xfa para un control de acceso detallado. Este archivo de configuraci\xf3n define los permisos de acceso para diferentes roles en varios elementos del men\xfa, asociaciones entre usuarios y roles, y las relaciones jer\xe1rquicas entre los elementos del men\xfa."),(0,r.kt)("h4",{id:"12-definiciones-de-permisos-pol\xedticas"},"1.2 Definiciones de Permisos (Pol\xedticas)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Reglas de Pol\xedtica"),": Las pol\xedticas se definen con un prefijo ",(0,r.kt)("inlineCode",{parentName:"li"},"p"),", especificando roles (",(0,r.kt)("inlineCode",{parentName:"li"},"sub"),") y sus permisos (",(0,r.kt)("inlineCode",{parentName:"li"},"act"),") en elementos del men\xfa (",(0,r.kt)("inlineCode",{parentName:"li"},"obj"),"), junto con el efecto de la regla (",(0,r.kt)("inlineCode",{parentName:"li"},"eft"),"), donde ",(0,r.kt)("inlineCode",{parentName:"li"},"allow")," indica que se concede el permiso, y ",(0,r.kt)("inlineCode",{parentName:"li"},"deny")," indica que se niega.")),(0,r.kt)("p",null,"Ejemplos:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"p, ROLE_ROOT, SystemMenu, read, allow")," significa que el rol ",(0,r.kt)("inlineCode",{parentName:"li"},"ROLE_ROOT")," tiene acceso de lectura al elemento del men\xfa ",(0,r.kt)("inlineCode",{parentName:"li"},"SystemMenu"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"p, ROLE_ROOT, UserMenu, read, deny")," significa que al rol ",(0,r.kt)("inlineCode",{parentName:"li"},"ROLE_ROOT")," se le niega el acceso de lectura al elemento del men\xfa ",(0,r.kt)("inlineCode",{parentName:"li"},"UserMenu"),".")),(0,r.kt)("h4",{id:"13-roles-y-asociaciones-de-usuarios"},"1.3 Roles y Asociaciones de Usuarios"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Herencia de Roles"),": Las relaciones usuario-rol y las jerarqu\xedas de roles se definen con un prefijo ",(0,r.kt)("inlineCode",{parentName:"li"},"g"),". Esto permite a los usuarios heredar permisos de uno o varios roles.")),(0,r.kt)("p",null,"Ejemplos:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"g, user, ROLE_USER")," significa que el usuario ",(0,r.kt)("inlineCode",{parentName:"li"},"user")," est\xe1 asignado al rol ",(0,r.kt)("inlineCode",{parentName:"li"},"ROLE_USER"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"g, ROLE_ADMIN, ROLE_USER")," significa que ",(0,r.kt)("inlineCode",{parentName:"li"},"ROLE_ADMIN")," hereda permisos de ",(0,r.kt)("inlineCode",{parentName:"li"},"ROLE_USER"),".")),(0,r.kt)("h4",{id:"14-jerarqu\xeda-de-elementos-del-men\xfa"},"1.4 Jerarqu\xeda de Elementos del Men\xfa"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Relaciones del Men\xfa"),": Las relaciones padre-hijo entre elementos del men\xfa se definen con un prefijo ",(0,r.kt)("inlineCode",{parentName:"li"},"g2"),", ayudando en la construcci\xf3n de la estructura de un men\xfa.")),(0,r.kt)("p",null,"Ejemplos:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"g2, UserSubMenu_allow, UserMenu")," indica que ",(0,r.kt)("inlineCode",{parentName:"li"},"UserSubMenu_allow")," es un submen\xfa de ",(0,r.kt)("inlineCode",{parentName:"li"},"UserMenu"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"g2, (NULL), SystemMenu")," indica que ",(0,r.kt)("inlineCode",{parentName:"li"},"SystemMenu")," no tiene un elemento de submen\xfa, lo que significa que es un elemento de men\xfa de nivel superior.")),(0,r.kt)("h4",{id:"15-herencia-de-permisos-del-men\xfa-y-reglas-predeterminadas"},"1.5 Herencia de Permisos del Men\xfa y Reglas Predeterminadas"),(0,r.kt)("p",null,"Al gestionar permisos de men\xfa con jCasbin, la relaci\xf3n de permisos entre men\xfas padres e hijos sigue reglas de herencia espec\xedficas, con dos reglas predeterminadas importantes:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Herencia de Permisos del Men\xfa Padre"),": Si a un men\xfa padre se le concede expl\xedcitamente el permiso ",(0,r.kt)("inlineCode",{parentName:"p"},"allow"),", todos sus submen\xfas tambi\xe9n tienen por defecto el permiso ",(0,r.kt)("inlineCode",{parentName:"p"},"allow")," a menos que se marque espec\xedficamente como ",(0,r.kt)("inlineCode",{parentName:"p"},"deny"),"."),(0,r.kt)("p",null,"Esto significa que una vez que un men\xfa padre es accesible, sus submen\xfas tambi\xe9n son accesibles por defecto. ",(0,r.kt)("strong",{parentName:"p"},"Manejo de Men\xfas Padres Sin Configuraciones de Permiso Directas"),": Si un men\xfa padre no tiene configuraciones de permiso directas (ni expl\xedcitamente permitidas ni denegadas) pero tiene al menos un submen\xfa con permiso ",(0,r.kt)("inlineCode",{parentName:"p"},"allow")," concedido expl\xedcitamente, entonces se considera impl\xedcitamente que el men\xfa padre tiene permiso ",(0,r.kt)("inlineCode",{parentName:"p"},"allow"),"."),(0,r.kt)("p",null,"Esto asegura que los usuarios puedan navegar a estos submen\xfas."),(0,r.kt)("p",null,"1.6 Reglas Especiales de Herencia de Permisos En cuanto a la herencia de permisos entre roles, especialmente en escenarios que involucran permisos de ",(0,r.kt)("inlineCode",{parentName:"p"},"deny"),", se deben seguir las siguientes reglas para asegurar la seguridad del sistema y un control preciso de los permisos:"),(0,r.kt)("h4",{id:"distinci\xf3n-entre-negaciones-expl\xedcitas-y-predeterminadas-si-a-un-rol-como-role_admin-se-le-niega-expl\xedcitamente-el-acceso-a-un-elemento-del-men\xfa-como-adminsubmenu_deny-marcado-como-deny-entonces-incluso-si-este-rol-es-heredado-por-otro-rol-por-ejemplo-role_root-el-rol-heredero-no-tiene-permiso-de-acceso-al-elemento-del-men\xfa-denegado"},(0,r.kt)("strong",{parentName:"h4"},"Distinci\xf3n Entre Negaciones Expl\xedcitas y Predeterminadas"),": Si a un rol, como ",(0,r.kt)("inlineCode",{parentName:"h4"},"ROLE_ADMIN"),", se le niega expl\xedcitamente el acceso a un elemento del men\xfa, como ",(0,r.kt)("inlineCode",{parentName:"h4"},"AdminSubMenu_deny")," (marcado como ",(0,r.kt)("inlineCode",{parentName:"h4"},"deny"),"), entonces incluso si este rol es heredado por otro rol (por ejemplo, ",(0,r.kt)("inlineCode",{parentName:"h4"},"ROLE_ROOT"),"), el rol heredero no tiene permiso de acceso al elemento del men\xfa denegado."),(0,r.kt)("p",null,"Esto asegura que las pol\xedticas de seguridad expl\xedcitas no se eludan debido a la herencia de roles."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Herencia de Permisos de Negaci\xf3n Predeterminada"),": Por el contrario, si la negaci\xf3n de acceso de un rol a un elemento del men\xfa (por ejemplo, ",(0,r.kt)("inlineCode",{parentName:"p"},"UserSubMenu_deny"),") es predeterminada (no marcada expl\xedcitamente como ",(0,r.kt)("inlineCode",{parentName:"p"},"deny"),", sino porque no se le concedi\xf3 expl\xedcitamente ",(0,r.kt)("inlineCode",{parentName:"p"},"allow"),"), entonces cuando este rol es heredado por otro rol (por ejemplo, ",(0,r.kt)("inlineCode",{parentName:"p"},"ROLE_ADMIN"),"), el rol heredero puede anular el estado de ",(0,r.kt)("inlineCode",{parentName:"p"},"deny")," predeterminado, permitiendo el acceso a estos elementos del men\xfa."),(0,r.kt)("p",null,"1.7 Descripci\xf3n del Ejemplo pol\xedtica:"),(0,r.kt)("p",null,"NombreDelMen\xfa"),(0,r.kt)("p",null,"ROLE","_","ROOT"),(0,r.kt)("h4",{id:"role_admin"},"ROLE","_","ADMIN"),(0,r.kt)("p",null,"ROLE","_","USER"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, ROLE_ROOT, SystemMenu, read, allow\np, ROLE_ROOT, AdminMenu, read, allow\np, ROLE_ROOT, UserMenu, read, deny\np, ROLE_ADMIN, UserMenu, read, allow\np, ROLE_ADMIN, AdminMenu, read, allow\np, ROLE_ADMIN, AdminSubMenu_deny, read, deny\np, ROLE_USER, UserSubMenu_allow, read, allow\n\ng, user, ROLE_USER\ng, admin, ROLE_ADMIN\ng, root, ROLE_ROOT\ng, ROLE_ADMIN, ROLE_USER\n\ng2, UserSubMenu_allow, UserMenu\ng2, UserSubMenu_deny, UserMenu\ng2, UserSubSubMenu, UserSubMenu_allow\ng2, AdminSubMenu_allow, AdminMenu\ng2, AdminSubMenu_deny, AdminMenu\ng2, (NULL), SystemMenu\n")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u2705"),(0,r.kt)("th",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("th",{parentName:"tr",align:"center"},"ROLE","_","ADMIN"),(0,r.kt)("th",{parentName:"tr",align:"center"},"ROLE","_","USER"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"SystemMenu"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"UserMenu"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"UserSubMenu","_","allow"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"UserSubSubMenu"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"UserSubMenu","_","deny"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"AdminMenu"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"AdminSubMenu","_","allow"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"AdminSubMenu","_","deny"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\u274c")))),(0,r.kt)("h3",{id:"2-control-de-permiso-de-men\xfa"},"2. Control de Permiso de Men\xfa"),(0,r.kt)("p",null,"La lista de todos los elementos del men\xfa accesibles por un nombre de usuario dado se puede identificar a trav\xe9s de la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"findAccessibleMenus()")," disponible en ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jcasbin/jcasbin-menu-permission/blob/master/src/main/java/org/casbin/service/MenuService.java"},"MenuService"),". Para verificar si un usuario espec\xedfico tiene los derechos para acceder a un elemento de men\xfa designado, se puede utilizar el m\xe9todo ",(0,r.kt)("inlineCode",{parentName:"p"},"checkMenuAccess()"),". Este enfoque asegura que los permisos de men\xfa se controlen efectivamente, aprovechando las capacidades de jCasbin para gestionar los derechos de acceso de manera eficiente."))}c.isMDXComponent=!0}}]);