"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[8945],{3905:(n,t,e)=>{e.d(t,{Zo:()=>s,kt:()=>p});var a=e(7294);function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function h(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,a)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?h(Object(e),!0).forEach((function(t){r(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function c(n,t){if(null==n)return{};var e,a,r=function(n,t){if(null==n)return{};var e,a,r={},h=Object.keys(n);for(a=0;a<h.length;a++)e=h[a],t.indexOf(e)>=0||(r[e]=n[e]);return r}(n,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(n);for(a=0;a<h.length;a++)e=h[a],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(r[e]=n[e])}return r}var u=a.createContext({}),o=function(n){var t=a.useContext(u),e=t;return n&&(e="function"==typeof n?n(t):i(i({},t),n)),e},s=function(n){var t=o(n.components);return a.createElement(u.Provider,{value:t},n.children)},l={inlineCode:"code",wrapper:function(n){var t=n.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(n,t){var e=n.components,r=n.mdxType,h=n.originalType,u=n.parentName,s=c(n,["components","mdxType","originalType","parentName"]),g=o(e),p=r,d=g["".concat(u,".").concat(p)]||g[p]||l[p]||h;return e?a.createElement(d,i(i({ref:t},s),{},{components:e})):a.createElement(d,i({ref:t},s))}));function p(n,t){var e=arguments,r=t&&t.mdxType;if("string"==typeof n||r){var h=e.length,i=new Array(h);i[0]=g;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=n,c.mdxType="string"==typeof n?n:r,i[1]=c;for(var o=2;o<h;o++)i[o]=e[o];return a.createElement.apply(null,i)}return a.createElement.apply(null,e)}g.displayName="MDXCreateElement"},5864:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>l,frontMatter:()=>h,metadata:()=>c,toc:()=>o});var a=e(7462),r=(e(7294),e(3905));const h={id:"understanding-casbin-detail",title:"Understanding How Casbin Matching Works in Detail",description:"Ch\xednh s\xe1ch Ho\xe0n ti\u1ec1n Trang web Casbin",keywords:["RBAC","ACL"],authors:["aravindarc"]},i=void 0,c={unversionedId:"understanding-casbin-detail",id:"understanding-casbin-detail",title:"Understanding How Casbin Matching Works in Detail",description:"Ch\xednh s\xe1ch Ho\xe0n ti\u1ec1n Trang web Casbin",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/UnderstandingCasbinMatchingInDetail.mdx",sourceDirName:".",slug:"/understanding-casbin-detail",permalink:"/vi/docs/understanding-casbin-detail",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/UnderstandingCasbinMatchingInDetail.mdx",tags:[],version:"current",frontMatter:{id:"understanding-casbin-detail",title:"Understanding How Casbin Matching Works in Detail",description:"Ch\xednh s\xe1ch Ho\xe0n ti\u1ec1n Trang web Casbin",keywords:["RBAC","ACL"],authors:["aravindarc"]},sidebar:"docs",previous:{title:"Tutorials",permalink:"/vi/docs/tutorials"},next:{title:"Model",permalink:"/vi/docs/category/model"}},u={},o=[{value:"Gi\u1edbi thi\u1ec7u v\u1ec1 RBAC",id:"gi\u1edbi-thi\u1ec7u-v\u1ec1-rbac",level:2},{value:"Hi\u1ec3u v\u1ec1 RBAC Ph\xe2n c\u1ea5p c\u1ee7a Azure",id:"hi\u1ec3u-v\u1ec1-rbac-ph\xe2n-c\u1ea5p-c\u1ee7a-azure",level:2},{value:"Casbin ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\xe0o?",id:"casbin-ho\u1ea1t-\u0111\u1ed9ng-nh\u01b0-th\u1ebf-n\xe0o",level:2},{value:"ACL l\xe0 g\xec?",id:"acl-l\xe0-g\xec",level:2},{value:"\u0110\u1ecbnh ngh\u0129a m\xf4 h\xecnh",id:"\u0111\u1ecbnh-ngh\u0129a-m\xf4-h\xecnh",level:3},{value:"B\xe2y gi\u1edd h\xe3y ki\u1ec3m tra m\xf4 h\xecnh tr\xean tr\xecnh so\u1ea1n th\u1ea3o Casbin",id:"b\xe2y-gi\u1edd-h\xe3y-ki\u1ec3m-tra-m\xf4-h\xecnh-tr\xean-tr\xecnh-so\u1ea1n-th\u1ea3o-casbin",level:3},{value:"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan c\u1ee7a m\xf4 h\xecnh ACL, ch\xednh s\xe1ch v\xe0 y\xeau c\u1ea7u kh\u1edbp nhau",id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-c\u1ee7a-m\xf4-h\xecnh-acl-ch\xednh-s\xe1ch-v\xe0-y\xeau-c\u1ea7u-kh\u1edbp-nhau",level:3},{value:"RBAC l\xe0 g\xec?",id:"rbac-l\xe0-g\xec",level:2},{value:"\u0110\u1ecbnh ngh\u0129a m\xf4 h\xecnh",id:"\u0111\u1ecbnh-ngh\u0129a-m\xf4-h\xecnh-1",level:3},{value:"B\xe2y gi\u1edd h\xe3y ki\u1ec3m tra m\xf4 h\xecnh tr\xean tr\xecnh so\u1ea1n th\u1ea3o Casbin",id:"b\xe2y-gi\u1edd-h\xe3y-ki\u1ec3m-tra-m\xf4-h\xecnh-tr\xean-tr\xecnh-so\u1ea1n-th\u1ea3o-casbin-1",level:3},{value:"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan c\u1ee7a m\xf4 h\xecnh RBAC, ch\xednh s\xe1ch v\xe0 vi\u1ec7c so kh\u1edbp y\xeau c\u1ea7u",id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-c\u1ee7a-m\xf4-h\xecnh-rbac-ch\xednh-s\xe1ch-v\xe0-vi\u1ec7c-so-kh\u1edbp-y\xeau-c\u1ea7u",level:3},{value:"Hierarchical RBAC l\xe0 g\xec?",id:"hierarchical-rbac-l\xe0-g\xec",level:2},{value:"\u0110\u1ecbnh ngh\u0129a m\xf4 h\xecnh",id:"\u0111\u1ecbnh-ngh\u0129a-m\xf4-h\xecnh-2",level:3},{value:"B\xe2y gi\u1edd h\xe3y ki\u1ec3m tra m\xf4 h\xecnh tr\xean tr\xecnh so\u1ea1n th\u1ea3o Casbin",id:"b\xe2y-gi\u1edd-h\xe3y-ki\u1ec3m-tra-m\xf4-h\xecnh-tr\xean-tr\xecnh-so\u1ea1n-th\u1ea3o-casbin-2",level:3},{value:"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan c\u1ee7a m\xf4 h\xecnh RBAC, ch\xednh s\xe1ch v\xe0 kh\u1edbp y\xeau c\u1ea7u",id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-c\u1ee7a-m\xf4-h\xecnh-rbac-ch\xednh-s\xe1ch-v\xe0-kh\u1edbp-y\xeau-c\u1ea7u",level:3},{value:"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan kh\u1edbp ch\u1ee7 th\u1ec3",id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-kh\u1edbp-ch\u1ee7-th\u1ec3",level:4},{value:"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan kh\u1edbp h\xe0nh \u0111\u1ed9ng",id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-kh\u1edbp-h\xe0nh-\u0111\u1ed9ng",level:4},{value:"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan kh\u1edbp \u0111\u1ed1i t\u01b0\u1ee3ng",id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-kh\u1edbp-\u0111\u1ed1i-t\u01b0\u1ee3ng",level:4},{value:"K\u1ebft lu\u1eadn",id:"k\u1ebft-lu\u1eadn",level:2}],s={toc:o};function l(n){let{components:t,...h}=n;return(0,r.kt)("wrapper",(0,a.Z)({},s,h,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Trong b\xe0i vi\u1ebft n\xe0y, t\xf4i s\u1ebd gi\u1ea3i th\xedch thi\u1ebft k\u1ebf v\xe0 tri\u1ec3n khai RBAC s\u1eed d\u1ee5ng th\u01b0 vi\u1ec7n ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/"},"Casbin"),". \u0110\u1ed1i v\u1edbi m\u1ed9t n\u1ec1n t\u1ea3ng SaaS x\u1eed l\xfd nhi\u1ec1u c\u1ea5u tr\xfac t\xe0i nguy\xean v\xe0 vai tr\xf2 k\u1ebf th\u1eeba quy\u1ec1n t\u1eeb c\u1ea5p cao h\u01a1n, Casbin cung c\u1ea5p m\u1ed9t gi\u1ea3i ph\xe1p thay th\u1ebf hi\u1ec7u su\u1ea5t cao \u0111\u1ec3 xem x\xe9t."),(0,r.kt)("h2",{id:"gi\u1edbi-thi\u1ec7u-v\u1ec1-rbac"},"Gi\u1edbi thi\u1ec7u v\u1ec1 RBAC"),(0,r.kt)("p",null,"RBAC l\xe0 ph\u01b0\u01a1ng ph\xe1p h\u1ea1n ch\u1ebf truy c\u1eadp v\xe0o t\xe0i nguy\xean d\u1ef1a tr\xean vai tr\xf2 m\xe0 c\xe1 nh\xe2n gi\u1eef. \u0110\u1ec3 hi\u1ec3u r\xf5 h\u01a1n c\xe1ch th\u1ee9c ho\u1ea1t \u0111\u1ed9ng c\u1ee7a RBAC ph\xe2n c\u1ea5p, h\xe3y xem x\xe9t h\u1ec7 th\u1ed1ng RBAC c\u1ee7a Azure trong ph\u1ea7n ti\u1ebfp theo v\xe0 sau \u0111\xf3 th\u1eed tri\u1ec3n khai m\u1ed9t h\u1ec7 th\u1ed1ng t\u01b0\u01a1ng t\u1ef1."),(0,r.kt)("h2",{id:"hi\u1ec3u-v\u1ec1-rbac-ph\xe2n-c\u1ea5p-c\u1ee7a-azure"},"Hi\u1ec3u v\u1ec1 RBAC Ph\xe2n c\u1ea5p c\u1ee7a Azure"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-setup-guide/media/organize-resources/scope-levels.png",alt:"C\u1ea5u tr\xfac ph\xe2n c\u1ea5p Azure"})),(0,r.kt)("p",null,"C\xf3 m\u1ed9t vai tr\xf2 g\u1ecdi l\xe0 ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," cho t\u1ea5t c\u1ea3 c\xe1c t\xe0i nguy\xean trong Azure. Gi\u1ea3 s\u1eed n\u1ebfu t\xf4i \u0111\u01b0\u1ee3c g\xe1n vai tr\xf2 ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," \u1edf c\u1ea5p \u0111\u1ed9 \u0111\u0103ng k\xfd, \u0111i\u1ec1u \u0111\xf3 c\xf3 ngh\u0129a l\xe0 t\xf4i l\xe0 ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," c\u1ee7a t\u1ea5t c\u1ea3 c\xe1c nh\xf3m t\xe0i nguy\xean v\xe0 t\xe0i nguy\xean d\u01b0\u1edbi \u0111\u0103ng k\xfd \u0111\xf3. N\u1ebfu t\xf4i c\xf3 vai tr\xf2 ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," \u1edf c\u1ea5p \u0111\u1ed9 nh\xf3m t\xe0i nguy\xean, th\xec t\xf4i l\xe0 ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," c\u1ee7a t\u1ea5t c\u1ea3 c\xe1c t\xe0i nguy\xean d\u01b0\u1edbi nh\xf3m t\xe0i nguy\xean \u0111\xf3."),(0,r.kt)("p",null,"H\xecnh \u1ea3nh n\xe0y cho th\u1ea5y t\xf4i c\xf3 quy\u1ec1n truy c\u1eadp ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," \u1edf c\u1ea5p \u0111\u1ed9 \u0111\u0103ng k\xfd. ",(0,r.kt)("img",{alt:"Ch\u1ee7 s\u1edf h\u1eefu \u0110\u0103ng k\xfd",src:e(6970).Z,width:"3456",height:"1836"})),(0,r.kt)("p",null,"Khi t\xf4i ki\u1ec3m tra IAM c\u1ee7a m\u1ed9t Nh\xf3m T\xe0i nguy\xean d\u01b0\u1edbi \u0110\u0103ng k\xfd n\xe0y, b\u1ea1n c\xf3 th\u1ec3 th\u1ea5y r\u1eb1ng t\xf4i \u0111\xe3 k\u1ebf th\u1eeba quy\u1ec1n truy c\u1eadp ",(0,r.kt)("strong",{parentName:"p"},"Ch\u1ee7 s\u1edf h\u1eefu")," t\u1eeb \u0111\u0103ng k\xfd. ",(0,r.kt)("img",{alt:"Ch\u1ee7 s\u1edf h\u1eefu Nh\xf3m T\xe0i nguy\xean",src:e(878).Z,width:"3456",height:"1836"})),(0,r.kt)("p",null,"V\u1eady, \u0111\xe2y l\xe0 c\xe1ch RBAC c\u1ee7a Azure c\xf3 c\u1ea5u tr\xfac ph\xe2n c\u1ea5p. H\u1ea7u h\u1ebft ph\u1ea7n m\u1ec1m doanh nghi\u1ec7p s\u1eed d\u1ee5ng RBAC ph\xe2n c\u1ea5p do b\u1ea3n ch\u1ea5t ph\xe2n c\u1ea5p c\u1ee7a c\xe1c m\u1ee9c t\xe0i nguy\xean. Trong h\u01b0\u1edbng d\u1eabn n\xe0y, ch\xfang ta s\u1ebd th\u1eed tri\u1ec3n khai m\u1ed9t h\u1ec7 th\u1ed1ng t\u01b0\u01a1ng t\u1ef1 s\u1eed d\u1ee5ng Casbin."),(0,r.kt)("h2",{id:"casbin-ho\u1ea1t-\u0111\u1ed9ng-nh\u01b0-th\u1ebf-n\xe0o"},"Casbin ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\xe0o?"),(0,r.kt)("p",null,"Tr\u01b0\u1edbc khi \u0111i v\xe0o tri\u1ec3n khai, \u0111i\u1ec1u quan tr\u1ecdng l\xe0 ph\u1ea3i hi\u1ec3u Casbin l\xe0 g\xec v\xe0 n\xf3 ho\u1ea1t \u0111\u1ed9ng \u1edf m\u1ee9c \u0111\u1ed9 cao nh\u01b0 th\u1ebf n\xe0o. S\u1ef1 hi\u1ec3u bi\u1ebft n\xe0y l\xe0 c\u1ea7n thi\u1ebft b\u1edfi v\xec m\u1ed7i h\u1ec7 th\u1ed1ng Ki\u1ec3m so\xe1t truy c\u1eadp d\u1ef1a tr\xean vai tr\xf2 (RBAC) c\xf3 th\u1ec3 kh\xe1c nhau d\u1ef1a tr\xean c\xe1c y\xeau c\u1ea7u c\u1ee5 th\u1ec3. B\u1eb1ng c\xe1ch n\u1eafm b\u1eaft c\xe1ch ho\u1ea1t \u0111\u1ed9ng c\u1ee7a Casbin, ch\xfang ta c\xf3 th\u1ec3 tinh ch\u1ec9nh m\xf4 h\xecnh m\u1ed9t c\xe1ch hi\u1ec7u qu\u1ea3."),(0,r.kt)("h2",{id:"acl-l\xe0-g\xec"},"ACL l\xe0 g\xec?"),(0,r.kt)("p",null,"ACL l\xe0 vi\u1ebft t\u1eaft c\u1ee7a Access Control List. \u0110\xe2y l\xe0 m\u1ed9t ph\u01b0\u01a1ng ph\xe1p m\xe0 ng\u01b0\u1eddi d\xf9ng \u0111\u01b0\u1ee3c \xe1nh x\u1ea1 \u0111\u1ebfn c\xe1c h\xe0nh \u0111\u1ed9ng v\xe0 h\xe0nh \u0111\u1ed9ng \u0111\u1ebfn c\xe1c t\xe0i nguy\xean."),(0,r.kt)("h3",{id:"\u0111\u1ecbnh-ngh\u0129a-m\xf4-h\xecnh"},"\u0110\u1ecbnh ngh\u0129a m\xf4 h\xecnh"),(0,r.kt)("p",null,"H\xe3y xem x\xe9t m\u1ed9t v\xed d\u1ee5 \u0111\u01a1n gi\u1ea3n v\u1ec1 m\xf4 h\xecnh ACL."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[request_definition]\nr = sub, act, obj\n\n[policy_definition]\np = sub, act, obj\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == p.sub && r.obj == p.obj && r.act == p.act\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"request","_","definition")," l\xe0 m\u1eabu truy v\u1ea5n c\u1ee7a h\u1ec7 th\u1ed1ng. V\xed d\u1ee5, m\u1ed9t y\xeau c\u1ea7u ",(0,r.kt)("inlineCode",{parentName:"p"},"alice, write, data1")," c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c hi\u1ec3u l\xe0 \"\u0110\u1ed1i t\u01b0\u1ee3ng Alice c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng 'write' tr\xean \u0111\u1ed1i t\u01b0\u1ee3ng 'data1' kh\xf4ng?\".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"policy","_","definition")," l\xe0 m\u1eabu g\xe1n quy\u1ec1n c\u1ee7a h\u1ec7 th\u1ed1ng. V\xed d\u1ee5, b\u1eb1ng c\xe1ch t\u1ea1o m\u1ed9t ch\xednh s\xe1ch ",(0,r.kt)("inlineCode",{parentName:"p"},"alice, write, data1"),", b\u1ea1n \u0111ang g\xe1n quy\u1ec1n cho \u0111\u1ed1i t\u01b0\u1ee3ng Alice th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng 'write' tr\xean \u0111\u1ed1i t\u01b0\u1ee3ng 'data1'.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"policy","_","effect")," \u0111\u1ecbnh ngh\u0129a hi\u1ec7u \u1ee9ng c\u1ee7a ch\xednh s\xe1ch.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Trong ph\u1ea7n ",(0,r.kt)("strong",{parentName:"p"},"matchers"),", y\xeau c\u1ea7u \u0111\u01b0\u1ee3c so kh\u1edbp v\u1edbi ch\xednh s\xe1ch b\u1eb1ng c\xe1c \u0111i\u1ec1u ki\u1ec7n ",(0,r.kt)("inlineCode",{parentName:"p"},"r.sub == p.sub && r.obj == p.obj && r.act == p.act"),"."))),(0,r.kt)("h3",{id:"b\xe2y-gi\u1edd-h\xe3y-ki\u1ec3m-tra-m\xf4-h\xecnh-tr\xean-tr\xecnh-so\u1ea1n-th\u1ea3o-casbin"},"B\xe2y gi\u1edd h\xe3y ki\u1ec3m tra m\xf4 h\xecnh tr\xean tr\xecnh so\u1ea1n th\u1ea3o Casbin"),(0,r.kt)("p",null,"M\u1edf ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/editor"},"tr\xecnh so\u1ea1n th\u1ea3o")," v\xe0 d\xe1n m\xf4 h\xecnh tr\xean v\xe0o ph\u1ea7n Model editor."),(0,r.kt)("p",null,"D\xe1n ph\u1ea7n sau v\xe0o tr\xecnh so\u1ea1n th\u1ea3o Ch\xednh s\xe1ch:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, read, data1\np, bob, write, data2\n")),(0,r.kt)("p",null,"v\xe0 ph\u1ea7n sau v\xe0o tr\xecnh so\u1ea1n th\u1ea3o Y\xeau c\u1ea7u:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, read, data1\n")),(0,r.kt)("p",null,"K\u1ebft qu\u1ea3 s\u1ebd l\xe0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"true\n")),(0,r.kt)("h3",{id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-c\u1ee7a-m\xf4-h\xecnh-acl-ch\xednh-s\xe1ch-v\xe0-y\xeau-c\u1ea7u-kh\u1edbp-nhau"},"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan c\u1ee7a m\xf4 h\xecnh ACL, ch\xednh s\xe1ch v\xe0 y\xeau c\u1ea7u kh\u1edbp nhau"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"acl",src:e(3353).Z,width:"6968",height:"3096"})),(0,r.kt)("h2",{id:"rbac-l\xe0-g\xec"},"RBAC l\xe0 g\xec?"),(0,r.kt)("p",null,"RBAC l\xe0 vi\u1ebft t\u1eaft c\u1ee7a Role-Based Access Control. Trong RBAC, m\u1ed9t ng\u01b0\u1eddi d\xf9ng \u0111\u01b0\u1ee3c g\xe1n m\u1ed9t vai tr\xf2 cho m\u1ed9t t\xe0i nguy\xean, v\xe0 m\u1ed9t vai tr\xf2 c\xf3 th\u1ec3 ch\u1ee9a c\xe1c h\xe0nh \u0111\u1ed9ng t\xf9y \xfd. Sau \u0111\xf3, y\xeau c\u1ea7u ki\u1ec3m tra xem ng\u01b0\u1eddi d\xf9ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng tr\xean t\xe0i nguy\xean \u0111\xf3 hay kh\xf4ng."),(0,r.kt)("h3",{id:"\u0111\u1ecbnh-ngh\u0129a-m\xf4-h\xecnh-1"},"\u0110\u1ecbnh ngh\u0129a m\xf4 h\xecnh"),(0,r.kt)("p",null,"H\xe3y xem x\xe9t m\u1ed9t m\xf4 h\xecnh RBAC \u0111\u01a1n gi\u1ea3n:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[request_definition]\nr = sub, act, obj\n\n[policy_definition]\np = sub, act, obj\n\n[role_definition]\ng = _, _\ng2 = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == p.sub && g(p.act, r.act) && r.obj == p.obj\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"role","_","definition")," l\xe0 m\u1ed9t tr\xecnh x\xe2y d\u1ef1ng quan h\u1ec7 \u0111\u1ed3 th\u1ecb s\u1eed d\u1ee5ng m\u1ed9t \u0110\u1ed3 th\u1ecb \u0111\u1ec3 so s\xe1nh \u0111\u1ed1i t\u01b0\u1ee3ng y\xeau c\u1ea7u v\u1edbi \u0111\u1ed1i t\u01b0\u1ee3ng ch\xednh s\xe1ch.")),(0,r.kt)("h3",{id:"b\xe2y-gi\u1edd-h\xe3y-ki\u1ec3m-tra-m\xf4-h\xecnh-tr\xean-tr\xecnh-so\u1ea1n-th\u1ea3o-casbin-1"},"B\xe2y gi\u1edd h\xe3y ki\u1ec3m tra m\xf4 h\xecnh tr\xean tr\xecnh so\u1ea1n th\u1ea3o Casbin"),(0,r.kt)("p",null,"M\u1edf ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/editor"},"tr\xecnh so\u1ea1n th\u1ea3o")," v\xe0 d\xe1n m\xf4 h\xecnh tr\xean v\xe0o Tr\xecnh so\u1ea1n th\u1ea3o M\xf4 h\xecnh."),(0,r.kt)("p",null,"D\xe1n n\u1ed9i dung sau v\xe0o Tr\xecnh so\u1ea1n th\u1ea3o Ch\xednh s\xe1ch:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, reader, data1\np, bob, owner, data2\n\ng, reader, read\ng, owner, read\ng, owner, write\n")),(0,r.kt)("p",null,"v\xe0 n\u1ed9i dung sau v\xe0o Tr\xecnh so\u1ea1n th\u1ea3o Y\xeau c\u1ea7u:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, read, data1\nalice, write, data1\nbob, write, data2\nbob, read, data2\nbob, write, data1\n")),(0,r.kt)("p",null,"K\u1ebft qu\u1ea3 s\u1ebd l\xe0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"true\nfalse\ntrue\ntrue\nfalse\n")),(0,r.kt)("h3",{id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-c\u1ee7a-m\xf4-h\xecnh-rbac-ch\xednh-s\xe1ch-v\xe0-vi\u1ec7c-so-kh\u1edbp-y\xeau-c\u1ea7u"},"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan c\u1ee7a m\xf4 h\xecnh RBAC, ch\xednh s\xe1ch v\xe0 vi\u1ec7c so kh\u1edbp y\xeau c\u1ea7u"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rbac",src:e(3859).Z,width:"7016",height:"2844"})),(0,r.kt)("p",null,"B\u1ea3ng ",(0,r.kt)("strong",{parentName:"p"},"g - \xc1nh x\u1ea1 vai tr\xf2 \u0111\u1ebfn h\xe0nh \u0111\u1ed9ng")," c\xf3 m\u1ed9t \xe1nh x\u1ea1 \u0111\u1ed3 th\u1ecb \xe1nh x\u1ea1 vai tr\xf2 \u0111\u1ebfn h\xe0nh \u0111\u1ed9ng. Bi\u1ec3u \u0111\u1ed3 n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c m\xe3 h\xf3a d\u01b0\u1edbi d\u1ea1ng danh s\xe1ch c\xe1c c\u1ea1nh, nh\u01b0 th\u1ec3 hi\u1ec7n trong ch\xednh s\xe1ch, \u0111\xe2y l\xe0 m\u1ed9t c\xe1ch ph\u1ed5 bi\u1ebfn \u0111\u1ec3 bi\u1ec3u di\u1ec5n m\u1ed9t Bi\u1ec3u \u0111\u1ed3:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"g, reader, read\ng, owner, read\ng, owner, write\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"p")," ch\u1ec9 m\u1ed9t ch\xednh s\xe1ch b\xecnh th\u01b0\u1eddng c\xf3 th\u1ec3 so s\xe1nh b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng to\xe1n t\u1eed ",(0,r.kt)("strong",{parentName:"p"},"=="),". ",(0,r.kt)("strong",{parentName:"p"},"g")," l\xe0 m\u1ed9t h\xe0m so s\xe1nh d\u1ef1a tr\xean Bi\u1ec3u \u0111\u1ed3. B\u1ea1n c\xf3 th\u1ec3 \u0111\u1ecbnh ngh\u0129a nhi\u1ec1u b\u1ed9 so s\xe1nh Bi\u1ec3u \u0111\u1ed3 b\u1eb1ng c\xe1ch th\xeam h\u1eadu t\u1ed1 s\u1ed1 nh\u01b0 ",(0,r.kt)("strong",{parentName:"p"},"g, g2, g3, ...")," v\xe0 c\u1ee9 th\u1ebf.")),(0,r.kt)("h2",{id:"hierarchical-rbac-l\xe0-g\xec"},"Hierarchical RBAC l\xe0 g\xec?"),(0,r.kt)("p",null,'Trong Hierarchical RBAC, c\xf3 nhi\u1ec1u h\u01a1n m\u1ed9t lo\u1ea1i t\xe0i nguy\xean v\xe0 c\xf3 m\u1ed1i quan h\u1ec7 k\u1ebf th\u1eeba gi\u1eefa c\xe1c lo\u1ea1i t\xe0i nguy\xean. V\xed d\u1ee5, "subscription" l\xe0 m\u1ed9t lo\u1ea1i v\xe0 "resourceGroup" l\xe0 m\u1ed9t lo\u1ea1i kh\xe1c. M\u1ed9t sub1 thu\u1ed9c lo\u1ea1i ',(0,r.kt)("strong",{parentName:"p"},"Subscription")," c\xf3 th\u1ec3 ch\u1ee9a nhi\u1ec1u resourceGroups (rg1, rg2) thu\u1ed9c lo\u1ea1i ",(0,r.kt)("strong",{parentName:"p"},"ResourceGroup"),"."),(0,r.kt)("p",null,"T\u01b0\u01a1ng t\u1ef1 nh\u01b0 c\u1ea5u tr\xfac h\u1ec7 th\u1ed1ng t\xe0i nguy\xean, s\u1ebd c\xf3 hai lo\u1ea1i vai tr\xf2 v\xe0 h\xe0nh \u0111\u1ed9ng: Vai tr\xf2 v\xe0 h\xe0nh \u0111\u1ed9ng c\u1ee7a Subscription, v\xe0 vai tr\xf2 v\xe0 h\xe0nh \u0111\u1ed9ng c\u1ee7a ResourceGroup. C\xf3 m\u1ed9t m\u1ed1i quan h\u1ec7 t\xf9y \xfd gi\u1eefa vai tr\xf2 Subscription v\xe0 vai tr\xf2 ResourceGroup. V\xed d\u1ee5, h\xe3y xem x\xe9t vai tr\xf2 \u0110\u0103ng k\xfd ",(0,r.kt)("strong",{parentName:"p"},"sub-owner"),". Vai tr\xf2 n\xe0y \u0111\u01b0\u1ee3c k\u1ebf th\u1eeba b\u1edfi vai tr\xf2 Nh\xf3m T\xe0i nguy\xean ",(0,r.kt)("strong",{parentName:"p"},"rg-owner"),", \u0111i\u1ec1u \u0111\xf3 c\xf3 ngh\u0129a l\xe0 n\u1ebfu t\xf4i \u0111\u01b0\u1ee3c g\xe1n vai tr\xf2 ",(0,r.kt)("strong",{parentName:"p"},"sub-owner")," tr\xean \u0110\u0103ng k\xfd ",(0,r.kt)("strong",{parentName:"p"},"sub1"),", th\xec t\xf4i t\u1ef1 \u0111\u1ed9ng c\u0169ng nh\u1eadn \u0111\u01b0\u1ee3c vai tr\xf2 ",(0,r.kt)("strong",{parentName:"p"},"rg-owner")," tr\xean ",(0,r.kt)("strong",{parentName:"p"},"rg1 v\xe0 rg2"),"."),(0,r.kt)("h3",{id:"\u0111\u1ecbnh-ngh\u0129a-m\xf4-h\xecnh-2"},"\u0110\u1ecbnh ngh\u0129a m\xf4 h\xecnh"),(0,r.kt)("p",null,"H\xe3y l\u1ea5y m\u1ed9t v\xed d\u1ee5 \u0111\u01a1n gi\u1ea3n v\u1ec1 m\xf4 h\xecnh ",(0,r.kt)("strong",{parentName:"p"},"Hierarchical RBAC"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[request_definition]\nr = sub, act, obj\n\n[policy_definition]\np = sub, act, obj\n\n[role_definition]\ng = _, _\ng2 = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == p.sub && g(p.act, r.act) && g2(p.obj, r.obj)\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"role","_","definition")," l\xe0 m\u1ed9t tr\xecnh x\xe2y d\u1ef1ng quan h\u1ec7 \u0111\u1ed3 th\u1ecb s\u1eed d\u1ee5ng \u0110\u1ed3 th\u1ecb \u0111\u1ec3 so s\xe1nh \u0111\u1ed1i t\u01b0\u1ee3ng y\xeau c\u1ea7u v\u1edbi \u0111\u1ed1i t\u01b0\u1ee3ng ch\xednh s\xe1ch.")),(0,r.kt)("h3",{id:"b\xe2y-gi\u1edd-h\xe3y-ki\u1ec3m-tra-m\xf4-h\xecnh-tr\xean-tr\xecnh-so\u1ea1n-th\u1ea3o-casbin-2"},"B\xe2y gi\u1edd h\xe3y ki\u1ec3m tra m\xf4 h\xecnh tr\xean tr\xecnh so\u1ea1n th\u1ea3o Casbin"),(0,r.kt)("p",null,"M\u1edf ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/editor"},"tr\xecnh so\u1ea1n th\u1ea3o")," v\xe0 d\xe1n m\xf4 h\xecnh tr\xean v\xe0o Tr\xecnh so\u1ea1n th\u1ea3o M\xf4 h\xecnh."),(0,r.kt)("p",null,"D\xe1n n\u1ed9i dung sau v\xe0o Tr\xecnh so\u1ea1n th\u1ea3o Ch\xednh s\xe1ch:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, sub-reader, sub1\np, bob, rg-owner, rg2\n\n// subscription role to subscription action mapping\ng, sub-reader, sub-read\ng, sub-owner, sub-read\ng, sub-owner, sub-write\n\n// resourceGroup role to resourceGroup action mapping\ng, rg-reader, rg-read\ng, rg-owner, rg-read\ng, rg-owner, rg-write\n\n// subscription role to resourceGroup role mapping\ng, sub-reader, rg-reader\ng, sub-owner, rg-owner\n\n// subscription resource to resourceGroup resource mapping\ng2, sub1, rg1\ng2, sub2, rg2\n")),(0,r.kt)("p",null,"V\xe0 d\xe1n n\u1ed9i dung sau v\xe0o Tr\xecnh so\u1ea1n th\u1ea3o Y\xeau c\u1ea7u:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, rg-read, rg1\n")),(0,r.kt)("p",null,"K\u1ebft qu\u1ea3 s\u1ebd l\xe0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"true\n")),(0,r.kt)("h3",{id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-c\u1ee7a-m\xf4-h\xecnh-rbac-ch\xednh-s\xe1ch-v\xe0-kh\u1edbp-y\xeau-c\u1ea7u"},"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan c\u1ee7a m\xf4 h\xecnh RBAC, ch\xednh s\xe1ch v\xe0 kh\u1edbp y\xeau c\u1ea7u"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac",src:e(4492).Z,width:"7968",height:"4204"})),(0,r.kt)("p",null,"B\u1ea3ng ",(0,r.kt)("strong",{parentName:"p"},"g - \xc1nh x\u1ea1 vai tr\xf2 \u0111\u1ebfn (H\xe0nh \u0111\u1ed9ng, Vai tr\xf2)")," c\xf3 m\u1ed9t bi\u1ec3u \u0111\u1ed3 \xe1nh x\u1ea1 vai tr\xf2 \u0111\u1ebfn \xe1nh x\u1ea1 h\xe0nh \u0111\u1ed9ng, vai tr\xf2. Bi\u1ec3u \u0111\u1ed3 n\xe0y c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c m\xe3 h\xf3a th\xe0nh m\u1ed9t danh s\xe1ch c\xe1c c\u1ea1nh, nh\u01b0 \u0111\u01b0\u1ee3c th\u1ec3 hi\u1ec7n trong ch\xednh s\xe1ch, \u0111\xe2y l\xe0 m\u1ed9t c\xe1ch ph\u1ed5 bi\u1ebfn \u0111\u1ec3 bi\u1ec3u di\u1ec5n m\u1ed9t bi\u1ec3u \u0111\u1ed3:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"// subscription role to subscription action mapping\ng, sub-reader, sub-read\ng, sub-owner, sub-read\ng, sub-owner, sub-write\n\n// resourceGroup role to resourceGroup action mapping\ng, rg-reader, rg-read\ng, rg-owner, rg-read\ng, rg-owner, rg-write\n\n// subscription role to resourceGroup role mapping\ng, sub-reader, rg-reader\ng, sub-owner, rg-owner\n")),(0,r.kt)("p",null,"B\u1ea3ng ",(0,r.kt)("strong",{parentName:"p"},"g2 - \xc1nh x\u1ea1 Sub \u0111\u1ebfn RG")," c\xf3 m\u1ed9t bi\u1ec3u \u0111\u1ed3 \xe1nh x\u1ea1 \u0111\u0103ng k\xfd \u0111\u1ebfn nh\xf3m t\xe0i nguy\xean:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"// subscription resource to resourceGroup resource mapping\ng2, sub1, rg1\ng2, sub2, rg2\n")),(0,r.kt)("h4",{id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-kh\u1edbp-ch\u1ee7-th\u1ec3"},"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan kh\u1edbp ch\u1ee7 th\u1ec3"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac-sub-match",src:e(3541).Z,width:"8176",height:"4336"})),(0,r.kt)("h4",{id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-kh\u1edbp-h\xe0nh-\u0111\u1ed9ng"},"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan kh\u1edbp h\xe0nh \u0111\u1ed9ng"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac-act-match",src:e(8303).Z,width:"7964",height:"4376"})),(0,r.kt)("h4",{id:"bi\u1ec3u-di\u1ec5n-tr\u1ef1c-quan-kh\u1edbp-\u0111\u1ed1i-t\u01b0\u1ee3ng"},"Bi\u1ec3u di\u1ec5n tr\u1ef1c quan kh\u1edbp \u0111\u1ed1i t\u01b0\u1ee3ng"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac-obj-match",src:e(6879).Z,width:"7964",height:"4296"})),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Khi m\u1ed9t y\xeau c\u1ea7u \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn Casbin, qu\xe1 tr\xecnh so kh\u1edbp n\xe0y di\u1ec5n ra cho t\u1ea5t c\u1ea3 c\xe1c ch\xednh s\xe1ch. N\u1ebfu c\xf3 \xedt nh\u1ea5t m\u1ed9t ch\xednh s\xe1ch kh\u1edbp, th\xec k\u1ebft qu\u1ea3 c\u1ee7a y\xeau c\u1ea7u l\xe0 \u0111\xfang. N\u1ebfu kh\xf4ng c\xf3 ch\xednh s\xe1ch n\xe0o kh\u1edbp v\u1edbi y\xeau c\u1ea7u, th\xec k\u1ebft qu\u1ea3 l\xe0 sai.")),(0,r.kt)("h2",{id:"k\u1ebft-lu\u1eadn"},"K\u1ebft lu\u1eadn"),(0,r.kt)("p",null,"Trong h\u01b0\u1edbng d\u1eabn n\xe0y, ch\xfang ta \u0111\xe3 t\xecm hi\u1ec3u v\u1ec1 c\xe1ch c\xe1c m\xf4 h\xecnh \u1ee7y quy\u1ec1n kh\xe1c nhau ho\u1ea1t \u0111\u1ed9ng v\xe0 c\xe1ch ch\xfang c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c m\xf4 h\xecnh h\xf3a b\u1eb1ng Casbin. Trong ph\u1ea7n th\u1ee9 hai c\u1ee7a h\u01b0\u1edbng d\u1eabn n\xe0y, ch\xfang ta s\u1ebd tri\u1ec3n khai \u0111i\u1ec1u n\xe0y trong m\u1ed9t \u1ee9ng d\u1ee5ng Spring Boot Demo v\xe0 b\u1ea3o m\u1eadt c\xe1c API b\u1eb1ng Casbin."))}l.isMDXComponent=!0},3353:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/acl-704097c47b27a1f2235c82f593af469e.png"},8303:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/hrbac-act-match-bbb086158782591771f2df01419dc4b8.png"},6879:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/hrbac-obj-match-aad370d5cbfe1020ec108b9242f8d4bd.png"},3541:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/hrbac-sub-match-55dffd4e5fadb9773658dc90bacbb091.png"},4492:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/hrbac-1350d755e04234a34394996344d2b259.png"},3859:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/rbac-4c8e405408b9e4df554f7cd619eae897.png"},878:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/rg-owner-9c6cd2ae5997a5fba717c445f43130e6.png"},6970:(n,t,e)=>{e.d(t,{Z:()=>a});const a=e.p+"assets/images/subscription-owner-f1a7e1c9c03d7c587ce910ae5e6d8a35.png"}}]);