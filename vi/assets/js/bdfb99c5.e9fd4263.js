"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[3428],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),h=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=h(e.components);return a.createElement(o.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,c=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=h(t),m=r,u=d["".concat(o,".").concat(m)]||d[m]||s[m]||c;return t?a.createElement(u,i(i({ref:n},p),{},{components:t})):a.createElement(u,i({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var c=t.length,i=new Array(c);i[0]=d;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var h=2;h<c;h++)i[h]=t[h];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4349:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>s,frontMatter:()=>c,metadata:()=>l,toc:()=>h});var a=t(7462),r=(t(7294),t(3905));const c={id:"api-overview",title:"API Overview",description:"S\u1eed d\u1ee5ng API c\u1ee7a Casbin",keywords:["API overview","API","API usage"],authors:["hsluoyz"]},i=void 0,l={unversionedId:"api-overview",id:"api-overview",title:"API Overview",description:"S\u1eed d\u1ee5ng API c\u1ee7a Casbin",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/APIOverview.mdx",sourceDirName:".",slug:"/api-overview",permalink:"/vi/docs/api-overview",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/APIOverview.mdx",tags:[],version:"current",frontMatter:{id:"api-overview",title:"API Overview",description:"S\u1eed d\u1ee5ng API c\u1ee7a Casbin",keywords:["API overview","API","API usage"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"API",permalink:"/vi/docs/category/api"},next:{title:"Management API",permalink:"/vi/docs/management-api"}},o={},h=[{value:"Th\u1ef1c thi API",id:"th\u1ef1c-thi-api",level:2},{value:"EnforceEx API",id:"enforceex-api",level:2},{value:"API Qu\u1ea3n l\xfd",id:"api-qu\u1ea3n-l\xfd",level:2},{value:"API L\u1ea5y",id:"api-l\u1ea5y",level:3},{value:"Th\xeam, X\xf3a, C\u1eadp nh\u1eadt API",id:"th\xeam-x\xf3a-c\u1eadp-nh\u1eadt-api",level:3},{value:"API AddEx",id:"api-addex",level:3},{value:"RBAC API",id:"rbac-api",level:2}],p={toc:h};function s(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"T\u1ed5ng quan n\xe0y ch\u1ec9 cho b\u1ea1n c\xe1ch s\u1eed d\u1ee5ng c\xe1c API c\u1ee7a Casbin v\xe0 kh\xf4ng gi\u1ea3i th\xedch c\xe1ch Casbin \u0111\u01b0\u1ee3c c\xe0i \u0111\u1eb7t ho\u1eb7c n\xf3 ho\u1ea1t \u0111\u1ed9ng nh\u01b0 th\u1ebf n\xe0o. B\u1ea1n c\xf3 th\u1ec3 t\xecm th\u1ea5y c\xe1c h\u01b0\u1edbng d\u1eabn \u0111\xf3 t\u1ea1i \u0111\xe2y: ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started"},"C\xe0i \u0111\u1eb7t Casbin")," v\xe0 ",(0,r.kt)("a",{parentName:"p",href:"/docs/how-it-works"},"C\xe1ch Casbin Ho\u1ea1t \u0110\u1ed9ng"),". V\xec v\u1eady, khi b\u1ea1n b\u1eaft \u0111\u1ea7u \u0111\u1ecdc h\u01b0\u1edbng d\u1eabn n\xe0y, ch\xfang t\xf4i gi\u1ea3 \u0111\u1ecbnh r\u1eb1ng b\u1ea1n \u0111\xe3 c\xe0i \u0111\u1eb7t \u0111\u1ea7y \u0111\u1ee7 v\xe0 nh\u1eadp Casbin v\xe0o m\xe3 c\u1ee7a m\xecnh."),(0,r.kt)("h2",{id:"th\u1ef1c-thi-api"},"Th\u1ef1c thi API"),(0,r.kt)("p",null,"H\xe3y b\u1eaft \u0111\u1ea7u v\u1edbi c\xe1c API Th\u1ef1c thi c\u1ee7a Casbin. Ch\xfang ta s\u1ebd t\u1ea3i m\u1ed9t m\xf4 h\xecnh RBAC t\u1eeb ",(0,r.kt)("inlineCode",{parentName:"p"},"model.conf")," v\xe0 t\u1ea3i c\xe1c ch\xednh s\xe1ch t\u1eeb ",(0,r.kt)("inlineCode",{parentName:"p"},"policy.csv"),". B\u1ea1n c\xf3 th\u1ec3 t\xecm hi\u1ec3u v\u1ec1 c\xfa ph\xe1p M\xf4 h\xecnh ",(0,r.kt)("a",{parentName:"p",href:"/docs/syntax-for-models"},"t\u1ea1i \u0111\xe2y"),", v\xe0 ch\xfang t\xf4i s\u1ebd kh\xf4ng th\u1ea3o lu\u1eadn v\u1ec1 n\xf3 trong h\u01b0\u1edbng d\u1eabn n\xe0y. Ch\xfang t\xf4i gi\u1ea3 \u0111\u1ecbnh r\u1eb1ng b\u1ea1n c\xf3 th\u1ec3 hi\u1ec3u c\xe1c t\u1ec7p c\u1ea5u h\xecnh \u0111\u01b0\u1ee3c cung c\u1ea5p d\u01b0\u1edbi \u0111\xe2y:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"model.conf")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"policy.csv")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, admin, data1, read\np, admin, data1, write\np, admin, data2, read\np, admin, data2, write\np, alice, data1, read\np, bob, data2, write\ng, amber, admin\ng, abc, admin\n")),(0,r.kt)("p",null,"Sau khi \u0111\u1ecdc c\xe1c t\u1ec7p c\u1ea5u h\xecnh, h\xe3y \u0111\u1ecdc \u0111o\u1ea1n m\xe3 sau."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// Load information from files.\nenforcer, err := casbin.NewEnforcer("./example/model.conf", "./example/policy.csv")\nif err != nil {\n    log.Fatalf("Error, detail: %s", err)\n}\nok, err := enforcer.Enforce("alice", "data1", "read")\n')),(0,r.kt)("p",null,"\u0110o\u1ea1n m\xe3 n\xe0y t\u1ea3i m\xf4 h\xecnh ki\u1ec3m so\xe1t truy c\u1eadp v\xe0 c\xe1c ch\xednh s\xe1ch t\u1eeb c\xe1c t\u1ec7p c\u1ee5c b\u1ed9. H\xe0m ",(0,r.kt)("inlineCode",{parentName:"p"},"casbin.NewEnforcer()")," s\u1ebd tr\u1ea3 v\u1ec1 m\u1ed9t enforcer. N\xf3 s\u1ebd nh\u1eadn ra hai tham s\u1ed1 c\u1ee7a n\xf3 l\xe0 \u0111\u01b0\u1eddng d\u1eabn t\u1ec7p v\xe0 t\u1ea3i c\xe1c t\u1ec7p t\u1eeb \u0111\xf3. L\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh n\xe0y \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong bi\u1ebfn ",(0,r.kt)("inlineCode",{parentName:"p"},"err"),". \u0110o\u1ea1n m\xe3 n\xe0y s\u1eed d\u1ee5ng b\u1ed9 \u0111i\u1ec1u h\u1ee3p m\u1eb7c \u0111\u1ecbnh \u0111\u1ec3 t\u1ea3i m\xf4 h\xecnh v\xe0 ch\xednh s\xe1ch, v\xe0 t\u1ea5t nhi\xean, b\u1ea1n c\xf3 th\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3 t\u01b0\u01a1ng t\u1ef1 b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng b\u1ed9 \u0111i\u1ec1u h\u1ee3p c\u1ee7a b\xean th\u1ee9 ba."),(0,r.kt)("p",null,"\u0110o\u1ea1n m\xe3 ",(0,r.kt)("inlineCode",{parentName:"p"},'ok, err := enforcer.Enforce("alice", "data1", "read")')," \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 x\xe1c nh\u1eadn quy\u1ec1n truy c\u1eadp. N\u1ebfu Alice c\xf3 th\u1ec3 truy c\u1eadp data1 v\u1edbi thao t\xe1c \u0111\u1ecdc, gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a ",(0,r.kt)("inlineCode",{parentName:"p"},"ok")," s\u1ebd l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"; ng\u01b0\u1ee3c l\u1ea1i, n\xf3 s\u1ebd l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"false"),". Trong v\xed d\u1ee5 n\xe0y, gi\xe1 tr\u1ecb c\u1ee7a ",(0,r.kt)("inlineCode",{parentName:"p"},"ok")," l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,r.kt)("h2",{id:"enforceex-api"},"EnforceEx API"),(0,r.kt)("p",null,"\u0110\xf4i khi b\u1ea1n c\xf3 th\u1ec3 t\u1ef1 h\u1ecfi ch\xednh s\xe1ch n\xe0o \u0111\xe3 cho ph\xe9p y\xeau c\u1ea7u, v\xec v\u1eady ch\xfang t\xf4i \u0111\xe3 chu\u1ea9n b\u1ecb h\xe0m ",(0,r.kt)("inlineCode",{parentName:"p"},"EnforceEx()"),". B\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng n\xf3 nh\u01b0 th\u1ebf n\xe0y:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'ok, reason, err := enforcer.EnforceEx("amber", "data1", "read")\nfmt.Println(ok, reason) // true [admin data1 read]\n')),(0,r.kt)("p",null,"H\xe0m ",(0,r.kt)("inlineCode",{parentName:"p"},"EnforceEx()")," s\u1ebd tr\u1ea3 v\u1ec1 chu\u1ed7i ch\xednh s\xe1ch ch\xednh x\xe1c trong gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 ",(0,r.kt)("inlineCode",{parentName:"p"},"reason"),". Trong v\xed d\u1ee5 n\xe0y, ",(0,r.kt)("inlineCode",{parentName:"p"},"amber")," l\xe0 vai tr\xf2 ",(0,r.kt)("inlineCode",{parentName:"p"},"admin"),", v\xec v\u1eady ch\xednh s\xe1ch ",(0,r.kt)("inlineCode",{parentName:"p"},"p, admin, data1, read")," cho ph\xe9p y\xeau c\u1ea7u n\xe0y tr\u1edf th\xe0nh ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". \u0110\u1ea7u ra c\u1ee7a \u0111o\u1ea1n m\xe3 n\xe0y \u0111\u01b0\u1ee3c th\u1ec3 hi\u1ec7n trong ch\xfa th\xedch."),(0,r.kt)("p",null,"Casbin \u0111\xe3 cung c\u1ea5p nhi\u1ec1u API t\u01b0\u01a1ng t\u1ef1 nh\u01b0 th\u1ebf n\xe0y. Nh\u1eefng API n\xe0y th\xeam m\u1ed9t s\u1ed1 ch\u1ee9c n\u0103ng b\u1ed5 sung v\xe0o c\xe1c ch\u1ee9c n\u0103ng c\u01a1 b\u1ea3n. Ch\xfang bao g\u1ed3m:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"ok, err := enforcer.EnforceWithMatcher(matcher, request)")),(0,r.kt)("p",{parentName:"li"},"H\xe0m n\xe0y s\u1eed d\u1ee5ng m\u1ed9t matcher.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"ok, reason, err := enforcer.EnforceExWithMatcher(matcher, request)")),(0,r.kt)("p",{parentName:"li"},"\u0110\xe2y l\xe0 s\u1ef1 k\u1ebft h\u1ee3p c\u1ee7a ",(0,r.kt)("inlineCode",{parentName:"p"},"EnforceWithMatcher()")," v\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"EnforceEx()"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"boolArray, err := enforcer.BatchEnforce(requests)")),(0,r.kt)("p",{parentName:"li"},"Ch\u1ee9c n\u0103ng n\xe0y cho ph\xe9p m\u1ed9t danh s\xe1ch c\xe1c c\xf4ng vi\u1ec7c v\xe0 tr\u1ea3 v\u1ec1 m\u1ed9t m\u1ea3ng."))),(0,r.kt)("p",null,"\u0110\xe2y l\xe0 m\u1ed9t tr\u01b0\u1eddng h\u1ee3p s\u1eed d\u1ee5ng \u0111\u01a1n gi\u1ea3n c\u1ee7a Casbin. B\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng Casbin \u0111\u1ec3 b\u1eaft \u0111\u1ea7u m\u1ed9t m\xe1y ch\u1ee7 \u1ee7y quy\u1ec1n s\u1eed d\u1ee5ng c\xe1c API n\xe0y. Ch\xfang t\xf4i s\u1ebd ch\u1ec9 cho b\u1ea1n m\u1ed9t s\u1ed1 lo\u1ea1i API kh\xe1c trong c\xe1c \u0111o\u1ea1n v\u0103n sau \u0111\xe2y."),(0,r.kt)("h2",{id:"api-qu\u1ea3n-l\xfd"},"API Qu\u1ea3n l\xfd"),(0,r.kt)("h3",{id:"api-l\u1ea5y"},"API L\u1ea5y"),(0,r.kt)("p",null,"C\xe1c API n\xe0y \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 l\u1ea5y c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ee5 th\u1ec3 trong c\xe1c ch\xednh s\xe1ch. Trong v\xed d\u1ee5 n\xe0y, ch\xfang t\xf4i \u0111ang t\u1ea3i m\u1ed9t enforcer v\xe0 l\u1ea5y m\u1ed9t c\xe1i g\xec \u0111\xf3 t\u1eeb n\xf3."),(0,r.kt)("p",null,"Xin vui l\xf2ng xem x\xe9t \u0111o\u1ea1n m\xe3 sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'enforcer, err := casbin.NewEnforcer("./example/model.conf", "./example/policy.csv")\nif err != nil {\n    fmt.Printf("Error, details: %s\\n", err)\n}\nallSubjects := enforcer.GetAllSubjects()\nfmt.Println(allSubjects)\n')),(0,r.kt)("p",null,"T\u01b0\u01a1ng t\u1ef1 nh\u01b0 v\xed d\u1ee5 tr\u01b0\u1edbc, b\u1ed1n d\xf2ng \u0111\u1ea7u ti\xean \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea3i th\xf4ng tin c\u1ea7n thi\u1ebft t\u1eeb c\xe1c t\u1ec7p c\u1ee5c b\u1ed9. Ch\xfang t\xf4i s\u1ebd kh\xf4ng th\u1ea3o lu\u1eadn v\u1ea5n \u0111\u1ec1 \u0111\xf3 \u1edf \u0111\xe2y th\xeam n\u1eefa."),(0,r.kt)("p",null,"M\xe3 ",(0,r.kt)("inlineCode",{parentName:"p"},"allSubjects := enforcer.GetAllSubjects()")," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c ch\u1ee7 th\u1ec3 trong t\u1ec7p ch\xednh s\xe1ch v\xe0 tr\u1ea3 v\u1ec1 ch\xfang d\u01b0\u1edbi d\u1ea1ng m\u1ed9t m\u1ea3ng. Sau \u0111\xf3, ch\xfang t\xf4i in m\u1ea3ng \u0111\xf3."),(0,r.kt)("p",null,"Th\xf4ng th\u01b0\u1eddng, \u0111\u1ea7u ra c\u1ee7a m\xe3 n\xean l\xe0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"[admin alice bob]\n")),(0,r.kt)("p",null,"B\u1ea1n c\u0169ng c\xf3 th\u1ec3 thay \u0111\u1ed5i h\xe0m ",(0,r.kt)("inlineCode",{parentName:"p"},"GetAllSubjects()")," th\xe0nh ",(0,r.kt)("inlineCode",{parentName:"p"},"GetAllNamedSubjects()")," \u0111\u1ec3 l\u1ea5y danh s\xe1ch c\xe1c ch\u1ee7 th\u1ec3 xu\u1ea5t hi\u1ec7n trong ch\xednh s\xe1ch \u0111\u01b0\u1ee3c \u0111\u1eb7t t\xean hi\u1ec7n t\u1ea1i."),(0,r.kt)("p",null,"T\u01b0\u01a1ng t\u1ef1, ch\xfang t\xf4i \u0111\xe3 chu\u1ea9n b\u1ecb c\xe1c h\xe0m ",(0,r.kt)("inlineCode",{parentName:"p"},"GetAll")," cho ",(0,r.kt)("inlineCode",{parentName:"p"},"Objects, Actions, Roles"),". \u0110\u1ec3 truy c\u1eadp c\xe1c h\xe0m n\xe0y, b\u1ea1n ch\u1ec9 c\u1ea7n thay th\u1ebf t\u1eeb ",(0,r.kt)("inlineCode",{parentName:"p"},"Subject")," trong t\xean h\xe0m b\u1eb1ng danh m\u1ee5c mong mu\u1ed1n."),(0,r.kt)("p",null,"Ngo\xe0i ra, c\xf2n c\xf3 nhi\u1ec1u getter kh\xe1c c\xf3 s\u1eb5n cho c\xe1c ch\xednh s\xe1ch. Ph\u01b0\u01a1ng th\u1ee9c g\u1ecdi v\xe0 gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 t\u01b0\u01a1ng t\u1ef1 nh\u01b0 nh\u1eefng c\xe1i \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1ec1 c\u1eadp \u1edf tr\xean."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"policy = e.GetPolicy()")," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc \u1ee7y quy\u1ec1n trong ch\xednh s\xe1ch."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'filteredPolicy := e.GetFilteredPolicy(0, "alice")')," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc \u1ee7y quy\u1ec1n trong ch\xednh s\xe1ch v\u1edbi c\xe1c b\u1ed9 l\u1ecdc tr\u01b0\u1eddng \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'namedPolicy := e.GetNamedPolicy("p")')," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc \u1ee7y quy\u1ec1n trong ch\xednh s\xe1ch \u0111\u01b0\u1ee3c \u0111\u1eb7t t\xean."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'filteredNamedPolicy = e.GetFilteredNamedPolicy("p", 0, "bob")')," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc \u1ee7y quy\u1ec1n trong ch\xednh s\xe1ch \u0111\u01b0\u1ee3c \u0111\u1eb7t t\xean v\u1edbi c\xe1c b\u1ed9 l\u1ecdc tr\u01b0\u1eddng \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"groupingPolicy := e.GetGroupingPolicy()")," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc th\u1eeba k\u1ebf vai tr\xf2 trong ch\xednh s\xe1ch."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'filteredGroupingPolicy := e.GetFilteredGroupingPolicy(0, "alice")')," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc th\u1eeba k\u1ebf vai tr\xf2 trong ch\xednh s\xe1ch v\u1edbi c\xe1c b\u1ed9 l\u1ecdc tr\u01b0\u1eddng \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'namedGroupingPolicy := e.GetNamedGroupingPolicy("g")')," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc th\u1eeba k\u1ebf vai tr\xf2 trong ch\xednh s\xe1ch."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'namedGroupingPolicy := e.GetFilteredNamedGroupingPolicy("g", 0, "alice")')," l\u1ea5y t\u1ea5t c\u1ea3 c\xe1c quy t\u1eafc th\u1eeba k\u1ebf vai tr\xf2 trong ch\xednh s\xe1ch v\u1edbi c\xe1c b\u1ed9 l\u1ecdc tr\u01b0\u1eddng \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh.")),(0,r.kt)("h3",{id:"th\xeam-x\xf3a-c\u1eadp-nh\u1eadt-api"},"Th\xeam, X\xf3a, C\u1eadp nh\u1eadt API"),(0,r.kt)("p",null,"Casbin cung c\u1ea5p nhi\u1ec1u API \u0111\u1ec3 th\xeam, x\xf3a ho\u1eb7c s\u1eeda \u0111\u1ed5i ch\xednh s\xe1ch m\u1ed9t c\xe1ch linh ho\u1ea1t trong th\u1eddi gian ch\u1ea1y."),(0,r.kt)("p",null,"\u0110o\u1ea1n m\xe3 sau \u0111\xe2y minh h\u1ecda c\xe1ch th\xeam, x\xf3a v\xe0 c\u1eadp nh\u1eadt ch\xednh s\xe1ch, c\u0169ng nh\u01b0 c\xe1ch ki\u1ec3m tra xem m\u1ed9t ch\xednh s\xe1ch c\xf3 t\u1ed3n t\u1ea1i hay kh\xf4ng:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// load information from files\nenforcer, err := casbin.NewEnforcer("./example/model.conf", "./example/policy.csv")\nif err != nil {\n    fmt.Printf("Error, details: %s\\n", err)\n}\n\n// add a policy and use HasPolicy() to confirm\nenforcer.AddPolicy("added_user", "data1", "read")\nhasPolicy := enforcer.HasPolicy("added_user", "data1", "read")\nfmt.Println(hasPolicy) // true, the policy was added successfully\n\n// remove a policy and use HasPolicy() to confirm\nenforcer.RemovePolicy("alice", "data1", "read")\nhasPolicy = enforcer.HasPolicy("alice", "data1", "read")\nfmt.Println(hasPolicy) // false, the policy was removed successfully\n\n// update a policy and use HasPolicy() to confirm\nenforcer.UpdatePolicy([]string{"added_user", "data1", "read"}, []string{"added_user", "data1", "write"})\nhasPolicy = enforcer.HasPolicy("added_user", "data1", "read")\nfmt.Println(hasPolicy) // false, the original policy has expired\nhasPolicy = enforcer.HasPolicy("added_user", "data1", "write")\nfmt.Println(hasPolicy) // true, the new policy is in effect\n')),(0,r.kt)("p",null,"B\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng c\xe1c API n\xe0y, b\u1ea1n c\xf3 th\u1ec3 ch\u1ec9nh s\u1eeda c\xe1c ch\xednh s\xe1ch c\u1ee7a m\xecnh m\u1ed9t c\xe1ch linh ho\u1ea1t. T\u01b0\u01a1ng t\u1ef1, ch\xfang t\xf4i \u0111\xe3 cung c\u1ea5p c\xe1c API t\u01b0\u01a1ng t\u1ef1 cho ",(0,r.kt)("inlineCode",{parentName:"p"},"FilteredPolicy, NamedPolicy, FilteredNamedPolicy, GroupingPolicy, NamedGroupingPolicy, FilteredGroupingPolicy, FilteredNamedGroupingPolicy"),". \u0110\u1ec3 s\u1eed d\u1ee5ng ch\xfang, ch\u1ec9 c\u1ea7n thay th\u1ebf t\u1eeb ",(0,r.kt)("inlineCode",{parentName:"p"},"Policy")," trong t\xean h\xe0m b\u1eb1ng danh m\u1ee5c th\xedch h\u1ee3p."),(0,r.kt)("p",null,"H\u01a1n n\u1eefa, b\u1eb1ng c\xe1ch thay \u0111\u1ed5i c\xe1c tham s\u1ed1 th\xe0nh m\u1ea3ng, b\u1ea1n c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n ch\u1ec9nh s\u1eeda h\xe0ng lo\u1ea1t c\xe1c ch\xednh s\xe1ch c\u1ee7a m\xecnh."),(0,r.kt)("p",null,"V\xed d\u1ee5, h\xe3y xem x\xe9t c\xe1c h\xe0m nh\u01b0 th\u1ebf n\xe0y:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'enforcer.UpdatePolicy([]string{"eve", "data3", "read"}, []string{"eve", "data3", "write"})\n')),(0,r.kt)("p",null,"N\u1ebfu ch\xfang ta thay \u0111\u1ed5i ",(0,r.kt)("inlineCode",{parentName:"p"},"Policy")," th\xe0nh ",(0,r.kt)("inlineCode",{parentName:"p"},"Policies")," v\xe0 s\u1eeda \u0111\u1ed5i c\xe1c tham s\u1ed1 nh\u01b0 sau:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'enforcer.UpdatePolicies([][]string{{"eve", "data3", "read"}, {"jack", "data3", "read"}}, [][]string{{"eve", "data3", "write"}, {"jack", "data3", "write"}})\n')),(0,r.kt)("p",null,"sau \u0111\xf3 ch\xfang ta c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n ch\u1ec9nh s\u1eeda h\xe0ng lo\u1ea1t c\xe1c ch\xednh s\xe1ch n\xe0y."),(0,r.kt)("p",null,"C\xe1c thao t\xe1c t\u01b0\u01a1ng t\u1ef1 c\u0169ng c\xf3 th\u1ec3 \xe1p d\u1ee5ng cho ",(0,r.kt)("inlineCode",{parentName:"p"},"GroupingPolicy, NamedGroupingPolicy"),"."),(0,r.kt)("h3",{id:"api-addex"},"API AddEx"),(0,r.kt)("p",null,"Casbin cung c\u1ea5p d\xe3y API AddEx \u0111\u1ec3 gi\xfap ng\u01b0\u1eddi d\xf9ng th\xeam c\xe1c quy t\u1eafc theo l\xf4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},"AddPoliciesEx(rules [][]string) (bool, error)\nAddNamedPoliciesEx(ptype string, rules [][]string) (bool, error)\nAddGroupingPoliciesEx(rules [][]string) (bool, error)\nAddNamedGroupingPoliciesEx(ptype string, rules [][]string) (bool, error)\nSelfAddPoliciesEx(sec string, ptype string, rules [][]string) (bool, error) \n")),(0,r.kt)("p",null,"S\u1ef1 kh\xe1c bi\u1ec7t gi\u1eefa c\xe1c ph\u01b0\u01a1ng ph\xe1p n\xe0y v\xe0 c\xe1c ph\u01b0\u01a1ng ph\xe1p kh\xf4ng c\xf3 h\u1eadu t\u1ed1 Ex l\xe0 n\u1ebfu m\u1ed9t trong c\xe1c quy t\u1eafc \u0111\xe3 t\u1ed3n t\u1ea1i, ch\xfang s\u1ebd ti\u1ebfp t\u1ee5c ki\u1ec3m tra quy t\u1eafc ti\u1ebfp theo thay v\xec tr\u1ea3 v\u1ec1 false ngay l\u1eadp t\u1ee9c."),(0,r.kt)("p",null,"V\xed d\u1ee5, h\xe3y so s\xe1nh ",(0,r.kt)("inlineCode",{parentName:"p"},"AddPolicies")," v\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"AddPoliciesEx"),"."),(0,r.kt)("p",null,"B\u1ea1n c\xf3 th\u1ec3 ch\u1ea1y v\xe0 quan s\xe1t m\xe3 ngu\u1ed3n sau b\u1eb1ng c\xe1ch sao ch\xe9p n\xf3 v\xe0o b\xe0i ki\u1ec3m tra trong casbin."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'func TestDemo(t *testing.T) {\n    e, err := NewEnforcer("examples/basic_model.conf", "examples/basic_policy.csv")\n    if err != nil {\n        fmt.Printf("Error, details: %s\\n", err)\n    }\n    e.ClearPolicy()\n    e.AddPolicy("user1", "data1", "read")\n    fmt.Println(e.GetPolicy())\n    testGetPolicy(t, e, [][]string{{"user1", "data1", "read"}})\n\n    // policy {"user1", "data1", "read"} now exists\n\n    // Use AddPolicies to add rules in batches\n    ok, _ := e.AddPolicies([][]string{{"user1", "data1", "read"}, {"user2", "data2", "read"}})\n    fmt.Println(e.GetPolicy())\n    // {"user2", "data2", "read"} failed to add because {"user1", "data1", "read"} already exists\n    // AddPolicies returns false and no other policies are checked, even though they may not exist in the existing ruleset\n    // ok == false\n    fmt.Println(ok)\n    testGetPolicy(t, e, [][]string{{"user1", "data1", "read"}})\n\n    // Use AddPoliciesEx to add rules in batches\n    ok, _ = e.AddPoliciesEx([][]string{{"user1", "data1", "read"}, {"user2", "data2", "read"}})\n    fmt.Println(e.GetPolicy())\n    // {"user2", "data2", "read"} is added successfully\n    // because AddPoliciesEx automatically filters the existing {"user1", "data1", "read"}\n    // ok == true\n    fmt.Println(ok)\n    testGetPolicy(t, e, [][]string{{"user1", "data1", "read"}, {"user2", "data2", "read"}})\n}\n')),(0,r.kt)("h2",{id:"rbac-api"},"RBAC API"),(0,r.kt)("p",null,"Casbin cung c\u1ea5p m\u1ed9t s\u1ed1 API cho b\u1ea1n \u0111\u1ec3 s\u1eeda \u0111\u1ed5i m\xf4 h\xecnh v\xe0 ch\xednh s\xe1ch RBAC. N\u1ebfu b\u1ea1n quen thu\u1ed9c v\u1edbi RBAC, b\u1ea1n c\xf3 th\u1ec3 d\u1ec5 d\xe0ng s\u1eed d\u1ee5ng c\xe1c API n\xe0y."),(0,r.kt)("p",null,"\u1ede \u0111\xe2y, ch\xfang t\xf4i ch\u1ec9 ch\u1ec9 cho b\u1ea1n c\xe1ch s\u1eed d\u1ee5ng c\xe1c API RBAC c\u1ee7a Casbin v\xe0 s\u1ebd kh\xf4ng n\xf3i v\u1ec1 RBAC n\xf3i chung. B\u1ea1n c\xf3 th\u1ec3 t\xecm th\xeam chi ti\u1ebft ",(0,r.kt)("a",{parentName:"p",href:"/docs/rbac"},"t\u1ea1i \u0111\xe2y"),"."),(0,r.kt)("p",null,"Ch\xfang t\xf4i s\u1eed d\u1ee5ng m\xe3 ngu\u1ed3n sau \u0111\u1ec3 t\u1ea3i m\xf4 h\xecnh v\xe0 ch\xednh s\xe1ch, gi\u1ed1ng nh\u01b0 tr\u01b0\u1edbc \u0111\xe2y."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'enforcer, err := casbin.NewEnforcer("./example/model.conf", "./example/policy.csv")\nif err != nil {\n    fmt.Printf("Error, details: %s\\n", err)\n}\n')),(0,r.kt)("p",null,"Sau \u0111\xf3, ch\xfang ta c\xf3 th\u1ec3 s\u1eed d\u1ee5ng m\u1ed9t th\u1ec3 hi\u1ec7n c\u1ee7a Enforcer ",(0,r.kt)("inlineCode",{parentName:"p"},"enforcer")," \u0111\u1ec3 truy c\u1eadp c\xe1c API n\xe0y."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'roles, err := enforcer.GetRolesForUser("amber")\nfmt.Println(roles) // [admin]\nusers, err := enforcer.GetUsersForRole("admin")\nfmt.Println(users) // [amber abc]\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GetRolesForUser()")," tr\u1ea3 v\u1ec1 m\u1ed9t m\u1ea3ng ch\u1ee9a t\u1ea5t c\u1ea3 c\xe1c vai tr\xf2 m\xe0 amber c\xf3. Trong v\xed d\u1ee5 n\xe0y, amber ch\u1ec9 c\xf3 m\u1ed9t vai tr\xf2, \u0111\xf3 l\xe0 admin, v\xec v\u1eady m\u1ea3ng ",(0,r.kt)("inlineCode",{parentName:"p"},"roles")," l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"[admin]"),". T\u01b0\u01a1ng t\u1ef1, b\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng ",(0,r.kt)("inlineCode",{parentName:"p"},"GetUsersForRole()")," \u0111\u1ec3 l\u1ea5y danh s\xe1ch ng\u01b0\u1eddi d\xf9ng thu\u1ed9c m\u1ed9t vai tr\xf2. Gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a h\xe0m n\xe0y c\u0169ng l\xe0 m\u1ed9t m\u1ea3ng."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'enforcer.HasRoleForUser("amber", "admin") // true\n')),(0,r.kt)("p",null,"B\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng ",(0,r.kt)("inlineCode",{parentName:"p"},"HasRoleForUser()")," \u0111\u1ec3 x\xe1c nh\u1eadn xem ng\u01b0\u1eddi d\xf9ng c\xf3 thu\u1ed9c vai tr\xf2 \u0111\xf3 hay kh\xf4ng. Trong v\xed d\u1ee5 n\xe0y, amber l\xe0 th\xe0nh vi\xean c\u1ee7a admin, v\xec v\u1eady gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a h\xe0m l\xe0 ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'fmt.Println(enforcer.Enforce("bob", "data2", "write")) // true\nenforcer.DeletePermission("data2", "write")\nfmt.Println(enforcer.Enforce("bob", "data2", "write")) // false\n')),(0,r.kt)("p",null,"B\u1ea1n c\xf3 th\u1ec3 s\u1eed d\u1ee5ng ",(0,r.kt)("inlineCode",{parentName:"p"},"DeletePermission()")," \u0111\u1ec3 x\xf3a m\u1ed9t quy\u1ec1n."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'fmt.Println(enforcer.Enforce("alice", "data1", "read")) // true\nenforcer.DeletePermissionForUser("alice", "data1", "read")\nfmt.Println(enforcer.Enforce("alice", "data1", "read")) // false\n')),(0,r.kt)("p",null,"V\xe0 s\u1eed d\u1ee5ng ",(0,r.kt)("inlineCode",{parentName:"p"},"DeletePermissionForUser()")," \u0111\u1ec3 x\xf3a m\u1ed9t quy\u1ec1n cho m\u1ed9t ng\u01b0\u1eddi d\xf9ng."),(0,r.kt)("p",null,"Casbin c\xf3 nhi\u1ec1u API nh\u01b0 th\u1ebf n\xe0y. C\xe1ch g\u1ecdi v\xe0 gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a ch\xfang c\xf3 c\xf9ng ki\u1ec3u nh\u01b0 c\xe1c API tr\xean. B\u1ea1n c\xf3 th\u1ec3 t\xecm th\u1ea5y c\xe1c API n\xe0y trong ",(0,r.kt)("a",{parentName:"p",href:"/docs/rbac-api"},"t\xe0i li\u1ec7u ti\u1ebfp theo"),"."))}s.isMDXComponent=!0}}]);