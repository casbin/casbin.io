"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[1237],{3910(e,n,i){i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"priority-model","title":"Priority Model","description":"M\xf4 h\xecnh \u01b0u ti\xean c\u1ee7a Casbin \u0111\u1ec3 qu\u1ea3n l\xfd c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean kh\xe1c nhau","source":"@site/i18n/vi/docusaurus-plugin-content-docs/current/PriorityModel.mdx","sourceDirName":".","slug":"/priority-model","permalink":"/vi/docs/priority-model","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx","tags":[],"version":"current","frontMatter":{"id":"priority-model","title":"Priority Model","description":"M\xf4 h\xecnh \u01b0u ti\xean c\u1ee7a Casbin \u0111\u1ec3 qu\u1ea3n l\xfd c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean kh\xe1c nhau","keywords":["priority model"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"OrBAC","permalink":"/vi/docs/orbac"},"next":{"title":"Usage Control (UCON)","permalink":"/vi/docs/ucon"}}');var t=i(4848),a=i(8453);const o={id:"priority-model",title:"Priority Model",description:"M\xf4 h\xecnh \u01b0u ti\xean c\u1ee7a Casbin \u0111\u1ec3 qu\u1ea3n l\xfd c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean kh\xe1c nhau",keywords:["priority model"],authors:["hsluoyz"]},c=void 0,s={},l=[{value:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean Ng\u1ea7m \u0110\u1ecbnh",id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-ng\u1ea7m-\u0111\u1ecbnh",level:2},{value:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean R\xf5 R\xe0ng",id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-r\xf5-r\xe0ng",level:2},{value:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi M\u1ee9c \u0110\u1ed9 \u01afu Ti\xean D\u1ef1a tr\xean Vai Tr\xf2 v\xe0 H\u1ec7 Th\u1ed1ng Ng\u01b0\u1eddi D\xf9ng",id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-m\u1ee9c-\u0111\u1ed9-\u01b0u-ti\xean-d\u1ef1a-tr\xean-vai-tr\xf2-v\xe0-h\u1ec7-th\u1ed1ng-ng\u01b0\u1eddi-d\xf9ng",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Casbin supports priority-based policy loading."}),"\n",(0,t.jsx)(n.h2,{id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-ng\u1ea7m-\u0111\u1ecbnh",children:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean Ng\u1ea7m \u0110\u1ecbnh"}),"\n",(0,t.jsx)(n.p,{children:"Priority is determined by policy order: policies appearing first have higher priority."}),"\n",(0,t.jsx)(n.p,{children:"model.conf:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[policy_effect]\ne = priority(p.eft) || deny\n"})}),"\n",(0,t.jsx)(n.h2,{id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-r\xf5-r\xe0ng",children:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean R\xf5 R\xe0ng"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["See also: ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin/issues/550",children:"casbin#550"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Lower priority values indicate higher priority. Non-numerical priority values are placed last rather than causing errors."}),"\n",(0,t.jsxs)(n.admonition,{title:"Quy \u01b0\u1edbc t\xean token",type:"info",children:[(0,t.jsxs)(n.p,{children:['The standard priority token name in policy definitions is "priority". To use a custom token name, call ',(0,t.jsx)(n.code,{children:"e.SetFieldIndex()"})," after initializing the enforcer and reload policies (see the full example in ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin/pull/1044",children:"TestCustomizedFieldIndex"}),")."]}),(0,t.jsx)(n.p,{children:"model.conf:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[policy_definition]\np = customized_priority, sub, obj, act, eft\n"})}),(0,t.jsx)(n.p,{children:"V\xed d\u1ee5 m\xe3 Golang:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'})})]}),"\n",(0,t.jsxs)(n.p,{children:["Explicit priority currently supports only ",(0,t.jsx)(n.code,{children:"AddPolicy"})," and ",(0,t.jsx)(n.code,{children:"AddPolicies"}),". Avoid changing the priority attribute when calling ",(0,t.jsx)(n.code,{children:"UpdatePolicy"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"model.conf:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,t.jsx)(n.p,{children:"policy.csv"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n"})}),"\n",(0,t.jsx)(n.p,{children:"request:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority\n"})}),"\n",(0,t.jsx)(n.h2,{id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-m\u1ee9c-\u0111\u1ed9-\u01b0u-ti\xean-d\u1ef1a-tr\xean-vai-tr\xf2-v\xe0-h\u1ec7-th\u1ed1ng-ng\u01b0\u1eddi-d\xf9ng",children:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi M\u1ee9c \u0110\u1ed9 \u01afu Ti\xean D\u1ef1a tr\xean Vai Tr\xf2 v\xe0 H\u1ec7 Th\u1ed1ng Ng\u01b0\u1eddi D\xf9ng"}),"\n",(0,t.jsxs)(n.p,{children:["The role and user inheritance structure must form multiple trees, not graphs. When a user has multiple roles, ensure the user occupies the same hierarchy level in each tree. When two roles share the same level, the policy appearing first takes priority. For details, see ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin/pull/833",children:"casbin#833"})," and ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin/issues/831",children:"casbin#831"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"model.conf:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,t.jsx)(n.p,{children:"policy.csv"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber\n"})}),"\n",(0,t.jsx)(n.p,{children:"Y\xeau c\u1ea7u:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n"})}),"\n",(0,t.jsx)(n.p,{children:"The role hierarchy structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n"})}),"\n",(0,t.jsx)(n.p,{children:"Automatic priority assignment:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n"})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>c});var r=i(6540);const t={},a=r.createContext(t);function o(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);