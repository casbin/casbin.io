"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[2831],{6544(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"frontend","title":"Frontend Integration","description":"Casbin.js l\xe0 m\u1ed9t ti\u1ec7n \xedch m\u1edf r\u1ed9ng c\u1ee7a Casbin gi\xfap qu\u1ea3n l\xfd ki\u1ec3m so\xe1t truy c\u1eadp trong \u1ee9ng d\u1ee5ng frontend.","source":"@site/i18n/vi/docusaurus-plugin-content-docs/current/FrontendUsage.mdx","sourceDirName":".","slug":"/frontend","permalink":"/vi/docs/frontend","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/FrontendUsage.mdx","tags":[],"version":"current","frontMatter":{"id":"frontend","title":"Frontend Integration","description":"Casbin.js l\xe0 m\u1ed9t ti\u1ec7n \xedch m\u1edf r\u1ed9ng c\u1ee7a Casbin gi\xfap qu\u1ea3n l\xfd ki\u1ec3m so\xe1t truy c\u1eadp trong \u1ee9ng d\u1ee5ng frontend.","keywords":["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Logging & Error Handling","permalink":"/vi/docs/log-error"},"next":{"title":"Editors & Tools","permalink":"/vi/docs/category/editors--tools"}}');var t=s(4848),r=s(8453);const a={id:"frontend",title:"Frontend Integration",description:"Casbin.js l\xe0 m\u1ed9t ti\u1ec7n \xedch m\u1edf r\u1ed9ng c\u1ee7a Casbin gi\xfap qu\u1ea3n l\xfd ki\u1ec3m so\xe1t truy c\u1eadp trong \u1ee9ng d\u1ee5ng frontend.",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},o=void 0,c={},d=[{value:"C\xe0i \u0111\u1eb7t",id:"c\xe0i-\u0111\u1eb7t",level:2},{value:"Frontend Frameworks",id:"frontend-frameworks",level:2},{value:"B\u1eaft \u0111\u1ea7u nhanh",id:"b\u1eaft-\u0111\u1ea7u-nhanh",level:2},{value:"\u0110\u1ed1i t\u01b0\u1ee3ng Quy\u1ec1n",id:"\u0111\u1ed1i-t\u01b0\u1ee3ng-quy\u1ec1n",level:3},{value:"S\u1eed d\u1ee5ng N\xe2ng cao",id:"s\u1eed-d\u1ee5ng-n\xe2ng-cao",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:3},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:3},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:3},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:3},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:3},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:3},{value:"T\u1ea1i sao l\u1ea1i l\xe0 Casbin.js",id:"t\u1ea1i-sao-l\u1ea1i-l\xe0-casbinjs",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin.js",children:"Casbin.js"})})," brings Casbin-style access control to the frontend: define permissions (e.g. from your backend) and use them to show/hide UI or route users. It works in ",(0,t.jsx)(n.strong,{children:"manual"})," mode (you set permissions in code) or ",(0,t.jsx)(n.strong,{children:"auto"})," mode (fetch from an API)."]}),"\n",(0,t.jsx)(n.h2,{id:"c\xe0i-\u0111\u1eb7t",children:"C\xe0i \u0111\u1eb7t"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install casbin.js\nnpm install casbin\n"})}),"\n",(0,t.jsx)(n.p,{children:"ho\u1eb7c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"yarn add casbin.js\n"})}),"\n",(0,t.jsx)(n.h2,{id:"frontend-frameworks",children:"Frontend Frameworks"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Framework"}),(0,t.jsx)(n.th,{children:"Lo\u1ea1i"}),(0,t.jsx)(n.th,{children:"T\xe1c gi\u1ea3"}),(0,t.jsx)(n.th,{children:"M\xf4 t\u1ea3"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/react-authz",children:"react-authz"})}),(0,t.jsx)(n.td,{children:"React"}),(0,t.jsx)(n.td,{children:"Casbin"}),(0,t.jsx)(n.td,{children:"Wrapper React cho Casbin.js"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/daobeng/rbac-react",children:"rbac-react"})}),(0,t.jsx)(n.td,{children:"React"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/daobeng",children:"@daobeng"})}),(0,t.jsx)(n.td,{children:"Role-Based Access Control in React using Higher-Order Components, CASL, and Casbin.js"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/vue-authz",children:"vue-authz"})}),(0,t.jsx)(n.td,{children:"Vue"}),(0,t.jsx)(n.td,{children:"Casbin"}),(0,t.jsx)(n.td,{children:"Wrapper Vue cho Casbin.js"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/angular-authz",children:"angular-authz"})}),(0,t.jsx)(n.td,{children:"Angular"}),(0,t.jsx)(n.td,{children:"Casbin"}),(0,t.jsx)(n.td,{children:"Wrapper Angular cho Casbin.js"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"b\u1eaft-\u0111\u1ea7u-nhanh",children:"B\u1eaft \u0111\u1ea7u nhanh"}),"\n",(0,t.jsxs)(n.p,{children:["Configure Casbin.js in ",(0,t.jsx)(n.code,{children:"manual"})," mode to set permissions explicitly in your frontend application:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'const casbinjs = require("casbin.js");\n// Set the user\'s permission:\n// He/She can read `data1` and `data2` objects and can write `data1` object\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Run casbin.js in manual mode, which requires you to set the permission manually.\nconst authorizer = new casbinjs.Authorizer("manual");\n'})}),"\n",(0,t.jsxs)(n.p,{children:["With an authorizer instance, you can check permissions using ",(0,t.jsx)(n.code,{children:"authorizer.can()"})," and ",(0,t.jsx)(n.code,{children:"authorizer.cannot()"}),". Both methods return JavaScript Promises (",(0,t.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises",children:"see MDN documentation"}),"), so use the ",(0,t.jsx)(n.code,{children:"then()"})," method to handle results:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'result = authorizer.can("write", "data1");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you can write data1");\n    } else {\n        console.log("you cannot write data1");\n    }\n});\n// output: you can write data1\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"cannot()"})," method works identically:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'result = authorizer.cannot("read", "data2");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you cannot read data2");\n    } else {\n        console.log("you can read data2");\n    }\n});\n// output: you can read data2\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"success"})," parameter indicates that the query completed without errors\u2014not that permission was granted. Similarly, ",(0,t.jsx)(n.code,{children:"failed"})," relates to query errors, not permission denial."]}),"\n",(0,t.jsxs)(n.p,{children:["See our ",(0,t.jsx)(n.a,{href:"https://github.com/casbin-js/examples",children:"React example"})," for practical Casbin.js usage."]}),"\n",(0,t.jsx)(n.h3,{id:"\u0111\u1ed1i-t\u01b0\u1ee3ng-quy\u1ec1n",children:"\u0110\u1ed1i t\u01b0\u1ee3ng Quy\u1ec1n"}),"\n",(0,t.jsx)(n.p,{children:"Casbin.js uses a JSON object to represent visitor permissions. V\xed d\u1ee5:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This object indicates that the visitor can read both ",(0,t.jsx)(n.code,{children:"data1"})," and ",(0,t.jsx)(n.code,{children:"data2"})," objects but can only write to ",(0,t.jsx)(n.code,{children:"data1"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"s\u1eed-d\u1ee5ng-n\xe2ng-cao",children:"S\u1eed d\u1ee5ng N\xe2ng cao"}),"\n",(0,t.jsx)(n.p,{children:"Casbin.js provides seamless integration between frontend access control and your backend Casbin service."}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"auto"})," mode and specify your backend endpoint when initializing the Casbin.js ",(0,t.jsx)(n.code,{children:"Authorizer"}),". It will automatically synchronize permissions and manage frontend authorization state:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const casbinjs = require('casbin.js');\n\n// Set your backend Casbin service URL\nconst authorizer = new casbinjs.Authorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// Set your visitor.\n// Casbin.js will automatically sync the permission with your backend Casbin service.\nauthorizer.setUser(\"Tom\");\n\n// Evaluate the permission\nresult = authorizer.can(\"read\", \"data1\");\nresult.then((success, failed) => {\n    if (success) {\n        // Some frontend procedure ...\n    }\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:["On the backend, expose an endpoint (such as a REST API) that generates the permission object for the frontend. Trong b\u1ed9 \u0111i\u1ec1u khi\u1ec3n API c\u1ee7a b\u1ea1n, g\u1ecdi ",(0,t.jsx)(n.code,{children:"CasbinJsGetUserPermission"})," \u0111\u1ec3 x\xe2y d\u1ef1ng \u0111\u1ed1i t\u01b0\u1ee3ng quy\u1ec1n. This Beego example demonstrates the pattern:"]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"Your endpoint should return a response like:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'})})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // Get the visitor from the GET parameters. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the frontend.\n    c.ServeJSON()\n}\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Currently, ",(0,t.jsx)(n.code,{children:"CasbinJsGetPermissionForUser"})," is available only in Go Casbin and Node-Casbin. To request support in other languages, please ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin.js/issues",children:"open an issue"})," or leave a comment below."]})}),"\n",(0,t.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsx)(n.h3,{id:"setpermissionpermission-string",children:(0,t.jsx)(n.code,{children:"setPermission(permission: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the permission object. Used primarily in ",(0,t.jsx)(n.code,{children:"manual"})," mode."]}),"\n",(0,t.jsx)(n.h3,{id:"setuseruser-string",children:(0,t.jsx)(n.code,{children:"setUser(user: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Sets the visitor identity and refreshes permissions. Used primarily in ",(0,t.jsx)(n.code,{children:"auto"})," mode."]}),"\n",(0,t.jsx)(n.h3,{id:"canaction-string-object-string",children:(0,t.jsx)(n.code,{children:"can(action: string, object: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user can perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.code,{children:"object"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"cannotaction-string-object-string",children:(0,t.jsx)(n.code,{children:"cannot(action: string, object: string)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user ",(0,t.jsx)(n.strong,{children:"cannot"})," perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.code,{children:"object"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"canallaction-string-objects-arrayobject",children:(0,t.jsx)(n.code,{children:"canAll(action: string, objects: Array<object>)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user can perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.strong,{children:"all"})," objects in ",(0,t.jsx)(n.code,{children:"objects"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"cananyaction-string-objects-arrayobject",children:(0,t.jsx)(n.code,{children:"canAny(action: string, objects: Array<object>)"})}),"\n",(0,t.jsxs)(n.p,{children:["Checks if the user can perform ",(0,t.jsx)(n.code,{children:"action"})," on ",(0,t.jsx)(n.strong,{children:"any"})," object in ",(0,t.jsx)(n.code,{children:"objects"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"t\u1ea1i-sao-l\u1ea1i-l\xe0-casbinjs",children:"T\u1ea1i sao l\u1ea1i l\xe0 Casbin.js"}),"\n",(0,t.jsx)(n.p,{children:"People often wonder about the distinction between Node-Casbin and Casbin.js. Node-Casbin is Casbin's core implementation for Node.js environments, typically deployed at the server level for access control management. Casbin.js is a frontend library that helps you apply Casbin authorization logic at the client side for webpage users."}),"\n",(0,t.jsx)(n.p,{children:"Directly building a Casbin service for frontend authorization presents several issues:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"When a client connects, the enforcer initializes and pulls all policies from backend storage. High concurrency can strain databases and consume significant network bandwidth."}),"\n",(0,t.jsx)(n.li,{children:"Exposing all policies to clients creates security vulnerabilities."}),"\n",(0,t.jsx)(n.li,{children:"Tight coupling between client and server complicates development and maintenance."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Casbin.js addresses these challenges by managing user permissions at the client level. The core functionality involves synchronizing the current user's permissions with the backend Casbin service through a fetch operation. Once permission data is retrieved, developers can use Casbin.js interfaces to control user behavior at the frontend."}),"\n",(0,t.jsx)(n.p,{children:"This approach eliminates repeated enforcer initialization, reduces message size between client and server, and avoids exposing all policies at the frontend. Users access only their own permissions without knowledge of the access control model or other users' permissions. Additionally, Casbin.js effectively decouples client and server authorization logic."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);