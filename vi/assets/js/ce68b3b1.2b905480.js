"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[7007],{7050:(n,i,t)=>{t.r(i),t.d(i,{assets:()=>s,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>e,toc:()=>h});const e=JSON.parse('{"id":"rbac-with-domains","title":"RBAC with Domains","description":"S\u1eed d\u1ee5ng RBAC v\u1edbi c\xe1c mi\u1ec1n","source":"@site/i18n/vi/docusaurus-plugin-content-docs/current/RBACWithDomains.mdx","sourceDirName":".","slug":"/rbac-with-domains","permalink":"/vi/docs/rbac-with-domains","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithDomains.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-domains","title":"RBAC with Domains","description":"S\u1eed d\u1ee5ng RBAC v\u1edbi c\xe1c mi\u1ec1n","keywords":["RBAC with domains"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC with Pattern","permalink":"/vi/docs/rbac-with-pattern"},"next":{"title":"RBAC with Conditions","permalink":"/vi/docs/rbac-with-conditions"}}');var c=t(4848),o=t(8453);const a={id:"rbac-with-domains",title:"RBAC with Domains",description:"S\u1eed d\u1ee5ng RBAC v\u1edbi c\xe1c mi\u1ec1n",keywords:["RBAC with domains"],authors:["hsluoyz"]},r=void 0,s={},h=[{value:"\u0110\u1ecbnh ngh\u0129a Vai tr\xf2 v\u1edbi Mi\u1ec1n/Ng\u01b0\u1eddi thu\xea",id:"\u0111\u1ecbnh-ngh\u0129a-vai-tr\xf2-v\u1edbi-mi\u1ec1nng\u01b0\u1eddi-thu\xea",level:2}];function d(n){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.h2,{id:"\u0111\u1ecbnh-ngh\u0129a-vai-tr\xf2-v\u1edbi-mi\u1ec1nng\u01b0\u1eddi-thu\xea",children:"\u0110\u1ecbnh ngh\u0129a Vai tr\xf2 v\u1edbi Mi\u1ec1n/Ng\u01b0\u1eddi thu\xea"}),"\n",(0,c.jsx)(i.p,{children:"C\xe1c vai tr\xf2 RBAC trong Casbin c\xf3 th\u1ec3 l\xe0 to\xe0n c\u1ee5c ho\u1eb7c d\xe0nh ri\xeang cho mi\u1ec1n. C\xe1c vai tr\xf2 d\xe0nh ri\xeang cho mi\u1ec1n c\xf3 ngh\u0129a l\xe0 vai tr\xf2 cho m\u1ed9t ng\u01b0\u1eddi d\xf9ng c\xf3 th\u1ec3 kh\xe1c nhau khi ng\u01b0\u1eddi d\xf9ng \u0111\xf3 \u1edf trong c\xe1c mi\u1ec1n/ng\u01b0\u1eddi thu\xea kh\xe1c nhau. \u0110i\u1ec1u n\xe0y r\u1ea5t h\u1eefu \xedch cho c\xe1c h\u1ec7 th\u1ed1ng l\u1edbn nh\u01b0 m\u1ed9t \u0111\xe1m m\xe2y, v\xec ng\u01b0\u1eddi d\xf9ng th\u01b0\u1eddng \u1edf trong c\xe1c ng\u01b0\u1eddi thu\xea kh\xe1c nhau."}),"\n",(0,c.jsx)(i.p,{children:"\u0110\u1ecbnh ngh\u0129a vai tr\xf2 v\u1edbi c\xe1c mi\u1ec1n/ng\u01b0\u1eddi thu\xea n\xean tr\xf4ng nh\u01b0 th\u1ebf n\xe0y:"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-ini",children:"[role_definition]\ng = _, _, _\n"})}),"\n",(0,c.jsxs)(i.p,{children:["K\xfd t\u1ef1 ",(0,c.jsx)(i.code,{children:"_"})," th\u1ee9 ba \u0111\u1ea1i di\u1ec7n cho t\xean c\u1ee7a mi\u1ec1n/ng\u01b0\u1eddi thu\xea, v\xe0 ph\u1ea7n n\xe0y kh\xf4ng n\xean thay \u0111\u1ed5i. Sau \u0111\xf3, ch\xednh s\xe1ch c\xf3 th\u1ec3 l\xe0:"]}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-csv",children:"p, admin, tenant1, data1, read\np, admin, tenant2, data2, read\n\ng, alice, admin, tenant1\ng, alice, user, tenant2\n"})}),"\n",(0,c.jsxs)(i.p,{children:["\u0110i\u1ec1u n\xe0y c\xf3 ngh\u0129a l\xe0 vai tr\xf2 ",(0,c.jsx)(i.code,{children:"admin"})," trong ",(0,c.jsx)(i.code,{children:"tenant1"})," c\xf3 th\u1ec3 \u0111\u1ecdc ",(0,c.jsx)(i.code,{children:"data1"}),". V\xe0 ",(0,c.jsx)(i.code,{children:"alice"})," c\xf3 vai tr\xf2 ",(0,c.jsx)(i.code,{children:"admin"})," trong ",(0,c.jsx)(i.code,{children:"tenant1"})," v\xe0 vai tr\xf2 ",(0,c.jsx)(i.code,{children:"user"})," trong ",(0,c.jsx)(i.code,{children:"tenant2"}),". Do \u0111\xf3, c\xf4 \u1ea5y c\xf3 th\u1ec3 \u0111\u1ecdc ",(0,c.jsx)(i.code,{children:"data1"}),". Tuy nhi\xean, v\xec ",(0,c.jsx)(i.code,{children:"alice"})," kh\xf4ng ph\u1ea3i l\xe0 ",(0,c.jsx)(i.code,{children:"admin"})," trong ",(0,c.jsx)(i.code,{children:"tenant2"}),", c\xf4 \u1ea5y kh\xf4ng th\u1ec3 \u0111\u1ecdc ",(0,c.jsx)(i.code,{children:"data2"}),"."]}),"\n",(0,c.jsx)(i.p,{children:"Sau \u0111\xf3, trong m\u1ed9t b\u1ed9 so kh\u1edbp, b\u1ea1n n\xean ki\u1ec3m tra vai tr\xf2 nh\u01b0 sau:"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-ini",children:"[matchers]\nm = g(r.sub, p.sub, r.dom) && r.dom == p.dom && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,c.jsxs)(i.p,{children:["Vui l\xf2ng tham kh\u1ea3o ",(0,c.jsx)(i.a,{href:"https://github.com/casbin/casbin/blob/master/examples/rbac_with_domains_model.conf",children:"rbac_with_domains_model.conf"})," \u0111\u1ec3 t\xecm v\xed d\u1ee5."]}),"\n",(0,c.jsxs)(i.admonition,{title:"Quy \u01b0\u1edbc T\xean Token",type:"info",children:[(0,c.jsxs)(i.p,{children:["L\u01b0u \xfd: Theo quy \u01b0\u1edbc, t\xean token mi\u1ec1n trong \u0111\u1ecbnh ngh\u0129a ch\xednh s\xe1ch l\xe0 ",(0,c.jsx)(i.code,{children:"dom"})," v\xe0 \u0111\u01b0\u1ee3c \u0111\u1eb7t l\xe0m token th\u1ee9 hai (",(0,c.jsx)(i.code,{children:"sub, dom, obj, act"}),").\nB\xe2y gi\u1edd, Golang Casbin h\u1ed7 tr\u1ee3 t\xean token t\xf9y ch\u1ec9nh v\xe0 v\u1ecb tr\xed \u0111\u1eb7t. N\u1ebfu t\xean token mi\u1ec1n l\xe0 ",(0,c.jsx)(i.code,{children:"dom"}),", token mi\u1ec1n c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u1eb7t \u1edf v\u1ecb tr\xed t\xf9y \xfd m\xe0 kh\xf4ng c\u1ea7n h\xe0nh \u0111\u1ed9ng b\u1ed5 sung. N\u1ebfu t\xean token mi\u1ec1n kh\xf4ng ph\u1ea3i l\xe0 ",(0,c.jsx)(i.code,{children:"dom"}),", ",(0,c.jsx)(i.code,{children:"e.SetFieldIndex()"})," cho ",(0,c.jsx)(i.code,{children:"constant.DomainIndex"})," n\xean \u0111\u01b0\u1ee3c g\u1ecdi sau khi enforcer \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o, b\u1ea5t k\u1ec3 v\u1ecb tr\xed c\u1ee7a n\xf3."]}),(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-ini",children:"# `domain` here for `dom`\n[policy_definition]\np = sub, obj, act, domain\n"})}),(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-go",children:'e.SetFieldIndex("p", constant.DomainIndex, 3) // index starts from 0\nusers := e.GetAllUsersByDomain("domain1") // without SetFieldIndex, it will raise an error\n'})})]})]})}function l(n={}){const{wrapper:i}={...(0,o.R)(),...n.components};return i?(0,c.jsx)(i,{...n,children:(0,c.jsx)(d,{...n})}):d(n)}},8453:(n,i,t)=>{t.d(i,{R:()=>a,x:()=>r});var e=t(6540);const c={},o=e.createContext(c);function a(n){const i=e.useContext(o);return e.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function r(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:a(n.components),e.createElement(o.Provider,{value:i},n.children)}}}]);