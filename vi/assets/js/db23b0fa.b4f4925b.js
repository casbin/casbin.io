"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[3183],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>h});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)t=a[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=i.createContext({}),p=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return i.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},s=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),s=p(t),h=r,m=s["".concat(l,".").concat(h)]||s[h]||d[h]||a;return t?i.createElement(m,o(o({ref:n},u),{},{components:t})):i.createElement(m,o({ref:n},u))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=s;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var p=2;p<a;p++)o[p]=t[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}s.displayName="MDXCreateElement"},6508:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>c,toc:()=>p});var i=t(7462),r=(t(7294),t(3905));const a={id:"priority-model",title:"Priority Model",description:"M\xf4 h\xecnh \u01b0u ti\xean c\u1ee7a Casbin \u0111\u1ec3 qu\u1ea3n l\xfd c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean kh\xe1c nhau",keywords:["priority model"],authors:["hsluoyz"]},o=void 0,c={unversionedId:"priority-model",id:"priority-model",title:"Priority Model",description:"M\xf4 h\xecnh \u01b0u ti\xean c\u1ee7a Casbin \u0111\u1ec3 qu\u1ea3n l\xfd c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean kh\xe1c nhau",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/PriorityModel.mdx",sourceDirName:".",slug:"/priority-model",permalink:"/vi/docs/priority-model",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx",tags:[],version:"current",frontMatter:{id:"priority-model",title:"Priority Model",description:"M\xf4 h\xecnh \u01b0u ti\xean c\u1ee7a Casbin \u0111\u1ec3 qu\u1ea3n l\xfd c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean kh\xe1c nhau",keywords:["priority model"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"BLP (Bell-LaPadula)",permalink:"/vi/docs/blp"},next:{title:"Super Admin",permalink:"/vi/docs/superadmin"}},l={},p=[{value:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean Ng\u1ea7m \u0110\u1ecbnh",id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-ng\u1ea7m-\u0111\u1ecbnh",level:2},{value:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean R\xf5 R\xe0ng",id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-r\xf5-r\xe0ng",level:2},{value:"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi M\u1ee9c \u0110\u1ed9 \u01afu Ti\xean D\u1ef1a tr\xean Vai Tr\xf2 v\xe0 H\u1ec7 Th\u1ed1ng Ng\u01b0\u1eddi D\xf9ng",id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-m\u1ee9c-\u0111\u1ed9-\u01b0u-ti\xean-d\u1ef1a-tr\xean-vai-tr\xf2-v\xe0-h\u1ec7-th\u1ed1ng-ng\u01b0\u1eddi-d\xf9ng",level:2}],u={toc:p};function d(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Casbin h\u1ed7 tr\u1ee3 t\u1ea3i c\xe1c ch\xednh s\xe1ch v\u1edbi m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean."),(0,r.kt)("h2",{id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-ng\u1ea7m-\u0111\u1ecbnh"},"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean Ng\u1ea7m \u0110\u1ecbnh"),(0,r.kt)("p",null,"N\xf3 kh\xe1 \u0111\u01a1n gi\u1ea3n: th\u1ee9 t\u1ef1 quy\u1ebft \u0111\u1ecbnh m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean; c\xe1c ch\xednh s\xe1ch xu\u1ea5t hi\u1ec7n tr\u01b0\u1edbc c\xf3 m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean cao h\u01a1n."),(0,r.kt)("p",null,"model.conf:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_effect]\ne = priority(p.eft) || deny\n")),(0,r.kt)("h2",{id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-\u01b0u-ti\xean-r\xf5-r\xe0ng"},"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi \u01afu Ti\xean R\xf5 R\xe0ng"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Xem th\xeam: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/550"},"casbin#550"))),(0,r.kt)("p",null,"M\u1ed9t gi\xe1 tr\u1ecb \u01b0u ti\xean nh\u1ecf h\u01a1n ch\u1ec9 ra m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean cao h\u01a1n. N\u1ebfu c\xf3 m\u1ed9t k\xfd t\u1ef1 kh\xf4ng ph\u1ea3i s\u1ed1 trong \u01b0u ti\xean, n\xf3 s\u1ebd \u0111\u01b0\u1ee3c \u0111\u1eb7t \u1edf cu\u1ed1i thay v\xec n\xe9m ra l\u1ed7i."),(0,r.kt)("admonition",{title:"Quy \u01b0\u1edbc t\xean token",type:"info"},(0,r.kt)("p",{parentName:"admonition"},'T\xean token \u01b0u ti\xean th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng trong \u0111\u1ecbnh ngh\u0129a ch\xednh s\xe1ch l\xe0 "priority". \u0110\u1ec3 s\u1eed d\u1ee5ng m\u1ed9t t\xean t\xf9y ch\u1ec9nh, b\u1ea1n c\u1ea7n g\u1ecdi ',(0,r.kt)("inlineCode",{parentName:"p"},"e.SetFieldIndex()")," v\xe0 t\u1ea3i l\u1ea1i c\xe1c ch\xednh s\xe1ch (xem v\xed d\u1ee5 \u0111\u1ea7y \u0111\u1ee7 t\u1ea1i ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/pull/1044"},"TestCustomizedFieldIndex"),")."),(0,r.kt)("p",{parentName:"admonition"},"model.conf:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_definition]\np = customized_priority, sub, obj, act, eft\n")),(0,r.kt)("p",{parentName:"admonition"},"V\xed d\u1ee5 m\xe3 Golang:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'))),(0,r.kt)("p",null,"Hi\u1ec7n t\u1ea1i, \u01b0u ti\xean r\xf5 r\xe0ng ch\u1ec9 h\u1ed7 tr\u1ee3 ",(0,r.kt)("inlineCode",{parentName:"p"},"AddPolicy")," & ",(0,r.kt)("inlineCode",{parentName:"p"},"AddPolicies"),". N\u1ebfu ",(0,r.kt)("inlineCode",{parentName:"p"},"UpdatePolicy")," \u0111\xe3 \u0111\u01b0\u1ee3c g\u1ecdi, b\u1ea1n kh\xf4ng n\xean thay \u0111\u1ed5i thu\u1ed9c t\xednh \u01b0u ti\xean."),(0,r.kt)("p",null,"model.conf:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n")),(0,r.kt)("p",null,"policy.csv"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n")),(0,r.kt)("p",null,"request:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority \n")),(0,r.kt)("h2",{id:"t\u1ea3i-ch\xednh-s\xe1ch-v\u1edbi-m\u1ee9c-\u0111\u1ed9-\u01b0u-ti\xean-d\u1ef1a-tr\xean-vai-tr\xf2-v\xe0-h\u1ec7-th\u1ed1ng-ng\u01b0\u1eddi-d\xf9ng"},"T\u1ea3i Ch\xednh S\xe1ch v\u1edbi M\u1ee9c \u0110\u1ed9 \u01afu Ti\xean D\u1ef1a tr\xean Vai Tr\xf2 v\xe0 H\u1ec7 Th\u1ed1ng Ng\u01b0\u1eddi D\xf9ng"),(0,r.kt)("p",null,"C\u1ea5u tr\xfac k\u1ebf th\u1eeba c\u1ee7a vai tr\xf2 v\xe0 ng\u01b0\u1eddi d\xf9ng ch\u1ec9 c\xf3 th\u1ec3 l\xe0 nhi\u1ec1u c\xe2y, kh\xf4ng ph\u1ea3i \u0111\u1ed3 th\u1ecb. N\u1ebfu m\u1ed9t ng\u01b0\u1eddi d\xf9ng c\xf3 nhi\u1ec1u vai tr\xf2, b\u1ea1n ph\u1ea3i \u0111\u1ea3m b\u1ea3o ng\u01b0\u1eddi d\xf9ng c\xf3 c\xf9ng m\u1ee9c \u0111\u1ed9 trong c\xe1c c\xe2y kh\xe1c nhau. N\u1ebfu hai vai tr\xf2 c\xf3 c\xf9ng m\u1ee9c \u0111\u1ed9, ch\xednh s\xe1ch (li\xean k\u1ebft v\u1edbi vai tr\xf2) xu\u1ea5t hi\u1ec7n s\u1edbm h\u01a1n s\u1ebd c\xf3 m\u1ee9c \u0111\u1ed9 \u01b0u ti\xean cao h\u01a1n. \u0110\u1ec3 bi\u1ebft th\xeam chi ti\u1ebft, c\u0169ng xem ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/pull/833"},"casbin#833")," v\xe0 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/831"},"casbin#831"),"."),(0,r.kt)("p",null,"model.conf:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n")),(0,r.kt)("p",null,"policy.csv"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n")),(0,r.kt)("p",null,"Y\xeau c\u1ea7u:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n")),(0,r.kt)("p",null,"H\u1ec7 th\u1ed1ng ph\xe2n c\u1ea5p vai tr\xf2 tr\xf4ng nh\u01b0 th\u1ebf n\xe0y:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n")),(0,r.kt)("p",null,"M\u1ee9c \u0111\u1ed9 \u01b0u ti\xean t\u1ef1 \u0111\u1ed9ng tr\xf4ng nh\u01b0 th\u1ebf n\xe0y:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n")))}d.isMDXComponent=!0}}]);