"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[3206],{591(n,c,e){e.d(c,{A:()=>t});const t=e.p+"assets/images/editor-tips-2c4bf3155a73f079c976e5ad118d5518.png"},7562(n,c,e){e.r(c),e.d(c,{assets:()=>o,contentTitle:()=>d,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC v\u1edbi M\u1eabu","source":"@site/i18n/vi/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx","sourceDirName":".","slug":"/rbac-with-pattern","permalink":"/vi/docs/rbac-with-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC v\u1edbi M\u1eabu","keywords":["RBAC with pattern","pattern matching"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC","permalink":"/vi/docs/rbac"},"next":{"title":"RBAC with Domains","permalink":"/vi/docs/rbac-with-domains"}}');var i=e(4848),h=e(8453);const s={id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC v\u1edbi M\u1eabu",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},d=void 0,o={},a=[{value:"B\u1eaft \u0111\u1ea7u Nhanh",id:"b\u1eaft-\u0111\u1ea7u-nhanh",level:2},{value:"S\u1eed d\u1ee5ng so kh\u1edbp m\u1eabu trong RBAC",id:"s\u1eed-d\u1ee5ng-so-kh\u1edbp-m\u1eabu-trong-rbac",level:2}];function r(n){const c={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,h.R)(),...n.components},{TabItem:t,Tabs:s}=c;return t||u("TabItem",!0),s||u("Tabs",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.h2,{id:"b\u1eaft-\u0111\u1ea7u-nhanh",children:"B\u1eaft \u0111\u1ea7u Nhanh"}),"\n",(0,i.jsxs)(c.ul,{children:["\n",(0,i.jsxs)(c.li,{children:["\n",(0,i.jsxs)(c.p,{children:["S\u1eed d\u1ee5ng m\u1eabu trong ",(0,i.jsx)(c.code,{children:"g(_, _)"}),"."]}),"\n",(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-go",children:'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,i.jsxs)(c.li,{children:["\n",(0,i.jsx)(c.p,{children:"S\u1eed d\u1ee5ng m\u1eabu v\u1edbi mi\u1ec1n."}),"\n",(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,i.jsxs)(c.li,{children:["\n",(0,i.jsx)(c.p,{children:"S\u1eed d\u1ee5ng t\u1ea5t c\u1ea3 c\xe1c m\u1eabu."}),"\n",(0,i.jsx)(c.p,{children:"Ch\u1ec9 c\u1ea7n k\u1ebft h\u1ee3p vi\u1ec7c s\u1eed d\u1ee5ng c\u1ea3 hai API."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(c.p,{children:["Nh\u01b0 \u0111\xe3 th\u1ea5y \u1edf tr\xean, sau khi b\u1ea1n t\u1ea1o th\u1ef1c th\u1ec3 ",(0,i.jsx)(c.code,{children:"enforcer"}),", b\u1ea1n c\u1ea7n k\xedch ho\u1ea1t so kh\u1edbp m\u1eabu th\xf4ng qua c\xe1c API ",(0,i.jsx)(c.code,{children:"AddNamedMatchingFunc"})," v\xe0 ",(0,i.jsx)(c.code,{children:"AddNamedDomainMatchingFunc"}),", \u0111\u1ec3 x\xe1c \u0111\u1ecbnh c\xe1ch m\u1eabu so kh\u1edbp."]}),"\n",(0,i.jsx)(c.admonition,{type:"note",children:(0,i.jsxs)(c.p,{children:['If you use the online editor, You can add a pattern matching function by clicking the "Add Role Matching" button in the lower left corner.\n',(0,i.jsx)(c.img,{alt:"editor-tips",src:e(591).A+"",width:"690",height:"480"})]})}),"\n",(0,i.jsx)(c.h2,{id:"s\u1eed-d\u1ee5ng-so-kh\u1edbp-m\u1eabu-trong-rbac",children:"S\u1eed d\u1ee5ng so kh\u1edbp m\u1eabu trong RBAC"}),"\n",(0,i.jsxs)(c.p,{children:["\u0110\xf4i khi, b\u1ea1n mu\u1ed1n m\u1ed9t s\u1ed1 ch\u1ee7 th\u1ec3, \u0111\u1ed1i t\u01b0\u1ee3ng, ho\u1eb7c mi\u1ec1n/\u0111\u1ed1i t\xe1c v\u1edbi m\u1ed9t m\u1eabu c\u1ee5 th\u1ec3 \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng c\u1ea5p m\u1ed9t vai tr\xf2. Ch\u1ee9c n\u0103ng so kh\u1edbp m\u1eabu trong RBAC c\xf3 th\u1ec3 gi\xfap b\u1ea1n l\xe0m \u0111i\u1ec1u \u0111\xf3. Ch\u1ee9c n\u0103ng so kh\u1edbp m\u1eabu chia s\u1ebb c\xe1c tham s\u1ed1 v\xe0 gi\xe1 tr\u1ecb tr\u1ea3 v\u1ec1 gi\u1ed1ng nh\u01b0 ch\u1ee9c n\u0103ng so kh\u1edbp tr\u01b0\u1edbc \u0111\xf3 ",(0,i.jsx)(c.a,{href:"/docs/syntax-for-models#functions-in-matchers",children:"matcher function"}),"."]}),"\n",(0,i.jsxs)(c.p,{children:["Ch\u1ee9c n\u0103ng so kh\u1edbp m\u1eabu h\u1ed7 tr\u1ee3 m\u1ed7i tham s\u1ed1 c\u1ee7a ",(0,i.jsx)(c.code,{children:"g"}),"."]}),"\n",(0,i.jsxs)(c.p,{children:["Ch\xfang t\xf4i bi\u1ebft r\u1eb1ng b\xecnh th\u01b0\u1eddng RBAC \u0111\u01b0\u1ee3c bi\u1ec3u di\u1ec5n d\u01b0\u1edbi d\u1ea1ng ",(0,i.jsx)(c.code,{children:"g(r.sub, p.sub)"})," trong m\u1ed9t so kh\u1edbp. Sau \u0111\xf3 ch\xfang ta c\xf3 th\u1ec3 s\u1eed d\u1ee5ng m\u1ed9t ch\xednh s\xe1ch nh\u01b0:"]}),"\n",(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-csv",children:"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n"})}),"\n",(0,i.jsxs)(c.p,{children:["V\xec v\u1eady ",(0,i.jsx)(c.code,{children:"alice"})," c\xf3 th\u1ec3 \u0111\u1ecdc t\u1ea5t c\u1ea3 c\xe1c cu\u1ed1n s\xe1ch bao g\u1ed3m ",(0,i.jsx)(c.code,{children:"book 1"})," v\xe0 ",(0,i.jsx)(c.code,{children:"book 2"}),". Nh\u01b0ng c\xf3 th\u1ec3 c\xf3 h\xe0ng ng\xe0n cu\u1ed1n s\xe1ch, v\xe0 vi\u1ec7c th\xeam t\u1eebng cu\u1ed1n s\xe1ch v\xe0o vai tr\xf2 s\xe1ch (ho\u1eb7c nh\xf3m) v\u1edbi m\u1ed9t quy t\u1eafc ch\xednh s\xe1ch ",(0,i.jsx)(c.code,{children:"g"})," l\xe0 r\u1ea5t t\u1ebb nh\u1ea1t."]}),"\n",(0,i.jsx)(c.p,{children:"Nh\u01b0ng v\u1edbi c\xe1c h\xe0m so kh\u1edbp m\u1eabu, b\u1ea1n c\xf3 th\u1ec3 vi\u1ebft ch\xednh s\xe1ch ch\u1ec9 v\u1edbi m\u1ed9t d\xf2ng:"}),"\n",(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-csv",children:"g, /book/:id, book_group\n"})}),"\n",(0,i.jsxs)(c.p,{children:["Casbin s\u1ebd t\u1ef1 \u0111\u1ed9ng so kh\u1edbp ",(0,i.jsx)(c.code,{children:"/book/1"})," v\xe0 ",(0,i.jsx)(c.code,{children:"/book/2"})," th\xe0nh m\u1eabu ",(0,i.jsx)(c.code,{children:"/book/:id"})," cho b\u1ea1n. B\u1ea1n ch\u1ec9 c\u1ea7n \u0111\u0103ng k\xfd h\xe0m v\u1edbi enforcer nh\u01b0 sau:"]}),"\n",(0,i.jsxs)(s,{groupId:"langs",children:[(0,i.jsx)(t,{value:"Go",label:"Go",default:!0,children:(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-go",children:'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,i.jsx)(t,{value:"Node.js",label:"Node.js",children:(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-typescript",children:"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,i.jsx)(c.p,{children:"Khi s\u1eed d\u1ee5ng h\xe0m so kh\u1edbp m\u1eabu trong c\xe1c mi\u1ec1n/\u0111\u1ed1i t\u01b0\u1ee3ng thu\xea, b\u1ea1n c\u1ea7n \u0111\u0103ng k\xfd h\xe0m v\u1edbi enforcer v\xe0 m\xf4 h\xecnh."}),"\n",(0,i.jsxs)(s,{groupId:"langs",children:[(0,i.jsx)(t,{value:"Go",label:"Go",default:!0,children:(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,i.jsx)(t,{value:"Node.js",label:"Node.js",children:(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-typescript",children:"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,i.jsxs)(c.p,{children:["N\u1ebfu b\u1ea1n kh\xf4ng hi\u1ec3u ",(0,i.jsx)(c.code,{children:"g(r.sub, p.sub, r.dom)"})," c\xf3 ngh\u0129a l\xe0 g\xec, vui l\xf2ng \u0111\u1ecdc ",(0,i.jsx)(c.a,{href:"/docs/rbac-with-domains",children:"rbac-with-domains"}),". T\xf3m l\u1ea1i, ",(0,i.jsx)(c.code,{children:"g(r.sub, p.sub, r.dom)"})," s\u1ebd ki\u1ec3m tra xem ng\u01b0\u1eddi d\xf9ng ",(0,i.jsx)(c.code,{children:"r.sub"})," c\xf3 vai tr\xf2 ",(0,i.jsx)(c.code,{children:"p.sub"})," trong mi\u1ec1n ",(0,i.jsx)(c.code,{children:"r.dom"})," hay kh\xf4ng. V\u1eady \u0111\xe2y l\xe0 c\xe1ch m\xe0 matcher ho\u1ea1t \u0111\u1ed9ng. B\u1ea1n c\xf3 th\u1ec3 xem v\xed d\u1ee5 \u0111\u1ea7y \u0111\u1ee7 ",(0,i.jsx)(c.a,{href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307",children:"t\u1ea1i \u0111\xe2y"}),"."]}),"\n",(0,i.jsx)(c.p,{children:"Ngo\xe0i c\xfa ph\xe1p so kh\u1edbp m\u1eabu nh\u01b0 tr\xean, ch\xfang ta c\u0169ng c\xf3 th\u1ec3 s\u1eed d\u1ee5ng m\u1eabu mi\u1ec1n thu\u1ea7n t\xfay."}),"\n",(0,i.jsxs)(c.p,{children:["V\xed d\u1ee5, n\u1ebfu ch\xfang ta mu\u1ed1n ",(0,i.jsx)(c.code,{children:"sub"})," c\xf3 quy\u1ec1n truy c\u1eadp trong c\xe1c mi\u1ec1n kh\xe1c nhau, ",(0,i.jsx)(c.code,{children:"domain1"})," v\xe0 ",(0,i.jsx)(c.code,{children:"domain2"}),", ch\xfang ta c\xf3 th\u1ec3 s\u1eed d\u1ee5ng m\xf4 h\xecnh mi\u1ec1n thu\u1ea7n t\xfay:"]}),"\n",(0,i.jsx)(c.pre,{children:(0,i.jsx)(c.code,{className:"language-csv",children:"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n"})}),"\n",(0,i.jsxs)(c.p,{children:["Trong v\xed d\u1ee5 n\xe0y, ch\xfang ta mu\u1ed1n ",(0,i.jsx)(c.code,{children:"alice"})," \u0111\u1ecdc v\xe0 ghi ",(0,i.jsx)(c.code,{children:"data"})," trong domain1 v\xe0 domain2. Vi\u1ec7c so kh\u1edbp m\u1eabu ",(0,i.jsx)(c.code,{children:"*"})," trong ",(0,i.jsx)(c.code,{children:"g"})," cho ph\xe9p ",(0,i.jsx)(c.code,{children:"alice"})," c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o hai mi\u1ec1n."]}),"\n",(0,i.jsxs)(c.p,{children:["B\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng so kh\u1edbp m\u1eabu, \u0111\u1eb7c bi\u1ec7t trong c\xe1c t\xecnh hu\u1ed1ng ph\u1ee9c t\u1ea1p h\u01a1n v\xe0 c\xf3 nhi\u1ec1u mi\u1ec1n ho\u1eb7c \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea7n xem x\xe9t, ch\xfang ta c\xf3 th\u1ec3 tri\u1ec3n khai ",(0,i.jsx)(c.code,{children:"policy_definition"})," theo c\xe1ch tinh t\u1ebf v\xe0 hi\u1ec7u qu\u1ea3 h\u01a1n."]})]})}function l(n={}){const{wrapper:c}={...(0,h.R)(),...n.components};return c?(0,i.jsx)(c,{...n,children:(0,i.jsx)(r,{...n})}):r(n)}function u(n,c){throw new Error("Expected "+(c?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453(n,c,e){e.d(c,{R:()=>s,x:()=>d});var t=e(6540);const i={},h=t.createContext(i);function s(n){const c=t.useContext(h);return t.useMemo(function(){return"function"==typeof n?n(c):{...c,...n}},[c,n])}function d(n){let c;return c=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(h.Provider,{value:c},n.children)}}}]);