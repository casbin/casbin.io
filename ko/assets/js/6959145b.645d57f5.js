"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[5159],{4669(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"abac","title":"ABAC","description":"ABAC based on Casbin","source":"@site/docs/ABAC.mdx","sourceDirName":".","slug":"/abac","permalink":"/ko/docs/abac","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/ABAC.mdx","tags":[],"version":"current","frontMatter":{"id":"abac","title":"ABAC","description":"ABAC based on Casbin","keywords":["ABAC","ABAC model"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"ReBAC","permalink":"/ko/docs/rebac"},"next":{"title":"PBAC","permalink":"/ko/docs/pbac"}}');var r=s(4848),t=s(8453);const o={id:"abac",title:"ABAC",description:"ABAC based on Casbin",keywords:["ABAC","ABAC model"],authors:["hsluoyz"]},a=void 0,c={},l=[{value:"Understanding ABAC",id:"understanding-abac",level:2},{value:"Using ABAC",id:"using-abac",level:2},{value:"Handling Complex ABAC Requirements",id:"handling-complex-abac-requirements",level:2}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"understanding-abac",children:"Understanding ABAC"}),"\n",(0,r.jsx)(n.p,{children:"Attribute-Based Access Control (ABAC) determines access permissions by evaluating the properties of subjects, objects, and actions rather than relying solely on identity strings. While standards like XACML provide comprehensive but complex ABAC implementations, Casbin offers a streamlined approach where structs or class instances replace simple string identifiers."}),"\n",(0,r.jsx)(n.p,{children:"Consider this basic ABAC configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == r.obj.Owner\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The matcher references ",(0,r.jsx)(n.code,{children:"r.obj.Owner"}),", expecting ",(0,r.jsx)(n.code,{children:"r.obj"})," to be a structured object rather than a plain string. When you call ",(0,r.jsx)(n.code,{children:"Enforce()"}),", Casbin uses reflection to access the ",(0,r.jsx)(n.code,{children:"Owner"})," field from the provided object."]}),"\n",(0,r.jsx)(n.p,{children:"A typical resource structure looks like this:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"type testResource struct {\n    Name  string\n    Owner string\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"For JSON-based parameter passing, enable JSON request handling:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'e, _ := NewEnforcer("examples/abac_model.conf")\ne.EnableAcceptJsonRequest(true)\n\ndata1Json := `{ "Name": "data1", "Owner": "bob"}`\n\nok, _ := e.Enforce("alice", data1Json, "read")\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Enabling JSON parameter support introduces a performance overhead of approximately 1.1 to 1.5x."})}),"\n",(0,r.jsx)(n.h2,{id:"using-abac",children:"Using ABAC"}),"\n",(0,r.jsx)(n.p,{children:"Implementing ABAC requires two steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Reference attributes within your model matcher."}),"\n",(0,r.jsxs)(n.li,{children:["Supply struct or class instances as arguments to ",(0,r.jsx)(n.code,{children:"Enforce()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["ABAC attribute access works only for request elements (",(0,r.jsx)(n.code,{children:"r.sub"}),", ",(0,r.jsx)(n.code,{children:"r.obj"}),", ",(0,r.jsx)(n.code,{children:"r.act"}),"). Policy elements like ",(0,r.jsx)(n.code,{children:"p.sub"})," cannot use ABAC since policies cannot store struct or class definitions."]})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Matchers can reference multiple attributes simultaneously. Example: ",(0,r.jsx)(n.code,{children:"m = r.sub.Domain == r.obj.Domain"}),"."]})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["When policies require commas that would conflict with CSV parsing, wrap the expression in quotation marks. Example: ",(0,r.jsx)(n.code,{children:'"keyMatch("bob", r.sub.Role)"'})," prevents unwanted splitting."]})}),"\n",(0,r.jsx)(n.h2,{id:"handling-complex-abac-requirements",children:"Handling Complex ABAC Requirements"}),"\n",(0,r.jsxs)(n.p,{children:["While the basic ABAC model works for simple scenarios, real-world authorization often demands intricate rule sets. For such cases, move rule complexity from the model into policies using the ",(0,r.jsx)(n.code,{children:"eval()"})," function."]}),"\n",(0,r.jsxs)(n.p,{children:["Model configuration with ",(0,r.jsx)(n.code,{children:"eval()"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub_rule, obj, act\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = eval(p.sub_rule) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Here, ",(0,r.jsx)(n.code,{children:"p.sub_rule"})," holds expressions that reference request attributes. These expressions are evaluated dynamically during enforcement."]}),"\n",(0,r.jsx)(n.p,{children:"Policy definitions using attribute-based rules:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csv",children:"p, r.sub.Age > 18, /data1, read\np, r.sub.Age < 60, /data2, write\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);