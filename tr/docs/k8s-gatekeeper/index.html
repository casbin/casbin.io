<!doctype html>
<html lang="tr" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-k8s-gatekeeper" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Admission Webhook for K8s | Casbin</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://casbin.org/tr/docs/k8s-gatekeeper"><meta data-rh="true" name="docusaurus_locale" content="tr"><meta data-rh="true" name="docsearch:language" content="tr"><meta data-rh="true" name="Casbin" content="An authorization library that supports access control models like ACL, RBAC, ABAC for Golang, Java, C/C++, Node.js, Javascript, PHP, Laravel, Python, .NET (C#), Delphi, Rust, Ruby, Swift (Objective-C), Lua (OpenResty), Dart (Flutter) and Elixir"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Admission Webhook for K8s | Casbin"><meta data-rh="true" name="description" content="Kubernetes (K8s) RBAC &amp; ABAC Yetkilendirme Ara Yazılımı, Casbin Tabanlı"><meta data-rh="true" property="og:description" content="Kubernetes (K8s) RBAC &amp; ABAC Yetkilendirme Ara Yazılımı, Casbin Tabanlı"><meta data-rh="true" name="keywords" content="k8s-gatekeeper,Kubernetes,K8s"><link data-rh="true" rel="icon" href="/tr/img/favicon.png"><link data-rh="true" rel="canonical" href="https://casbin.org/tr/docs/k8s-gatekeeper"><link data-rh="true" rel="alternate" href="https://casbin.org/docs/k8s-gatekeeper" hreflang="en"><link data-rh="true" rel="alternate" href="https://casbin.org/zh/docs/k8s-gatekeeper" hreflang="zh"><link data-rh="true" rel="alternate" href="https://casbin.org/ko/docs/k8s-gatekeeper" hreflang="ko"><link data-rh="true" rel="alternate" href="https://casbin.org/ru/docs/k8s-gatekeeper" hreflang="ru"><link data-rh="true" rel="alternate" href="https://casbin.org/fr/docs/k8s-gatekeeper" hreflang="fr"><link data-rh="true" rel="alternate" href="https://casbin.org/de/docs/k8s-gatekeeper" hreflang="de"><link data-rh="true" rel="alternate" href="https://casbin.org/ja/docs/k8s-gatekeeper" hreflang="ja"><link data-rh="true" rel="alternate" href="https://casbin.org/es/docs/k8s-gatekeeper" hreflang="es"><link data-rh="true" rel="alternate" href="https://casbin.org/pt/docs/k8s-gatekeeper" hreflang="pt"><link data-rh="true" rel="alternate" href="https://casbin.org/uk/docs/k8s-gatekeeper" hreflang="uk"><link data-rh="true" rel="alternate" href="https://casbin.org/th/docs/k8s-gatekeeper" hreflang="th"><link data-rh="true" rel="alternate" href="https://casbin.org/ar/docs/k8s-gatekeeper" hreflang="ar"><link data-rh="true" rel="alternate" href="https://casbin.org/id/docs/k8s-gatekeeper" hreflang="id"><link data-rh="true" rel="alternate" href="https://casbin.org/vi/docs/k8s-gatekeeper" hreflang="vi"><link data-rh="true" rel="alternate" href="https://casbin.org/it/docs/k8s-gatekeeper" hreflang="it"><link data-rh="true" rel="alternate" href="https://casbin.org/ms/docs/k8s-gatekeeper" hreflang="ms"><link data-rh="true" rel="alternate" href="https://casbin.org/tr/docs/k8s-gatekeeper" hreflang="tr"><link data-rh="true" rel="alternate" href="https://casbin.org/docs/k8s-gatekeeper" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6NBEV8TOFK-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/tr/blog/rss.xml" title="Casbin RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tr/blog/atom.xml" title="Casbin Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8S2TKCJ27X"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8S2TKCJ27X",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Casbin" href="/tr/opensearch.xml">
<script src="/js/isMainland.js" async></script>
<script src="/js/hotjar.js" async></script>
<script src="/js/probe.js" async></script>
<script src="/js/clarity.js" async></script><link rel="stylesheet" href="/tr/assets/css/styles.58ffaf7c.css">
<link rel="preload" href="/tr/assets/js/runtime~main.e7eef27d.js" as="script">
<link rel="preload" href="/tr/assets/js/main.c199ee03.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Ana içeriğe atla"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Ana içeriğe atla</a></div><nav aria-label="Ana" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Gezinme çubuğunu aç/kapa" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tr/"><div class="navbar__logo"><img src="/tr/img/casbin.svg" alt="Site Logom" class="themedImage_ToTc themedImage--light_HNdA"><img src="/tr/img/casbin.svg" alt="Site Logom" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Casbin</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/tr/docs/overview">Belgeler</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tr/docs/get-started">Başlarken</a></li><li><a class="dropdown__link" href="/tr/docs/category/model">Model</a></li><li><a class="dropdown__link" href="/tr/docs/category/storage">Depolama</a></li><li><a class="dropdown__link" href="/tr/docs/adapters">Adaptörler</a></li><li><a class="dropdown__link" href="/tr/docs/category/api">API</a></li><li><a class="dropdown__link" href="/tr/docs/ide-plugins">IDE eklentileri</a></li><li><a class="dropdown__link" href="/tr/docs/contributing">Katkıda Bulunmaya Başla</a></li></ul></div><a class="navbar__item navbar__link" href="/tr/ecosystem">Ekosistem</a><a class="navbar__item navbar__link" href="/tr/blog">Blog</a><a class="navbar__item navbar__link" href="/tr/help">Yardım</a><a class="navbar__item navbar__link" href="/tr/editor">Düzenleyici</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Türkçe</a><ul class="dropdown__menu"><li><a href="/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li><li><a href="/ko/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/ru/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li><li><a href="/fr/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/de/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li><li><a href="/ja/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/es/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/pt/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt">Português</a></li><li><a href="/uk/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="uk">Українська</a></li><li><a href="/th/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="th">ไทย</a></li><li><a href="/ar/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ar">العربية</a></li><li><a href="/id/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="id">Indonesia</a></li><li><a href="/vi/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="vi">Tiếng Việt</a></li><li><a href="/it/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="it">Italiano</a></li><li><a href="/ms/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ms">Melayu</a></li><li><a href="/tr/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="tr">Türkçe</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://crowdin.com/project/casbin-website" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/casbin/casbin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.gg/S5UjpzGZjN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-community-discord"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Ara"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Ara</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Koyu ve açık mod arasında geçiş yapın (şu an açık mod)" aria-label="Koyu ve açık mod arasında geçiş yapın (şu an açık mod)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Başa Dön" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/tr/"><img src="/tr/img/casbin.svg" alt="Site Logom" class="themedImage_ToTc themedImage--light_HNdA"><img src="/tr/img/casbin.svg" alt="Site Logom" class="themedImage_ToTc themedImage--dark_i4oU"><b>Casbin</b></a><nav aria-label="Belgeler Kenar Çubuğu" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/the-basics">Temeller</a><button aria-label="&#x27;Temeller&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/get-started">Get Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/how-it-works">How It Works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/tutorials">Tutorials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/understanding-casbin-detail">Understanding How Casbin Matching Works in Detail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/pdf">PDF İndir</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/model">Model</a><button aria-label="&#x27;Model&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/supported-models">Supported Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/syntax-for-models">Syntax for Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/effector">Effector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/function">Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac">RBAC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-with-pattern">RBAC with Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-with-domains">RBAC with Domains</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-with-conditions">RBAC with Conditions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-96">Casbin RBAC vs. RBAC96</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/abac">ABAC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/priority-model">Priority Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/superadmin">Super Admin</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/storage">Depolama</a><button aria-label="&#x27;Depolama&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/model-storage">Model Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/policy-storage">Policy Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/policy-subset-loading">Policy Subset Loading</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/scenarios">Senaryolar</a><button aria-label="&#x27;Senaryolar&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/data-permissions">Data Permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/menu-permissions">Menu Permissions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/extensions">Uzantılar</a><button aria-label="&#x27;Uzantılar&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/enforcers">Enforcers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/adapters">Adapters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/watchers">Watchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/dispatchers">Dispatchers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/role-managers">Role Managers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/middlewares">Middlewares</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/graphql-middlewares">GraphQL Middlewares</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/cloud-native">Cloud Native Middlewares</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/api">API</a><button aria-label="&#x27;API&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/api-overview">API Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/management-api">Management API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-api">RBAC API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-with-domains-api">RBAC with Domains API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rbac-with-conditions-api">RBAC with Conditions API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/rolemanager-api">RoleManager API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/tr/docs/category/advanced-usage">Gelişmiş Kullanım</a><button aria-label="&#x27;Gelişmiş Kullanım&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/multi-threading">Multi-threading</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/benchmark">Benchmarks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/performance">Performance Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/k8s">Authorization of Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tr/docs/k8s-gatekeeper">Admission Webhook for K8s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/envoy">Authorization of Service Mesh through Envoy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/management">Yönetim</a><button aria-label="&#x27;Yönetim&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/admin-portal">Admin Portal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/service">Casbin Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/log-error">Log &amp; Error Handling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/frontend">Frontend Usage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/editor">Düzenleyici</a><button aria-label="&#x27;Düzenleyici&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/online-editor">Online Editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/ide-plugins">IDE Plugins</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/tr/docs/category/more">Daha Fazla</a><button aria-label="&#x27;Daha Fazla&#x27; kategorisini daraltılabilir kenar çubuğunu aç/kapat" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/adopters">Our Adopters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/contributing">Contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/privacy-policy">Privacy Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/terms-of-service">Terms of Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tr/docs/refund-policy">Refund Policy</a></li></ul></li></ul></nav><button type="button" title="Kenar çubuğunu küçült" aria-label="Kenar çubuğunu küçült" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Ekmek kırıntıları"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Ana Sayfa" class="breadcrumbs__link" href="/tr/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/tr/docs/category/advanced-usage"><span itemprop="name">Gelişmiş Kullanım</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Admission Webhook for K8s</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Bu sayfada</button></div><div class="theme-doc-markdown markdown"><header><h1>Admission Webhook for K8s</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-casbin-k8s-gatekeeper-için-genel-bakış--belgeler">1. Casbin K8s-Gatekeeper için Genel Bakış &amp; Belgeler<a href="#1-casbin-k8s-gatekeeper-için-genel-bakış--belgeler" class="hash-link" aria-label="1. Casbin K8s-Gatekeeper için Genel Bakış &amp; Belgeler başlığına doğrudan bağlantı" title="1. Casbin K8s-Gatekeeper için Genel Bakış &amp; Belgeler başlığına doğrudan bağlantı">​</a></h2><p>Casbin K8s-GateKeeper, Casbin&#x27;i Erişim Kontrol Aracı Olarak Entegre Eden Bir Kubernetes Kabul Webhook&#x27;udur. Casbin K8s-GateKeeper&#x27;ı kullanarak, K8s kaynakları üzerindeki herhangi bir işlemi yetkilendirmek veya engellemek için esnek kurallar oluşturabilirsiniz, HERHANGİ BİR KOD YAZMADAN, sadece Casbin modellerinin ve politikalarının birkaç satırlık bildirimsel yapılandırmaları ile, bu da Casbin ACL (Erişim Kontrol Listesi) dilinin bir parçasıdır.</p><p>Casbin K8s-GateKeeper, Casbin topluluğu tarafından geliştirilmekte ve sürdürülmektedir. Bu projenin deposu şu adreste mevcuttur: <a href="https://github.com/casbin/k8s-gatekeeper" target="_blank" rel="noopener noreferrer">https://github.com/casbin/k8s-gatekeeper</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="01-basit-bir-örnek">0.1 Basit Bir Örnek<a href="#01-basit-bir-örnek" class="hash-link" aria-label="0.1 Basit Bir Örnek başlığına doğrudan bağlantı" title="0.1 Basit Bir Örnek başlığına doğrudan bağlantı">​</a></h3><p>Örneğin, herhangi bir kod yazmanıza gerek yok, ancak bu işlevi gerçekleştirmek için aşağıdaki yapılandırma satırlarını kullanın: &quot;Bazı belirli etiketlere sahip görüntülerin herhangi bir dağıtımda kullanılmasını yasaklamak&quot;:</p><p>Model:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">p</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj,eft</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_effect</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">!some(where (p.eft == deny))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contain(split(accessWithWildcard(${OBJECT}.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1) , p.obj)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And Policy:</p><div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> </span><span class="token value">&quot;1.14.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value">deny</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bunlar, sıradan Casbin ACL dilindedir. Eğer bunlarla ilgili bölümleri zaten okuduysanız, anlamak çok kolay olacaktır.</p><p>Casbin K8s-GateKeeper aşağıdaki avantajlara sahiptir:</p><ul><li>Kullanımı kolaydır. ACL&#x27;nin birkaç satırını yazmak, birçok kod yazmaktan çok daha iyidir.</li><li>Yapılandırmaların sıcak güncellemelerine izin verir. Yapılandırmaları değiştirmek için tüm eklentiyi kapatmanıza gerek yoktur.</li><li>Esnek bir yapıdadır. Herhangi bir K8s kaynağı üzerinde keyfi kurallar oluşturulabilir, bunlar <code>kubectl gatekeeper</code> ile keşfedilebilir.</li><li>K8s kabul webhook&#x27;unun uygulanmasını basitleştirir, ki bu çok karmaşıktır. K8s kabul webhook&#x27;unun ne olduğunu veya onun için kod yazmayı bilmenize gerek yoktur. Tek yapmanız gereken, kısıtlamalar koymak istediğiniz kaynağı bilmek ve ardından Casbin ACL yazmaktır. Herkes K8s&#x27;nin karmaşık olduğunu biliyor, ancak Casbin K8s-Gatekeeper kullanarak zamanınızı koruyabilirsiniz.</li><li>Casbin topluluğu tarafından bakımı yapılmaktadır. Eğer bu eklentiyle ilgili herhangi bir şey kafanızı karıştırıyorsa veya bunu deneyimlerken herhangi bir sorunla karşılaşırsanız, lütfen bizimle iletişime geçmekten çekinmeyin.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-casbin-k8s-gatekeeper-nasıl-çalışır">1.1 Casbin K8s-Gatekeeper Nasıl Çalışır?<a href="#11-casbin-k8s-gatekeeper-nasıl-çalışır" class="hash-link" aria-label="1.1 Casbin K8s-Gatekeeper Nasıl Çalışır? başlığına doğrudan bağlantı" title="1.1 Casbin K8s-Gatekeeper Nasıl Çalışır? başlığına doğrudan bağlantı">​</a></h3><p>K8s-Gatekeeper, K8s için bir kabul webhook&#x27;u olup, yöneticinin istemediği herhangi bir K8s işlemi önlemeye yardımcı olmak için <a href="/tr/docs/overview">Casbin</a> kullanarak kullanıcı tanımlı rastgele erişim kontrol kurallarını uygular.</p><p>Casbin, güçlü ve verimli açık kaynaklı bir erişim kontrol kütüphanesidir. Çeşitli erişim kontrol modellerine dayalı yetkilendirmeyi uygulamak için destek sağlar. Casbin hakkında daha fazla ayrıntı için, <a href="/tr/docs/overview">Genel Bakış</a> bölümüne bakın.</p><p>K8s&#x27;deki kabul webhook&#x27;ları, &#x27;kabul taleplerini&#x27; alan ve bunlarla bir şeyler yapan HTTP geri çağrılarıdır. Özellikle, K8s-Gatekeeper özel bir tür kabul webhook&#x27;udur: &#x27;ValidatingAdmissionWebhook&#x27;, bu kabul talebinin kabul edilip edilmeyeceğine karar verebilir. Kabul talepleriyle ilgili olarak, bunlar K8s&#x27;nin belirli kaynakları üzerinde bir işlemi (örneğin, bir dağıtımın oluşturulması/silinmesi) tanımlayan HTTP istekleridir. Kabul webhook&#x27;ları hakkında daha fazla bilgi için, <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#what-are-admission-webhooks" target="_blank" rel="noopener noreferrer">K8s resmi belgelerine</a> bakın.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-nasıl-çalıştığını-gösteren-bir-örnek">1.2 Nasıl Çalıştığını Gösteren Bir Örnek<a href="#12-nasıl-çalıştığını-gösteren-bir-örnek" class="hash-link" aria-label="1.2 Nasıl Çalıştığını Gösteren Bir Örnek başlığına doğrudan bağlantı" title="1.2 Nasıl Çalıştığını Gösteren Bir Örnek başlığına doğrudan bağlantı">​</a></h3><p>Örneğin, birisi nginx çalıştıran bir pod içeren bir dağıtım oluşturmak istediğinde (kubectl veya K8s istemcileri kullanarak), K8s bir kabul talebi oluşturacaktır, bu (YAML formatına çevrildiğinde) şöyle bir şey olabilir:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bu talep, resimde gösterilen tüm ara yazılımların işleminden geçecektir, K8s-Gatekeeper da dahil. K8s-Gatekeeper, K8s&#x27;in etcd&#x27;sinde saklanan tüm Casbin zorlayıcılarını tespit edebilir, bu zorlayıcılar kullanıcı tarafından (<code>kubectl</code> veya sağladığımız Go istemcisi aracılığıyla) oluşturulur ve sürdürülür. Her zorlayıcı, bir Casbin modeli ve bir Casbin politikası içerir. Kabul talebi, her zorlayıcı tarafından sırayla işlenecek ve sadece tüm zorlayıcıları geçen bir talebin bu K8s-Gatekeeper tarafından kabul edilmesi mümkün olacaktır.</p><p>(Eğer Casbin zorlayıcısı, model veya politikası ne olduğunu anlamıyorsanız, bu belgeye bakın: <a href="/tr/docs/get-started">Başlarken</a>).</p><p>Örneğin, bazı nedenlerden dolayı, yönetici &#x27;nginx:1.14.1&#x27; görüntüsünün görünmesini yasaklamak ve &#x27;nginx:1.3.1&#x27; görüntüsünün görünmesine izin vermek istiyor. Aşağıdaki kuralı ve politikayı içeren bir zorlayıcı oluşturulabilir (Bir zorlayıcının nasıl oluşturulacağını, bu modellerin ve politikaların ne olduğunu ve bunların nasıl yazılacağını sonraki bölümlerde açıklayacağız).</p><p>Model:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">p</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj,eft</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_effect</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">!some(where (p.eft == deny))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Image&quot;)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c">= p.obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Policy:</p><div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> </span><span class="token value">&quot;nginx:1.13.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value">allow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> </span><span class="token value">&quot;nginx:1.14.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value">deny</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Yukarıdaki model ve politika içeren bir zorlayıcı oluşturarak, önceki kabul talebi bu zorlayıcı tarafından reddedilecektir, yani K8s bu dağıtımı oluşturmayacaktır.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-k8s-gatekeeperı-yükle">2 K8s-gatekeeper&#x27;ı Yükle<a href="#2-k8s-gatekeeperı-yükle" class="hash-link" aria-label="2 K8s-gatekeeper&#x27;ı Yükle başlığına doğrudan bağlantı" title="2 K8s-gatekeeper&#x27;ı Yükle başlığına doğrudan bağlantı">​</a></h2><p>K8s-gatekeeper&#x27;ı yüklemek için üç yöntem mevcuttur: Dış webhook, İç webhook ve Helm.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>not</div><div class="admonitionContent_S0QG"><p>Not: Bu yöntemler yalnızca kullanıcıların K8s-gatekeeper&#x27;ı denemeleri için tasarlanmıştır ve güvenli değildir. Eğer üretim ortamında kullanmak istiyorsanız, lütfen yüklemeden önce <a href="#5-advanced-settings">Bölüm 5. Gelişmiş Ayarlar</a> bölümünü okuduğunuzdan ve gerekli değişiklikleri yaptığınızdan emin olun. 2.1 İç Webhook</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="211-adım-1-görüntüyü-oluştur">2.1.1 Adım 1: Görüntüyü Oluştur<a href="#211-adım-1-görüntüyü-oluştur" class="hash-link" aria-label="2.1.1 Adım 1: Görüntüyü Oluştur başlığına doğrudan bağlantı" title="2.1.1 Adım 1: Görüntüyü Oluştur başlığına doğrudan bağlantı">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="i̇ç-webhook-yöntemi-için-webhook-kendisi-kubernetes-içinde-bir-hizmet-olarak-uygulanacaktır">İç webhook yöntemi için, webhook kendisi Kubernetes içinde bir hizmet olarak uygulanacaktır.<a href="#i̇ç-webhook-yöntemi-için-webhook-kendisi-kubernetes-içinde-bir-hizmet-olarak-uygulanacaktır" class="hash-link" aria-label="İç webhook yöntemi için, webhook kendisi Kubernetes içinde bir hizmet olarak uygulanacaktır. başlığına doğrudan bağlantı" title="İç webhook yöntemi için, webhook kendisi Kubernetes içinde bir hizmet olarak uygulanacaktır. başlığına doğrudan bağlantı">​</a></h4><p>İç webhook yöntemi için, webhook kendisi Kubernetes içinde bir servis olarak uygulanacak. Gerekli hizmet ve dağıtımı oluşturmak için bir K8s-gatekeeper görüntüsü oluşturmanız gerekiyor. Kendi görüntünüzü oluşturmak için aşağıdaki komutu çalıştırabilirsiniz:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> build --target webhook -t k8s-gatekeeper </span><span class="token builtin class-name">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bu komut, &#x27;k8s-gatekeeper:latest&#x27; adında yerel bir görüntü oluşturacaktır.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>not</div><div class="admonitionContent_S0QG"><p>Not: Eğer minikube kullanıyorsanız, &#x27;docker build&#x27; komutunu çalıştırmadan önce <code>eval $(minikube -p minikube docker-env)</code> komutunu çalıştırın.</p></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="212-adım-2-k8s-gatekeeper-için-hizmetler-ve-dağıtımları-ayarlayın">2.1.2 Adım 2: K8s-gatekeeper için hizmetler ve dağıtımları ayarlayın<a href="#212-adım-2-k8s-gatekeeper-için-hizmetler-ve-dağıtımları-ayarlayın" class="hash-link" aria-label="2.1.2 Adım 2: K8s-gatekeeper için hizmetler ve dağıtımları ayarlayın başlığına doğrudan bağlantı" title="2.1.2 Adım 2: K8s-gatekeeper için hizmetler ve dağıtımları ayarlayın başlığına doğrudan bağlantı">​</a></h4><p>Aşağıdaki komutları çalıştırın:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/rbac.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/webhook_deployment.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/webhook_internal.yaml </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bu, K8s-gatekeeper&#x27;ı çalıştırmaya başlayacak ve bunu <code>kubectl get pods</code> komutunu çalıştırarak onaylayabilirsiniz.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="213-adım-3-k8s-gatekeeper-için-crd-kaynaklarını-yükleyin">2.1.3 Adım 3: K8s-gatekeeper için CRD Kaynaklarını Yükleyin<a href="#213-adım-3-k8s-gatekeeper-için-crd-kaynaklarını-yükleyin" class="hash-link" aria-label="2.1.3 Adım 3: K8s-gatekeeper için CRD Kaynaklarını Yükleyin başlığına doğrudan bağlantı" title="2.1.3 Adım 3: K8s-gatekeeper için CRD Kaynaklarını Yükleyin başlığına doğrudan bağlantı">​</a></h4><p>Aşağıdaki komutları çalıştırın:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinmodels.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinpolicies.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22-dış-webhook">2.2 Dış webhook<a href="#22-dış-webhook" class="hash-link" aria-label="2.2 Dış webhook başlığına doğrudan bağlantı" title="2.2 Dış webhook başlığına doğrudan bağlantı">​</a></h3><p>Harici webhook yöntemi için, K8s-gatekeeper Kubernetes dışında çalışacak ve Kubernetes, K8s-gatekeeper&#x27;a normal bir web sitesine erişir gibi erişecektir. Kubernetes, admission webhook&#x27;un HTTPS olması zorunluluğunu taşımaktadır. K8s-gatekeeper&#x27;ı denemek amacıyla, bir dizi sertifika ve özel anahtar sağladık (bu güvenli değildir). Kendi sertifikanızı kullanmayı tercih ederseniz, sertifika ve özel anahtarı ayarlama talimatları için <a href="#5-advanced-settings">Bölüm 5. Gelişmiş Ayarlar</a> bölümüne bakın. Sağladığımız sertifika &#x27;webhook.domain.local&#x27; için düzenlenmiştir.</p><p>Bu nedenle, ana bilgisayarı (ör. /etc/hosts) değiştirin ve &#x27;webhook.domain.local&#x27;ı K8s-gatekeeper&#x27;ın çalıştığı IP adresine yönlendirin. Ardından aşağıdaki komutu çalıştırın:</p><p>2.3 Helm aracılığıyla K8s-gatekeeper&#x27;ı yükleme</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go mod vendor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go run cmd/webhook/main.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinmodels.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinpolicies.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/webhook_external.yaml </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="231-adım-1-görüntüyü-oluşturma">2.3.1 Adım 1: Görüntüyü oluşturma<a href="#231-adım-1-görüntüyü-oluşturma" class="hash-link" aria-label="2.3.1 Adım 1: Görüntüyü oluşturma başlığına doğrudan bağlantı" title="2.3.1 Adım 1: Görüntüyü oluşturma başlığına doğrudan bağlantı">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="231-adım-1-görüntüyü-oluşturun">2.3.1 Adım 1: Görüntüyü oluşturun<a href="#231-adım-1-görüntüyü-oluşturun" class="hash-link" aria-label="2.3.1 Adım 1: Görüntüyü oluşturun başlığına doğrudan bağlantı" title="2.3.1 Adım 1: Görüntüyü oluşturun başlığına doğrudan bağlantı">​</a></h4><p>Lütfen <a href="#211-step-1-build-the-image">Bölüm 2.1.1</a> bölümüne bakın.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="232-helm-kurulumu">2.3.2 Helm kurulumu<a href="#232-helm-kurulumu" class="hash-link" aria-label="2.3.2 Helm kurulumu başlığına doğrudan bağlantı" title="2.3.2 Helm kurulumu başlığına doğrudan bağlantı">​</a></h4><p>Komutu çalıştırın: <code>helm install k8sgatekeeper ./k8sgatekeeper</code>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-k8s-gatekeeperi-deneyin">3. K8s-gatekeeper&#x27;i deneyin<a href="#3-k8s-gatekeeperi-deneyin" class="hash-link" aria-label="3. K8s-gatekeeper&#x27;i deneyin başlığına doğrudan bağlantı" title="3. K8s-gatekeeper&#x27;i deneyin başlığına doğrudan bağlantı">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-casbin-model-ve-politika-oluşturma">3.1 Casbin Model ve Politika Oluşturma<a href="#31-casbin-model-ve-politika-oluşturma" class="hash-link" aria-label="3.1 Casbin Model ve Politika Oluşturma başlığına doğrudan bağlantı" title="3.1 Casbin Model ve Politika Oluşturma başlığına doğrudan bağlantı">​</a></h3><p>Bir model ve politika oluşturmak için iki yönteminiz var: kubectl aracılığıyla veya sağladığımız go-client aracılığıyla.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="311-casbin-model-ve-politikayı-kubectl-ile-oluşturmagüncelleme">3.1.1 Casbin Model ve Politikayı kubectl ile Oluşturma/Güncelleme<a href="#311-casbin-model-ve-politikayı-kubectl-ile-oluşturmagüncelleme" class="hash-link" aria-label="3.1.1 Casbin Model ve Politikayı kubectl ile Oluşturma/Güncelleme başlığına doğrudan bağlantı" title="3.1.1 Casbin Model ve Politikayı kubectl ile Oluşturma/Güncelleme başlığına doğrudan bağlantı">​</a></h4><p>K8s-gatekeeper&#x27;de, Casbin modeli &#x27;CasbinModel&#x27; adında bir CRD kaynağında saklanır. Tanımı <code>config/auth.casbin.org_casbinmodels.yaml</code> dosyasında bulunmaktadır.</p><p><code>example/allowed_repo/model.yaml</code> içinde örnekler bulunmaktadır. Aşağıdaki alanlara dikkat edin:</p><ul><li>metadata.name: modelin adı. Bu ad, bu modele ilişkin CasbinPolicy nesnesinin adıyla aynı olmalıdır, böylece K8s-gatekeeper onları eşleştirebilir ve bir uygulayıcı oluşturabilir.</li><li>spec.enable: bu alan &quot;false&quot; olarak ayarlanırsa, bu model (ve bu modele ilişkin CasbinPolicy nesnesi) göz ardı edilecektir.</li><li>spec.modelText: bir Casbin modelinin model metnini içeren bir dizedir.</li></ul><p>Casbin Politikası, tanımı <code>config/auth.casbin.org_casbinpolicies.yaml</code> dosyasında bulunan &#x27;CasbinPolicy&#x27; adlı başka bir CRD kaynağında saklanır.</p><p><code>example/allowed_repo/policy.yaml</code> içinde örnekler bulunmaktadır. Aşağıdaki alanlara dikkat edin:</p><ul><li>metadata.name: politika adı. Bu isim, bu politikayla ilişkili olan CasbinModel nesnesinin adıyla aynı olmalıdır, böylece K8s-gatekeeper onları eşleştirebilir ve bir uygulayıcı oluşturabilir.</li><li>spec.policyItem: Bir Casbin modelinin politikalı metnini içeren bir dizedir.</li></ul><p>Kendi CasbinModel ve CasbinPolicy dosyalarınızı oluşturduktan sonra, onları uygulamak için aşağıdaki komutu kullanın:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">filename</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bir CasbinModel ve CasbinPolicy çifti oluşturulduktan sonra, K8s-gatekeeper bunu 5 saniye içinde tespit edebilir.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="312-casbin-model-ve-politikasını-sağladığımız-go-client-üzerinden-oluşturmagüncelleme">3.1.2 Casbin Model ve Politikasını sağladığımız go-client üzerinden Oluşturma/Güncelleme<a href="#312-casbin-model-ve-politikasını-sağladığımız-go-client-üzerinden-oluşturmagüncelleme" class="hash-link" aria-label="3.1.2 Casbin Model ve Politikasını sağladığımız go-client üzerinden Oluşturma/Güncelleme başlığına doğrudan bağlantı" title="3.1.2 Casbin Model ve Politikasını sağladığımız go-client üzerinden Oluşturma/Güncelleme başlığına doğrudan bağlantı">​</a></h4><p>Şirketiniz için otomatik bir bulut platformu oluştururken olduğu gibi, K8s kümesinin bir düğümünde doğrudan komutları çalıştırmak için kabuğu kullanmanın uygun olmayabileceği durumlar olabileceğini anlıyoruz. Bu nedenle, CasbinModel ve CasbinPolicy&#x27;yi oluşturmak ve sürdürmek için bir go-client geliştirdik.</p><p>go-client kütüphanesi <code>pkg/client</code> dizininde bulunmaktadır.</p><p><code>client.go</code> dosyasında, bir istemci oluşturmak için bir fonksiyon sağlıyoruz.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewK8sGateKeeperClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">externalClient </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">K8sGateKeeperClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>externalClient</code> parametresi, K8s-gatekeeper&#x27;ın K8s kümesi içinde çalışıp çalışmadığını belirler.</p><p><code>model.go</code> dosyasında, CasbinModel&#x27;i oluşturmak, silmek ve değiştirmek için çeşitli fonksiyonlar sunuyoruz. Bu arayüzlerin nasıl kullanılacağını <code>model_test.go</code> dosyasında öğrenebilirsiniz.</p><p><code>policy.go</code> dosyasında, CasbiPolicy&#x27;i oluşturmak, silmek ve değiştirmek için çeşitli fonksiyonlar sunuyoruz. Bu arayüzlerin nasıl kullanılacağını <code>policy_test.go</code> dosyasında öğrenebilirsiniz.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="312-k8s-gatekeeperın-çalışıp-çalışmadığını-deneyin">3.1.2 K8s-gatekeeper&#x27;ın Çalışıp Çalışmadığını Deneyin<a href="#312-k8s-gatekeeperın-çalışıp-çalışmadığını-deneyin" class="hash-link" aria-label="3.1.2 K8s-gatekeeper&#x27;ın Çalışıp Çalışmadığını Deneyin başlığına doğrudan bağlantı" title="3.1.2 K8s-gatekeeper&#x27;ın Çalışıp Çalışmadığını Deneyin başlığına doğrudan bağlantı">​</a></h3><p>Varsayalım ki <code>example/allowed_repo</code> içinde tam olarak model ve politikayı oluşturdunuz. Şimdi, aşağıdaki komutu deneyin:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f example/allowed_repo/testcase/reject_1.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>K8s&#x27;nin bu isteği reddedeceğini ve bu isteğin reddedilme nedeni olarak webhook&#x27;u belirteceğini göreceksiniz. Ancak, <code>example/allowed_repo/testcase/approve_2.yaml</code> uygulamayı denerseniz, kabul edilecektir.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-k8s-gatekeeper-ile-model-ve-politika-nasıl-yazılır">4. K8s-gatekeeper ile Model ve Politika Nasıl Yazılır<a href="#4-k8s-gatekeeper-ile-model-ve-politika-nasıl-yazılır" class="hash-link" aria-label="4. K8s-gatekeeper ile Model ve Politika Nasıl Yazılır başlığına doğrudan bağlantı" title="4. K8s-gatekeeper ile Model ve Politika Nasıl Yazılır başlığına doğrudan bağlantı">​</a></h2><p>Öncelikle, Casbin Modelleri ve Politikalarının temel grameriyle ilgili bilginiz olduğundan emin olun. Eğer değilseniz, lütfen önce <a href="/tr/docs/get-started">Başlarken</a> bölümünü okuyun. Bu bölümde, Casbin Modelleri ve Politikalarının ne olduğunu zaten anladığınızı varsayıyoruz.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="41-modelin-i̇stek-tanımı">4.1 Modelin İstek Tanımı<a href="#41-modelin-i̇stek-tanımı" class="hash-link" aria-label="4.1 Modelin İstek Tanımı başlığına doğrudan bağlantı" title="4.1 Modelin İstek Tanımı başlığına doğrudan bağlantı">​</a></h3><p>K8s-gatekeeper bir isteği yetkilendirirken, girdi her zaman bir nesnedir: Kabul İsteğinin Go nesnesi. Bu, zorlayıcının her zaman şu şekilde kullanılacağı anlamına gelir:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> enforcer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Enforce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">admission</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>burada <code>admission</code>, K8s&#x27;nin resmi go api&#x27;si <code>&quot;k8s.io/api/admission/v1&quot;</code> tarafından tanımlanan bir <code>AdmissionReview</code> nesnesidir. Bu yapının tanımını bu depoda bulabilirsiniz: <a href="https://github.com/kubernetes/api/blob/master/admission/v1/types.go" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/api/blob/master/admission/v1/types.go</a>. Daha fazla bilgi için, <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#webhook-request-and-response" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#webhook-request-and-response</a> adresine de başvurabilirsiniz.</p><p>Bu nedenle, K8s-gatekeeper tarafından kullanılan herhangi bir model için <code>request_definition</code> tanımı her zaman şu şekilde olmalıdır:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>&#x27;obj&#x27; adı zorunlu değildir, adın <code>[matchers]</code> bölümünde kullanılan adla tutarlı olması yeterlidir.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="42-modelin-eşleştiricileri">4.2 Modelin Eşleştiricileri<a href="#42-modelin-eşleştiricileri" class="hash-link" aria-label="4.2 Modelin Eşleştiricileri başlığına doğrudan bağlantı" title="4.2 Modelin Eşleştiricileri başlığına doğrudan bağlantı">​</a></h3><p>Kurallarınızı yazmak için Casbin&#x27;in ABAC özelliğini kullanmalısınız. Ancak, Casbin&#x27;de entegre edilmiş ifade değerlendirici, haritalardaki veya dizilerdeki (dilimlerdeki) indekslemeyi veya dizilerin genişlemesini desteklememektedir. Bu nedenle, K8s-gatekeeper bu özellikleri uygulamak için çeşitli &#x27;Casbin fonksiyonları&#x27;nı uzantılar olarak sağlar. Eğer hâlâ bu uzantılarla talebinizi karşılayamadığınızı düşünüyorsanız, bir konu başlatmaya da çekinmeyin, ya da bir çekme isteği oluşturun.</p><p>Casbin fonksiyonlarına aşina değilseniz, daha fazla bilgi için <a href="/tr/docs/function">Function</a> sayfasına başvurabilirsiniz.</p><p>İşte uzantı fonksiyonları:</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="421-uzantı-fonksiyonları">4.2.1 Uzantı Fonksiyonları<a href="#421-uzantı-fonksiyonları" class="hash-link" aria-label="4.2.1 Uzantı Fonksiyonları başlığına doğrudan bağlantı" title="4.2.1 Uzantı Fonksiyonları başlığına doğrudan bağlantı">​</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4211-erişim">4.2.1.1 erişim<a href="#4211-erişim" class="hash-link" aria-label="4.2.1.1 erişim başlığına doğrudan bağlantı" title="4.2.1.1 erişim başlığına doğrudan bağlantı">​</a></h4><p>Erişim, Casbin&#x27;in haritalarda veya dizilerde indekslemeyi desteklemediği sorunu çözmek için kullanılır. <code>example/allowed_repo/model.yaml</code> örneği, bu fonksiyonun kullanımını gösterir:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Image&quot;)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c">= p.obj</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bu eşleştiricide, <code>access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Image&quot;)</code> ifadesi, <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Image</code> ile eşdeğerdir, burada <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers</code> bir dilimdir.</p><p>Erişim ayrıca parametreleri olmayan ve tek bir değer döndüren basit fonksiyonları çağırabilir. <code>example/container_resource_limit/model.yaml</code> örneği bunu gösterir:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key attr-name" style="color:#00a4db">parseFloat(access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Resources&quot;,&quot;Limits&quot;,&quot;cpu&quot;,&quot;Value&quot;)) &gt;</span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">parseFloat(p.cpu) &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key attr-name" style="color:#00a4db">parseFloat(access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Resources&quot;,&quot;Limits&quot;,&quot;memory&quot;,&quot;Value&quot;)) &gt;</span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">parseFloat(p.memory)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bu eşleştiricide, <code>access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Resources&quot;,&quot;Limits&quot;,&quot;cpu&quot;,&quot;Value&quot;)</code> ifadesi, <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Resources.Limits[&quot;cpu&quot;].Value()</code> ile eşdeğerdir, burada <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Resources.Limits</code> bir haritadır ve <code>Value()</code> parametresi olmayan ve tek bir değer döndüren basit bir fonksiyondur.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4212-accesswithwildcard">4.2.1.2 accessWithWildcard<a href="#4212-accesswithwildcard" class="hash-link" aria-label="4.2.1.2 accessWithWildcard başlığına doğrudan bağlantı" title="4.2.1.2 accessWithWildcard başlığına doğrudan bağlantı">​</a></h4><p>Bazen şöyle bir talepte bulunabilirsiniz: bir dizideki tüm öğelerin &quot;aaa&quot; öneki olmalı. Ancak, Casbin <code>for</code> döngülerini desteklememektedir. <code>accessWithWildcard</code> ve &quot;map/slice genişletme&quot; özelliği ile, böyle bir talebi kolayca uygulayabilirsiniz.</p><p>Örneğin, <code>a.b.c</code> dizisi <code>[aaa, bbb, ccc, ddd, eee]</code> olsun, o zaman <code>accessWithWildcard(a, &quot;b&quot;, &quot;c&quot;, &quot;*&quot;)</code> sonucu bir dilim <code>[aaa, bbb, ccc, ddd, eee]</code> olacaktır. Joker karakter <code>*</code> kullanarak, dilim genişletilir.</p><p>Benzer şekilde, joker karakter birden fazla kez kullanılabilir. Örneğin, <code>accessWithWildcard(a, &quot;b&quot;, &quot;c&quot;, &quot;*&quot;, &quot;*&quot;)</code> sonucu <code>[a.b.c[0][0], a.b.c[0][1], ..., a.b.c[1][0], a.b.c[1][1], ...]</code> olacaktır.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4213-değişken-uzunluklu-argümanları-destekleyen-fonksiyonlar">4.2.1.3 Değişken Uzunluklu Argümanları Destekleyen Fonksiyonlar<a href="#4213-değişken-uzunluklu-argümanları-destekleyen-fonksiyonlar" class="hash-link" aria-label="4.2.1.3 Değişken Uzunluklu Argümanları Destekleyen Fonksiyonlar başlığına doğrudan bağlantı" title="4.2.1.3 Değişken Uzunluklu Argümanları Destekleyen Fonksiyonlar başlığına doğrudan bağlantı">​</a></h3><p>Casbin&#x27;in ifade değerlendirici içinde, bir parametre bir dizi olduğunda, otomatik olarak değişken uzunluklu bir argüman olarak genişletilir. Bu özelliği kullanarak dizi/dilim/map genişletmeyi desteklemek için, ayrıca bir dizi/dilim parametresi kabul eden birkaç fonksiyon entegre ettik:</p><ul><li>contain(): birden fazla parametre kabul eder ve son parametre hariç herhangi bir parametrenin son parametreye eşit olup olmadığını döndürür.</li><li>split(a, b, c..., sep, index): <code>[splits(a, sep)[index], splits(b, sep)[index], splits(a, sep)[index], ...]</code> içeren bir dilim döndürür.</li><li>len(): değişken uzunluklu argümanın uzunluğunu döndürür.</li><li>matchRegex(a,b,c...,regex): verilen tüm parametrelerin (<code>a</code>, <code>b</code>, <code>c</code>, ...) verilen regex ile eşleşip eşleşmediğini döndürür.</li></ul><p>İşte <code>example/disallowed_tag/model.yaml</code> içinde bir örnek:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contain(split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1) , p.obj)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;)</code> <code>[&quot;a:b&quot;, &quot;c:d&quot;, &quot;e:f&quot;, &quot;g:h&quot;]</code> döndürdüğü varsayılarak, çünkü splits değişken uzunluklu argümanları destekler ve her öğede splits işlemi gerçekleştirir, indeks 1&#x27;deki öğe seçilir ve döndürülür. Bu nedenle, <code>split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1)</code> <code>[&quot;b&quot;,&quot;d&quot;,&quot;f&quot;,&quot;h&quot;]</code> döndürür. Ve <code>contain(split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1) , p.obj)</code> <code>p.obj</code>&#x27;nin <code>[&quot;b&quot;,&quot;d&quot;,&quot;f&quot;,&quot;h&quot;]</code> içinde bulunup bulunmadığını döndürür.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4212-tür-dönüştürme-fonksiyonları">4.2.1.2 Tür Dönüştürme Fonksiyonları<a href="#4212-tür-dönüştürme-fonksiyonları" class="hash-link" aria-label="4.2.1.2 Tür Dönüştürme Fonksiyonları başlığına doğrudan bağlantı" title="4.2.1.2 Tür Dönüştürme Fonksiyonları başlığına doğrudan bağlantı">​</a></h4><ul><li>ParseFloat(): Bir tamsayıyı float&#x27;a çevirir (bu, karşılaştırmada kullanılan herhangi bir sayının float&#x27;a dönüştürülmesi gerektiği için gereklidir).</li><li>ToString(): Bir nesneyi string&#x27;e dönüştürür. Bu nesnenin temel bir string türü olmalıdır (örneğin, <code>type XXX string</code> ifadesi olduğunda <code>XXX</code> türünde bir nesne).</li><li>IsNil(): Parametrenin nil olup olmadığını döndürür.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-gelişmiş-ayarlar">5. Gelişmiş Ayarlar<a href="#5-gelişmiş-ayarlar" class="hash-link" aria-label="5. Gelişmiş Ayarlar başlığına doğrudan bağlantı" title="5. Gelişmiş Ayarlar başlığına doğrudan bağlantı">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="51-sertifikalar-hakkında">5.1 Sertifikalar Hakkında<a href="#51-sertifikalar-hakkında" class="hash-link" aria-label="5.1 Sertifikalar Hakkında başlığına doğrudan bağlantı" title="5.1 Sertifikalar Hakkında başlığına doğrudan bağlantı">​</a></h3><p>Kubernetes (k8s) içinde, bir webhook&#x27;un HTTPS kullanması zorunludur. Bunu gerçekleştirmek için iki yaklaşım vardır:</p><ul><li>Kendinden imzalı sertifikalar kullanın (bu depodaki örnekler bu yöntemi kullanmaktadır)</li><li>Normal bir sertifika kullanın</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="511-kendinden-imzalı-sertifikalar">5.1.1 Kendinden imzalı sertifikalar<a href="#511-kendinden-imzalı-sertifikalar" class="hash-link" aria-label="5.1.1 Kendinden imzalı sertifikalar başlığına doğrudan bağlantı" title="5.1.1 Kendinden imzalı sertifikalar başlığına doğrudan bağlantı">​</a></h4><p>Kendinden imzalı bir sertifika kullanmak, sertifikayı düzenleyen Sertifika Yetkilisi&#x27;nin (CA) iyi bilinen CA&#x27;lardan biri olmadığı anlamına gelir. Bu nedenle, k8s&#x27;ye bu CA&#x27;yı bildirmeniz gerekir.</p><p>Şu anda, bu depodaki örnek, özel anahtarı ve sertifikası sırasıyla <code>config/certificate/ca.crt</code> ve <code>config/certificate/ca.key</code> içinde saklanan kendi yapımı bir CA kullanmaktadır. Webhook için sertifika <code>config/certificate/server.crt</code> şeklindedir ve bu, kendi yapımı CA tarafından düzenlenmiştir. Bu sertifikanın alanları &quot;webhook.domain.local&quot; (harici webhook için) ve &quot;casbin-webhook-svc.default.svc&quot; (dahili webhook için) şeklindedir.</p><p>CA hakkındaki bilgiler, webhook yapılandırma dosyaları aracılığıyla k8s&#x27;ye iletilir. Hem <code>config/webhook_external.yaml</code> hem de <code>config/webhook_internal.yaml</code> dosyalarında &quot;CABundle&quot; adında bir alan bulunmaktadır ve bu alan, CA&#x27;nın sertifikasının base64 ile kodlanmış dizesini içerir.</p><p>Eğer sertifika/alanı değiştirmeniz gerekiyorsa (örneğin, bu webhook&#x27;u k8s&#x27;nin başka bir namespace&#x27;ine yerleştirmek istiyorsanız ve dahili webhook kullanıyorsanız veya alanı değiştirmek istiyorsanız ve harici webhook kullanıyorsanız), aşağıdaki prosedürler takip edilmelidir:</p><ol><li><p>Yeni bir CA oluşturun:</p><ul><li><p>Sahte CA için özel anahtar oluşturun:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -des3 -out ca.key </span><span class="token number" style="color:#36acaa">2048</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Özel anahtarın şifre korumasını kaldırın:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsa -in ca.key -out ca.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>Webhook sunucusu için bir özel anahtar oluşturun:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -des3 -out server.key </span><span class="token number" style="color:#36acaa">2048</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsa -in server.key -out server.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Kendinden oluşturulan CA&#x27;yı kullanarak webhook için sertifikayı imzalayın:</p><ul><li><p>Sisteminizin openssl yapılandırma dosyasını geçici kullanım için kopyalayın. Yapılandırma dosyasının konumunu <code>openssl version -a</code> komutunu çalıştırarak öğrenebilirsiniz, genellikle <code>openssl.cnf</code> olarak adlandırılır.</p></li><li><p>Yapılandırma dosyasında:</p><ul><li><p><code>[req]</code> paragrafını bulun ve şu satırı ekleyin: <code>req_extensions = v3_req</code></p></li><li><p><code>[v3_req]</code> paragrafını bulun ve şu satırı ekleyin: <code>subjectAltName = @alt_names</code></p></li><li><p>Dosyanın sonuna aşağıdaki satırları ekleyin:</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">alt_names</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">DNS.2</span><span class="token punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c">&lt;The domain you want&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Not: Eğer hizmet adını değiştirmeye karar verirseniz, &#x27;casbin-webhook-svc.default.svc&#x27; yerine kendi hizmetinizin gerçek hizmet adını kullanın.</p></li></ul></li><li><p>Değiştirilmiş yapılandırma dosyasını kullanarak bir sertifika isteği dosyası oluşturun:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -new -nodes -keyout server.key -out server.csr -config openssl.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Kendiniz yapılan CA&#x27;yı kullanarak isteğe yanıt verin ve sertifikayı imzalayın:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -req -days </span><span class="token number" style="color:#36acaa">3650</span><span class="token plain"> -in server.csr -out server.crt -CA ca.crt -CAkey ca.key -CAcreateserial -extensions v3_req -extensions SAN -extfile openssl.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Kodu panoya kopyala" title="Kopyala" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li><li><p>&#x27;CABundle&#x27; alanını değiştirin: Bu alanı yeni sertifika ile güncelleyin.</p></li><li><p>Helm kullanıyorsanız, benzer değişikliklerin helm grafiklerine de uygulanması gerekir.</p></li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="512-yasal-sertifikalar">5.1.2 Yasal sertifikalar<a href="#512-yasal-sertifikalar" class="hash-link" aria-label="5.1.2 Yasal sertifikalar başlığına doğrudan bağlantı" title="5.1.2 Yasal sertifikalar başlığına doğrudan bağlantı">​</a></h4><p>Yasal sertifikalar kullanıyorsanız, tüm bu prosedürleri uygulamanıza gerek yoktur. <code>config/webhook_external.yaml</code> ve <code>config/webhook_internal.yaml</code> dosyalarındaki &quot;CABundle&quot; alanını kaldırın ve bu dosyalardaki alanı sahip olduğunuz alanla değiştirin.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/casbin/casbin-website-v2/edit/master/docs/K8sGateKeeper.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Bu sayfayı düzenle</a> <a href="https://crowdin.com/project/casdoor-website/tr" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page" transurl="https://crowdin.com/project/casdoor-website/tr" style="margin-left:2rem"><svg fill="currentColor" height="20" width="20" viewBox="0 0 25 25" aria-hidden="true" style="margin-right:0.3em;vertical-align:sub"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Bu sayfayı çevir</a></div><div class="col lastUpdated_VsjB"><span>Created by</span><a href="https://github.com/ComradeProgrammer" target="_blank" rel="noreferrer"><img alt="ComradeProgrammer" src="https://avatars.githubusercontent.com/ComradeProgrammer" width="24px" style="border-radius:12px;vertical-align:sub;margin-left:4px">  <!-- -->ComradeProgrammer</a></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Belgeler sayfaları"><a class="pagination-nav__link pagination-nav__link--prev" href="/tr/docs/k8s"><div class="pagination-nav__sublabel">Önceki</div><div class="pagination-nav__label">Authorization of Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tr/docs/envoy"><div class="pagination-nav__sublabel">Sonraki</div><div class="pagination-nav__label">Authorization of Service Mesh through Envoy</div></a></nav><br></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-casbin-k8s-gatekeeper-için-genel-bakış--belgeler" class="table-of-contents__link toc-highlight">1. Casbin K8s-Gatekeeper için Genel Bakış &amp; Belgeler</a><ul><li><a href="#01-basit-bir-örnek" class="table-of-contents__link toc-highlight">0.1 Basit Bir Örnek</a></li><li><a href="#11-casbin-k8s-gatekeeper-nasıl-çalışır" class="table-of-contents__link toc-highlight">1.1 Casbin K8s-Gatekeeper Nasıl Çalışır?</a></li><li><a href="#12-nasıl-çalıştığını-gösteren-bir-örnek" class="table-of-contents__link toc-highlight">1.2 Nasıl Çalıştığını Gösteren Bir Örnek</a></li></ul></li><li><a href="#2-k8s-gatekeeperı-yükle" class="table-of-contents__link toc-highlight">2 K8s-gatekeeper&#39;ı Yükle</a><ul><li><a href="#211-adım-1-görüntüyü-oluştur" class="table-of-contents__link toc-highlight">2.1.1 Adım 1: Görüntüyü Oluştur</a></li><li><a href="#22-dış-webhook" class="table-of-contents__link toc-highlight">2.2 Dış webhook</a></li><li><a href="#231-adım-1-görüntüyü-oluşturma" class="table-of-contents__link toc-highlight">2.3.1 Adım 1: Görüntüyü oluşturma</a></li></ul></li><li><a href="#3-k8s-gatekeeperi-deneyin" class="table-of-contents__link toc-highlight">3. K8s-gatekeeper&#39;i deneyin</a><ul><li><a href="#31-casbin-model-ve-politika-oluşturma" class="table-of-contents__link toc-highlight">3.1 Casbin Model ve Politika Oluşturma</a></li><li><a href="#312-k8s-gatekeeperın-çalışıp-çalışmadığını-deneyin" class="table-of-contents__link toc-highlight">3.1.2 K8s-gatekeeper&#39;ın Çalışıp Çalışmadığını Deneyin</a></li></ul></li><li><a href="#4-k8s-gatekeeper-ile-model-ve-politika-nasıl-yazılır" class="table-of-contents__link toc-highlight">4. K8s-gatekeeper ile Model ve Politika Nasıl Yazılır</a><ul><li><a href="#41-modelin-i̇stek-tanımı" class="table-of-contents__link toc-highlight">4.1 Modelin İstek Tanımı</a></li><li><a href="#42-modelin-eşleştiricileri" class="table-of-contents__link toc-highlight">4.2 Modelin Eşleştiricileri</a></li><li><a href="#421-uzantı-fonksiyonları" class="table-of-contents__link toc-highlight">4.2.1 Uzantı Fonksiyonları</a></li><li><a href="#4213-değişken-uzunluklu-argümanları-destekleyen-fonksiyonlar" class="table-of-contents__link toc-highlight">4.2.1.3 Değişken Uzunluklu Argümanları Destekleyen Fonksiyonlar</a></li></ul></li><li><a href="#5-gelişmiş-ayarlar" class="table-of-contents__link toc-highlight">5. Gelişmiş Ayarlar</a><ul><li><a href="#51-sertifikalar-hakkında" class="table-of-contents__link toc-highlight">5.1 Sertifikalar Hakkında</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Belgeler</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/tr/docs/get-started">Başlarken</a></li><li class="footer__item"><a class="footer__link-item" href="/tr/docs/management-api">Yönetim API&#x27;si</a></li><li class="footer__item"><a class="footer__link-item" href="/tr/docs/rbac-api">RBAC API&#x27;si</a></li><li class="footer__item"><a class="footer__link-item" href="/tr/docs/middlewares">Ara Katmanlar (Middlewares)</a></li></ul></div><div class="col footer__col"><div class="footer__title">Topluluk</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forum.casbin.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/search?q=casbin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/S5UjpzGZjN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://cdn.casdoor.com/casdoor/resource/built-in/admin/qq_casbin.png" target="_blank" rel="noopener noreferrer" class="footer__link-item">QQ Grup<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Daha Fazla</div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://github.com/casbin/casbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/casbin?label=Casbin&style=social">
                </a>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://github.com/casbin/jcasbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/jcasbin?label=jCasbin&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://github.com/casbin/node-casbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/node-casbin?label=Node-Casbin&style=social">
                </a>
                &nbsp;&nbsp;
                <a href="https://github.com/php-casbin/php-casbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/php-casbin/php-casbin?label=PHP-Casbin&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://github.com/casbin/pycasbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/pycasbin?label=PyCasbin&style=social">
                </a>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://github.com/casbin/Casbin.NET" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/Casbin.NET?label=Casbin.NET&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://github.com/casbin/casbin-cpp" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/casbin-cpp?label=Casbin-CPP&style=social">
                </a>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://github.com/casbin/casbin-rs" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/casbin-rs?label=Casbin-RS&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://twitter.com/casbinHQ" target="_blank">
                  <img alt="Twitter Follow" src="https://img.shields.io/twitter/follow/casbinHQ?style=social">
                </a>
              </li><li class="footer__item">
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2c0ffc6f8d49e98d964d59d7aa4cbf34";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
</li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/tr/"><img src="/tr/img/casbin_min.svg" alt="Casbin Logosu" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/tr/img/casbin_min.svg" alt="Casbin Logosu" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Telif Hakkı © 2024 Casbin Organizasyonu</div></div></div></footer></div>
<script src="/tr/assets/js/runtime~main.e7eef27d.js"></script>
<script src="/tr/assets/js/main.c199ee03.js"></script>
</body>
</html>