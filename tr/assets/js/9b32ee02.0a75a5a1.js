"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[5430],{3905:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>c});var r=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=r.createContext({}),u=function(e){var a=r.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},m=function(e){var a=u(e.components);return r.createElement(s.Provider,{value:a},e.children)},k={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},p=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),p=u(t),c=n,b=p["".concat(s,".").concat(c)]||p[c]||k[c]||i;return t?r.createElement(b,l(l({ref:a},m),{},{components:t})):r.createElement(b,l({ref:a},m))}));function c(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var i=t.length,l=new Array(i);l[0]=p;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var u=2;u<i;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2915:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>s,contentTitle:()=>l,default:()=>k,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var r=t(7462),n=(t(7294),t(3905));const i={id:"k8s",title:"Authorization of Kubernetes",description:"Casbin tabanl\u0131 Kubernetes (k8s) RBAC ve ABAC yetkilendirme ara yaz\u0131l\u0131m\u0131",keywords:["Kubernetes authorization","Kubernetes RBAC","Kubernetes ABAC","K8s-authz"],authors:["hsluoyz"]},l=void 0,o={unversionedId:"k8s",id:"k8s",title:"Authorization of Kubernetes",description:"Casbin tabanl\u0131 Kubernetes (k8s) RBAC ve ABAC yetkilendirme ara yaz\u0131l\u0131m\u0131",source:"@site/i18n/tr/docusaurus-plugin-content-docs/current/K8sAuthz.mdx",sourceDirName:".",slug:"/k8s",permalink:"/tr/docs/k8s",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/K8sAuthz.mdx",tags:[],version:"current",frontMatter:{id:"k8s",title:"Authorization of Kubernetes",description:"Casbin tabanl\u0131 Kubernetes (k8s) RBAC ve ABAC yetkilendirme ara yaz\u0131l\u0131m\u0131",keywords:["Kubernetes authorization","Kubernetes RBAC","Kubernetes ABAC","K8s-authz"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Performance Optimization",permalink:"/tr/docs/performance"},next:{title:"Admission Webhook for K8s",permalink:"/tr/docs/k8s-gatekeeper"}},s={},u=[{value:"Gereksinimler",id:"gereksinimler",level:2},{value:"Kullan\u0131m",id:"kullan\u0131m",level:2}],m={toc:u};function k(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",(0,r.Z)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz"},"K8s-authz"),", Casbin tabanl\u0131 bir Kubernetes (k8s) yetkilendirme ara yaz\u0131l\u0131m\u0131d\u0131r. Bu ara yaz\u0131l\u0131m, politikalar\u0131 uygulamak i\xe7in RBAC (Rol Tabanl\u0131 Eri\u015fim Kontrol\xfc) ve ABAC (\xd6znitelik Tabanl\u0131 Eri\u015fim Kontrol\xfc) kullan\u0131r. Bu ara yaz\u0131l\u0131m, K8s do\u011frulama kabul webhook'u ile entegre olarak, K8s kaynaklar\u0131na yap\u0131lan her istek i\xe7in Casbin taraf\u0131ndan tan\u0131mlanan politikalar\u0131 do\u011frular. \xd6zel kabul kontrol\xf6rleri, ",(0,n.kt)("inlineCode",{parentName:"p"},"ValidatingAdmissionWebhook")," kullan\u0131larak Kubernetes ile kaydedilir ve API sunucusu taraf\u0131ndan iletilen istek nesnelerinde do\u011frulamalar yaparak iste\u011fin kabul edilip edilmeyece\u011fine dair bir yan\u0131t sa\u011flar."),(0,n.kt)("p",null,"Gelen isteklerin kabul kontrol\xf6r\xfcne ne zaman g\xf6nderilece\u011fini belirlemek i\xe7in bir do\u011frulama webhook'u uygulanm\u0131\u015ft\u0131r. Bu webhook, her t\xfcr K8s kayna\u011f\u0131 veya alt kaynak i\xe7in istekleri y\xf6nlendirir ve politika do\u011frulamas\u0131 yapar. Kullan\u0131c\u0131lar, yaln\u0131zca Casbin zorlay\u0131c\u0131s\u0131 taraf\u0131ndan yetkilendirilmi\u015flerse bu kaynaklarda i\u015flem yapabilir. ",(0,n.kt)("a",{parentName:"p",href:"/docs/get-started#new-a-casbin-enforcer"},"Zorlay\u0131c\u0131"),", kullan\u0131c\u0131n\u0131n politikalarda tan\u0131mland\u0131\u011f\u0131 \u015fekilde rollerini kontrol eder. Bu ara yaz\u0131l\u0131m i\xe7in da\u011f\u0131t\u0131m hedefi K8s k\xfcmesidir."),(0,n.kt)("h2",{id:"gereksinimler"},"Gereksinimler"),(0,n.kt)("p",null,"Devam etmeden \xf6nce, a\u015fa\u011f\u0131dakilere sahip oldu\u011funuzdan emin olun:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\xc7al\u0131\u015fan bir Kubernetes k\xfcmesi. Docker kullanarak yerel bir k\xfcme kurabilir veya sunucunuzda tam bir Kubernetes ekosistemi kurabilirsiniz. Ayr\u0131nt\u0131l\u0131 talimatlar i\xe7in, Windows \xfczerinde yerel bir Kubernetes k\xfcmesi kurmak i\xe7in bu ",(0,n.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tutorials/kubernetes-basics/create-cluster/cluster-intro/"},"rehber"),"'e ve Linux \xfczerinde bir k\xfcme kurmak i\xe7in bu ",(0,n.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorials/how-to-create-a-kubernetes-cluster-using-kubeadm-on-ubuntu-18-04"},"rehber"),"'e ba\u015fvurabilirsiniz."),(0,n.kt)("li",{parentName:"ul"},"Kubectl CLI. Windows i\xe7in Kubectl'i y\xfckleme talimatlar\u0131 ",(0,n.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/"},"burada")," bulunabilir ve Linux i\xe7in ",(0,n.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/"},"burada"),"."),(0,n.kt)("li",{parentName:"ul"},"OpenSSL")),(0,n.kt)("h2",{id:"kullan\u0131m"},"Kullan\u0131m"),(0,n.kt)("p",null,"K8s-authz'i kullanmak i\xe7in \u015fu ad\u0131mlar\u0131 izleyin:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Her kullan\u0131c\u0131 i\xe7in OpenSSL kullanarak sertifika ve anahtarlar olu\u015fturun. A\u015fa\u011f\u0131daki beti\u011fi \xe7al\u0131\u015ft\u0131r\u0131n:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"./gen_cert.sh\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz/blob/master/Dockerfile"},"Dockerfile")," dosyas\u0131ndan Docker imaj\u0131n\u0131 manuel olarak a\u015fa\u011f\u0131daki komutu \xe7al\u0131\u015ft\u0131rarak olu\u015fturun. Komutta ve da\u011f\u0131t\u0131m ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz/blob/718f58c46e3dbf79063b5b1c18348c2fee5de9e9/manifests/deployment.yaml#L18"},"dosyas\u0131nda")," yap\u0131 s\xfcr\xfcm\xfcn\xfc uygun \u015fekilde de\u011fi\u015ftirmeyi unutmay\u0131n."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker build -t casbin/k8s_authz:0.1 .\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Casbin politikalar\u0131n\u0131 ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz/blob/master/config/model.conf"},"model.conf")," ve ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz/blob/master/config/policy.csv"},"policy.csv")," dosyalar\u0131nda tan\u0131mlay\u0131n. Bu politikalar\u0131n nas\u0131l \xe7al\u0131\u015ft\u0131\u011f\u0131 hakk\u0131nda daha fazla bilgi i\xe7in ",(0,n.kt)("a",{parentName:"p",href:"/docs/how-it-works"},"belgelere")," ba\u015fvurun.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Da\u011f\u0131t\u0131mdan \xf6nce, ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz/blob/master/main.go"},"main.go")," dosyas\u0131ndaki ve do\u011frulama webhook yap\u0131land\u0131rma ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-authz/blob/master/manifests/deployment.yaml"},"dosyas\u0131ndaki")," portlar\u0131, \xf6zel gereksinimlerinize g\xf6re de\u011fi\u015ftirebilirsiniz.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Do\u011frulama kontrol\xf6r\xfcn\xfc ve webhook'u Kubernetes k\xfcmesine a\u015fa\u011f\u0131daki komutu \xe7al\u0131\u015ft\u0131rarak da\u011f\u0131t\u0131n:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl apply -f deployment.yaml\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Bir \xfcretim sunucusu i\xe7in, sertifikalar\u0131 g\xfcvence alt\u0131na almak \xfczere bir Kubernetes ",(0,n.kt)("inlineCode",{parentName:"p"},"secret")," olu\u015fturman\u0131z \xf6nerilir."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"kubectl create secret generic casbin -n default \\\n  --from-file=key.pem=certs/casbin-key.pem \\\n  --from-file=cert.pem=certs/casbin-crt.pem\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Yukar\u0131daki ad\u0131mlar\u0131 tamamlad\u0131ktan sonra, sertifika dizinini ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ashish493/k8s-authz/blob/3560551427c0431a9d4594ad1206f084ede37c49/main.go#L26"},"main.go")," ve ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ashish493/k8s-authz/blob/3560551427c0431a9d4594ad1206f084ede37c49/manifests/deployment.yaml#L22"},"manifests")," dosyalar\u0131nda olu\u015fturulan ",(0,n.kt)("inlineCode",{parentName:"p"},"secret")," dizini ile g\xfcncellemeniz gerekiyor."))),(0,n.kt)("p",null,"\u015eimdi, sunucu \xe7al\u0131\u015f\u0131r durumda olmal\u0131 ve K8s kaynaklar\u0131na yap\u0131lan istekleri do\u011frulamaya ve ilgili politikalar\u0131 uygulamaya haz\u0131r olmal\u0131."))}k.isMDXComponent=!0}}]);