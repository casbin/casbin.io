<!doctype html>
<html lang="ar" dir="rtl" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-k8s-gatekeeper" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Admission Webhook for K8s | Casbin</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://casbin.org/ar/docs/k8s-gatekeeper"><meta data-rh="true" property="og:locale" content="ar"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" property="og:locale:alternate" content="ko"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" property="og:locale:alternate" content="es"><meta data-rh="true" property="og:locale:alternate" content="pt"><meta data-rh="true" property="og:locale:alternate" content="uk"><meta data-rh="true" property="og:locale:alternate" content="th"><meta data-rh="true" property="og:locale:alternate" content="id"><meta data-rh="true" property="og:locale:alternate" content="vi"><meta data-rh="true" property="og:locale:alternate" content="it"><meta data-rh="true" property="og:locale:alternate" content="ms"><meta data-rh="true" property="og:locale:alternate" content="tr"><meta data-rh="true" name="docusaurus_locale" content="ar"><meta data-rh="true" name="docsearch:language" content="ar"><meta data-rh="true" name="Casbin" content="An authorization library that supports access control models like ACL, RBAC, ABAC, ReBAC, PBAC, OrBAC, BLP, Biba, LBAC, UCON for Golang, Java, C/C++, Node.js, Javascript, PHP, Laravel, Python, .NET (C#), Delphi, Rust, Ruby, Swift (Objective-C), Lua (OpenResty), Dart (Flutter) and Elixir"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Admission Webhook for K8s | Casbin"><meta data-rh="true" name="description" content="وسيط تفويض Kubernetes (K8s) RBAC &amp; ABAC المبني على Casbin"><meta data-rh="true" property="og:description" content="وسيط تفويض Kubernetes (K8s) RBAC &amp; ABAC المبني على Casbin"><meta data-rh="true" name="keywords" content="k8s-gatekeeper,Kubernetes,K8s"><link data-rh="true" rel="icon" href="/ar/img/favicon.png"><link data-rh="true" rel="canonical" href="https://casbin.org/ar/docs/k8s-gatekeeper"><link data-rh="true" rel="alternate" href="https://casbin.org/docs/k8s-gatekeeper" hreflang="en"><link data-rh="true" rel="alternate" href="https://casbin.org/zh/docs/k8s-gatekeeper" hreflang="zh"><link data-rh="true" rel="alternate" href="https://casbin.org/ko/docs/k8s-gatekeeper" hreflang="ko"><link data-rh="true" rel="alternate" href="https://casbin.org/ru/docs/k8s-gatekeeper" hreflang="ru"><link data-rh="true" rel="alternate" href="https://casbin.org/fr/docs/k8s-gatekeeper" hreflang="fr"><link data-rh="true" rel="alternate" href="https://casbin.org/de/docs/k8s-gatekeeper" hreflang="de"><link data-rh="true" rel="alternate" href="https://casbin.org/ja/docs/k8s-gatekeeper" hreflang="ja"><link data-rh="true" rel="alternate" href="https://casbin.org/es/docs/k8s-gatekeeper" hreflang="es"><link data-rh="true" rel="alternate" href="https://casbin.org/pt/docs/k8s-gatekeeper" hreflang="pt"><link data-rh="true" rel="alternate" href="https://casbin.org/uk/docs/k8s-gatekeeper" hreflang="uk"><link data-rh="true" rel="alternate" href="https://casbin.org/th/docs/k8s-gatekeeper" hreflang="th"><link data-rh="true" rel="alternate" href="https://casbin.org/ar/docs/k8s-gatekeeper" hreflang="ar"><link data-rh="true" rel="alternate" href="https://casbin.org/id/docs/k8s-gatekeeper" hreflang="id"><link data-rh="true" rel="alternate" href="https://casbin.org/vi/docs/k8s-gatekeeper" hreflang="vi"><link data-rh="true" rel="alternate" href="https://casbin.org/it/docs/k8s-gatekeeper" hreflang="it"><link data-rh="true" rel="alternate" href="https://casbin.org/ms/docs/k8s-gatekeeper" hreflang="ms"><link data-rh="true" rel="alternate" href="https://casbin.org/tr/docs/k8s-gatekeeper" hreflang="tr"><link data-rh="true" rel="alternate" href="https://casbin.org/docs/k8s-gatekeeper" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6NBEV8TOFK-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"استخدام متقدم","item":"https://casbin.org/ar/docs/category/advanced-usage"},{"@type":"ListItem","position":2,"name":"Admission Webhook for K8s","item":"https://casbin.org/ar/docs/k8s-gatekeeper"}]}</script><link rel="alternate" type="application/rss+xml" href="/ar/blog/rss.xml" title="Casbin RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ar/blog/atom.xml" title="Casbin Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8S2TKCJ27X"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8S2TKCJ27X",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Casbin" href="/ar/opensearch.xml">
<script src="/js/hotjar.js" async></script>
<script src="/js/probe.js" async></script>
<script src="/js/clarity.js" async></script><link rel="stylesheet" href="/ar/assets/css/styles.e3dd5cc5.css">
<script src="/ar/assets/js/runtime~main.4dceef9c.js" defer="defer"></script>
<script src="/ar/assets/js/main.02fb51ff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="التخطي إلى المحتوى الرئيسي"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">التخطي إلى المحتوى الرئيسي</a></div><nav aria-label="الرئيسية" class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="تبديل شريط التنقل" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ar/"><div class="navbar__logo"><img src="https://cdn.casbin.org/img/casbin_logo_1024x256.png" alt="Casbin Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://cdn.casbin.org/img/casbin_logo_1024x256.png" alt="Casbin Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/ar/docs/overview">الوثائق</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ar/docs/get-started">ابدأ</a></li><li><a class="dropdown__link" href="/ar/docs/category/model">النموذج</a></li><li><a class="dropdown__link" href="/ar/docs/category/storage">التخزين</a></li><li><a class="dropdown__link" href="/ar/docs/adapters">المحولات</a></li><li><a class="dropdown__link" href="/ar/docs/category/api">واجهة برمجة التطبيقات</a></li><li><a class="dropdown__link" href="/ar/docs/ide-plugins">إضافات بيئة التطوير المتكاملة</a></li><li><a class="dropdown__link" href="/ar/docs/contributing">ابدأ المساهمة</a></li></ul></div><a class="navbar__item navbar__link" href="/ar/ecosystem">Plugins</a><a class="navbar__item navbar__link" href="/ar/gallery">Authorization Models</a><a class="navbar__item navbar__link" href="/ar/editor">GUI Policy Editor</a><a class="navbar__item navbar__link" href="/ar/blog">المدونة</a><a class="navbar__item navbar__link" href="/ar/help">المساعدة</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>العربية</a><ul class="dropdown__menu"><li><a href="/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li><li><a href="/ko/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/ru/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li><li><a href="/fr/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/de/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li><li><a href="/ja/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/es/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/pt/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt">Português</a></li><li><a href="/uk/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="uk">Українська</a></li><li><a href="/th/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="th">ไทย</a></li><li><a href="/ar/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ar">العربية</a></li><li><a href="/id/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="id">Indonesia</a></li><li><a href="/vi/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="vi">Tiếng Việt</a></li><li><a href="/it/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="it">Italiano</a></li><li><a href="/ms/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ms">Melayu</a></li><li><a href="/tr/docs/k8s-gatekeeper" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="tr">Türkçe</a></li><li class=""><hr style="margin: 0.3rem 0;"></li><li><a href="https://crowdin.com/project/casbin-website" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a href="https://github.com/casbin/casbin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.gg/S5UjpzGZjN" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-community-discord"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="بحث (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">بحث</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="التبديل بين الوضع الداكن والوضع الفاتح (الوضع الحالي system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="التمرير إلى الأعلى" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/ar/"><img src="https://cdn.casbin.org/img/casbin_logo_1024x256.png" alt="Casbin Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://cdn.casbin.org/img/casbin_logo_1024x256.png" alt="Casbin Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b></b></a><nav aria-label="شريط جانبي للوثائق" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/the-basics"><span title="الأساسيات" class="categoryLinkLabel_W154">الأساسيات</span></a><button aria-label="Collapse sidebar category &#x27;الأساسيات&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/get-started"><span title="Get Started" class="linkLabel_WmDU">Get Started</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/how-it-works"><span title="How It Works" class="linkLabel_WmDU">How It Works</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/tutorials"><span title="Tutorials" class="linkLabel_WmDU">Tutorials</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/model"><span title="النموذج" class="categoryLinkLabel_W154">النموذج</span></a><button aria-label="Collapse sidebar category &#x27;النموذج&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/supported-models"><span title="Supported Models" class="linkLabel_WmDU">Supported Models</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/syntax-for-models"><span title="Syntax for Models" class="linkLabel_WmDU">Syntax for Models</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/effector"><span title="Effector" class="linkLabel_WmDU">Effector</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/function"><span title="Functions" class="linkLabel_WmDU">Functions</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/ar/docs/rbac-overview"><span title="RBAC" class="categoryLinkLabel_W154">RBAC</span></a><button aria-label="Collapse sidebar category &#x27;RBAC&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac"><span title="RBAC" class="linkLabel_WmDU">RBAC</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-with-pattern"><span title="RBAC with Pattern" class="linkLabel_WmDU">RBAC with Pattern</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-with-domains"><span title="RBAC with Domains" class="linkLabel_WmDU">RBAC with Domains</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-with-conditions"><span title="RBAC with Conditions" class="linkLabel_WmDU">RBAC with Conditions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-96"><span title="Casbin RBAC vs. RBAC96" class="linkLabel_WmDU">Casbin RBAC vs. RBAC96</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rebac"><span title="ReBAC" class="linkLabel_WmDU">ReBAC</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/abac"><span title="ABAC" class="linkLabel_WmDU">ABAC</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/pbac"><span title="PBAC" class="linkLabel_WmDU">PBAC</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/ar/docs/mac-overview"><span title="MAC" class="categoryLinkLabel_W154">MAC</span></a><button aria-label="Collapse sidebar category &#x27;MAC&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/blp"><span title="BLP" class="linkLabel_WmDU">BLP</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/biba"><span title="Biba" class="linkLabel_WmDU">Biba</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/lbac"><span title="LBAC" class="linkLabel_WmDU">LBAC</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/orbac"><span title="OrBAC" class="linkLabel_WmDU">OrBAC</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/priority-model"><span title="Priority Model" class="linkLabel_WmDU">Priority Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/ucon"><span title="Usage Control (UCON)" class="linkLabel_WmDU">Usage Control (UCON)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/superadmin"><span title="Super Admin" class="linkLabel_WmDU">Super Admin</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/storage"><span title="التخزين" class="categoryLinkLabel_W154">التخزين</span></a><button aria-label="Collapse sidebar category &#x27;التخزين&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/model-storage"><span title="Model Storage" class="linkLabel_WmDU">Model Storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/policy-storage"><span title="Policy Storage" class="linkLabel_WmDU">Policy Storage</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/policy-subset-loading"><span title="Policy Subset Loading" class="linkLabel_WmDU">Policy Subset Loading</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/scenarios"><span title="السيناريوهات" class="categoryLinkLabel_W154">السيناريوهات</span></a><button aria-label="Collapse sidebar category &#x27;السيناريوهات&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/data-permissions"><span title="Data Permissions" class="linkLabel_WmDU">Data Permissions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/menu-permissions"><span title="Menu Permissions" class="linkLabel_WmDU">Menu Permissions</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/plugins-overview"><span title="Plugins" class="categoryLinkLabel_W154">Plugins</span></a><button aria-label="Collapse sidebar category &#x27;Plugins&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/enforcers"><span title="Enforcers" class="linkLabel_WmDU">Enforcers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/adapters"><span title="Adapters" class="linkLabel_WmDU">Adapters</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/watchers"><span title="Watchers" class="linkLabel_WmDU">Watchers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/dispatchers"><span title="Dispatchers" class="linkLabel_WmDU">Dispatchers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/role-managers"><span title="Role Managers" class="linkLabel_WmDU">Role Managers</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/ar/docs/middlewares"><span title="Middlewares" class="categoryLinkLabel_W154">Middlewares</span></a><button aria-label="Collapse sidebar category &#x27;Middlewares&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/kong-authz"><span title="Kong" class="linkLabel_WmDU">Kong</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/graphql-middlewares"><span title="GraphQL" class="linkLabel_WmDU">GraphQL</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/cloud-native"><span title="Cloud Native" class="linkLabel_WmDU">Cloud Native</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/api"><span title="واجهة برمجة التطبيقات" class="categoryLinkLabel_W154">واجهة برمجة التطبيقات</span></a><button aria-label="Collapse sidebar category &#x27;واجهة برمجة التطبيقات&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/api-overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/management-api"><span title="Management API" class="linkLabel_WmDU">Management API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-api"><span title="RBAC API" class="linkLabel_WmDU">RBAC API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-with-domains-api"><span title="RBAC with Domains API" class="linkLabel_WmDU">RBAC with Domains API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rbac-with-conditions-api"><span title="RBAC with Conditions API" class="linkLabel_WmDU">RBAC with Conditions API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/rolemanager-api"><span title="RoleManager API" class="linkLabel_WmDU">RoleManager API</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/ar/docs/category/advanced-usage"><span title="استخدام متقدم" class="categoryLinkLabel_W154">استخدام متقدم</span></a><button aria-label="Collapse sidebar category &#x27;استخدام متقدم&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/multi-threading"><span title="Multi-threading" class="linkLabel_WmDU">Multi-threading</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/benchmark"><span title="Benchmarks" class="linkLabel_WmDU">Benchmarks</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/performance"><span title="Performance Optimization" class="linkLabel_WmDU">Performance Optimization</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/k8s"><span title="Authorization of Kubernetes" class="linkLabel_WmDU">Authorization of Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ar/docs/k8s-gatekeeper"><span title="Admission Webhook for K8s" class="linkLabel_WmDU">Admission Webhook for K8s</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/envoy"><span title="Authorization of Service Mesh through Envoy" class="linkLabel_WmDU">Authorization of Service Mesh through Envoy</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/management"><span title="الإدارة" class="categoryLinkLabel_W154">الإدارة</span></a><button aria-label="Collapse sidebar category &#x27;الإدارة&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/admin-portal"><span title="Admin Portal" class="linkLabel_WmDU">Admin Portal</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/service"><span title="Casbin Service" class="linkLabel_WmDU">Casbin Service</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/command-line-tools"><span title="Command-line Tools" class="linkLabel_WmDU">Command-line Tools</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/log-error"><span title="Log &amp; Error Handling" class="linkLabel_WmDU">Log &amp; Error Handling</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/frontend"><span title="Frontend Usage" class="linkLabel_WmDU">Frontend Usage</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/editor"><span title="المحرر" class="categoryLinkLabel_W154">المحرر</span></a><button aria-label="Collapse sidebar category &#x27;المحرر&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/online-editor"><span title="Online Editor" class="linkLabel_WmDU">Online Editor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/ide-plugins"><span title="IDE Plugins" class="linkLabel_WmDU">IDE Plugins</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/ar/docs/category/more"><span title="المزيد" class="categoryLinkLabel_W154">المزيد</span></a><button aria-label="Collapse sidebar category &#x27;المزيد&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/adopters"><span title="Our Adopters" class="linkLabel_WmDU">Our Adopters</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/contributing"><span title="Contributing" class="linkLabel_WmDU">Contributing</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/privacy-policy"><span title="Privacy Policy" class="linkLabel_WmDU">Privacy Policy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ar/docs/terms-of-service"><span title="Terms of Service" class="linkLabel_WmDU">Terms of Service</span></a></li></ul></li></ul></nav><button type="button" title="طي الشريط الجانبي" aria-label="طي الشريط الجانبي" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="فتات الخبز"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="الصفحة الرئيسية" class="breadcrumbs__link" href="/ar/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/ar/docs/category/advanced-usage"><span>استخدام متقدم</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Admission Webhook for K8s</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">على هذه الصفحة</button></div><div class="theme-doc-markdown markdown"><header><h1>Admission Webhook for K8s</h1></header><h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="1-نظرة-عامة-ووثائق-لـ-casbin-k8s-gatekeeper">1. نظرة عامة ووثائق لـ Casbin K8s-Gatekeeper<a href="#1-نظرة-عامة-ووثائق-لـ-casbin-k8s-gatekeeper" class="hash-link" aria-label="رابط مباشر إلى 1. نظرة عامة ووثائق لـ Casbin K8s-Gatekeeper" title="رابط مباشر إلى 1. نظرة عامة ووثائق لـ Casbin K8s-Gatekeeper" translate="no">​</a></h2>
<p>Casbin K8s-GateKeeper هو ويب هوك للقبول في Kubernetes يدمج Casbin كأداة للتحكم في الوصول. باستخدام Casbin K8s-GateKeeper، يمكنك إنشاء قواعد مرنة لتفويض أو اعتراض أي عملية على موارد K8s، دون كتابة أي جزء من الكود، ولكن فقط بعض الأسطر من التكوينات الإعلانية لنماذج وسياسات Casbin، والتي هي جزء من لغة قائمة التحكم في الوصول (ACL) الخاصة بـ Casbin.</p>
<p>Casbin K8s-GateKeeper تم تطويره وصيانته من قبل مجتمع Casbin. مستودع هذا المشروع متاح هنا: <a href="https://github.com/casbin/k8s-gatekeeper" target="_blank" rel="noopener noreferrer" class="">https://github.com/casbin/k8s-gatekeeper</a></p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="01-مثال-بسيط">0.1 مثال بسيط<a href="#01-مثال-بسيط" class="hash-link" aria-label="رابط مباشر إلى 0.1 مثال بسيط" title="رابط مباشر إلى 0.1 مثال بسيط" translate="no">​</a></h3>
<p>على سبيل المثال، لا تحتاج إلى كتابة أي كود، ولكن استخدم الأسطر التالية من التكوين لتحقيق هذه الوظيفة: &quot;منع الصور ذات العلامات المحددة من الاستخدام في أي عمليات نشر&quot;:</p>
<p>Model:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">p</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj,eft</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_effect</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">!some(where (p.eft == deny))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contain(split(accessWithWildcard(${OBJECT}.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1) , p.obj)</span><br></span></code></pre></div></div>
<p>And Policy:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> </span><span class="token value">&quot;1.14.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value">deny</span><br></span></code></pre></div></div>
<p>هذه بلغة Casbin ACL العادية. لنفترض أنك قد قرأت بالفعل الفصول عنها، سيكون من السهل جدًا فهمها.</p>
<p>Casbin K8s-Gatekeeper له المزايا التالية:</p>
<ul>
<li class="">سهل الاستخدام. كتابة بعض الأسطر من ACL أفضل بكثير من كتابة الكثير من الكود.</li>
<li class="">يسمح بتحديثات ساخنة للتكوينات. لا تحتاج إلى إيقاف تشغيل الإضافة بأكملها لتعديل التكوينات.</li>
<li class="">هو مرن. يمكن صنع قواعد تعسفية على أي مورد K8s، والتي يمكن استكشافها مع <code>kubectl gatekeeper</code>.</li>
<li class="">يبسط تنفيذ ويب هوك القبول في K8s، والذي يعتبر معقدًا للغاية. لا تحتاج إلى معرفة ما هو ويب هوك القبول في K8s أو كيفية كتابة الكود له. كل ما تحتاج إلى معرفته هو المورد الذي تريد وضع قيود عليه ثم كتابة Casbin ACL. الجميع يعلم أن K8s معقد، ولكن باستخدام Casbin K8s-Gatekeeper، يمكن توفير وقتك.</li>
<li class="">يتم صيانته من قبل مجتمع Casbin. لا تتردد في الاتصال بنا إذا كان هناك أي شيء يحيرك حول هذه الإضافة أو إذا واجهت أي مشاكل عند تجربتها.</li>
</ul>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="11-كيف-يعمل-casbin-k8s-gatekeeper">1.1 كيف يعمل Casbin K8s-Gatekeeper؟<a href="#11-كيف-يعمل-casbin-k8s-gatekeeper" class="hash-link" aria-label="رابط مباشر إلى 1.1 كيف يعمل Casbin K8s-Gatekeeper؟" title="رابط مباشر إلى 1.1 كيف يعمل Casbin K8s-Gatekeeper؟" translate="no">​</a></h3>
<p>K8s-Gatekeeper هو ويب هوك للقبول في K8s يستخدم <a class="" href="/ar/docs/overview">Casbin</a> لتطبيق قواعد تحكم في الوصول محددة من قبل المستخدم بشكل تعسفي للمساعدة في منع أي عملية على K8s لا يريدها المسؤول.</p>
<p>Casbin هو مكتبة تحكم في الوصول مفتوحة المصدر قوية وفعالة. يوفر دعمًا لتطبيق التفويض بناءً على نماذج تحكم في الوصول المختلفة. لمزيد من التفاصيل حول Casbin، انظر <a class="" href="/ar/docs/overview">نظرة عامة</a>.</p>
<p>ويب هوك القبول في K8s هي استدعاءات HTTP تتلقى &#x27;طلبات القبول&#x27; وتقوم بشيء ما معها. على وجه الخصوص، K8s-Gatekeeper هو نوع خاص من ويب هوك القبول: &#x27;ValidatingAdmissionWebhook&#x27;، والذي يمكنه أن يقرر ما إذا كان سيقبل طلب القبول هذا أم لا. أما بالنسبة لطلبات القبول، فهي طلبات HTTP تصف عملية على موارد محددة في K8s (على سبيل المثال، إنشاء/حذف عملية نشر). لمزيد من المعلومات حول ويب هوك القبول، انظر <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#what-are-admission-webhooks" target="_blank" rel="noopener noreferrer" class="">الوثائق الرسمية لـ K8s</a>.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="12-مثال-يوضح-كيف-يعمل">1.2 مثال يوضح كيف يعمل<a href="#12-مثال-يوضح-كيف-يعمل" class="hash-link" aria-label="رابط مباشر إلى 1.2 مثال يوضح كيف يعمل" title="رابط مباشر إلى 1.2 مثال يوضح كيف يعمل" translate="no">​</a></h3>
<p>على سبيل المثال، عندما يرغب شخص ما في إنشاء عملية نشر تحتوي على بود يشغل nginx (باستخدام kubectl أو عملاء K8s)، سيولد K8s طلب قبول، والذي (إذا تم ترجمته إلى تنسيق YAML) يمكن أن يكون شيئًا مثل هذا:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1.14.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><br></span></code></pre></div></div>
<p>سيمر هذا الطلب بعملية جميع الوسطاء الموضحين في الصورة، بما في ذلك K8s-Gatekeeper الخاص بنا. يمكن لـ K8s-Gatekeeper اكتشاف جميع مطبقات Casbin المخزنة في etcd الخاص بـ K8s، والتي يتم إنشاؤها وصيانتها من قبل المستخدم (عبر <code>kubectl</code> أو العميل Go الذي نوفره). كل مطبق يحتوي على نموذج Casbin وسياسة Casbin. سيتم معالجة طلب القبول بواسطة كل مطبق، واحدًا تلو الآخر، وفقط بالمرور عبر جميع المطبقات يمكن قبول طلب بواسطة هذا K8s-Gatekeeper.</p>
<p>(إذا كنت لا تفهم ما هو مطبق Casbin، أو نموذج، أو سياسة، انظر هذا الوثيقة: <a class="" href="/ar/docs/get-started">البدء</a>).</p>
<p>على سبيل المثال، لسبب ما، يريد المسؤول منع ظهور الصورة &#x27;nginx:1.14.1&#x27; مع السماح بـ &#x27;nginx:1.3.1&#x27;. يمكن إنشاء مطبق يحتوي على القاعدة والسياسة التالية (سنشرح كيفية إنشاء مطبق، ما هي هذه النماذج والسياسات، وكيفية كتابتها في الفصول التالية).</p>
<p>Model:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">p</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj,eft</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_effect</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">!some(where (p.eft == deny))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Image&quot;)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c">= p.obj</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Policy:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> </span><span class="token value">&quot;nginx:1.13.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value">allow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> </span><span class="token value">&quot;nginx:1.14.1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value">deny</span><br></span></code></pre></div></div>
<p>بإنشاء مطبق يحتوي على النموذج والسياسة أعلاه، سيتم رفض طلب القبول السابق من قبل هذا المطبق، مما يعني أن K8s لن ينشئ هذه العملية النشر.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="2-تثبيت-k8s-gatekeeper">2 تثبيت K8s-gatekeeper<a href="#2-تثبيت-k8s-gatekeeper" class="hash-link" aria-label="رابط مباشر إلى 2 تثبيت K8s-gatekeeper" title="رابط مباشر إلى 2 تثبيت K8s-gatekeeper" translate="no">​</a></h2>
<p>هناك ثلاث طرق متاحة لتثبيت K8s-gatekeeper: ويب هوك خارجي، ويب هوك داخلي، وHelm.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ملاحظة</div><div class="admonitionContent_BuS1"><p>ملاحظة: هذه الطرق مخصصة فقط للمستخدمين لتجربة K8s-gatekeeper وليست آمنة. إذا كنت ترغب في استخدامه في بيئة إنتاجية، يرجى التأكد من قراءة <a href="#5-advanced-settings" class="">الفصل 5. الإعدادات المتقدمة</a> وإجراء أي تعديلات ضرورية قبل التثبيت.</p></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="21-ويب-هوك-داخلي">2.1 ويب هوك داخلي<a href="#21-ويب-هوك-داخلي" class="hash-link" aria-label="رابط مباشر إلى 2.1 ويب هوك داخلي" title="رابط مباشر إلى 2.1 ويب هوك داخلي" translate="no">​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="211-الخطوة-1-بناء-الصورة">2.1.1 الخطوة 1: بناء الصورة<a href="#211-الخطوة-1-بناء-الصورة" class="hash-link" aria-label="رابط مباشر إلى 2.1.1 الخطوة 1: بناء الصورة" title="رابط مباشر إلى 2.1.1 الخطوة 1: بناء الصورة" translate="no">​</a></h4>
<p>للطريقة الداخلية للويب هوك، سيتم تنفيذ الويب هوك نفسه كخدمة داخل Kubernetes. لإنشاء الخدمة والتوزيع اللازمين، تحتاج إلى بناء صورة ل ـ K8s-gatekeeper. يمكنك بناء صورتك الخاصة بتشغيل الأمر التالي:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker build --target webhook -t k8s-gatekeeper .</span><br></span></code></pre></div></div>
<p>هذا الأمر سيقوم بإنشاء صورة محلية تسمى &#x27;k8s-gatekeeper<!-- -->:latest<!-- -->&#x27;.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ملاحظة</div><div class="admonitionContent_BuS1"><p>ملاحظة: إذا كنت تستخدم minikube، يرجى تنفيذ <code>eval $(minikube -p minikube docker-env)</code> قبل تشغيل &#x27;docker build&#x27;.</p></div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="212-الخطوة-2-إعداد-الخدمات-والتوزيعات-لـ-k8s-gatekeeper">2.1.2 الخطوة 2: إعداد الخدمات والتوزيعات لـ K8s-gatekeeper<a href="#212-الخطوة-2-إعداد-الخدمات-والتوزيعات-لـ-k8s-gatekeeper" class="hash-link" aria-label="رابط مباشر إلى 2.1.2 الخطوة 2: إعداد الخدمات والتوزيعات لـ K8s-gatekeeper" title="رابط مباشر إلى 2.1.2 الخطوة 2: إعداد الخدمات والتوزيعات لـ K8s-gatekeeper" translate="no">​</a></h4>
<p>قم بتشغيل الأوامر التالية:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/rbac.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/webhook_deployment.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/webhook_internal.yaml </span><br></span></code></pre></div></div>
<p>هذا سيبدأ تشغيل K8s-gatekeeper، ويمكنك التأكد من ذلك بتشغيل <code>kubectl get pods</code>.</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="213-الخطوة-3-تثبيت-موارد-crd-لـ-k8s-gatekeeper">2.1.3 الخطوة 3: تثبيت موارد CRD لـ K8s-gatekeeper<a href="#213-الخطوة-3-تثبيت-موارد-crd-لـ-k8s-gatekeeper" class="hash-link" aria-label="رابط مباشر إلى 2.1.3 الخطوة 3: تثبيت موارد CRD لـ K8s-gatekeeper" title="رابط مباشر إلى 2.1.3 الخطوة 3: تثبيت موارد CRD لـ K8s-gatekeeper" translate="no">​</a></h4>
<p>قم بتشغيل الأوامر التالية:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinmodels.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinpolicies.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="22-الويب-هوك-الخارجي">2.2 الويب هوك الخارجي<a href="#22-الويب-هوك-الخارجي" class="hash-link" aria-label="رابط مباشر إلى 2.2 الويب هوك الخارجي" title="رابط مباشر إلى 2.2 الويب هوك الخارجي" translate="no">​</a></h3>
<p>لطريقة الويب هوك الخارجية، سيتم تشغيل K8s-gatekeeper خارج Kubernetes، وسيقوم Kubernetes بالوصول إلى K8s-gatekeeper كما لو كان يصل إلى موقع ويب عادي. Kubernetes لديه متطلب إلزامي بأن يكون الويب هوك للقبول HTTPS. لغرض تجربة K8s-gatekeeper، قدمنا مجموعة من الشهادات ومفتاح خاص (على الرغم من أن هذا ليس آمنًا). إذا كنت تفضل استخدام شهادتك الخاصة، يرجى الرجوع إلى <a href="#5-advanced-settings" class="">الفصل 5. الإعدادات المتقدمة</a> للحصول على تعليمات حول تعديل الشهادة والمفتاح الخاص. الشهادة التي نقدمها صادرة لـ &#x27;webhook.domain.local&#x27;.</p>
<p>لذا، قم بتعديل المضيف (مثل، /etc/hosts) وأشر &#x27;webhook.domain.local&#x27; إلى عنوان IP الذي يعمل عليه K8s-gatekeeper. ثم نفذ الأمر التالي:</p>
<p>2.3 تثبيت K8s-gatekeeper عبر Helm</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go mod tidy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go mod vendor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go run cmd/webhook/main.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinmodels.yaml </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/auth.casbin.org_casbinpolicies.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f config/webhook_external.yaml </span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="231-الخطوة-1-بناء-الصورة">2.3.1 الخطوة 1: بناء الصورة<a href="#231-الخطوة-1-بناء-الصورة" class="hash-link" aria-label="رابط مباشر إلى 2.3.1 الخطوة 1: بناء الصورة" title="رابط مباشر إلى 2.3.1 الخطوة 1: بناء الصورة" translate="no">​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="يرجى-الرجوع-إلى-الفصل-211">يرجى الرجوع إلى <a href="#211-step-1-build-the-image" class="">الفصل 2.1.1</a>.<a href="#يرجى-الرجوع-إلى-الفصل-211" class="hash-link" aria-label="رابط مباشر إلى يرجى-الرجوع-إلى-الفصل-211" title="رابط مباشر إلى يرجى-الرجوع-إلى-الفصل-211" translate="no">​</a></h4>
<p>2.3.2 تثبيت Helm</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="قم-بتشغيل-الأمر-helm-install-k8sgatekeeper-k8sgatekeeper">قم بتشغيل الأمر <code>helm install k8sgatekeeper ./k8sgatekeeper</code>.<a href="#قم-بتشغيل-الأمر-helm-install-k8sgatekeeper-k8sgatekeeper" class="hash-link" aria-label="رابط مباشر إلى قم-بتشغيل-الأمر-helm-install-k8sgatekeeper-k8sgatekeeper" title="رابط مباشر إلى قم-بتشغيل-الأمر-helm-install-k8sgatekeeper-k8sgatekeeper" translate="no">​</a></h4>
<ol start="3">
<li class=""></li>
</ol>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="جرب-k8s-gatekeeper-31-إنشاء-نموذج-casbin-والسياسة">جرب K8s-gatekeeper 3.1 إنشاء نموذج Casbin والسياسة<a href="#جرب-k8s-gatekeeper-31-إنشاء-نموذج-casbin-والسياسة" class="hash-link" aria-label="رابط مباشر إلى جرب K8s-gatekeeper 3.1 إنشاء نموذج Casbin والسياسة" title="رابط مباشر إلى جرب K8s-gatekeeper 3.1 إنشاء نموذج Casbin والسياسة" translate="no">​</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="لديك-طريقتان-لإنشاء-نموذج-وسياسة-عبر-kubectl-أو-عبر-go-client-الذي-نقدمه">لديك طريقتان لإنشاء نموذج وسياسة: عبر kubectl أو عبر go-client الذي نقدمه.<a href="#لديك-طريقتان-لإنشاء-نموذج-وسياسة-عبر-kubectl-أو-عبر-go-client-الذي-نقدمه" class="hash-link" aria-label="رابط مباشر إلى لديك طريقتان لإنشاء نموذج وسياسة: عبر kubectl أو عبر go-client الذي نقدمه." title="رابط مباشر إلى لديك طريقتان لإنشاء نموذج وسياسة: عبر kubectl أو عبر go-client الذي نقدمه." translate="no">​</a></h3>
<p>3.1.1 إنشاء/تحديث نموذج Casbin والسياسة عبر kubectl</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="في-k8s-gatekeeper-يتم-تخزين-نموذج-casbin-في-مورد-crd-يسمى-casbinmodel">في K8s-gatekeeper، يتم تخزين نموذج Casbin في مورد CRD يسمى &#x27;CasbinModel&#x27;.<a href="#في-k8s-gatekeeper-يتم-تخزين-نموذج-casbin-في-مورد-crd-يسمى-casbinmodel" class="hash-link" aria-label="رابط مباشر إلى في K8s-gatekeeper، يتم تخزين نموذج Casbin في مورد CRD يسمى &#x27;CasbinModel&#x27;." title="رابط مباشر إلى في K8s-gatekeeper، يتم تخزين نموذج Casbin في مورد CRD يسمى &#x27;CasbinModel&#x27;." translate="no">​</a></h4>
<p>تقع تعريفه في <code>config/auth.casbin.org_casbinmodels.yaml</code>. هناك أمثلة في <code>example/allowed_repo/model.yaml</code>.</p>
<p>انتبه للحقول التالية: metadata.name: اسم النموذج.</p>
<ul>
<li class="">يجب أن يكون هذا الاسم هو نفسه اسم كائن CasbinPolicy المتعلق بهذا النموذج، حتى يتمكن K8s-gatekeeper من إقرانهما وإنشاء مُنفذ. spec.enable: إذا تم ضبط هذا الحقل على &#x27;false&#x27;، سيتم تجاهل هذا النموذج (وكذلك كائن CasbinPolicy المتعلق بهذا النموذج).</li>
<li class="">spec.modelText: سلسلة تحتوي على نص نموذج Casbin.</li>
<li class="">يتم تخزين السياسة Casbin في مورد CRD آخر يسمى &#x27;CasbinPolicy&#x27;، ويمكن العثور على تعريفه في <code>config/auth.casbin.org_casbinpolicies.yaml</code>.</li>
</ul>
<p>هناك أمثلة في <code>example/allowed_repo/policy.yaml</code>.</p>
<p>انتبه للحقول التالية: metadata.name: اسم السياسة.</p>
<ul>
<li class="">يجب أن يكون هذا الاسم هو نفسه اسم كائن CasbinModel المتعلق بهذه السياسة، حتى يتمكن K8s-gatekeeper من إقرانهما وإنشاء مُنفذ. spec.policyItem: سلسلة تحتوي على نص سياسة نموذج Casbin.</li>
<li class="">بعد إنشاء ملفات CasbinModel وCasbinPolicy الخاصة بك، استخدم الأمر التالي لتطبيقها:</li>
</ul>
<p>بمجرد إنشاء زوج من CasbinModel وCasbinPolicy، سيكون K8s-gatekeeper قادرًا على اكتشافه خلال 5 ثوانٍ.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f &lt;filename&gt;</span><br></span></code></pre></div></div>
<p>3.1.2 إنشاء/تحديث نموذج Casbin والسياسة عبر go-client الذي نقدمه</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="نحن-نفهم-أن-هناك-حالات-قد-لا-يكون-من-الملائم-فيها-استخدام-الشل-لتنفيذ-الأوامر-مباشرة-على-عقدة-من-عقد-k8s-مثل-عندما-تقوم-ببناء-منصة-سحابية-تلقائية-لشركتك">نحن نفهم أن هناك حالات قد لا يكون من الملائم فيها استخدام الشل لتنفيذ الأوامر مباشرة على عقدة من عقد K8s، مثل عندما تقوم ببناء منصة سحابية تلقائية لشركتك.<a href="#نحن-نفهم-أن-هناك-حالات-قد-لا-يكون-من-الملائم-فيها-استخدام-الشل-لتنفيذ-الأوامر-مباشرة-على-عقدة-من-عقد-k8s-مثل-عندما-تقوم-ببناء-منصة-سحابية-تلقائية-لشركتك" class="hash-link" aria-label="رابط مباشر إلى نحن نفهم أن هناك حالات قد لا يكون من الملائم فيها استخدام الشل لتنفيذ الأوامر مباشرة على عقدة من عقد K8s، مثل عندما تقوم ببناء منصة سحابية  تلقائية لشركتك." title="رابط مباشر إلى نحن نفهم أن هناك حالات قد لا يكون من الملائم فيها استخدام الشل لتنفيذ الأوامر مباشرة على عقدة من عقد K8s، مثل عندما تقوم ببناء منصة سحابية تلقائية لشركتك." translate="no">​</a></h4>
<p>لذلك، قمنا بتطوير go-client لإنشاء وصيانة CasbinModel وCasbinPolicy. مكتبة go-client تقع في <code>pkg/client</code>.</p>
<p>في <code>client.go</code>، نقدم وظيفة لإنشاء عميل.</p>
<p>في <code>client.go</code>، نوفر وظيفة لإنشاء عميل.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewK8sGateKeeperClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">externalClient </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">K8sGateKeeperClient</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span></code></pre></div></div>
<p>يحدد المعامل <code>externalClient</code> ما إذا كان K8s-gatekeeper يعمل داخل عنقود K8s أم لا.</p>
<p>في <code>model.go</code>، نوفر وظائف متعددة لإنشاء، حذف، وتعديل CasbinModel. يمكنك معرفة كيفية استخدام هذه الواجهات في <code>model_test.go</code>.</p>
<p>في <code>policy.go</code>، نوفر وظائف متعددة لإنشاء، حذف، وتعديل CasbiPolicy. يمكنك معرفة كيفية استخدام هذه الواجهات في <code>policy_test.go</code>.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="312-جرب-ما-إذا-كان-k8s-gatekeeper-يعمل">3.1.2 جرب ما إذا كان K8s-gatekeeper يعمل<a href="#312-جرب-ما-إذا-كان-k8s-gatekeeper-يعمل" class="hash-link" aria-label="رابط مباشر إلى 3.1.2 جرب ما إذا كان K8s-gatekeeper يعمل" title="رابط مباشر إلى 3.1.2 جرب ما إذا كان K8s-gatekeeper يعمل" translate="no">​</a></h3>
<p>افترض أنك قد أنشأت بالفعل النموذج والسياسة الدقيقين في <code>example/allowed_repo</code>. الآن، جرب الأمر التالي:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -f example/allowed_repo/testcase/reject_1.yaml</span><br></span></code></pre></div></div>
<p>يجب أن تجد أن K8s سيرفض هذا الطلب ويذكر أن الويب هوك كان السبب في رفض هذا الطلب. ومع ذلك، عندما تحاول تطبيق <code>example/allowed_repo/testcase/approve_2.yaml</code>، سيتم قبوله.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="4-كيفية-كتابة-النموذج-والسياسة-مع-k8s-gatekeeper">4. كيفية كتابة النموذج والسياسة مع K8s-gatekeeper<a href="#4-كيفية-كتابة-النموذج-والسياسة-مع-k8s-gatekeeper" class="hash-link" aria-label="رابط مباشر إلى 4. كيفية كتابة النموذج والسياسة مع K8s-gatekeeper" title="رابط مباشر إلى 4. كيفية كتابة النموذج والسياسة مع K8s-gatekeeper" translate="no">​</a></h2>
<p>أولاً، تأكد من أنك ملم بالقواعد الأساسية لنماذج وسياسات Casbin. إذا لم تكن كذلك، يرجى قراءة قسم <a class="" href="/ar/docs/get-started">البدء</a> أولاً. في هذا الفصل، نفترض أنك تفهم بالفعل ما هي نماذج وسياسات Casbin.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="41-تعريف-الطلب-في-النموذج">4.1 تعريف الطلب في النموذج<a href="#41-تعريف-الطلب-في-النموذج" class="hash-link" aria-label="رابط مباشر إلى 4.1 تعريف الطلب في النموذج" title="رابط مباشر إلى 4.1 تعريف الطلب في النموذج" translate="no">​</a></h3>
<p>عندما يقوم K8s-gatekeeper بتفويض طلب، فإن الإدخال دائمًا عبارة عن كائن: كائن Go لطلب القبول. هذا يعني أن المنفذ سيستخدم دائمًا بهذه الطريقة:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ok</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> enforcer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Enforce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">admission</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>حيث <code>admission</code> هو كائن <code>AdmissionReview</code> محدد بواسطة واجهة برمجة تطبيقات K8s الرسمية <code>&quot;k8s.io/api/admission/v1&quot;</code>. يمكنك العثور على تعريف هذا الهيكل في هذا المستودع: <a href="https://github.com/kubernetes/api/blob/master/admission/v1/types.go" target="_blank" rel="noopener noreferrer" class="">https://github.com/kubernetes/api/blob/master/admission/v1/types.go</a>. لمزيد من المعلومات، يمكنك أيضًا الرجوع إلى <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#webhook-request-and-response" target="_blank" rel="noopener noreferrer" class="">https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#webhook-request-and-response</a>.</p>
<p>لذلك، بالنسبة لأي نموذج يستخدمه K8s-gatekeeper، يجب أن يكون تعريف <code>request_definition</code> دائمًا كما يلي:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain">  </span><span class="token value attr-value" style="color:#e3116c">obj</span><br></span></code></pre></div></div>
<p>اسم &#x27;obj&#x27; ليس إلزاميًا، طالما أن الاسم متسق مع الاسم المستخدم في جزء <code>[matchers]</code>.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="42-مطابقات-النموذج">4.2 مطابقات النموذج<a href="#42-مطابقات-النموذج" class="hash-link" aria-label="رابط مباشر إلى 4.2 مطابقات النموذج" title="رابط مباشر إلى 4.2 مطابقات النموذج" translate="no">​</a></h3>
<p>من المفترض أن تستخدم ميزة ABAC لكتابة قواعدك. ومع ذلك، فإن مقيم التعبير المدمج في Casbin لا يدعم الفهرسة في الخرائط أو المصفوفات (الشرائح)، ولا توسيع المصفوفات. لذلك، يوفر K8s-gatekeeper وظائف &#x27;Casbin&#x27; متنوعة كامتدادات لتنفيذ هذه الميزات. إذا وجدت أن طلبك لا يمكن تلبيته بواسطة هذه الامتدادات، فلا تتردد في بدء مشكلة، أو إنشاء طلب سحب.</p>
<p>إذا لم تكن معتادًا على وظائف Casbin، يمكنك الرجوع إلى <a class="" href="/ar/docs/function">الوظيفة</a> لمزيد من المعلومات.</p>
<p>إليك الوظائف الإضافية:</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="421-وظائف-الإضافة">4.2.1 وظائف الإضافة<a href="#421-وظائف-الإضافة" class="hash-link" aria-label="رابط مباشر إلى 4.2.1 وظائف الإضافة" title="رابط مباشر إلى 4.2.1 وظائف الإضافة" translate="no">​</a></h3>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="4211-الوصول">4.2.1.1 الوصول<a href="#4211-الوصول" class="hash-link" aria-label="رابط مباشر إلى 4.2.1.1 الوصول" title="رابط مباشر إلى 4.2.1.1 الوصول" translate="no">​</a></h4>
<p>يُستخدم الوصول لحل المشكلة التي لا يدعمها Casbin في الفهرسة في الخرائط أو المصفوفات. يوضح المثال <code>example/allowed_repo/model.yaml</code> استخدام هذه الوظيفة:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Image&quot;)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c">= p.obj</span><br></span></code></pre></div></div>
<p>في هذا المطابق، <code>access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Image&quot;)</code> مكافئ لـ <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Image</code>، حيث <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers</code> هو شريحة.</p>
<p>يمكن للوصول أيضًا استدعاء وظائف بسيطة ليس لها معاملات وتعيد قيمة واحدة. يوضح المثال <code>example/container_resource_limit/model.yaml</code> هذا:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key attr-name" style="color:#00a4db">parseFloat(access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Resources&quot;,&quot;Limits&quot;,&quot;cpu&quot;,&quot;Value&quot;)) &gt;</span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">parseFloat(p.cpu) &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key attr-name" style="color:#00a4db">parseFloat(access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Resources&quot;,&quot;Limits&quot;,&quot;memory&quot;,&quot;Value&quot;)) &gt;</span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">parseFloat(p.memory)</span><br></span></code></pre></div></div>
<p>في هذا المطابق، <code>access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, &quot;Resources&quot;,&quot;Limits&quot;,&quot;cpu&quot;,&quot;Value&quot;)</code> مكافئ لـ <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Resources.Limits[&quot;cpu&quot;].Value()</code>، حيث <code>r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Resources.Limits</code> هو خريطة، و<code>Value()</code> هي وظيفة بسيطة ليس لها معاملات وتعيد قيمة واحدة.</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="4212-accesswithwildcard">4.2.1.2 accessWithWildcard<a href="#4212-accesswithwildcard" class="hash-link" aria-label="رابط مباشر إلى 4.2.1.2 accessWithWildcard" title="رابط مباشر إلى 4.2.1.2 accessWithWildcard" translate="no">​</a></h4>
<p>أحيانًا، قد يكون لديك طلب مثل هذا: يجب أن يكون لجميع العناصر في مصفوفة بادئة &quot;aaa&quot;. ومع ذلك، لا يدعم Casbin حلقات <code>for</code>. مع <code>accessWithWildcard</code> وميزة &quot;توسيع الخريطة/الشريحة&quot;، يمكنك تنفيذ مثل هذا الطلب بسهولة.</p>
<p>على سبيل المثال، لنفترض أن <code>a.b.c</code> هي مصفوفة <code>[aaa,bbb,ccc,ddd,eee]</code>، فإن نتيجة <code>accessWithWildcard(a,&quot;b&quot;,&quot;c&quot;,&quot;*&quot;)</code> ستكون شريحة <code>[aaa,bbb,ccc,ddd,eee]</code>. باستخدام البدل <code>*</code>، يتم توسيع الشريحة.</p>
<p>بالمثل، يمكن استخدام البدل أكثر من مرة. على سبيل المثال، نتيجة <code>accessWithWildcard(a,&quot;b&quot;,&quot;c&quot;,&quot;*&quot;,&quot;*&quot;)</code> ستكون <code>[a.b.c[0][0], a.b.c[0][1], ..., a.b.c[1][0], a.b.c[1][1], ...]</code>.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="4213-وظائف-تدعم-المعاملات-المتغيرة-الطول">4.2.1.3 وظائف تدعم المعاملات المتغيرة الطول<a href="#4213-وظائف-تدعم-المعاملات-المتغيرة-الطول" class="hash-link" aria-label="رابط مباشر إلى 4.2.1.3 وظائف تدعم المعاملات المتغيرة الطول" title="رابط مباشر إلى 4.2.1.3 وظائف تدعم المعاملات المتغيرة الطول" translate="no">​</a></h3>
<p>في مقيم التعبير لـ Casbin، عندما يكون المعامل مصفوفة، سيتم توسيعه تلقائيًا كمعامل متغير الطول. باستخدام هذه الميزة لدعم توسيع المصفوفة/الشريحة/الخريطة، لقد دمجنا أيضًا عدة وظائف تقبل مصفوفة/شريحة كمعامل:</p>
<ul>
<li class="">contain(): تقبل معاملات متعددة وتعيد ما إذا كان أي معامل (باستثناء المعامل الأخير) يساوي المعامل الأخير.</li>
<li class="">split(a,b,c...,sep,index): تُعيد مصفوفة تحتوي على <code>[splits(a,sep)[index], splits(b,sep)[index], splits(a,sep)[index], ...]</code>.</li>
<li class="">len(): تُعيد طول الوسيطة ذات الطول المتغير.</li>
<li class="">matchRegex(a,b,c...,regex): تُعيد ما إذا كانت جميع الوسائط المعطاة (<code>a</code>, <code>b</code>, <code>c</code>, ...) تطابق العبارة النمطية المعطاة.</li>
</ul>
<p>هنا مثال في <code>example/disallowed_tag/model.yaml</code>:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">r.obj.Request.Namespace == &quot;default&quot; &amp;&amp; r.obj.Request.Resource.Resource ==&quot;deployments&quot; &amp;&amp; \</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    contain(split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1) , p.obj)</span><br></span></code></pre></div></div>
<p>بافتراض أن <code>accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;)</code> تُعيد <code>[&#x27;a:b&#x27;, &#x27;c:d&#x27;, &#x27;e:f&#x27;, &#x27;g:h&#x27;]</code>، لأن الدالة splits تدعم الوسائط ذات الطول المتغير وتؤدي عملية التقسيم على كل عنصر، سيتم اختيار العنصر في المؤشر 1 وإعادته. لذلك، <code>split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1)</code> تُعيد <code>[&#x27;b&#x27;,&#x27;d&#x27;,&#x27;f&#x27;,&#x27;h&#x27;]</code>. و <code>contain(split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , &quot;*&quot;, &quot;Image&quot;),&quot;:&quot;,1) , p.obj)</code> تُعيد ما إذا كان <code>p.obj</code> موجودًا في <code>[&#x27;b&#x27;,&#x27;d&#x27;,&#x27;f&#x27;,&#x27;h&#x27;]</code>.</p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="4212-وظائف-تحويل-النوع">4.2.1.2 وظائف تحويل النوع<a href="#4212-وظائف-تحويل-النوع" class="hash-link" aria-label="رابط مباشر إلى 4.2.1.2 وظائف تحويل النوع" title="رابط مباشر إلى 4.2.1.2 وظائف تحويل النوع" translate="no">​</a></h4>
<ul>
<li class="">ParseFloat(): تحلل عدد صحيح إلى عدد عشري (هذا ضروري لأن أي رقم يُستخدم في المقارنة يجب تحويله إلى عدد عشري).</li>
<li class="">ToString(): تحول كائن إلى نص. يجب أن يكون لهذا الكائن نوع أساسي من النوع string (على سبيل المثال، كائن من نوع <code>XXX</code> عندما يكون هناك بيان <code>type XXX string</code>).</li>
<li class="">IsNil(): تُعيد ما إذا كان الوسيط هو nil.</li>
</ul>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="5-الإعدادات-المتقدمة">5. الإعدادات المتقدمة<a href="#5-الإعدادات-المتقدمة" class="hash-link" aria-label="رابط مباشر إلى 5. الإعدادات المتقدمة" title="رابط مباشر إلى 5. الإعدادات المتقدمة" translate="no">​</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="51-حول-الشهادات">5.1 حول الشهادات<a href="#51-حول-الشهادات" class="hash-link" aria-label="رابط مباشر إلى 5.1 حول الشهادات" title="رابط مباشر إلى 5.1 حول الشهادات" translate="no">​</a></h3>
<p>في Kubernetes (k8s)، من الضروري أن يستخدم webhook بروتوكول HTTPS. هناك نهجان لتحقيق ذلك:</p>
<ul>
<li class="">استخدام شهادات ذاتية التوقيع (الأمثلة في هذا المستودع تستخدم هذه الطريقة)</li>
<li class="">استخدام شهادة عادية</li>
</ul>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="511-الشهادات-ذاتية-التوقيع">5.1.1 الشهادات ذاتية التوقيع<a href="#511-الشهادات-ذاتية-التوقيع" class="hash-link" aria-label="رابط مباشر إلى 5.1.1 الشهادات ذاتية التوقيع" title="رابط مباشر إلى 5.1.1 الشهادات ذاتية التوقيع" translate="no">​</a></h4>
<p>استخدام شهادة ذاتية التوقيع يعني أن السلطة الشهادة (CA) التي تصدر الشهادة ليست واحدة من السلطات الشهادة المعروفة. لذلك، يجب إعلام k8s بهذه السلطة الشهادة.</p>
<p>حاليًا، المثال في هذا المستودع يستخدم سلطة شهادة مصنوعة ذاتيًا، حيث يتم تخزين المفتاح الخاص والشهادة في <code>config/certificate/ca.crt</code> و <code>config/certificate/ca.key</code> على التوالي. شهادة webhook هي <code>config/certificate/server.crt</code>، والتي تصدرها سلطة الشهادة المصنوع ة ذاتيًا. نطاقات هذه الشهادة هي &quot;webhook.domain.local&quot; (لـ webhook خارجي) و &quot;casbin-webhook-svc.default.svc&quot; (لـ webhook داخلي).</p>
<p>يتم نقل معلومات عن سلطة الشهادة إلى k8s عبر ملفات تكوين webhook. كلا من <code>config/webhook_external.yaml</code> و <code>config/webhook_internal.yaml</code> يحتويان على حقل يسمى &quot;CABundle&quot;، والذي يحتوي على سلسلة مشفرة بترميز base64 لشهادة سلطة الشهادة.</p>
<p>في حالة الحاجة إلى تغيير الشهادة/النطاق (على سبيل المثال، إذا كنت ترغب في وضع هذا webhook في مساحة أخرى من k8s أثناء استخدام webhook داخلي، أو إذا كنت ترغب في تغيير النطاق أثناء استخدام webhook خارجي)، يجب اتباع الإجراءات التالية:</p>
<ol>
<li class="">
<p>إنشاء سلطة شهادة جديدة:</p>
<ul>
<li class="">
<p>إنشاء المفتاح الخاص لسلطة الشهادة المزيفة:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -des3 -out ca.key 2048</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>إزالة حماية كلمة المرور للمفتاح الخاص:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsa -in ca.key -out ca.key</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
<li class="">
<p>إنشاء مفتاح خاص لخادم webhook:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -des3 -out server.key 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl rsa -in server.key -out server.key</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>استخدم سلطة الشهادة المولدة ذاتيًا لتوقيع شهادة لـ webhook:</p>
<ul>
<li class="">
<p>انسخ ملف تكوين openssl الخاص بنظامك للاستخدام المؤقت. يمكنك معرفة موقع ملف التكوين بتشغيل <code>openssl version -a</code>، وعادة ما يسمى <code>openssl.cnf</code>.</p>
</li>
<li class="">
<p>في ملف التكوين:</p>
<ul>
<li class="">
<p>ابحث عن الفقرة <code>[req]</code> وأضف السطر التالي: <code>req_extensions = v3_req</code></p>
</li>
<li class="">
<p>ابحث عن الفقرة <code>[v3_req]</code> وأضف السطر التالي: <code>subjectAltName = @alt_names</code></p>
</li>
<li class="">
<p>أضف الأسطر التالية إلى الملف:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">alt_names</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">DNS.2</span><span class="token punctuation" style="color:#393A34">=</span><span class="token value attr-value" style="color:#e3116c">&lt;The domain you want&gt;</span><br></span></code></pre></div></div>
<p>ملاحظة: استبدل &#x27;casbin-webhook-svc.default.svc&#x27; بالاسم الحقيقي لخدمتك الخاصة إذا قررت تعديل اسم الخدمة.</p>
</li>
</ul>
</li>
<li class="">
<p>استخدم ملف التكوين المعدل لإنشاء ملف طلب شهادة:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -new -nodes -keyout server.key -out server.csr -config openssl.cnf</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>استخدم سلطة الشهادة المصنوعة ذاتيًا للرد على الطلب وتوقيع الشهادة:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -req -days 3650 -in server.csr -out server.crt -CA ca.crt -CAkey ca.key -CAcreateserial -extensions v3_req -extensions SAN -extfile openssl.cnf</span><br></span></code></pre></div></div>
</li>
</ul>
</li>
<li class="">
<p>استبدل حقل &#x27;CABundle&#x27;: كلا من <code>config/webhook_external.yaml</code> و <code>config/webhook_internal.yaml</code> يحتويان على حقل يسمى &quot;CABundle&quot;، والذي يحتوي على سلسلة مشفرة بترميز base64 لشهادة سلطة الشهادة. قم بتحديث هذا الحقل بالشهادة الجديدة.</p>
</li>
<li class="">
<p>إذا كنت تستخدم helm، يجب تطبيق تغييرات مماثلة على الرسوم البيانية helm.</p>
</li>
</ol>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="512-الشهادات-القانونية">5.1.2 الشهادات القانونية<a href="#512-الشهادات-القانونية" class="hash-link" aria-label="رابط مباشر إلى 5.1.2 الشهادات القانونية" title="رابط مباشر إلى 5.1.2 الشهادات القانونية" translate="no">​</a></h4>
<p>إذا كنت تستخدم شهادات قانونية، فلن تحتاج إلى المرور بكل هذه الإجراءات. أزل حقل &quot;CABundle&quot; في <code>config/webhook_external.yaml</code> و <code>config/webhook_internal.yaml</code>، وغير النطاق في هذه الملفات إلى النطاق الذي تملكه.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/casbin/casbin-website-v2/edit/master/docs/K8sGateKeeper.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>تحرير هذه الصفحة</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="صفحات الوثائق"><a class="pagination-nav__link pagination-nav__link--prev" href="/ar/docs/k8s"><div class="pagination-nav__sublabel">السابق</div><div class="pagination-nav__label">Authorization of Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ar/docs/envoy"><div class="pagination-nav__sublabel">التالي</div><div class="pagination-nav__label">Authorization of Service Mesh through Envoy</div></a></nav><br></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-نظرة-عامة-ووثائق-لـ-casbin-k8s-gatekeeper" class="table-of-contents__link toc-highlight">1. نظرة عامة ووثائق لـ Casbin K8s-Gatekeeper</a><ul><li><a href="#01-مثال-بسيط" class="table-of-contents__link toc-highlight">0.1 مثال بسيط</a></li><li><a href="#11-كيف-يعمل-casbin-k8s-gatekeeper" class="table-of-contents__link toc-highlight">1.1 كيف يعمل Casbin K8s-Gatekeeper؟</a></li><li><a href="#12-مثال-يوضح-كيف-يعمل" class="table-of-contents__link toc-highlight">1.2 مثال يوضح كيف يعمل</a></li></ul></li><li><a href="#2-تثبيت-k8s-gatekeeper" class="table-of-contents__link toc-highlight">2 تثبيت K8s-gatekeeper</a><ul><li><a href="#21-ويب-هوك-داخلي" class="table-of-contents__link toc-highlight">2.1 ويب هوك داخلي</a></li><li><a href="#22-الويب-هوك-الخارجي" class="table-of-contents__link toc-highlight">2.2 الويب هوك الخارجي</a></li><li><a href="#231-الخطوة-1-بناء-الصورة" class="table-of-contents__link toc-highlight">2.3.1 الخطوة 1: بناء الصورة</a></li></ul></li><li><a href="#جرب-k8s-gatekeeper-31-إنشاء-نموذج-casbin-والسياسة" class="table-of-contents__link toc-highlight">جرب K8s-gatekeeper 3.1 إنشاء نموذج Casbin والسياسة</a><ul><li><a href="#لديك-طريقتان-لإنشاء-نموذج-وسياسة-عبر-kubectl-أو-عبر-go-client-الذي-نقدمه" class="table-of-contents__link toc-highlight">لديك طريقتان لإنشاء نموذج وسياسة: عبر kubectl أو عبر go-client الذي نقدمه.</a></li><li><a href="#312-جرب-ما-إذا-كان-k8s-gatekeeper-يعمل" class="table-of-contents__link toc-highlight">3.1.2 جرب ما إذا كان K8s-gatekeeper يعمل</a></li></ul></li><li><a href="#4-كيفية-كتابة-النموذج-والسياسة-مع-k8s-gatekeeper" class="table-of-contents__link toc-highlight">4. كيفية كتابة النموذج والسياسة مع K8s-gatekeeper</a><ul><li><a href="#41-تعريف-الطلب-في-النموذج" class="table-of-contents__link toc-highlight">4.1 تعريف الطلب في النموذج</a></li><li><a href="#42-مطابقات-النموذج" class="table-of-contents__link toc-highlight">4.2 مطابقات النموذج</a></li><li><a href="#421-وظائف-الإضافة" class="table-of-contents__link toc-highlight">4.2.1 وظائف الإضافة</a></li><li><a href="#4213-وظائف-تدعم-المعاملات-المتغيرة-الطول" class="table-of-contents__link toc-highlight">4.2.1.3 وظائف تدعم المعاملات المتغيرة الطول</a></li></ul></li><li><a href="#5-الإعدادات-المتقدمة" class="table-of-contents__link toc-highlight">5. الإعدادات المتقدمة</a><ul><li><a href="#51-حول-الشهادات" class="table-of-contents__link toc-highlight">5.1 حول الشهادات</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">الوثائق</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ar/docs/get-started">بدء الاستخدام</a></li><li class="footer__item"><a class="footer__link-item" href="/ar/docs/management-api">واجهة برمجة تطبيقات الإدارة</a></li><li class="footer__item"><a class="footer__link-item" href="/ar/docs/rbac-api">واجهة برمجة تطبيقات RBAC</a></li><li class="footer__item"><a class="footer__link-item" href="/ar/docs/middlewares">الوسطاء</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">المجتمع</div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://discord.gg/S5UjpzGZjN" target="_blank" rel="noopener noreferrer" class="footer__link-item footer-community-link">
                  <svg class="footer-community-icon" viewBox="0 0 127.14 96.36" xmlns="http://www.w3.org/2000/svg">
                    <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
                  </svg>
                  <span>Discord</span>
                </a>
              </li><li class="footer__item">
                <a href="https://stackoverflow.com/search?q=casbin" target="_blank" rel="noopener noreferrer" class="footer__link-item footer-community-link">
                  <svg class="footer-community-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"/>
                  </svg>
                  <span>Stack Overflow</span>
                </a>
              </li><li class="footer__item">
                <a href="https://groups.google.com/g/casbin" target="_blank" rel="noopener noreferrer" class="footer__link-item footer-community-link">
                  <svg class="footer-community-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                  </svg>
                  <span>Google Groups</span>
                </a>
              </li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">المزيد</div><ul class="footer__items clean-list"><li class="footer__item">
                <a href="https://github.com/casbin/casbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/casbin?label=Casbin&style=social">
                </a>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://github.com/casbin/jcasbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/jcasbin?label=jCasbin&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://github.com/casbin/node-casbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/node-casbin?label=Node-Casbin&style=social">
                </a>
                &nbsp;&nbsp;
                <a href="https://github.com/php-casbin/php-casbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/php-casbin/php-casbin?label=PHP-Casbin&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://github.com/casbin/pycasbin" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/pycasbin?label=PyCasbin&style=social">
                </a>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://github.com/casbin/Casbin.NET" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/Casbin.NET?label=Casbin.NET&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://github.com/casbin/casbin-cpp" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/casbin-cpp?label=Casbin-CPP&style=social">
                </a>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://github.com/casbin/casbin-rs" target="_blank">
                  <img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/casbin/casbin-rs?label=Casbin-RS&style=social">
                </a>
              </li><li class="footer__item">
                <a href="https://twitter.com/casbinHQ" target="_blank">
                  <img alt="Twitter Follow" src="https://img.shields.io/twitter/follow/casbinHQ?style=social">
                </a>
              </li><li class="footer__item">
<script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?2c0ffc6f8d49e98d964d59d7aa4cbf34";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>
</li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/ar/"><img src="/ar/img/casbin_min.svg" alt="شعار Casbin" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ar/img/casbin_min.svg" alt="شعار Casbin" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2025 Casbin Organization</div></div></div></footer></div>
</body>
</html>