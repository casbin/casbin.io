"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[2952],{7860(e,i,t){t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"policy-subset-loading","title":"Policy Subset Loading","description":"Loading filtered policies","source":"@site/docs/PolicySubsetLoading.mdx","sourceDirName":".","slug":"/policy-subset-loading","permalink":"/ar/docs/policy-subset-loading","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PolicySubsetLoading.mdx","tags":[],"version":"current","frontMatter":{"id":"policy-subset-loading","title":"Policy Subset Loading","description":"Loading filtered policies","keywords":["filtered policies","policy subset","performance optimization"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Policy Storage","permalink":"/ar/docs/policy-storage"},"next":{"title":"Scenarios","permalink":"/ar/docs/category/scenarios"}}');var n=t(4848),s=t(8453);const a={id:"policy-subset-loading",title:"Policy Subset Loading",description:"Loading filtered policies",keywords:["filtered policies","policy subset","performance optimization"],authors:["hsluoyz"]},r=void 0,l={},c=[];function d(e){const i={code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:"Some adapters support filtered policy loading. This capability loads only a subset of policies from storage based on specified criteria, enabling efficient enforcement in large multi-tenant environments where loading all policies would create a performance bottleneck."}),"\n",(0,n.jsxs)(i.p,{children:["To load filtered policies with a supported adapter, call ",(0,n.jsx)(i.code,{children:"LoadFilteredPolicy"}),". The filter format depends on the adapter implementation. The ",(0,n.jsx)(i.code,{children:"SavePolicy"})," method is disabled when operating with filtered policies to prevent accidental data loss."]}),"\n",(0,n.jsx)(i.p,{children:"Here's an example using the built-in filtered file adapter with an RBAC model that includes domains. This filter restricts loaded policies to a single domain, excluding all policies for other domains:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-go",children:'import (\n    "github.com/casbin/casbin/v3"\n    fileadapter "github.com/casbin/casbin/v3/persist/file-adapter"\n)\n\nenforcer, _ := casbin.NewEnforcer()\n\nadapter := fileadapter.NewFilteredAdapter("examples/rbac_with_domains_policy.csv")\nenforcer.InitWithAdapter("examples/rbac_with_domains_model.conf", adapter)\n\nfilter := &fileadapter.Filter{\n    P: []string{"", "domain1"},\n    G: []string{"", "", "domain1"},\n}\nenforcer.LoadFilteredPolicy(filter)\n\n// The loaded policy now only contains the entries pertaining to "domain1".\n'})}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.code,{children:"LoadIncrementalFilteredPolicy"})," method provides similar functionality but appends filtered policies to existing policies rather than replacing them. This incremental approach lets you build up policies from multiple filtered loads."]})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453(e,i,t){t.d(i,{R:()=>a,x:()=>r});var o=t(6540);const n={},s=o.createContext(n);function a(e){const i=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(s.Provider,{value:i},e.children)}}}]);