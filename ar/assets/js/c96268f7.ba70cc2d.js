"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[5530],{3905:(e,t,a)=>{a.d(t,{Zo:()=>k,kt:()=>u});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),o=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},k=function(e){var t=o(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,k=p(e,["components","mdxType","originalType","parentName"]),m=o(a),u=l,d=m["".concat(s,".").concat(u)]||m[u]||c[u]||i;return a?n.createElement(d,r(r({ref:t},k),{},{components:a})):n.createElement(d,r({ref:t},k))}));function u(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,r=new Array(i);r[0]=m;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:l,r[1]=p;for(var o=2;o<i;o++)r[o]=a[o];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5984:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>p,toc:()=>o});var n=a(7462),l=(a(7294),a(3905));const i={id:"k8s-gatekeeper",title:"Admission Webhook for K8s",description:"\u0648\u0633\u064a\u0637 \u062a\u0641\u0648\u064a\u0636 Kubernetes (K8s) RBAC & ABAC \u0627\u0644\u0645\u0628\u0646\u064a \u0639\u0644\u0649 Casbin",keywords:["k8s-gatekeeper","Kubernetes","K8s"],authors:["ComradeProgrammer"]},r=void 0,p={unversionedId:"k8s-gatekeeper",id:"k8s-gatekeeper",title:"Admission Webhook for K8s",description:"\u0648\u0633\u064a\u0637 \u062a\u0641\u0648\u064a\u0636 Kubernetes (K8s) RBAC & ABAC \u0627\u0644\u0645\u0628\u0646\u064a \u0639\u0644\u0649 Casbin",source:"@site/i18n/ar/docusaurus-plugin-content-docs/current/K8sGateKeeper.mdx",sourceDirName:".",slug:"/k8s-gatekeeper",permalink:"/ar/docs/k8s-gatekeeper",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/K8sGateKeeper.mdx",tags:[],version:"current",frontMatter:{id:"k8s-gatekeeper",title:"Admission Webhook for K8s",description:"\u0648\u0633\u064a\u0637 \u062a\u0641\u0648\u064a\u0636 Kubernetes (K8s) RBAC & ABAC \u0627\u0644\u0645\u0628\u0646\u064a \u0639\u0644\u0649 Casbin",keywords:["k8s-gatekeeper","Kubernetes","K8s"],authors:["ComradeProgrammer"]},sidebar:"docs",previous:{title:"Authorization of Kubernetes",permalink:"/ar/docs/k8s"},next:{title:"Authorization of Service Mesh through Envoy",permalink:"/ar/docs/envoy"}},s={},o=[{value:"1. \u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0648\u0648\u062b\u0627\u0626\u0642 \u0644\u0640 Casbin K8s-Gatekeeper",id:"1-\u0646\u0638\u0631\u0629-\u0639\u0627\u0645\u0629-\u0648\u0648\u062b\u0627\u0626\u0642-\u0644\u0640-casbin-k8s-gatekeeper",level:2},{value:"0.1 \u0645\u062b\u0627\u0644 \u0628\u0633\u064a\u0637",id:"01-\u0645\u062b\u0627\u0644-\u0628\u0633\u064a\u0637",level:3},{value:"1.1 \u0643\u064a\u0641 \u064a\u0639\u0645\u0644 Casbin K8s-Gatekeeper\u061f",id:"11-\u0643\u064a\u0641-\u064a\u0639\u0645\u0644-casbin-k8s-gatekeeper",level:3},{value:"1.2 \u0645\u062b\u0627\u0644 \u064a\u0648\u0636\u062d \u0643\u064a\u0641 \u064a\u0639\u0645\u0644",id:"12-\u0645\u062b\u0627\u0644-\u064a\u0648\u0636\u062d-\u0643\u064a\u0641-\u064a\u0639\u0645\u0644",level:3},{value:"2 \u062a\u062b\u0628\u064a\u062a K8s-gatekeeper",id:"2-\u062a\u062b\u0628\u064a\u062a-k8s-gatekeeper",level:2},{value:"2.1 \u0648\u064a\u0628 \u0647\u0648\u0643 \u062f\u0627\u062e\u0644\u064a",id:"21-\u0648\u064a\u0628-\u0647\u0648\u0643-\u062f\u0627\u062e\u0644\u064a",level:3},{value:"2.1.1 \u0627\u0644\u062e\u0637\u0648\u0629 1: \u0628\u0646\u0627\u0621 \u0627\u0644\u0635\u0648\u0631\u0629",id:"211-\u0627\u0644\u062e\u0637\u0648\u0629-1-\u0628\u0646\u0627\u0621-\u0627\u0644\u0635\u0648\u0631\u0629",level:4},{value:"2.1.2 \u0627\u0644\u062e\u0637\u0648\u0629 2: \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062e\u062f\u0645\u0627\u062a \u0648\u0627\u0644\u062a\u0648\u0632\u064a\u0639\u0627\u062a \u0644\u0640 K8s-gatekeeper",id:"212-\u0627\u0644\u062e\u0637\u0648\u0629-2-\u0625\u0639\u062f\u0627\u062f-\u0627\u0644\u062e\u062f\u0645\u0627\u062a-\u0648\u0627\u0644\u062a\u0648\u0632\u064a\u0639\u0627\u062a-\u0644\u0640-k8s-gatekeeper",level:4},{value:"2.1.3 \u0627\u0644\u062e\u0637\u0648\u0629 3: \u062a\u062b\u0628\u064a\u062a \u0645\u0648\u0627\u0631\u062f CRD \u0644\u0640 K8s-gatekeeper",id:"213-\u0627\u0644\u062e\u0637\u0648\u0629-3-\u062a\u062b\u0628\u064a\u062a-\u0645\u0648\u0627\u0631\u062f-crd-\u0644\u0640-k8s-gatekeeper",level:4},{value:"2.2 \u0627\u0644\u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u062e\u0627\u0631\u062c\u064a",id:"22-\u0627\u0644\u0648\u064a\u0628-\u0647\u0648\u0643-\u0627\u0644\u062e\u0627\u0631\u062c\u064a",level:3},{value:"2.3.1 \u0627\u0644\u062e\u0637\u0648\u0629 1: \u0628\u0646\u0627\u0621 \u0627\u0644\u0635\u0648\u0631\u0629",id:"231-\u0627\u0644\u062e\u0637\u0648\u0629-1-\u0628\u0646\u0627\u0621-\u0627\u0644\u0635\u0648\u0631\u0629",level:3},{value:"\u064a\u0631\u062c\u0649 \u0627\u0644\u0631\u062c\u0648\u0639 \u0625\u0644\u0649 \u0627\u0644\u0641\u0635\u0644 2.1.1.",id:"\u064a\u0631\u062c\u0649-\u0627\u0644\u0631\u062c\u0648\u0639-\u0625\u0644\u0649-\u0627\u0644\u0641\u0635\u0644-211",level:4},{value:"\u0642\u0645 \u0628\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0623\u0645\u0631 <code>helm install k8sgatekeeper ./k8sgatekeeper</code>.",id:"\u0642\u0645-\u0628\u062a\u0634\u063a\u064a\u0644-\u0627\u0644\u0623\u0645\u0631-helm-install-k8sgatekeeper-k8sgatekeeper",level:4},{value:"\u062c\u0631\u0628 K8s-gatekeeper 3.1 \u0625\u0646\u0634\u0627\u0621 \u0646\u0645\u0648\u0630\u062c Casbin \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629",id:"\u062c\u0631\u0628-k8s-gatekeeper-31-\u0625\u0646\u0634\u0627\u0621-\u0646\u0645\u0648\u0630\u062c-casbin-\u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629",level:2},{value:"\u0644\u062f\u064a\u0643 \u0637\u0631\u064a\u0642\u062a\u0627\u0646 \u0644\u0625\u0646\u0634\u0627\u0621 \u0646\u0645\u0648\u0630\u062c \u0648\u0633\u064a\u0627\u0633\u0629: \u0639\u0628\u0631 kubectl \u0623\u0648 \u0639\u0628\u0631 go-client \u0627\u0644\u0630\u064a \u0646\u0642\u062f\u0645\u0647.",id:"\u0644\u062f\u064a\u0643-\u0637\u0631\u064a\u0642\u062a\u0627\u0646-\u0644\u0625\u0646\u0634\u0627\u0621-\u0646\u0645\u0648\u0630\u062c-\u0648\u0633\u064a\u0627\u0633\u0629-\u0639\u0628\u0631-kubectl-\u0623\u0648-\u0639\u0628\u0631-go-client-\u0627\u0644\u0630\u064a-\u0646\u0642\u062f\u0645\u0647",level:3},{value:"\u0641\u064a K8s-gatekeeper\u060c \u064a\u062a\u0645 \u062a\u062e\u0632\u064a\u0646 \u0646\u0645\u0648\u0630\u062c Casbin \u0641\u064a \u0645\u0648\u0631\u062f CRD \u064a\u0633\u0645\u0649 &#39;CasbinModel&#39;.",id:"\u0641\u064a-k8s-gatekeeper-\u064a\u062a\u0645-\u062a\u062e\u0632\u064a\u0646-\u0646\u0645\u0648\u0630\u062c-casbin-\u0641\u064a-\u0645\u0648\u0631\u062f-crd-\u064a\u0633\u0645\u0649-casbinmodel",level:4},{value:"\u0646\u062d\u0646 \u0646\u0641\u0647\u0645 \u0623\u0646 \u0647\u0646\u0627\u0643 \u062d\u0627\u0644\u0627\u062a \u0642\u062f \u0644\u0627 \u064a\u0643\u0648\u0646 \u0645\u0646 \u0627\u0644\u0645\u0644\u0627\u0626\u0645 \u0641\u064a\u0647\u0627 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0634\u0644 \u0644\u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0645\u0628\u0627\u0634\u0631\u0629 \u0639\u0644\u0649 \u0639\u0642\u062f\u0629 \u0645\u0646 \u0639\u0642\u062f K8s\u060c \u0645\u062b\u0644 \u0639\u0646\u062f\u0645\u0627 \u062a\u0642\u0648\u0645 \u0628\u0628\u0646\u0627\u0621 \u0645\u0646\u0635\u0629 \u0633\u062d\u0627\u0628\u064a\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0629 \u0644\u0634\u0631\u0643\u062a\u0643.",id:"\u0646\u062d\u0646-\u0646\u0641\u0647\u0645-\u0623\u0646-\u0647\u0646\u0627\u0643-\u062d\u0627\u0644\u0627\u062a-\u0642\u062f-\u0644\u0627-\u064a\u0643\u0648\u0646-\u0645\u0646-\u0627\u0644\u0645\u0644\u0627\u0626\u0645-\u0641\u064a\u0647\u0627-\u0627\u0633\u062a\u062e\u062f\u0627\u0645-\u0627\u0644\u0634\u0644-\u0644\u062a\u0646\u0641\u064a\u0630-\u0627\u0644\u0623\u0648\u0627\u0645\u0631-\u0645\u0628\u0627\u0634\u0631\u0629-\u0639\u0644\u0649-\u0639\u0642\u062f\u0629-\u0645\u0646-\u0639\u0642\u062f-k8s-\u0645\u062b\u0644-\u0639\u0646\u062f\u0645\u0627-\u062a\u0642\u0648\u0645-\u0628\u0628\u0646\u0627\u0621-\u0645\u0646\u0635\u0629-\u0633\u062d\u0627\u0628\u064a\u0629-\u062a\u0644\u0642\u0627\u0626\u064a\u0629-\u0644\u0634\u0631\u0643\u062a\u0643",level:4},{value:"3.1.2 \u062c\u0631\u0628 \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 K8s-gatekeeper \u064a\u0639\u0645\u0644",id:"312-\u062c\u0631\u0628-\u0645\u0627-\u0625\u0630\u0627-\u0643\u0627\u0646-k8s-gatekeeper-\u064a\u0639\u0645\u0644",level:3},{value:"4. \u0643\u064a\u0641\u064a\u0629 \u0643\u062a\u0627\u0628\u0629 \u0627\u0644\u0646\u0645\u0648\u0630\u062c \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0645\u0639 K8s-gatekeeper",id:"4-\u0643\u064a\u0641\u064a\u0629-\u0643\u062a\u0627\u0628\u0629-\u0627\u0644\u0646\u0645\u0648\u0630\u062c-\u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629-\u0645\u0639-k8s-gatekeeper",level:2},{value:"4.1 \u062a\u0639\u0631\u064a\u0641 \u0627\u0644\u0637\u0644\u0628 \u0641\u064a \u0627\u0644\u0646\u0645\u0648\u0630\u062c",id:"41-\u062a\u0639\u0631\u064a\u0641-\u0627\u0644\u0637\u0644\u0628-\u0641\u064a-\u0627\u0644\u0646\u0645\u0648\u0630\u062c",level:3},{value:"4.2 \u0645\u0637\u0627\u0628\u0642\u0627\u062a \u0627\u0644\u0646\u0645\u0648\u0630\u062c",id:"42-\u0645\u0637\u0627\u0628\u0642\u0627\u062a-\u0627\u0644\u0646\u0645\u0648\u0630\u062c",level:3},{value:"4.2.1 \u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0625\u0636\u0627\u0641\u0629",id:"421-\u0648\u0638\u0627\u0626\u0641-\u0627\u0644\u0625\u0636\u0627\u0641\u0629",level:3},{value:"4.2.1.1 \u0627\u0644\u0648\u0635\u0648\u0644",id:"4211-\u0627\u0644\u0648\u0635\u0648\u0644",level:4},{value:"4.2.1.2 accessWithWildcard",id:"4212-accesswithwildcard",level:4},{value:"4.2.1.3 \u0648\u0638\u0627\u0626\u0641 \u062a\u062f\u0639\u0645 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u062a\u063a\u064a\u0631\u0629 \u0627\u0644\u0637\u0648\u0644",id:"4213-\u0648\u0638\u0627\u0626\u0641-\u062a\u062f\u0639\u0645-\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a-\u0627\u0644\u0645\u062a\u063a\u064a\u0631\u0629-\u0627\u0644\u0637\u0648\u0644",level:3},{value:"4.2.1.2 \u0648\u0638\u0627\u0626\u0641 \u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0646\u0648\u0639",id:"4212-\u0648\u0638\u0627\u0626\u0641-\u062a\u062d\u0648\u064a\u0644-\u0627\u0644\u0646\u0648\u0639",level:4},{value:"5. \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629",id:"5-\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a-\u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629",level:2},{value:"5.1 \u062d\u0648\u0644 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a",id:"51-\u062d\u0648\u0644-\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a",level:3},{value:"5.1.1 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0630\u0627\u062a\u064a\u0629 \u0627\u0644\u062a\u0648\u0642\u064a\u0639",id:"511-\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a-\u0630\u0627\u062a\u064a\u0629-\u0627\u0644\u062a\u0648\u0642\u064a\u0639",level:4},{value:"5.1.2 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a\u0629",id:"512-\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a-\u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a\u0629",level:4}],k={toc:o};function c(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"1-\u0646\u0638\u0631\u0629-\u0639\u0627\u0645\u0629-\u0648\u0648\u062b\u0627\u0626\u0642-\u0644\u0640-casbin-k8s-gatekeeper"},"1. \u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0648\u0648\u062b\u0627\u0626\u0642 \u0644\u0640 Casbin K8s-Gatekeeper"),(0,l.kt)("p",null,"Casbin K8s-GateKeeper \u0647\u0648 \u0648\u064a\u0628 \u0647\u0648\u0643 \u0644\u0644\u0642\u0628\u0648\u0644 \u0641\u064a Kubernetes \u064a\u062f\u0645\u062c Casbin \u0643\u0623\u062f\u0627\u0629 \u0644\u0644\u062a\u062d\u0643\u0645 \u0641\u064a \u0627\u0644\u0648\u0635\u0648\u0644. \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 Casbin K8s-GateKeeper\u060c \u064a\u0645\u0643\u0646\u0643 \u0625\u0646\u0634\u0627\u0621 \u0642\u0648\u0627\u0639\u062f \u0645\u0631\u0646\u0629 \u0644\u062a\u0641\u0648\u064a\u0636 \u0623\u0648 \u0627\u0639\u062a\u0631\u0627\u0636 \u0623\u064a \u0639\u0645\u0644\u064a\u0629 \u0639\u0644\u0649 \u0645\u0648\u0627\u0631\u062f K8s\u060c \u062f\u0648\u0646 \u0643\u062a\u0627\u0628\u0629 \u0623\u064a \u062c\u0632\u0621 \u0645\u0646 \u0627\u0644\u0643\u0648\u062f\u060c \u0648\u0644\u0643\u0646 \u0641\u0642\u0637 \u0628\u0639\u0636 \u0627\u0644\u0623\u0633\u0637\u0631 \u0645\u0646 \u0627\u0644\u062a\u0643\u0648\u064a\u0646\u0627\u062a \u0627\u0644\u0625\u0639\u0644\u0627\u0646\u064a\u0629 \u0644\u0646\u0645\u0627\u0630\u062c \u0648\u0633\u064a\u0627\u0633\u0627\u062a Casbin\u060c \u0648\u0627\u0644\u062a\u064a \u0647\u064a \u062c\u0632\u0621 \u0645\u0646 \u0644\u063a\u0629 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062a\u062d\u0643\u0645 \u0641\u064a \u0627\u0644\u0648\u0635\u0648\u0644 (ACL) \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0640 Casbin."),(0,l.kt)("p",null,"Casbin K8s-GateKeeper \u062a\u0645 \u062a\u0637\u0648\u064a\u0631\u0647 \u0648\u0635\u064a\u0627\u0646\u062a\u0647 \u0645\u0646 \u0642\u0628\u0644 \u0645\u062c\u062a\u0645\u0639 Casbin. \u0645\u0633\u062a\u0648\u062f\u0639 \u0647\u0630\u0627 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0645\u062a\u0627\u062d \u0647\u0646\u0627: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/casbin/k8s-gatekeeper"},"https://github.com/casbin/k8s-gatekeeper")),(0,l.kt)("h3",{id:"01-\u0645\u062b\u0627\u0644-\u0628\u0633\u064a\u0637"},"0.1 \u0645\u062b\u0627\u0644 \u0628\u0633\u064a\u0637"),(0,l.kt)("p",null,'\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0644\u0627 \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0643\u062a\u0627\u0628\u0629 \u0623\u064a \u0643\u0648\u062f\u060c \u0648\u0644\u0643\u0646 \u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0623\u0633\u0637\u0631 \u0627\u0644\u062a\u0627\u0644\u064a\u0629 \u0645\u0646 \u0627\u0644\u062a\u0643\u0648\u064a\u0646 \u0644\u062a\u062d\u0642\u064a\u0642 \u0647\u0630\u0647 \u0627\u0644\u0648\u0638\u064a\u0641\u0629: "\u0645\u0646\u0639 \u0627\u0644\u0635\u0648\u0631 \u0630\u0627\u062a \u0627\u0644\u0639\u0644\u0627\u0645\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629 \u0645\u0646 \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0641\u064a \u0623\u064a \u0639\u0645\u0644\u064a\u0627\u062a \u0646\u0634\u0631":'),(0,l.kt)("p",null,"Model:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},'[request_definition]\nr =  obj\n\n[policy_definition]\np =  obj,eft\n\n[policy_effect]\ne = !some(where (p.eft == deny))\n\n[matchers]\nm = r.obj.Request.Namespace == "default" && r.obj.Request.Resource.Resource =="deployments" && \\\ncontain(split(accessWithWildcard(${OBJECT}.Spec.Template.Spec.Containers , "*", "Image"),":",1) , p.obj)\n')),(0,l.kt)("p",null,"And Policy:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csv"},'p, "1.14.1",deny\n')),(0,l.kt)("p",null,"\u0647\u0630\u0647 \u0628\u0644\u063a\u0629 Casbin ACL \u0627\u0644\u0639\u0627\u062f\u064a\u0629. \u0644\u0646\u0641\u062a\u0631\u0636 \u0623\u0646\u0643 \u0642\u062f \u0642\u0631\u0623\u062a \u0628\u0627\u0644\u0641\u0639\u0644 \u0627\u0644\u0641\u0635\u0648\u0644 \u0639\u0646\u0647\u0627\u060c \u0633\u064a\u0643\u0648\u0646 \u0645\u0646 \u0627\u0644\u0633\u0647\u0644 \u062c\u062f\u064b\u0627 \u0641\u0647\u0645\u0647\u0627."),(0,l.kt)("p",null,"Casbin K8s-Gatekeeper \u0644\u0647 \u0627\u0644\u0645\u0632\u0627\u064a\u0627 \u0627\u0644\u062a\u0627\u0644\u064a\u0629:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u0633\u0647\u0644 \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645. \u0643\u062a\u0627\u0628\u0629 \u0628\u0639\u0636 \u0627\u0644\u0623\u0633\u0637\u0631 \u0645\u0646 ACL \u0623\u0641\u0636\u0644 \u0628\u0643\u062b\u064a\u0631 \u0645\u0646 \u0643\u062a\u0627\u0628\u0629 \u0627\u0644\u0643\u062b\u064a\u0631 \u0645\u0646 \u0627\u0644\u0643\u0648\u062f."),(0,l.kt)("li",{parentName:"ul"},"\u064a\u0633\u0645\u062d \u0628\u062a\u062d\u062f\u064a\u062b\u0627\u062a \u0633\u0627\u062e\u0646\u0629 \u0644\u0644\u062a\u0643\u0648\u064a\u0646\u0627\u062a. \u0644\u0627 \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0625\u064a\u0642\u0627\u0641 \u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0623\u0643\u0645\u0644\u0647\u0627 \u0644\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062a\u0643\u0648\u064a\u0646\u0627\u062a."),(0,l.kt)("li",{parentName:"ul"},"\u0647\u0648 \u0645\u0631\u0646. \u064a\u0645\u0643\u0646 \u0635\u0646\u0639 \u0642\u0648\u0627\u0639\u062f \u062a\u0639\u0633\u0641\u064a\u0629 \u0639\u0644\u0649 \u0623\u064a \u0645\u0648\u0631\u062f K8s\u060c \u0648\u0627\u0644\u062a\u064a \u064a\u0645\u0643\u0646 \u0627\u0633\u062a\u0643\u0634\u0627\u0641\u0647\u0627 \u0645\u0639 ",(0,l.kt)("inlineCode",{parentName:"li"},"kubectl gatekeeper"),"."),(0,l.kt)("li",{parentName:"ul"},"\u064a\u0628\u0633\u0637 \u062a\u0646\u0641\u064a\u0630 \u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u0642\u0628\u0648\u0644 \u0641\u064a K8s\u060c \u0648\u0627\u0644\u0630\u064a \u064a\u0639\u062a\u0628\u0631 \u0645\u0639\u0642\u062f\u064b\u0627 \u0644\u0644\u063a\u0627\u064a\u0629. \u0644\u0627 \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0645\u0639\u0631\u0641\u0629 \u0645\u0627 \u0647\u0648 \u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u0642\u0628\u0648\u0644 \u0641\u064a K8s \u0623\u0648 \u0643\u064a\u0641\u064a\u0629 \u0643\u062a\u0627\u0628\u0629 \u0627\u0644\u0643\u0648\u062f \u0644\u0647. \u0643\u0644 \u0645\u0627 \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0645\u0639\u0631\u0641\u062a\u0647 \u0647\u0648 \u0627\u0644\u0645\u0648\u0631\u062f \u0627\u0644\u0630\u064a \u062a\u0631\u064a\u062f \u0648\u0636\u0639 \u0642\u064a\u0648\u062f \u0639\u0644\u064a\u0647 \u062b\u0645 \u0643\u062a\u0627\u0628\u0629 Casbin ACL. \u0627\u0644\u062c\u0645\u064a\u0639 \u064a\u0639\u0644\u0645 \u0623\u0646 K8s \u0645\u0639\u0642\u062f\u060c \u0648\u0644\u0643\u0646 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 Casbin K8s-Gatekeeper\u060c \u064a\u0645\u0643\u0646 \u062a\u0648\u0641\u064a\u0631 \u0648\u0642\u062a\u0643."),(0,l.kt)("li",{parentName:"ul"},"\u064a\u062a\u0645 \u0635\u064a\u0627\u0646\u062a\u0647 \u0645\u0646 \u0642\u0628\u0644 \u0645\u062c\u062a\u0645\u0639 Casbin. \u0644\u0627 \u062a\u062a\u0631\u062f\u062f \u0641\u064a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0646\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 \u0647\u0646\u0627\u0643 \u0623\u064a \u0634\u064a\u0621 \u064a\u062d\u064a\u0631\u0643 \u062d\u0648\u0644 \u0647\u0630\u0647 \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0623\u0648 \u0625\u0630\u0627 \u0648\u0627\u062c\u0647\u062a \u0623\u064a \u0645\u0634\u0627\u0643\u0644 \u0639\u0646\u062f \u062a\u062c\u0631\u0628\u062a\u0647\u0627.")),(0,l.kt)("h3",{id:"11-\u0643\u064a\u0641-\u064a\u0639\u0645\u0644-casbin-k8s-gatekeeper"},"1.1 \u0643\u064a\u0641 \u064a\u0639\u0645\u0644 Casbin K8s-Gatekeeper\u061f"),(0,l.kt)("p",null,"K8s-Gatekeeper \u0647\u0648 \u0648\u064a\u0628 \u0647\u0648\u0643 \u0644\u0644\u0642\u0628\u0648\u0644 \u0641\u064a K8s \u064a\u0633\u062a\u062e\u062f\u0645 ",(0,l.kt)("a",{parentName:"p",href:"/docs/overview"},"Casbin")," \u0644\u062a\u0637\u0628\u064a\u0642 \u0642\u0648\u0627\u0639\u062f \u062a\u062d\u0643\u0645 \u0641\u064a \u0627\u0644\u0648\u0635\u0648\u0644 \u0645\u062d\u062f\u062f\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0634\u0643\u0644 \u062a\u0639\u0633\u0641\u064a \u0644\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0641\u064a \u0645\u0646\u0639 \u0623\u064a \u0639\u0645\u0644\u064a\u0629 \u0639\u0644\u0649 K8s \u0644\u0627 \u064a\u0631\u064a\u062f\u0647\u0627 \u0627\u0644\u0645\u0633\u0624\u0648\u0644."),(0,l.kt)("p",null,"Casbin \u0647\u0648 \u0645\u0643\u062a\u0628\u0629 \u062a\u062d\u0643\u0645 \u0641\u064a \u0627\u0644\u0648\u0635\u0648\u0644 \u0645\u0641\u062a\u0648\u062d\u0629 \u0627\u0644\u0645\u0635\u062f\u0631 \u0642\u0648\u064a\u0629 \u0648\u0641\u0639\u0627\u0644\u0629. \u064a\u0648\u0641\u0631 \u062f\u0639\u0645\u064b\u0627 \u0644\u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u062a\u0641\u0648\u064a\u0636 \u0628\u0646\u0627\u0621\u064b \u0639\u0644\u0649 \u0646\u0645\u0627\u0630\u062c \u062a\u062d\u0643\u0645 \u0641\u064a \u0627\u0644\u0648\u0635\u0648\u0644 \u0627\u0644\u0645\u062e\u062a\u0644\u0641\u0629. \u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 \u062d\u0648\u0644 Casbin\u060c \u0627\u0646\u0638\u0631 ",(0,l.kt)("a",{parentName:"p",href:"/docs/overview"},"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629"),"."),(0,l.kt)("p",null,"\u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u0642\u0628\u0648\u0644 \u0641\u064a K8s \u0647\u064a \u0627\u0633\u062a\u062f\u0639\u0627\u0621\u0627\u062a HTTP \u062a\u062a\u0644\u0642\u0649 '\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0642\u0628\u0648\u0644' \u0648\u062a\u0642\u0648\u0645 \u0628\u0634\u064a\u0621 \u0645\u0627 \u0645\u0639\u0647\u0627. \u0639\u0644\u0649 \u0648\u062c\u0647 \u0627\u0644\u062e\u0635\u0648\u0635\u060c K8s-Gatekeeper \u0647\u0648 \u0646\u0648\u0639 \u062e\u0627\u0635 \u0645\u0646 \u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u0642\u0628\u0648\u0644: 'ValidatingAdmissionWebhook'\u060c \u0648\u0627\u0644\u0630\u064a \u064a\u0645\u0643\u0646\u0647 \u0623\u0646 \u064a\u0642\u0631\u0631 \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 \u0633\u064a\u0642\u0628\u0644 \u0637\u0644\u0628 \u0627\u0644\u0642\u0628\u0648\u0644 \u0647\u0630\u0627 \u0623\u0645 \u0644\u0627. \u0623\u0645\u0627 \u0628\u0627\u0644\u0646\u0633\u0628\u0629 \u0644\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0642\u0628\u0648\u0644\u060c \u0641\u0647\u064a \u0637\u0644\u0628\u0627\u062a HTTP \u062a\u0635\u0641 \u0639\u0645\u0644\u064a\u0629 \u0639\u0644\u0649 \u0645\u0648\u0627\u0631\u062f \u0645\u062d\u062f\u062f\u0629 \u0641\u064a K8s (\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0625\u0646\u0634\u0627\u0621/\u062d\u0630\u0641 \u0639\u0645\u0644\u064a\u0629 \u0646\u0634\u0631). \u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0648\u0644 \u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u0642\u0628\u0648\u0644\u060c \u0627\u0646\u0638\u0631 ",(0,l.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#what-are-admission-webhooks"},"\u0627\u0644\u0648\u062b\u0627\u0626\u0642 \u0627\u0644\u0631\u0633\u0645\u064a\u0629 \u0644\u0640 K8s"),"."),(0,l.kt)("h3",{id:"12-\u0645\u062b\u0627\u0644-\u064a\u0648\u0636\u062d-\u0643\u064a\u0641-\u064a\u0639\u0645\u0644"},"1.2 \u0645\u062b\u0627\u0644 \u064a\u0648\u0636\u062d \u0643\u064a\u0641 \u064a\u0639\u0645\u0644"),(0,l.kt)("p",null,"\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0639\u0646\u062f\u0645\u0627 \u064a\u0631\u063a\u0628 \u0634\u062e\u0635 \u0645\u0627 \u0641\u064a \u0625\u0646\u0634\u0627\u0621 \u0639\u0645\u0644\u064a\u0629 \u0646\u0634\u0631 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0628\u0648\u062f \u064a\u0634\u063a\u0644 nginx (\u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 kubectl \u0623\u0648 \u0639\u0645\u0644\u0627\u0621 K8s)\u060c \u0633\u064a\u0648\u0644\u062f K8s \u0637\u0644\u0628 \u0642\u0628\u0648\u0644\u060c \u0648\u0627\u0644\u0630\u064a (\u0625\u0630\u0627 \u062a\u0645 \u062a\u0631\u062c\u0645\u062a\u0647 \u0625\u0644\u0649 \u062a\u0646\u0633\u064a\u0642 YAML) \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0634\u064a\u0626\u064b\u0627 \u0645\u062b\u0644 \u0647\u0630\u0627:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  selector:\n    matchLabels:\n      app: nginx\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:1.14.1\n        ports:\n        - containerPort: 80\n")),(0,l.kt)("p",null,"\u0633\u064a\u0645\u0631 \u0647\u0630\u0627 \u0627\u0644\u0637\u0644\u0628 \u0628\u0639\u0645\u0644\u064a\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0648\u0633\u0637\u0627\u0621 \u0627\u0644\u0645\u0648\u0636\u062d\u064a\u0646 \u0641\u064a \u0627\u0644\u0635\u0648\u0631\u0629\u060c \u0628\u0645\u0627 \u0641\u064a \u0630\u0644\u0643 K8s-Gatekeeper \u0627\u0644\u062e\u0627\u0635 \u0628\u0646\u0627. \u064a\u0645\u0643\u0646 \u0644\u0640 K8s-Gatekeeper \u0627\u0643\u062a\u0634\u0627\u0641 \u062c\u0645\u064a\u0639 \u0645\u0637\u0628\u0642\u0627\u062a Casbin \u0627\u0644\u0645\u062e\u0632\u0646\u0629 \u0641\u064a etcd \u0627\u0644\u062e\u0627\u0635 \u0628\u0640 K8s\u060c \u0648\u0627\u0644\u062a\u064a \u064a\u062a\u0645 \u0625\u0646\u0634\u0627\u0624\u0647\u0627 \u0648\u0635\u064a\u0627\u0646\u062a\u0647\u0627 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 (\u0639\u0628\u0631 ",(0,l.kt)("inlineCode",{parentName:"p"},"kubectl")," \u0623\u0648 \u0627\u0644\u0639\u0645\u064a\u0644 Go \u0627\u0644\u0630\u064a \u0646\u0648\u0641\u0631\u0647). \u0643\u0644 \u0645\u0637\u0628\u0642 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0646\u0645\u0648\u0630\u062c Casbin \u0648\u0633\u064a\u0627\u0633\u0629 Casbin. \u0633\u064a\u062a\u0645 \u0645\u0639\u0627\u0644\u062c\u0629 \u0637\u0644\u0628 \u0627\u0644\u0642\u0628\u0648\u0644 \u0628\u0648\u0627\u0633\u0637\u0629 \u0643\u0644 \u0645\u0637\u0628\u0642\u060c \u0648\u0627\u062d\u062f\u064b\u0627 \u062a\u0644\u0648 \u0627\u0644\u0622\u062e\u0631\u060c \u0648\u0641\u0642\u0637 \u0628\u0627\u0644\u0645\u0631\u0648\u0631 \u0639\u0628\u0631 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0637\u0628\u0642\u0627\u062a \u064a\u0645\u0643\u0646 \u0642\u0628\u0648\u0644 \u0637\u0644\u0628 \u0628\u0648\u0627\u0633\u0637\u0629 \u0647\u0630\u0627 K8s-Gatekeeper."),(0,l.kt)("p",null,"(\u0625\u0630\u0627 \u0643\u0646\u062a \u0644\u0627 \u062a\u0641\u0647\u0645 \u0645\u0627 \u0647\u0648 \u0645\u0637\u0628\u0642 Casbin\u060c \u0623\u0648 \u0646\u0645\u0648\u0630\u062c\u060c \u0623\u0648 \u0633\u064a\u0627\u0633\u0629\u060c \u0627\u0646\u0638\u0631 \u0647\u0630\u0627 \u0627\u0644\u0648\u062b\u064a\u0642\u0629: ",(0,l.kt)("a",{parentName:"p",href:"/docs/get-started"},"\u0627\u0644\u0628\u062f\u0621"),")."),(0,l.kt)("p",null,"\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0644\u0633\u0628\u0628 \u0645\u0627\u060c \u064a\u0631\u064a\u062f \u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0645\u0646\u0639 \u0638\u0647\u0648\u0631 \u0627\u0644\u0635\u0648\u0631\u0629 'nginx:1.14.1' \u0645\u0639 \u0627\u0644\u0633\u0645\u0627\u062d \u0628\u0640 'nginx:1.3.1'. \u064a\u0645\u0643\u0646 \u0625\u0646\u0634\u0627\u0621 \u0645\u0637\u0628\u0642 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0627\u0644\u0642\u0627\u0639\u062f\u0629 \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0627\u0644\u062a\u0627\u0644\u064a\u0629 (\u0633\u0646\u0634\u0631\u062d \u0643\u064a\u0641\u064a\u0629 \u0625\u0646\u0634\u0627\u0621 \u0645\u0637\u0628\u0642\u060c \u0645\u0627 \u0647\u064a \u0647\u0630\u0647 \u0627\u0644\u0646\u0645\u0627\u0630\u062c \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0627\u062a\u060c \u0648\u0643\u064a\u0641\u064a\u0629 \u0643\u062a\u0627\u0628\u062a\u0647\u0627 \u0641\u064a \u0627\u0644\u0641\u0635\u0648\u0644 \u0627\u0644\u062a\u0627\u0644\u064a\u0629)."),(0,l.kt)("p",null,"Model:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},'[request_definition]\nr =  obj\n\n[policy_definition]\np =  obj,eft\n\n[policy_effect]\ne = !some(where (p.eft == deny))\n\n[matchers]\nm = r.obj.Request.Namespace == "default" && r.obj.Request.Resource.Resource =="deployments" && \\\naccess(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, "Image") == p.obj\n\n')),(0,l.kt)("p",null,"Policy:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-csv"},'p, "nginx:1.13.1",allow\np, "nginx:1.14.1",deny\n')),(0,l.kt)("p",null,"\u0628\u0625\u0646\u0634\u0627\u0621 \u0645\u0637\u0628\u0642 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0627\u0644\u0646\u0645\u0648\u0630\u062c \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0623\u0639\u0644\u0627\u0647\u060c \u0633\u064a\u062a\u0645 \u0631\u0641\u0636 \u0637\u0644\u0628 \u0627\u0644\u0642\u0628\u0648\u0644 \u0627\u0644\u0633\u0627\u0628\u0642 \u0645\u0646 \u0642\u0628\u0644 \u0647\u0630\u0627 \u0627\u0644\u0645\u0637\u0628\u0642\u060c \u0645\u0645\u0627 \u064a\u0639\u0646\u064a \u0623\u0646 K8s \u0644\u0646 \u064a\u0646\u0634\u0626 \u0647\u0630\u0647 \u0627\u0644\u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0646\u0634\u0631."),(0,l.kt)("h2",{id:"2-\u062a\u062b\u0628\u064a\u062a-k8s-gatekeeper"},"2 \u062a\u062b\u0628\u064a\u062a K8s-gatekeeper"),(0,l.kt)("p",null,"\u0647\u0646\u0627\u0643 \u062b\u0644\u0627\u062b \u0637\u0631\u0642 \u0645\u062a\u0627\u062d\u0629 \u0644\u062a\u062b\u0628\u064a\u062a K8s-gatekeeper: \u0648\u064a\u0628 \u0647\u0648\u0643 \u062e\u0627\u0631\u062c\u064a\u060c \u0648\u064a\u0628 \u0647\u0648\u0643 \u062f\u0627\u062e\u0644\u064a\u060c \u0648Helm."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"\u0645\u0644\u0627\u062d\u0638\u0629: \u0647\u0630\u0647 \u0627\u0644\u0637\u0631\u0642 \u0645\u062e\u0635\u0635\u0629 \u0641\u0642\u0637 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0644\u062a\u062c\u0631\u0628\u0629 K8s-gatekeeper \u0648\u0644\u064a\u0633\u062a \u0622\u0645\u0646\u0629. \u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0631\u063a\u0628 \u0641\u064a \u0627\u0633\u062a\u062e\u062f\u0627\u0645\u0647 \u0641\u064a \u0628\u064a\u0626\u0629 \u0625\u0646\u062a\u0627\u062c\u064a\u0629\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0623\u0643\u062f \u0645\u0646 \u0642\u0631\u0627\u0621\u0629 ",(0,l.kt)("a",{parentName:"p",href:"#5-advanced-settings"},"\u0627\u0644\u0641\u0635\u0644 5. \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629")," \u0648\u0625\u062c\u0631\u0627\u0621 \u0623\u064a \u062a\u0639\u062f\u064a\u0644\u0627\u062a \u0636\u0631\u0648\u0631\u064a\u0629 \u0642\u0628\u0644 \u0627\u0644\u062a\u062b\u0628\u064a\u062a.")),(0,l.kt)("h3",{id:"21-\u0648\u064a\u0628-\u0647\u0648\u0643-\u062f\u0627\u062e\u0644\u064a"},"2.1 \u0648\u064a\u0628 \u0647\u0648\u0643 \u062f\u0627\u062e\u0644\u064a"),(0,l.kt)("h4",{id:"211-\u0627\u0644\u062e\u0637\u0648\u0629-1-\u0628\u0646\u0627\u0621-\u0627\u0644\u0635\u0648\u0631\u0629"},"2.1.1 \u0627\u0644\u062e\u0637\u0648\u0629 1: \u0628\u0646\u0627\u0621 \u0627\u0644\u0635\u0648\u0631\u0629"),(0,l.kt)("p",null,"\u0644\u0644\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0627\u062e\u0644\u064a\u0629 \u0644\u0644\u0648\u064a\u0628 \u0647\u0648\u0643\u060c \u0633\u064a\u062a\u0645 \u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0648\u064a\u0628 \u0647\u0648\u0643 \u0646\u0641\u0633\u0647 \u0643\u062e\u062f\u0645\u0629 \u062f\u0627\u062e\u0644 Kubernetes. \u0644\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062e\u062f\u0645\u0629 \u0648\u0627\u0644\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0644\u0627\u0632\u0645\u064a\u0646\u060c \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0628\u0646\u0627\u0621 \u0635\u0648\u0631\u0629 \u0644\u0640 K8s-gatekeeper. \u064a\u0645\u0643\u0646\u0643 \u0628\u0646\u0627\u0621 \u0635\u0648\u0631\u062a\u0643 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0623\u0645\u0631 \u0627\u0644\u062a\u0627\u0644\u064a:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker build --target webhook -t k8s-gatekeeper .\n")),(0,l.kt)("p",null,"\u0647\u0630\u0627 \u0627\u0644\u0623\u0645\u0631 \u0633\u064a\u0642\u0648\u0645 \u0628\u0625\u0646\u0634\u0627\u0621 \u0635\u0648\u0631\u0629 \u0645\u062d\u0644\u064a\u0629 \u062a\u0633\u0645\u0649 'k8s-gatekeeper:latest'."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"\u0645\u0644\u0627\u062d\u0638\u0629: \u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0633\u062a\u062e\u062f\u0645 minikube\u060c \u064a\u0631\u062c\u0649 \u062a\u0646\u0641\u064a\u0630 ",(0,l.kt)("inlineCode",{parentName:"p"},"eval $(minikube -p minikube docker-env)")," \u0642\u0628\u0644 \u062a\u0634\u063a\u064a\u0644 'docker build'.")),(0,l.kt)("h4",{id:"212-\u0627\u0644\u062e\u0637\u0648\u0629-2-\u0625\u0639\u062f\u0627\u062f-\u0627\u0644\u062e\u062f\u0645\u0627\u062a-\u0648\u0627\u0644\u062a\u0648\u0632\u064a\u0639\u0627\u062a-\u0644\u0640-k8s-gatekeeper"},"2.1.2 \u0627\u0644\u062e\u0637\u0648\u0629 2: \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062e\u062f\u0645\u0627\u062a \u0648\u0627\u0644\u062a\u0648\u0632\u064a\u0639\u0627\u062a \u0644\u0640 K8s-gatekeeper"),(0,l.kt)("p",null,"\u0642\u0645 \u0628\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u062a\u0627\u0644\u064a\u0629:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f config/rbac.yaml\nkubectl apply -f config/webhook_deployment.yaml \nkubectl apply -f config/webhook_internal.yaml \n")),(0,l.kt)("p",null,"\u0647\u0630\u0627 \u0633\u064a\u0628\u062f\u0623 \u062a\u0634\u063a\u064a\u0644 K8s-gatekeeper\u060c \u0648\u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u062a\u0623\u0643\u062f \u0645\u0646 \u0630\u0644\u0643 \u0628\u062a\u0634\u063a\u064a\u0644 ",(0,l.kt)("inlineCode",{parentName:"p"},"kubectl get pods"),"."),(0,l.kt)("h4",{id:"213-\u0627\u0644\u062e\u0637\u0648\u0629-3-\u062a\u062b\u0628\u064a\u062a-\u0645\u0648\u0627\u0631\u062f-crd-\u0644\u0640-k8s-gatekeeper"},"2.1.3 \u0627\u0644\u062e\u0637\u0648\u0629 3: \u062a\u062b\u0628\u064a\u062a \u0645\u0648\u0627\u0631\u062f CRD \u0644\u0640 K8s-gatekeeper"),(0,l.kt)("p",null,"\u0642\u0645 \u0628\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u062a\u0627\u0644\u064a\u0629:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f config/auth.casbin.org_casbinmodels.yaml \nkubectl apply -f config/auth.casbin.org_casbinpolicies.yaml\n")),(0,l.kt)("h3",{id:"22-\u0627\u0644\u0648\u064a\u0628-\u0647\u0648\u0643-\u0627\u0644\u062e\u0627\u0631\u062c\u064a"},"2.2 \u0627\u0644\u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u062e\u0627\u0631\u062c\u064a"),(0,l.kt)("p",null,"\u0644\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0648\u064a\u0628 \u0647\u0648\u0643 \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629\u060c \u0633\u064a\u062a\u0645 \u062a\u0634\u063a\u064a\u0644 K8s-gatekeeper \u062e\u0627\u0631\u062c Kubernetes\u060c \u0648\u0633\u064a\u0642\u0648\u0645 Kubernetes \u0628\u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 K8s-gatekeeper \u0643\u0645\u0627 \u0644\u0648 \u0643\u0627\u0646 \u064a\u0635\u0644 \u0625\u0644\u0649 \u0645\u0648\u0642\u0639 \u0648\u064a\u0628 \u0639\u0627\u062f\u064a. Kubernetes \u0644\u062f\u064a\u0647 \u0645\u062a\u0637\u0644\u0628 \u0625\u0644\u0632\u0627\u0645\u064a \u0628\u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0648\u064a\u0628 \u0647\u0648\u0643 \u0644\u0644\u0642\u0628\u0648\u0644 HTTPS. \u0644\u063a\u0631\u0636 \u062a\u062c\u0631\u0628\u0629 K8s-gatekeeper\u060c \u0642\u062f\u0645\u0646\u0627 \u0645\u062c\u0645\u0648\u0639\u0629 \u0645\u0646 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0648\u0645\u0641\u062a\u0627\u062d \u062e\u0627\u0635 (\u0639\u0644\u0649 \u0627\u0644\u0631\u063a\u0645 \u0645\u0646 \u0623\u0646 \u0647\u0630\u0627 \u0644\u064a\u0633 \u0622\u0645\u0646\u064b\u0627). \u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0641\u0636\u0644 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0634\u0647\u0627\u062f\u062a\u0643 \u0627\u0644\u062e\u0627\u0635\u0629\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0631\u062c\u0648\u0639 \u0625\u0644\u0649 ",(0,l.kt)("a",{parentName:"p",href:"#5-advanced-settings"},"\u0627\u0644\u0641\u0635\u0644 5. \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629")," \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u062a\u0639\u0644\u064a\u0645\u0627\u062a \u062d\u0648\u0644 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0648\u0627\u0644\u0645\u0641\u062a\u0627\u062d \u0627\u0644\u062e\u0627\u0635. \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u062a\u064a \u0646\u0642\u062f\u0645\u0647\u0627 \u0635\u0627\u062f\u0631\u0629 \u0644\u0640 'webhook.domain.local'."),(0,l.kt)("p",null,"\u0644\u0630\u0627\u060c \u0642\u0645 \u0628\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0636\u064a\u0641 (\u0645\u062b\u0644\u060c /etc/hosts) \u0648\u0623\u0634\u0631 'webhook.domain.local' \u0625\u0644\u0649 \u0639\u0646\u0648\u0627\u0646 IP \u0627\u0644\u0630\u064a \u064a\u0639\u0645\u0644 \u0639\u0644\u064a\u0647 K8s-gatekeeper. \u062b\u0645 \u0646\u0641\u0630 \u0627\u0644\u0623\u0645\u0631 \u0627\u0644\u062a\u0627\u0644\u064a:"),(0,l.kt)("p",null,"2.3 \u062a\u062b\u0628\u064a\u062a K8s-gatekeeper \u0639\u0628\u0631 Helm"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"go mod tidy\ngo mod vendor\ngo run cmd/webhook/main.go\nkubectl apply -f config/auth.casbin.org_casbinmodels.yaml \nkubectl apply -f config/auth.casbin.org_casbinpolicies.yaml\nkubectl apply -f config/webhook_external.yaml \n")),(0,l.kt)("h3",{id:"231-\u0627\u0644\u062e\u0637\u0648\u0629-1-\u0628\u0646\u0627\u0621-\u0627\u0644\u0635\u0648\u0631\u0629"},"2.3.1 \u0627\u0644\u062e\u0637\u0648\u0629 1: \u0628\u0646\u0627\u0621 \u0627\u0644\u0635\u0648\u0631\u0629"),(0,l.kt)("h4",{id:"\u064a\u0631\u062c\u0649-\u0627\u0644\u0631\u062c\u0648\u0639-\u0625\u0644\u0649-\u0627\u0644\u0641\u0635\u0644-211"},"\u064a\u0631\u062c\u0649 \u0627\u0644\u0631\u062c\u0648\u0639 \u0625\u0644\u0649 ",(0,l.kt)("a",{parentName:"h4",href:"#211-step-1-build-the-image"},"\u0627\u0644\u0641\u0635\u0644 2.1.1"),"."),(0,l.kt)("p",null,"2.3.2 \u062a\u062b\u0628\u064a\u062a Helm"),(0,l.kt)("h4",{id:"\u0642\u0645-\u0628\u062a\u0634\u063a\u064a\u0644-\u0627\u0644\u0623\u0645\u0631-helm-install-k8sgatekeeper-k8sgatekeeper"},"\u0642\u0645 \u0628\u062a\u0634\u063a\u064a\u0644 \u0627\u0644\u0623\u0645\u0631 ",(0,l.kt)("inlineCode",{parentName:"h4"},"helm install k8sgatekeeper ./k8sgatekeeper"),"."),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"})),(0,l.kt)("h2",{id:"\u062c\u0631\u0628-k8s-gatekeeper-31-\u0625\u0646\u0634\u0627\u0621-\u0646\u0645\u0648\u0630\u062c-casbin-\u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629"},"\u062c\u0631\u0628 K8s-gatekeeper 3.1 \u0625\u0646\u0634\u0627\u0621 \u0646\u0645\u0648\u0630\u062c Casbin \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629"),(0,l.kt)("h3",{id:"\u0644\u062f\u064a\u0643-\u0637\u0631\u064a\u0642\u062a\u0627\u0646-\u0644\u0625\u0646\u0634\u0627\u0621-\u0646\u0645\u0648\u0630\u062c-\u0648\u0633\u064a\u0627\u0633\u0629-\u0639\u0628\u0631-kubectl-\u0623\u0648-\u0639\u0628\u0631-go-client-\u0627\u0644\u0630\u064a-\u0646\u0642\u062f\u0645\u0647"},"\u0644\u062f\u064a\u0643 \u0637\u0631\u064a\u0642\u062a\u0627\u0646 \u0644\u0625\u0646\u0634\u0627\u0621 \u0646\u0645\u0648\u0630\u062c \u0648\u0633\u064a\u0627\u0633\u0629: \u0639\u0628\u0631 kubectl \u0623\u0648 \u0639\u0628\u0631 go-client \u0627\u0644\u0630\u064a \u0646\u0642\u062f\u0645\u0647."),(0,l.kt)("p",null,"3.1.1 \u0625\u0646\u0634\u0627\u0621/\u062a\u062d\u062f\u064a\u062b \u0646\u0645\u0648\u0630\u062c Casbin \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0639\u0628\u0631 kubectl"),(0,l.kt)("h4",{id:"\u0641\u064a-k8s-gatekeeper-\u064a\u062a\u0645-\u062a\u062e\u0632\u064a\u0646-\u0646\u0645\u0648\u0630\u062c-casbin-\u0641\u064a-\u0645\u0648\u0631\u062f-crd-\u064a\u0633\u0645\u0649-casbinmodel"},"\u0641\u064a K8s-gatekeeper\u060c \u064a\u062a\u0645 \u062a\u062e\u0632\u064a\u0646 \u0646\u0645\u0648\u0630\u062c Casbin \u0641\u064a \u0645\u0648\u0631\u062f CRD \u064a\u0633\u0645\u0649 'CasbinModel'."),(0,l.kt)("p",null,"\u062a\u0642\u0639 \u062a\u0639\u0631\u064a\u0641\u0647 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"config/auth.casbin.org_casbinmodels.yaml"),". \u0647\u0646\u0627\u0643 \u0623\u0645\u062b\u0644\u0629 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"example/allowed_repo/model.yaml"),"."),(0,l.kt)("p",null,"\u0627\u0646\u062a\u0628\u0647 \u0644\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u062a\u0627\u0644\u064a\u0629: metadata.name: \u0627\u0633\u0645 \u0627\u0644\u0646\u0645\u0648\u0630\u062c."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0647\u0630\u0627 \u0627\u0644\u0627\u0633\u0645 \u0647\u0648 \u0646\u0641\u0633\u0647 \u0627\u0633\u0645 \u0643\u0627\u0626\u0646 CasbinPolicy \u0627\u0644\u0645\u062a\u0639\u0644\u0642 \u0628\u0647\u0630\u0627 \u0627\u0644\u0646\u0645\u0648\u0630\u062c\u060c \u062d\u062a\u0649 \u064a\u062a\u0645\u0643\u0646 K8s-gatekeeper \u0645\u0646 \u0625\u0642\u0631\u0627\u0646\u0647\u0645\u0627 \u0648\u0625\u0646\u0634\u0627\u0621 \u0645\u064f\u0646\u0641\u0630. spec.enable: \u0625\u0630\u0627 \u062a\u0645 \u0636\u0628\u0637 \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0639\u0644\u0649 'false'\u060c \u0633\u064a\u062a\u0645 \u062a\u062c\u0627\u0647\u0644 \u0647\u0630\u0627 \u0627\u0644\u0646\u0645\u0648\u0630\u062c (\u0648\u0643\u0630\u0644\u0643 \u0643\u0627\u0626\u0646 CasbinPolicy \u0627\u0644\u0645\u062a\u0639\u0644\u0642 \u0628\u0647\u0630\u0627 \u0627\u0644\u0646\u0645\u0648\u0630\u062c)."),(0,l.kt)("li",{parentName:"ul"},"spec.modelText: \u0633\u0644\u0633\u0644\u0629 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0646\u0635 \u0646\u0645\u0648\u0630\u062c Casbin."),(0,l.kt)("li",{parentName:"ul"},"\u064a\u062a\u0645 \u062a\u062e\u0632\u064a\u0646 \u0627\u0644\u0633\u064a\u0627\u0633\u0629 Casbin \u0641\u064a \u0645\u0648\u0631\u062f CRD \u0622\u062e\u0631 \u064a\u0633\u0645\u0649 'CasbinPolicy'\u060c \u0648\u064a\u0645\u0643\u0646 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u062a\u0639\u0631\u064a\u0641\u0647 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"li"},"config/auth.casbin.org_casbinpolicies.yaml"),".")),(0,l.kt)("p",null,"\u0647\u0646\u0627\u0643 \u0623\u0645\u062b\u0644\u0629 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"example/allowed_repo/policy.yaml"),"."),(0,l.kt)("p",null,"\u0627\u0646\u062a\u0628\u0647 \u0644\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u062a\u0627\u0644\u064a\u0629: metadata.name: \u0627\u0633\u0645 \u0627\u0644\u0633\u064a\u0627\u0633\u0629."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0647\u0630\u0627 \u0627\u0644\u0627\u0633\u0645 \u0647\u0648 \u0646\u0641\u0633\u0647 \u0627\u0633\u0645 \u0643\u0627\u0626\u0646 CasbinModel \u0627\u0644\u0645\u062a\u0639\u0644\u0642 \u0628\u0647\u0630\u0647 \u0627\u0644\u0633\u064a\u0627\u0633\u0629\u060c \u062d\u062a\u0649 \u064a\u062a\u0645\u0643\u0646 K8s-gatekeeper \u0645\u0646 \u0625\u0642\u0631\u0627\u0646\u0647\u0645\u0627 \u0648\u0625\u0646\u0634\u0627\u0621 \u0645\u064f\u0646\u0641\u0630. spec.policyItem: \u0633\u0644\u0633\u0644\u0629 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0646\u0635 \u0633\u064a\u0627\u0633\u0629 \u0646\u0645\u0648\u0630\u062c Casbin."),(0,l.kt)("li",{parentName:"ul"},"\u0628\u0639\u062f \u0625\u0646\u0634\u0627\u0621 \u0645\u0644\u0641\u0627\u062a CasbinModel \u0648CasbinPolicy \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643\u060c \u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0623\u0645\u0631 \u0627\u0644\u062a\u0627\u0644\u064a \u0644\u062a\u0637\u0628\u064a\u0642\u0647\u0627:")),(0,l.kt)("p",null,"\u0628\u0645\u062c\u0631\u062f \u0625\u0646\u0634\u0627\u0621 \u0632\u0648\u062c \u0645\u0646 CasbinModel \u0648CasbinPolicy\u060c \u0633\u064a\u0643\u0648\u0646 K8s-gatekeeper \u0642\u0627\u062f\u0631\u064b\u0627 \u0639\u0644\u0649 \u0627\u0643\u062a\u0634\u0627\u0641\u0647 \u062e\u0644\u0627\u0644 5 \u062b\u0648\u0627\u0646\u064d."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f <filename>\n")),(0,l.kt)("p",null,"3.1.2 \u0625\u0646\u0634\u0627\u0621/\u062a\u062d\u062f\u064a\u062b \u0646\u0645\u0648\u0630\u062c Casbin \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0639\u0628\u0631 go-client \u0627\u0644\u0630\u064a \u0646\u0642\u062f\u0645\u0647"),(0,l.kt)("h4",{id:"\u0646\u062d\u0646-\u0646\u0641\u0647\u0645-\u0623\u0646-\u0647\u0646\u0627\u0643-\u062d\u0627\u0644\u0627\u062a-\u0642\u062f-\u0644\u0627-\u064a\u0643\u0648\u0646-\u0645\u0646-\u0627\u0644\u0645\u0644\u0627\u0626\u0645-\u0641\u064a\u0647\u0627-\u0627\u0633\u062a\u062e\u062f\u0627\u0645-\u0627\u0644\u0634\u0644-\u0644\u062a\u0646\u0641\u064a\u0630-\u0627\u0644\u0623\u0648\u0627\u0645\u0631-\u0645\u0628\u0627\u0634\u0631\u0629-\u0639\u0644\u0649-\u0639\u0642\u062f\u0629-\u0645\u0646-\u0639\u0642\u062f-k8s-\u0645\u062b\u0644-\u0639\u0646\u062f\u0645\u0627-\u062a\u0642\u0648\u0645-\u0628\u0628\u0646\u0627\u0621-\u0645\u0646\u0635\u0629-\u0633\u062d\u0627\u0628\u064a\u0629-\u062a\u0644\u0642\u0627\u0626\u064a\u0629-\u0644\u0634\u0631\u0643\u062a\u0643"},"\u0646\u062d\u0646 \u0646\u0641\u0647\u0645 \u0623\u0646 \u0647\u0646\u0627\u0643 \u062d\u0627\u0644\u0627\u062a \u0642\u062f \u0644\u0627 \u064a\u0643\u0648\u0646 \u0645\u0646 \u0627\u0644\u0645\u0644\u0627\u0626\u0645 \u0641\u064a\u0647\u0627 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0634\u0644 \u0644\u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0645\u0628\u0627\u0634\u0631\u0629 \u0639\u0644\u0649 \u0639\u0642\u062f\u0629 \u0645\u0646 \u0639\u0642\u062f K8s\u060c \u0645\u062b\u0644 \u0639\u0646\u062f\u0645\u0627 \u062a\u0642\u0648\u0645 \u0628\u0628\u0646\u0627\u0621 \u0645\u0646\u0635\u0629 \u0633\u062d\u0627\u0628\u064a\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0629 \u0644\u0634\u0631\u0643\u062a\u0643."),(0,l.kt)("p",null,"\u0644\u0630\u0644\u0643\u060c \u0642\u0645\u0646\u0627 \u0628\u062a\u0637\u0648\u064a\u0631 go-client \u0644\u0625\u0646\u0634\u0627\u0621 \u0648\u0635\u064a\u0627\u0646\u0629 CasbinModel \u0648CasbinPolicy. \u0645\u0643\u062a\u0628\u0629 go-client \u062a\u0642\u0639 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"pkg/client"),"."),(0,l.kt)("p",null,"\u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"client.go"),"\u060c \u0646\u0642\u062f\u0645 \u0648\u0638\u064a\u0641\u0629 \u0644\u0625\u0646\u0634\u0627\u0621 \u0639\u0645\u064a\u0644."),(0,l.kt)("p",null,"\u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"client.go"),"\u060c \u0646\u0648\u0641\u0631 \u0648\u0638\u064a\u0641\u0629 \u0644\u0625\u0646\u0634\u0627\u0621 \u0639\u0645\u064a\u0644."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"func NewK8sGateKeeperClient(externalClient bool) (*K8sGateKeeperClient, error) \n")),(0,l.kt)("p",null,"\u064a\u062d\u062f\u062f \u0627\u0644\u0645\u0639\u0627\u0645\u0644 ",(0,l.kt)("inlineCode",{parentName:"p"},"externalClient")," \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 K8s-gatekeeper \u064a\u0639\u0645\u0644 \u062f\u0627\u062e\u0644 \u0639\u0646\u0642\u0648\u062f K8s \u0623\u0645 \u0644\u0627."),(0,l.kt)("p",null,"\u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"model.go"),"\u060c \u0646\u0648\u0641\u0631 \u0648\u0638\u0627\u0626\u0641 \u0645\u062a\u0639\u062f\u062f\u0629 \u0644\u0625\u0646\u0634\u0627\u0621\u060c \u062d\u0630\u0641\u060c \u0648\u062a\u0639\u062f\u064a\u0644 CasbinModel. \u064a\u0645\u0643\u0646\u0643 \u0645\u0639\u0631\u0641\u0629 \u0643\u064a\u0641\u064a\u0629 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0648\u0627\u062c\u0647\u0627\u062a \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"model_test.go"),"."),(0,l.kt)("p",null,"\u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"policy.go"),"\u060c \u0646\u0648\u0641\u0631 \u0648\u0638\u0627\u0626\u0641 \u0645\u062a\u0639\u062f\u062f\u0629 \u0644\u0625\u0646\u0634\u0627\u0621\u060c \u062d\u0630\u0641\u060c \u0648\u062a\u0639\u062f\u064a\u0644 CasbiPolicy. \u064a\u0645\u0643\u0646\u0643 \u0645\u0639\u0631\u0641\u0629 \u0643\u064a\u0641\u064a\u0629 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0648\u0627\u062c\u0647\u0627\u062a \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"policy_test.go"),"."),(0,l.kt)("h3",{id:"312-\u062c\u0631\u0628-\u0645\u0627-\u0625\u0630\u0627-\u0643\u0627\u0646-k8s-gatekeeper-\u064a\u0639\u0645\u0644"},"3.1.2 \u062c\u0631\u0628 \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 K8s-gatekeeper \u064a\u0639\u0645\u0644"),(0,l.kt)("p",null,"\u0627\u0641\u062a\u0631\u0636 \u0623\u0646\u0643 \u0642\u062f \u0623\u0646\u0634\u0623\u062a \u0628\u0627\u0644\u0641\u0639\u0644 \u0627\u0644\u0646\u0645\u0648\u0630\u062c \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0627\u0644\u062f\u0642\u064a\u0642\u064a\u0646 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"example/allowed_repo"),". \u0627\u0644\u0622\u0646\u060c \u062c\u0631\u0628 \u0627\u0644\u0623\u0645\u0631 \u0627\u0644\u062a\u0627\u0644\u064a:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl apply -f example/allowed_repo/testcase/reject_1.yaml\n")),(0,l.kt)("p",null,"\u064a\u062c\u0628 \u0623\u0646 \u062a\u062c\u062f \u0623\u0646 K8s \u0633\u064a\u0631\u0641\u0636 \u0647\u0630\u0627 \u0627\u0644\u0637\u0644\u0628 \u0648\u064a\u0630\u0643\u0631 \u0623\u0646 \u0627\u0644\u0648\u064a\u0628 \u0647\u0648\u0643 \u0643\u0627\u0646 \u0627\u0644\u0633\u0628\u0628 \u0641\u064a \u0631\u0641\u0636 \u0647\u0630\u0627 \u0627\u0644\u0637\u0644\u0628. \u0648\u0645\u0639 \u0630\u0644\u0643\u060c \u0639\u0646\u062f\u0645\u0627 \u062a\u062d\u0627\u0648\u0644 \u062a\u0637\u0628\u064a\u0642 ",(0,l.kt)("inlineCode",{parentName:"p"},"example/allowed_repo/testcase/approve_2.yaml"),"\u060c \u0633\u064a\u062a\u0645 \u0642\u0628\u0648\u0644\u0647."),(0,l.kt)("h2",{id:"4-\u0643\u064a\u0641\u064a\u0629-\u0643\u062a\u0627\u0628\u0629-\u0627\u0644\u0646\u0645\u0648\u0630\u062c-\u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629-\u0645\u0639-k8s-gatekeeper"},"4. \u0643\u064a\u0641\u064a\u0629 \u0643\u062a\u0627\u0628\u0629 \u0627\u0644\u0646\u0645\u0648\u0630\u062c \u0648\u0627\u0644\u0633\u064a\u0627\u0633\u0629 \u0645\u0639 K8s-gatekeeper"),(0,l.kt)("p",null,"\u0623\u0648\u0644\u0627\u064b\u060c \u062a\u0623\u0643\u062f \u0645\u0646 \u0623\u0646\u0643 \u0645\u0644\u0645 \u0628\u0627\u0644\u0642\u0648\u0627\u0639\u062f \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0644\u0646\u0645\u0627\u0630\u062c \u0648\u0633\u064a\u0627\u0633\u0627\u062a Casbin. \u0625\u0630\u0627 \u0644\u0645 \u062a\u0643\u0646 \u0643\u0630\u0644\u0643\u060c \u064a\u0631\u062c\u0649 \u0642\u0631\u0627\u0621\u0629 \u0642\u0633\u0645 ",(0,l.kt)("a",{parentName:"p",href:"/docs/get-started"},"\u0627\u0644\u0628\u062f\u0621")," \u0623\u0648\u0644\u0627\u064b. \u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0641\u0635\u0644\u060c \u0646\u0641\u062a\u0631\u0636 \u0623\u0646\u0643 \u062a\u0641\u0647\u0645 \u0628\u0627\u0644\u0641\u0639\u0644 \u0645\u0627 \u0647\u064a \u0646\u0645\u0627\u0630\u062c \u0648\u0633\u064a\u0627\u0633\u0627\u062a Casbin."),(0,l.kt)("h3",{id:"41-\u062a\u0639\u0631\u064a\u0641-\u0627\u0644\u0637\u0644\u0628-\u0641\u064a-\u0627\u0644\u0646\u0645\u0648\u0630\u062c"},"4.1 \u062a\u0639\u0631\u064a\u0641 \u0627\u0644\u0637\u0644\u0628 \u0641\u064a \u0627\u0644\u0646\u0645\u0648\u0630\u062c"),(0,l.kt)("p",null,"\u0639\u0646\u062f\u0645\u0627 \u064a\u0642\u0648\u0645 K8s-gatekeeper \u0628\u062a\u0641\u0648\u064a\u0636 \u0637\u0644\u0628\u060c \u0641\u0625\u0646 \u0627\u0644\u0625\u062f\u062e\u0627\u0644 \u062f\u0627\u0626\u0645\u064b\u0627 \u0639\u0628\u0627\u0631\u0629 \u0639\u0646 \u0643\u0627\u0626\u0646: \u0643\u0627\u0626\u0646 Go \u0644\u0637\u0644\u0628 \u0627\u0644\u0642\u0628\u0648\u0644. \u0647\u0630\u0627 \u064a\u0639\u0646\u064a \u0623\u0646 \u0627\u0644\u0645\u0646\u0641\u0630 \u0633\u064a\u0633\u062a\u062e\u062f\u0645 \u062f\u0627\u0626\u0645\u064b\u0627 \u0628\u0647\u0630\u0647 \u0627\u0644\u0637\u0631\u064a\u0642\u0629:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-go"},"ok, err := enforcer.Enforce(admission)\n")),(0,l.kt)("p",null,"\u062d\u064a\u062b ",(0,l.kt)("inlineCode",{parentName:"p"},"admission")," \u0647\u0648 \u0643\u0627\u0626\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},"AdmissionReview")," \u0645\u062d\u062f\u062f \u0628\u0648\u0627\u0633\u0637\u0629 \u0648\u0627\u062c\u0647\u0629 \u0628\u0631\u0645\u062c\u0629 \u062a\u0637\u0628\u064a\u0642\u0627\u062a K8s \u0627\u0644\u0631\u0633\u0645\u064a\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},'"k8s.io/api/admission/v1"'),". \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u062a\u0639\u0631\u064a\u0641 \u0647\u0630\u0627 \u0627\u0644\u0647\u064a\u0643\u0644 \u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u0648\u062f\u0639: ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/api/blob/master/admission/v1/types.go"},"https://github.com/kubernetes/api/blob/master/admission/v1/types.go"),". \u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u060c \u064a\u0645\u0643\u0646\u0643 \u0623\u064a\u0636\u064b\u0627 \u0627\u0644\u0631\u062c\u0648\u0639 \u0625\u0644\u0649 ",(0,l.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#webhook-request-and-response"},"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#webhook-request-and-response"),"."),(0,l.kt)("p",null,"\u0644\u0630\u0644\u0643\u060c \u0628\u0627\u0644\u0646\u0633\u0628\u0629 \u0644\u0623\u064a \u0646\u0645\u0648\u0630\u062c \u064a\u0633\u062a\u062e\u062f\u0645\u0647 K8s-gatekeeper\u060c \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u062a\u0639\u0631\u064a\u0641 ",(0,l.kt)("inlineCode",{parentName:"p"},"request_definition")," \u062f\u0627\u0626\u0645\u064b\u0627 \u0643\u0645\u0627 \u064a\u0644\u064a:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},"    [request_definition]\n    r =  obj\n")),(0,l.kt)("p",null,"\u0627\u0633\u0645 'obj' \u0644\u064a\u0633 \u0625\u0644\u0632\u0627\u0645\u064a\u064b\u0627\u060c \u0637\u0627\u0644\u0645\u0627 \u0623\u0646 \u0627\u0644\u0627\u0633\u0645 \u0645\u062a\u0633\u0642 \u0645\u0639 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0641\u064a \u062c\u0632\u0621 ",(0,l.kt)("inlineCode",{parentName:"p"},"[matchers]"),"."),(0,l.kt)("h3",{id:"42-\u0645\u0637\u0627\u0628\u0642\u0627\u062a-\u0627\u0644\u0646\u0645\u0648\u0630\u062c"},"4.2 \u0645\u0637\u0627\u0628\u0642\u0627\u062a \u0627\u0644\u0646\u0645\u0648\u0630\u062c"),(0,l.kt)("p",null,"\u0645\u0646 \u0627\u0644\u0645\u0641\u062a\u0631\u0636 \u0623\u0646 \u062a\u0633\u062a\u062e\u062f\u0645 \u0645\u064a\u0632\u0629 ABAC \u0644\u0643\u062a\u0627\u0628\u0629 \u0642\u0648\u0627\u0639\u062f\u0643. \u0648\u0645\u0639 \u0630\u0644\u0643\u060c \u0641\u0625\u0646 \u0645\u0642\u064a\u0645 \u0627\u0644\u062a\u0639\u0628\u064a\u0631 \u0627\u0644\u0645\u062f\u0645\u062c \u0641\u064a Casbin \u0644\u0627 \u064a\u062f\u0639\u0645 \u0627\u0644\u0641\u0647\u0631\u0633\u0629 \u0641\u064a \u0627\u0644\u062e\u0631\u0627\u0626\u0637 \u0623\u0648 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0627\u062a (\u0627\u0644\u0634\u0631\u0627\u0626\u062d)\u060c \u0648\u0644\u0627 \u062a\u0648\u0633\u064a\u0639 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0627\u062a. \u0644\u0630\u0644\u0643\u060c \u064a\u0648\u0641\u0631 K8s-gatekeeper \u0648\u0638\u0627\u0626\u0641 'Casbin' \u0645\u062a\u0646\u0648\u0639\u0629 \u0643\u0627\u0645\u062a\u062f\u0627\u062f\u0627\u062a \u0644\u062a\u0646\u0641\u064a\u0630 \u0647\u0630\u0647 \u0627\u0644\u0645\u064a\u0632\u0627\u062a. \u0625\u0630\u0627 \u0648\u062c\u062f\u062a \u0623\u0646 \u0637\u0644\u0628\u0643 \u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u0644\u0628\u064a\u062a\u0647 \u0628\u0648\u0627\u0633\u0637\u0629 \u0647\u0630\u0647 \u0627\u0644\u0627\u0645\u062a\u062f\u0627\u062f\u0627\u062a\u060c \u0641\u0644\u0627 \u062a\u062a\u0631\u062f\u062f \u0641\u064a \u0628\u062f\u0621 \u0645\u0634\u0643\u0644\u0629\u060c \u0623\u0648 \u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u0633\u062d\u0628."),(0,l.kt)("p",null,"\u0625\u0630\u0627 \u0644\u0645 \u062a\u0643\u0646 \u0645\u0639\u062a\u0627\u062f\u064b\u0627 \u0639\u0644\u0649 \u0648\u0638\u0627\u0626\u0641 Casbin\u060c \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0631\u062c\u0648\u0639 \u0625\u0644\u0649 ",(0,l.kt)("a",{parentName:"p",href:"/docs/function"},"\u0627\u0644\u0648\u0638\u064a\u0641\u0629")," \u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a."),(0,l.kt)("p",null,"\u0625\u0644\u064a\u0643 \u0627\u0644\u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0625\u0636\u0627\u0641\u064a\u0629:"),(0,l.kt)("h3",{id:"421-\u0648\u0638\u0627\u0626\u0641-\u0627\u0644\u0625\u0636\u0627\u0641\u0629"},"4.2.1 \u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0625\u0636\u0627\u0641\u0629"),(0,l.kt)("h4",{id:"4211-\u0627\u0644\u0648\u0635\u0648\u0644"},"4.2.1.1 \u0627\u0644\u0648\u0635\u0648\u0644"),(0,l.kt)("p",null,"\u064a\u064f\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u062d\u0644 \u0627\u0644\u0645\u0634\u0643\u0644\u0629 \u0627\u0644\u062a\u064a \u0644\u0627 \u064a\u062f\u0639\u0645\u0647\u0627 Casbin \u0641\u064a \u0627\u0644\u0641\u0647\u0631\u0633\u0629 \u0641\u064a \u0627\u0644\u062e\u0631\u0627\u0626\u0637 \u0623\u0648 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0627\u062a. \u064a\u0648\u0636\u062d \u0627\u0644\u0645\u062b\u0627\u0644 ",(0,l.kt)("inlineCode",{parentName:"p"},"example/allowed_repo/model.yaml")," \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0648\u0638\u064a\u0641\u0629:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},'[matchers]\nm = r.obj.Request.Namespace == "default" && r.obj.Request.Resource.Resource =="deployments" && \\\naccess(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, "Image") == p.obj\n')),(0,l.kt)("p",null,"\u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u0637\u0627\u0628\u0642\u060c ",(0,l.kt)("inlineCode",{parentName:"p"},'access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, "Image")')," \u0645\u0643\u0627\u0641\u0626 \u0644\u0640 ",(0,l.kt)("inlineCode",{parentName:"p"},"r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Image"),"\u060c \u062d\u064a\u062b ",(0,l.kt)("inlineCode",{parentName:"p"},"r.obj.Request.Object.Object.Spec.Template.Spec.Containers")," \u0647\u0648 \u0634\u0631\u064a\u062d\u0629."),(0,l.kt)("p",null,"\u064a\u0645\u0643\u0646 \u0644\u0644\u0648\u0635\u0648\u0644 \u0623\u064a\u0636\u064b\u0627 \u0627\u0633\u062a\u062f\u0639\u0627\u0621 \u0648\u0638\u0627\u0626\u0641 \u0628\u0633\u064a\u0637\u0629 \u0644\u064a\u0633 \u0644\u0647\u0627 \u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0648\u062a\u0639\u064a\u062f \u0642\u064a\u0645\u0629 \u0648\u0627\u062d\u062f\u0629. \u064a\u0648\u0636\u062d \u0627\u0644\u0645\u062b\u0627\u0644 ",(0,l.kt)("inlineCode",{parentName:"p"},"example/container_resource_limit/model.yaml")," \u0647\u0630\u0627:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},'[matchers]\n  m = r.obj.Request.Namespace == "default" && r.obj.Request.Resource.Resource =="deployments" && \\\n  parseFloat(access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, "Resources","Limits","cpu","Value")) >= parseFloat(p.cpu) && \\\n  parseFloat(access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, "Resources","Limits","memory","Value")) >= parseFloat(p.memory)\n')),(0,l.kt)("p",null,"\u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u0637\u0627\u0628\u0642\u060c ",(0,l.kt)("inlineCode",{parentName:"p"},'access(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , 0, "Resources","Limits","cpu","Value")')," \u0645\u0643\u0627\u0641\u0626 \u0644\u0640 ",(0,l.kt)("inlineCode",{parentName:"p"},'r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Resources.Limits["cpu"].Value()'),"\u060c \u062d\u064a\u062b ",(0,l.kt)("inlineCode",{parentName:"p"},"r.obj.Request.Object.Object.Spec.Template.Spec.Containers[0].Resources.Limits")," \u0647\u0648 \u062e\u0631\u064a\u0637\u0629\u060c \u0648",(0,l.kt)("inlineCode",{parentName:"p"},"Value()")," \u0647\u064a \u0648\u0638\u064a\u0641\u0629 \u0628\u0633\u064a\u0637\u0629 \u0644\u064a\u0633 \u0644\u0647\u0627 \u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0648\u062a\u0639\u064a\u062f \u0642\u064a\u0645\u0629 \u0648\u0627\u062d\u062f\u0629."),(0,l.kt)("h4",{id:"4212-accesswithwildcard"},"4.2.1.2 accessWithWildcard"),(0,l.kt)("p",null,'\u0623\u062d\u064a\u0627\u0646\u064b\u0627\u060c \u0642\u062f \u064a\u0643\u0648\u0646 \u0644\u062f\u064a\u0643 \u0637\u0644\u0628 \u0645\u062b\u0644 \u0647\u0630\u0627: \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0639\u0646\u0627\u0635\u0631 \u0641\u064a \u0645\u0635\u0641\u0648\u0641\u0629 \u0628\u0627\u062f\u0626\u0629 "aaa". \u0648\u0645\u0639 \u0630\u0644\u0643\u060c \u0644\u0627 \u064a\u062f\u0639\u0645 Casbin \u062d\u0644\u0642\u0627\u062a ',(0,l.kt)("inlineCode",{parentName:"p"},"for"),". \u0645\u0639 ",(0,l.kt)("inlineCode",{parentName:"p"},"accessWithWildcard"),' \u0648\u0645\u064a\u0632\u0629 "\u062a\u0648\u0633\u064a\u0639 \u0627\u0644\u062e\u0631\u064a\u0637\u0629/\u0627\u0644\u0634\u0631\u064a\u062d\u0629"\u060c \u064a\u0645\u0643\u0646\u0643 \u062a\u0646\u0641\u064a\u0630 \u0645\u062b\u0644 \u0647\u0630\u0627 \u0627\u0644\u0637\u0644\u0628 \u0628\u0633\u0647\u0648\u0644\u0629.'),(0,l.kt)("p",null,"\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0644\u0646\u0641\u062a\u0631\u0636 \u0623\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},"a.b.c")," \u0647\u064a \u0645\u0635\u0641\u0648\u0641\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},"[aaa,bbb,ccc,ddd,eee]"),"\u060c \u0641\u0625\u0646 \u0646\u062a\u064a\u062c\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},'accessWithWildcard(a,"b","c","*")')," \u0633\u062a\u0643\u0648\u0646 \u0634\u0631\u064a\u062d\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},"[aaa,bbb,ccc,ddd,eee]"),". \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0628\u062f\u0644 ",(0,l.kt)("inlineCode",{parentName:"p"},"*"),"\u060c \u064a\u062a\u0645 \u062a\u0648\u0633\u064a\u0639 \u0627\u0644\u0634\u0631\u064a\u062d\u0629."),(0,l.kt)("p",null,"\u0628\u0627\u0644\u0645\u062b\u0644\u060c \u064a\u0645\u0643\u0646 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0628\u062f\u0644 \u0623\u0643\u062b\u0631 \u0645\u0646 \u0645\u0631\u0629. \u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0646\u062a\u064a\u062c\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},'accessWithWildcard(a,"b","c","*","*")')," \u0633\u062a\u0643\u0648\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},"[a.b.c[0][0], a.b.c[0][1], ..., a.b.c[1][0], a.b.c[1][1], ...]"),"."),(0,l.kt)("h3",{id:"4213-\u0648\u0638\u0627\u0626\u0641-\u062a\u062f\u0639\u0645-\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a-\u0627\u0644\u0645\u062a\u063a\u064a\u0631\u0629-\u0627\u0644\u0637\u0648\u0644"},"4.2.1.3 \u0648\u0638\u0627\u0626\u0641 \u062a\u062f\u0639\u0645 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u062a\u063a\u064a\u0631\u0629 \u0627\u0644\u0637\u0648\u0644"),(0,l.kt)("p",null,"\u0641\u064a \u0645\u0642\u064a\u0645 \u0627\u0644\u062a\u0639\u0628\u064a\u0631 \u0644\u0640 Casbin\u060c \u0639\u0646\u062f\u0645\u0627 \u064a\u0643\u0648\u0646 \u0627\u0644\u0645\u0639\u0627\u0645\u0644 \u0645\u0635\u0641\u0648\u0641\u0629\u060c \u0633\u064a\u062a\u0645 \u062a\u0648\u0633\u064a\u0639\u0647 \u062a\u0644\u0642\u0627\u0626\u064a\u064b\u0627 \u0643\u0645\u0639\u0627\u0645\u0644 \u0645\u062a\u063a\u064a\u0631 \u0627\u0644\u0637\u0648\u0644. \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u064a\u0632\u0629 \u0644\u062f\u0639\u0645 \u062a\u0648\u0633\u064a\u0639 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629/\u0627\u0644\u0634\u0631\u064a\u062d\u0629/\u0627\u0644\u062e\u0631\u064a\u0637\u0629\u060c \u0644\u0642\u062f \u062f\u0645\u062c\u0646\u0627 \u0623\u064a\u0636\u064b\u0627 \u0639\u062f\u0629 \u0648\u0638\u0627\u0626\u0641 \u062a\u0642\u0628\u0644 \u0645\u0635\u0641\u0648\u0641\u0629/\u0634\u0631\u064a\u062d\u0629 \u0643\u0645\u0639\u0627\u0645\u0644:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"contain(): \u062a\u0642\u0628\u0644 \u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0645\u062a\u0639\u062f\u062f\u0629 \u0648\u062a\u0639\u064a\u062f \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 \u0623\u064a \u0645\u0639\u0627\u0645\u0644 (\u0628\u0627\u0633\u062a\u062b\u0646\u0627\u0621 \u0627\u0644\u0645\u0639\u0627\u0645\u0644 \u0627\u0644\u0623\u062e\u064a\u0631) \u064a\u0633\u0627\u0648\u064a \u0627\u0644\u0645\u0639\u0627\u0645\u0644 \u0627\u0644\u0623\u062e\u064a\u0631."),(0,l.kt)("li",{parentName:"ul"},"split(a,b,c...,sep,index): \u062a\u064f\u0639\u064a\u062f \u0645\u0635\u0641\u0648\u0641\u0629 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 ",(0,l.kt)("inlineCode",{parentName:"li"},"[splits(a,sep)[index], splits(b,sep)[index], splits(a,sep)[index], ...]"),"."),(0,l.kt)("li",{parentName:"ul"},"len(): \u062a\u064f\u0639\u064a\u062f \u0637\u0648\u0644 \u0627\u0644\u0648\u0633\u064a\u0637\u0629 \u0630\u0627\u062a \u0627\u0644\u0637\u0648\u0644 \u0627\u0644\u0645\u062a\u063a\u064a\u0631."),(0,l.kt)("li",{parentName:"ul"},"matchRegex(a,b,c...,regex): \u062a\u064f\u0639\u064a\u062f \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646\u062a \u062c\u0645\u064a\u0639 \u0627\u0644\u0648\u0633\u0627\u0626\u0637 \u0627\u0644\u0645\u0639\u0637\u0627\u0629 (",(0,l.kt)("inlineCode",{parentName:"li"},"a"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"b"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"c"),", ...) \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0639\u0628\u0627\u0631\u0629 \u0627\u0644\u0646\u0645\u0637\u064a\u0629 \u0627\u0644\u0645\u0639\u0637\u0627\u0629.")),(0,l.kt)("p",null,"\u0647\u0646\u0627 \u0645\u062b\u0627\u0644 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"example/disallowed_tag/model.yaml"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ini"},'    [matchers]\n    m = r.obj.Request.Namespace == "default" && r.obj.Request.Resource.Resource =="deployments" && \\\n    contain(split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , "*", "Image"),":",1) , p.obj)\n')),(0,l.kt)("p",null,"\u0628\u0627\u0641\u062a\u0631\u0627\u0636 \u0623\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},'accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , "*", "Image")')," \u062a\u064f\u0639\u064a\u062f ",(0,l.kt)("inlineCode",{parentName:"p"},"['a:b', 'c:d', 'e:f', 'g:h']"),"\u060c \u0644\u0623\u0646 \u0627\u0644\u062f\u0627\u0644\u0629 splits \u062a\u062f\u0639\u0645 \u0627\u0644\u0648\u0633\u0627\u0626\u0637 \u0630\u0627\u062a \u0627\u0644\u0637\u0648\u0644 \u0627\u0644\u0645\u062a\u063a\u064a\u0631 \u0648\u062a\u0624\u062f\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u0642\u0633\u064a\u0645 \u0639\u0644\u0649 \u0643\u0644 \u0639\u0646\u0635\u0631\u060c \u0633\u064a\u062a\u0645 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0639\u0646\u0635\u0631 \u0641\u064a \u0627\u0644\u0645\u0624\u0634\u0631 1 \u0648\u0625\u0639\u0627\u062f\u062a\u0647. \u0644\u0630\u0644\u0643\u060c ",(0,l.kt)("inlineCode",{parentName:"p"},'split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , "*", "Image"),":",1)')," \u062a\u064f\u0639\u064a\u062f ",(0,l.kt)("inlineCode",{parentName:"p"},"['b','d','f','h']"),". \u0648 ",(0,l.kt)("inlineCode",{parentName:"p"},'contain(split(accessWithWildcard(r.obj.Request.Object.Object.Spec.Template.Spec.Containers , "*", "Image"),":",1) , p.obj)')," \u062a\u064f\u0639\u064a\u062f \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},"p.obj")," \u0645\u0648\u062c\u0648\u062f\u064b\u0627 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"['b','d','f','h']"),"."),(0,l.kt)("h4",{id:"4212-\u0648\u0638\u0627\u0626\u0641-\u062a\u062d\u0648\u064a\u0644-\u0627\u0644\u0646\u0648\u0639"},"4.2.1.2 \u0648\u0638\u0627\u0626\u0641 \u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0646\u0648\u0639"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"ParseFloat(): \u062a\u062d\u0644\u0644 \u0639\u062f\u062f \u0635\u062d\u064a\u062d \u0625\u0644\u0649 \u0639\u062f\u062f \u0639\u0634\u0631\u064a (\u0647\u0630\u0627 \u0636\u0631\u0648\u0631\u064a \u0644\u0623\u0646 \u0623\u064a \u0631\u0642\u0645 \u064a\u064f\u0633\u062a\u062e\u062f\u0645 \u0641\u064a \u0627\u0644\u0645\u0642\u0627\u0631\u0646\u0629 \u064a\u062c\u0628 \u062a\u062d\u0648\u064a\u0644\u0647 \u0625\u0644\u0649 \u0639\u062f\u062f \u0639\u0634\u0631\u064a)."),(0,l.kt)("li",{parentName:"ul"},"ToString(): \u062a\u062d\u0648\u0644 \u0643\u0627\u0626\u0646 \u0625\u0644\u0649 \u0646\u0635. \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0644\u0647\u0630\u0627 \u0627\u0644\u0643\u0627\u0626\u0646 \u0646\u0648\u0639 \u0623\u0633\u0627\u0633\u064a \u0645\u0646 \u0627\u0644\u0646\u0648\u0639 string (\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0643\u0627\u0626\u0646 \u0645\u0646 \u0646\u0648\u0639 ",(0,l.kt)("inlineCode",{parentName:"li"},"XXX")," \u0639\u0646\u062f\u0645\u0627 \u064a\u0643\u0648\u0646 \u0647\u0646\u0627\u0643 \u0628\u064a\u0627\u0646 ",(0,l.kt)("inlineCode",{parentName:"li"},"type XXX string"),")."),(0,l.kt)("li",{parentName:"ul"},"IsNil(): \u062a\u064f\u0639\u064a\u062f \u0645\u0627 \u0625\u0630\u0627 \u0643\u0627\u0646 \u0627\u0644\u0648\u0633\u064a\u0637 \u0647\u0648 nil.")),(0,l.kt)("h2",{id:"5-\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a-\u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629"},"5. \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629"),(0,l.kt)("h3",{id:"51-\u062d\u0648\u0644-\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a"},"5.1 \u062d\u0648\u0644 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a"),(0,l.kt)("p",null,"\u0641\u064a Kubernetes (k8s)\u060c \u0645\u0646 \u0627\u0644\u0636\u0631\u0648\u0631\u064a \u0623\u0646 \u064a\u0633\u062a\u062e\u062f\u0645 webhook \u0628\u0631\u0648\u062a\u0648\u0643\u0648\u0644 HTTPS. \u0647\u0646\u0627\u0643 \u0646\u0647\u062c\u0627\u0646 \u0644\u062a\u062d\u0642\u064a\u0642 \u0630\u0644\u0643:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0634\u0647\u0627\u062f\u0627\u062a \u0630\u0627\u062a\u064a\u0629 \u0627\u0644\u062a\u0648\u0642\u064a\u0639 (\u0627\u0644\u0623\u0645\u062b\u0644\u0629 \u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u0648\u062f\u0639 \u062a\u0633\u062a\u062e\u062f\u0645 \u0647\u0630\u0647 \u0627\u0644\u0637\u0631\u064a\u0642\u0629)"),(0,l.kt)("li",{parentName:"ul"},"\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0634\u0647\u0627\u062f\u0629 \u0639\u0627\u062f\u064a\u0629")),(0,l.kt)("h4",{id:"511-\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a-\u0630\u0627\u062a\u064a\u0629-\u0627\u0644\u062a\u0648\u0642\u064a\u0639"},"5.1.1 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0630\u0627\u062a\u064a\u0629 \u0627\u0644\u062a\u0648\u0642\u064a\u0639"),(0,l.kt)("p",null,"\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0634\u0647\u0627\u062f\u0629 \u0630\u0627\u062a\u064a\u0629 \u0627\u0644\u062a\u0648\u0642\u064a\u0639 \u064a\u0639\u0646\u064a \u0623\u0646 \u0627\u0644\u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 (CA) \u0627\u0644\u062a\u064a \u062a\u0635\u062f\u0631 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0644\u064a\u0633\u062a \u0648\u0627\u062d\u062f\u0629 \u0645\u0646 \u0627\u0644\u0633\u0644\u0637\u0627\u062a \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u0639\u0631\u0648\u0641\u0629. \u0644\u0630\u0644\u0643\u060c \u064a\u062c\u0628 \u0625\u0639\u0644\u0627\u0645 k8s \u0628\u0647\u0630\u0647 \u0627\u0644\u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629."),(0,l.kt)("p",null,"\u062d\u0627\u0644\u064a\u064b\u0627\u060c \u0627\u0644\u0645\u062b\u0627\u0644 \u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u0648\u062f\u0639 \u064a\u0633\u062a\u062e\u062f\u0645 \u0633\u0644\u0637\u0629 \u0634\u0647\u0627\u062f\u0629 \u0645\u0635\u0646\u0648\u0639\u0629 \u0630\u0627\u062a\u064a\u064b\u0627\u060c \u062d\u064a\u062b \u064a\u062a\u0645 \u062a\u062e\u0632\u064a\u0646 \u0627\u0644\u0645\u0641\u062a\u0627\u062d \u0627\u0644\u062e\u0627\u0635 \u0648\u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0641\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"config/certificate/ca.crt")," \u0648 ",(0,l.kt)("inlineCode",{parentName:"p"},"config/certificate/ca.key")," \u0639\u0644\u0649 \u0627\u0644\u062a\u0648\u0627\u0644\u064a. \u0634\u0647\u0627\u062f\u0629 webhook \u0647\u064a ",(0,l.kt)("inlineCode",{parentName:"p"},"config/certificate/server.crt"),'\u060c \u0648\u0627\u0644\u062a\u064a \u062a\u0635\u062f\u0631\u0647\u0627 \u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u0635\u0646\u0648\u0639\u0629 \u0630\u0627\u062a\u064a\u064b\u0627. \u0646\u0637\u0627\u0642\u0627\u062a \u0647\u0630\u0647 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0647\u064a "webhook.domain.local" (\u0644\u0640 webhook \u062e\u0627\u0631\u062c\u064a) \u0648 "casbin-webhook-svc.default.svc" (\u0644\u0640 webhook \u062f\u0627\u062e\u0644\u064a).'),(0,l.kt)("p",null,"\u064a\u062a\u0645 \u0646\u0642\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0639\u0646 \u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0625\u0644\u0649 k8s \u0639\u0628\u0631 \u0645\u0644\u0641\u0627\u062a \u062a\u0643\u0648\u064a\u0646 webhook. \u0643\u0644\u0627 \u0645\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},"config/webhook_external.yaml")," \u0648 ",(0,l.kt)("inlineCode",{parentName:"p"},"config/webhook_internal.yaml"),' \u064a\u062d\u062a\u0648\u064a\u0627\u0646 \u0639\u0644\u0649 \u062d\u0642\u0644 \u064a\u0633\u0645\u0649 "CABundle"\u060c \u0648\u0627\u0644\u0630\u064a \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0633\u0644\u0633\u0644\u0629 \u0645\u0634\u0641\u0631\u0629 \u0628\u062a\u0631\u0645\u064a\u0632 base64 \u0644\u0634\u0647\u0627\u062f\u0629 \u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629.'),(0,l.kt)("p",null,"\u0641\u064a \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0627\u062c\u0629 \u0625\u0644\u0649 \u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0634\u0647\u0627\u062f\u0629/\u0627\u0644\u0646\u0637\u0627\u0642 (\u0639\u0644\u0649 \u0633\u0628\u064a\u0644 \u0627\u0644\u0645\u062b\u0627\u0644\u060c \u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0631\u063a\u0628 \u0641\u064a \u0648\u0636\u0639 \u0647\u0630\u0627 webhook \u0641\u064a \u0645\u0633\u0627\u062d\u0629 \u0623\u062e\u0631\u0649 \u0645\u0646 k8s \u0623\u062b\u0646\u0627\u0621 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 webhook \u062f\u0627\u062e\u0644\u064a\u060c \u0623\u0648 \u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0631\u063a\u0628 \u0641\u064a \u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0646\u0637\u0627\u0642 \u0623\u062b\u0646\u0627\u0621 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 webhook \u062e\u0627\u0631\u062c\u064a)\u060c \u064a\u062c\u0628 \u0627\u062a\u0628\u0627\u0639 \u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u062a\u0627\u0644\u064a\u0629:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u0625\u0646\u0634\u0627\u0621 \u0633\u0644\u0637\u0629 \u0634\u0647\u0627\u062f\u0629 \u062c\u062f\u064a\u062f\u0629:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u0641\u062a\u0627\u062d \u0627\u0644\u062e\u0627\u0635 \u0644\u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u0632\u064a\u0641\u0629:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"openssl genrsa -des3 -out ca.key 2048\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0625\u0632\u0627\u0644\u0629 \u062d\u0645\u0627\u064a\u0629 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0644\u0644\u0645\u0641\u062a\u0627\u062d \u0627\u0644\u062e\u0627\u0635:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"openssl rsa -in ca.key -out ca.key\n"))))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u0625\u0646\u0634\u0627\u0621 \u0645\u0641\u062a\u0627\u062d \u062e\u0627\u0635 \u0644\u062e\u0627\u062f\u0645 webhook:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"openssl genrsa -des3 -out server.key 2048\nopenssl rsa -in server.key -out server.key\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0633\u062a\u062e\u062f\u0645 \u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u0648\u0644\u062f\u0629 \u0630\u0627\u062a\u064a\u064b\u0627 \u0644\u062a\u0648\u0642\u064a\u0639 \u0634\u0647\u0627\u062f\u0629 \u0644\u0640 webhook:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0646\u0633\u062e \u0645\u0644\u0641 \u062a\u0643\u0648\u064a\u0646 openssl \u0627\u0644\u062e\u0627\u0635 \u0628\u0646\u0638\u0627\u0645\u0643 \u0644\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0645\u0624\u0642\u062a. \u064a\u0645\u0643\u0646\u0643 \u0645\u0639\u0631\u0641\u0629 \u0645\u0648\u0642\u0639 \u0645\u0644\u0641 \u0627\u0644\u062a\u0643\u0648\u064a\u0646 \u0628\u062a\u0634\u063a\u064a\u0644 ",(0,l.kt)("inlineCode",{parentName:"p"},"openssl version -a"),"\u060c \u0648\u0639\u0627\u062f\u0629 \u0645\u0627 \u064a\u0633\u0645\u0649 ",(0,l.kt)("inlineCode",{parentName:"p"},"openssl.cnf"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0641\u064a \u0645\u0644\u0641 \u0627\u0644\u062a\u0643\u0648\u064a\u0646:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0641\u0642\u0631\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},"[req]")," \u0648\u0623\u0636\u0641 \u0627\u0644\u0633\u0637\u0631 \u0627\u0644\u062a\u0627\u0644\u064a: ",(0,l.kt)("inlineCode",{parentName:"p"},"req_extensions = v3_req"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0641\u0642\u0631\u0629 ",(0,l.kt)("inlineCode",{parentName:"p"},"[v3_req]")," \u0648\u0623\u0636\u0641 \u0627\u0644\u0633\u0637\u0631 \u0627\u0644\u062a\u0627\u0644\u064a: ",(0,l.kt)("inlineCode",{parentName:"p"},"subjectAltName = @alt_names"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0623\u0636\u0641 \u0627\u0644\u0623\u0633\u0637\u0631 \u0627\u0644\u062a\u0627\u0644\u064a\u0629 \u0625\u0644\u0649 \u0627\u0644\u0645\u0644\u0641:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-ini"},"[alt_names]\nDNS.2=<The domain you want>\n")),(0,l.kt)("p",{parentName:"li"},"\u0645\u0644\u0627\u062d\u0638\u0629: \u0627\u0633\u062a\u0628\u062f\u0644 'casbin-webhook-svc.default.svc' \u0628\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u062d\u0642\u064a\u0642\u064a \u0644\u062e\u062f\u0645\u062a\u0643 \u0627\u0644\u062e\u0627\u0635\u0629 \u0625\u0630\u0627 \u0642\u0631\u0631\u062a \u062a\u0639\u062f\u064a\u0644 \u0627\u0633\u0645 \u0627\u0644\u062e\u062f\u0645\u0629.")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0633\u062a\u062e\u062f\u0645 \u0645\u0644\u0641 \u0627\u0644\u062a\u0643\u0648\u064a\u0646 \u0627\u0644\u0645\u0639\u062f\u0644 \u0644\u0625\u0646\u0634\u0627\u0621 \u0645\u0644\u0641 \u0637\u0644\u0628 \u0634\u0647\u0627\u062f\u0629:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"openssl req -new -nodes -keyout server.key -out server.csr -config openssl.cnf\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0633\u062a\u062e\u062f\u0645 \u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u0635\u0646\u0648\u0639\u0629 \u0630\u0627\u062a\u064a\u064b\u0627 \u0644\u0644\u0631\u062f \u0639\u0644\u0649 \u0627\u0644\u0637\u0644\u0628 \u0648\u062a\u0648\u0642\u064a\u0639 \u0627\u0644\u0634\u0647\u0627\u062f\u0629:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"openssl x509 -req -days 3650 -in server.csr -out server.crt -CA ca.crt -CAkey ca.key -CAcreateserial -extensions v3_req -extensions SAN -extfile openssl.cnf\n"))))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u0627\u0633\u062a\u0628\u062f\u0644 \u062d\u0642\u0644 'CABundle': \u0643\u0644\u0627 \u0645\u0646 ",(0,l.kt)("inlineCode",{parentName:"p"},"config/webhook_external.yaml")," \u0648 ",(0,l.kt)("inlineCode",{parentName:"p"},"config/webhook_internal.yaml"),' \u064a\u062d\u062a\u0648\u064a\u0627\u0646 \u0639\u0644\u0649 \u062d\u0642\u0644 \u064a\u0633\u0645\u0649 "CABundle"\u060c \u0648\u0627\u0644\u0630\u064a \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0633\u0644\u0633\u0644\u0629 \u0645\u0634\u0641\u0631\u0629 \u0628\u062a\u0631\u0645\u064a\u0632 base64 \u0644\u0634\u0647\u0627\u062f\u0629 \u0633\u0644\u0637\u0629 \u0627\u0644\u0634\u0647\u0627\u062f\u0629. \u0642\u0645 \u0628\u062a\u062d\u062f\u064a\u062b \u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0628\u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629.')),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0633\u062a\u062e\u062f\u0645 helm\u060c \u064a\u062c\u0628 \u062a\u0637\u0628\u064a\u0642 \u062a\u063a\u064a\u064a\u0631\u0627\u062a \u0645\u0645\u0627\u062b\u0644\u0629 \u0639\u0644\u0649 \u0627\u0644\u0631\u0633\u0648\u0645 \u0627\u0644\u0628\u064a\u0627\u0646\u064a\u0629 helm."))),(0,l.kt)("h4",{id:"512-\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a-\u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a\u0629"},"5.1.2 \u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a\u0629"),(0,l.kt)("p",null,'\u0625\u0630\u0627 \u0643\u0646\u062a \u062a\u0633\u062a\u062e\u062f\u0645 \u0634\u0647\u0627\u062f\u0627\u062a \u0642\u0627\u0646\u0648\u0646\u064a\u0629\u060c \u0641\u0644\u0646 \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0643\u0644 \u0647\u0630\u0647 \u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a. \u0623\u0632\u0644 \u062d\u0642\u0644 "CABundle" \u0641\u064a ',(0,l.kt)("inlineCode",{parentName:"p"},"config/webhook_external.yaml")," \u0648 ",(0,l.kt)("inlineCode",{parentName:"p"},"config/webhook_internal.yaml"),"\u060c \u0648\u063a\u064a\u0631 \u0627\u0644\u0646\u0637\u0627\u0642 \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0645\u0644\u0641\u0627\u062a \u0625\u0644\u0649 \u0627\u0644\u0646\u0637\u0627\u0642 \u0627\u0644\u0630\u064a \u062a\u0645\u0644\u0643\u0647."))}c.isMDXComponent=!0}}]);