"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[3383],{591(e,i,n){n.d(i,{A:()=>a});const a=n.p+"assets/images/editor-tips-2c4bf3155a73f079c976e5ad118d5518.png"},8364(e,i,n){n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>s});const a=JSON.parse('{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC con Pattern","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx","sourceDirName":".","slug":"/rbac-with-pattern","permalink":"/it/docs/rbac-with-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC con Pattern","keywords":["RBAC with pattern","pattern matching"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC","permalink":"/it/docs/rbac"},"next":{"title":"RBAC with Domains","permalink":"/it/docs/rbac-with-domains"}}');var o=n(4848),r=n(8453);const t={id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC con Pattern",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},c=void 0,d={},s=[{value:"Guida rapida",id:"guida-rapida",level:2},{value:"Utilizza la corrispondenza dei pattern in RBAC",id:"utilizza-la-corrispondenza-dei-pattern-in-rbac",level:2}];function l(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{TabItem:a,Tabs:t}=i;return a||h("TabItem",!0),t||h("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.h2,{id:"guida-rapida",children:"Guida rapida"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Utilizza il pattern in ",(0,o.jsx)(i.code,{children:"g(_, _)"}),"."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-go",children:'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Utilizza il pattern con dominio."}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Utilizza tutti i pattern."}),"\n",(0,o.jsx)(i.p,{children:"Basta combinare l'uso di entrambe le API."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Come mostrato sopra, dopo aver creato l'istanza di ",(0,o.jsx)(i.code,{children:"enforcer"}),", \xe8 necessario attivare la corrispondenza dei pattern tramite le API ",(0,o.jsx)(i.code,{children:"AddNamedMatchingFunc"})," e ",(0,o.jsx)(i.code,{children:"AddNamedDomainMatchingFunc"}),", che determinano come avviene la corrispondenza del pattern."]}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsxs)(i.p,{children:['If you use the online editor, You can add a pattern matching function by clicking the "Add Role Matching" button in the lower left corner.\n',(0,o.jsx)(i.img,{alt:"suggerimenti-editor",src:n(591).A+"",width:"690",height:"480"})]})}),"\n",(0,o.jsx)(i.h2,{id:"utilizza-la-corrispondenza-dei-pattern-in-rbac",children:"Utilizza la corrispondenza dei pattern in RBAC"}),"\n",(0,o.jsxs)(i.p,{children:["A volte, desideri che determinati soggetti, oggetti o domini/tenant con un pattern specifico vengano automaticamente concessi a un ruolo. Le funzioni di corrispondenza dei pattern in RBAC possono aiutarti a farlo. Una funzione di corrispondenza dei pattern condivide gli stessi parametri e valore di ritorno della precedente ",(0,o.jsx)(i.a,{href:"/docs/syntax-for-models#functions-in-matchers",children:"funzione matcher"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["La funzione di corrispondenza dei pattern supporta ciascun parametro di ",(0,o.jsx)(i.code,{children:"g"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["Sappiamo che normalmente RBAC \xe8 espresso come ",(0,o.jsx)(i.code,{children:"g(r.sub, p.sub)"})," in un matcher. Quindi possiamo utilizzare una politica come:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Cos\xec ",(0,o.jsx)(i.code,{children:"alice"})," pu\xf2 leggere tutti i libri, inclusi ",(0,o.jsx)(i.code,{children:"libro 1"})," e ",(0,o.jsx)(i.code,{children:"libro 2"}),". Ma possono esserci migliaia di libri, ed \xe8 molto noioso aggiungere ciascun libro al ruolo (o gruppo) dei libri con una regola di politica ",(0,o.jsx)(i.code,{children:"g"}),"."]}),"\n",(0,o.jsx)(i.p,{children:"Ma con le funzioni di corrispondenza dei modelli, puoi scrivere la politica con una sola riga:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"g, /book/:id, book_group\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Casbin far\xe0 automaticamente corrispondere ",(0,o.jsx)(i.code,{children:"/book/1"})," e ",(0,o.jsx)(i.code,{children:"/book/2"})," al modello ",(0,o.jsx)(i.code,{children:"/book/:id"})," per te. Devi solo registrare la funzione con l'enforcer in questo modo:"]}),"\n",(0,o.jsxs)(t,{groupId:"langs",children:[(0,o.jsx)(a,{value:"Go",label:"Go",default:!0,children:(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-go",children:'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,o.jsx)(a,{value:"Node.js",label:"Node.js",children:(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-typescript",children:"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,o.jsx)(i.p,{children:"Quando si utilizza una funzione di corrispondenza dei modelli nei domini/tenant, \xe8 necessario registrare la funzione con l'enforcer e il modello."}),"\n",(0,o.jsxs)(t,{groupId:"langs",children:[(0,o.jsx)(a,{value:"Go",label:"Go",default:!0,children:(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,o.jsx)(a,{value:"Node.js",label:"Node.js",children:(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-typescript",children:"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,o.jsxs)(i.p,{children:["Se non capisci cosa significhi ",(0,o.jsx)(i.code,{children:"g(r.sub, p.sub, r.dom)"}),", per favore leggi ",(0,o.jsx)(i.a,{href:"/docs/rbac-with-domains",children:"rbac-with-domains"}),". In breve, ",(0,o.jsx)(i.code,{children:"g(r.sub, p.sub, r.dom)"})," controller\xe0 se l'utente ",(0,o.jsx)(i.code,{children:"r.sub"})," ha un ruolo ",(0,o.jsx)(i.code,{children:"p.sub"})," nel dominio ",(0,o.jsx)(i.code,{children:"r.dom"}),". Quindi questo \xe8 come funziona il matcher. Puoi vedere l'esempio completo ",(0,o.jsx)(i.a,{href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307",children:"qui"}),"."]}),"\n",(0,o.jsx)(i.p,{children:"Oltre alla sintassi di corrispondenza dei modelli sopra, possiamo anche utilizzare un modello di dominio puro."}),"\n",(0,o.jsxs)(i.p,{children:["Ad esempio, se vogliamo che ",(0,o.jsx)(i.code,{children:"sub"})," abbia accesso in diversi domini, ",(0,o.jsx)(i.code,{children:"domain1"})," e ",(0,o.jsx)(i.code,{children:"domain2"}),", possiamo utilizzare il pattern di dominio puro:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n"})}),"\n",(0,o.jsxs)(i.p,{children:["In questo esempio, vogliamo che ",(0,o.jsx)(i.code,{children:"alice"})," possa leggere e scrivere ",(0,o.jsx)(i.code,{children:"data"})," in domain1 e domain2. La corrispondenza del pattern ",(0,o.jsx)(i.code,{children:"*"})," in ",(0,o.jsx)(i.code,{children:"g"})," fa s\xec che ",(0,o.jsx)(i.code,{children:"alice"})," abbia accesso a due domini."]}),"\n",(0,o.jsxs)(i.p,{children:["Utilizzando la corrispondenza di pattern, specialmente in scenari pi\xf9 complessi e che implicano molti domini o oggetti da considerare, possiamo implementare la ",(0,o.jsx)(i.code,{children:"policy_definition"})," in modo pi\xf9 elegante ed efficace."]})]})}function p(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}function h(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453(e,i,n){n.d(i,{R:()=>t,x:()=>c});var a=n(6540);const o={},r=a.createContext(o);function t(e){const i=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),a.createElement(r.Provider,{value:i},e.children)}}}]);