"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[4851],{7584:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"rbac-with-domains","title":"RBAC with Domains","description":"Utilizzo di RBAC con domini","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/RBACWithDomains.mdx","sourceDirName":".","slug":"/rbac-with-domains","permalink":"/it/docs/rbac-with-domains","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithDomains.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-domains","title":"RBAC with Domains","description":"Utilizzo di RBAC con domini","keywords":["RBAC with domains"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC with Pattern","permalink":"/it/docs/rbac-with-pattern"},"next":{"title":"RBAC with Conditions","permalink":"/it/docs/rbac-with-conditions"}}');var t=i(4848),d=i(8453);const a={id:"rbac-with-domains",title:"RBAC with Domains",description:"Utilizzo di RBAC con domini",keywords:["RBAC with domains"],authors:["hsluoyz"]},s=void 0,r={},c=[{value:"Definizione del Ruolo con Tenant di Dominio",id:"definizione-del-ruolo-con-tenant-di-dominio",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"definizione-del-ruolo-con-tenant-di-dominio",children:"Definizione del Ruolo con Tenant di Dominio"}),"\n",(0,t.jsx)(n.p,{children:"I ruoli RBAC in Casbin possono essere globali o specifici del dominio. I ruoli specifici del dominio significano che i ruoli per un utente possono essere diversi quando l'utente si trova in diversi domini/tenant. Questo \xe8 molto utile per grandi sistemi come un cloud, poich\xe9 gli utenti sono solitamente in diversi tenant."}),"\n",(0,t.jsx)(n.p,{children:"La definizione del ruolo con domini/tenant dovrebbe apparire cos\xec:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[role_definition]\ng = _, _, _\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Il terzo ",(0,t.jsx)(n.code,{children:"_"})," rappresenta il nome del dominio/tenant, e questa parte non dovrebbe essere cambiata. Quindi la politica pu\xf2 essere:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"p, admin, tenant1, data1, read\np, admin, tenant2, data2, read\n\ng, alice, admin, tenant1\ng, alice, user, tenant2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Ci\xf2 significa che il ruolo ",(0,t.jsx)(n.code,{children:"admin"})," in ",(0,t.jsx)(n.code,{children:"tenant1"})," pu\xf2 leggere ",(0,t.jsx)(n.code,{children:"data1"}),". E ",(0,t.jsx)(n.code,{children:"alice"})," ha il ruolo ",(0,t.jsx)(n.code,{children:"admin"})," in ",(0,t.jsx)(n.code,{children:"tenant1"})," e il ruolo ",(0,t.jsx)(n.code,{children:"user"})," in ",(0,t.jsx)(n.code,{children:"tenant2"}),". Pertanto, lei pu\xf2 leggere ",(0,t.jsx)(n.code,{children:"data1"}),". Tuttavia, poich\xe9 ",(0,t.jsx)(n.code,{children:"alice"})," non \xe8 un ",(0,t.jsx)(n.code,{children:"admin"})," in ",(0,t.jsx)(n.code,{children:"tenant2"}),", non pu\xf2 leggere ",(0,t.jsx)(n.code,{children:"data2"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Quindi, in un matcher, dovresti controllare il ruolo come segue:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[matchers]\nm = g(r.sub, p.sub, r.dom) && r.dom == p.dom && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Si prega di fare riferimento al ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin/blob/master/examples/rbac_with_domains_model.conf",children:"rbac_with_domains_model.conf"})," per esempi."]}),"\n",(0,t.jsxs)(n.admonition,{title:"Convenzione del Nome del Token",type:"info",children:[(0,t.jsxs)(n.p,{children:["Nota: Convenzionalmente, il nome del token del dominio nella definizione della politica \xe8 ",(0,t.jsx)(n.code,{children:"dom"})," e viene posizionato come secondo token (",(0,t.jsx)(n.code,{children:"sub, dom, obj, act"}),").\nOra, Golang Casbin supporta nomi di token personalizzati e posizionamento. Se il nome del token del dominio \xe8 ",(0,t.jsx)(n.code,{children:"dom"}),", il token del dominio pu\xf2 essere posizionato in una posizione arbitraria senza alcuna azione aggiuntiva. Se il nome del token di dominio non \xe8 ",(0,t.jsx)(n.code,{children:"dom"}),", ",(0,t.jsx)(n.code,{children:"e.SetFieldIndex()"})," per ",(0,t.jsx)(n.code,{children:"constant.DomainIndex"})," dovrebbe essere chiamato dopo l'inizializzazione dell'enforcer, indipendentemente dalla sua posizione."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# `domain` here for `dom`\n[policy_definition]\np = sub, obj, act, domain\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e.SetFieldIndex("p", constant.DomainIndex, 3) // index starts from 0\nusers := e.GetAllUsersByDomain("domain1") // without SetFieldIndex, it will raise an error\n'})})]})]})}function m(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var o=i(6540);const t={},d=o.createContext(t);function a(e){const n=o.useContext(d);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(d.Provider,{value:n},e.children)}}}]);