"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[3451],{5306:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>n,toc:()=>s});const n=JSON.parse('{"id":"priority-model","title":"Priority Model","description":"Modello di Priorit\xe0 di Casbin per la gestione delle politiche con diverse priorit\xe0","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/PriorityModel.mdx","sourceDirName":".","slug":"/priority-model","permalink":"/it/docs/priority-model","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx","tags":[],"version":"current","frontMatter":{"id":"priority-model","title":"Priority Model","description":"Modello di Priorit\xe0 di Casbin per la gestione delle politiche con diverse priorit\xe0","keywords":["priority model"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"OrBAC","permalink":"/it/docs/orbac"},"next":{"title":"Usage Control (UCON)","permalink":"/it/docs/ucon"}}');var o=r(4848),a=r(8453);const t={id:"priority-model",title:"Priority Model",description:"Modello di Priorit\xe0 di Casbin per la gestione delle politiche con diverse priorit\xe0",keywords:["priority model"],authors:["hsluoyz"]},l=void 0,c={},s=[{value:"Carica Politica con Priorit\xe0 Implicita",id:"carica-politica-con-priorit\xe0-implicita",level:2},{value:"Carica Politica con Priorit\xe0 Esplicita",id:"carica-politica-con-priorit\xe0-esplicita",level:2},{value:"Carica Politica con Priorit\xe0 Basata su Ruolo e Gerarchia Utente",id:"carica-politica-con-priorit\xe0-basata-su-ruolo-e-gerarchia-utente",level:2}];function d(e){const i={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.p,{children:"Casbin supporta il caricamento delle politiche con priorit\xe0."}),"\n",(0,o.jsx)(i.h2,{id:"carica-politica-con-priorit\xe0-implicita",children:"Carica Politica con Priorit\xe0 Implicita"}),"\n",(0,o.jsx)(i.p,{children:"\xc8 piuttosto semplice: l'ordine determina la priorit\xe0; le politiche che compaiono prima hanno una priorit\xe0 pi\xf9 alta."}),"\n",(0,o.jsx)(i.p,{children:"model.conf:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-ini",children:"[policy_effect]\ne = priority(p.eft) || deny\n"})}),"\n",(0,o.jsx)(i.h2,{id:"carica-politica-con-priorit\xe0-esplicita",children:"Carica Politica con Priorit\xe0 Esplicita"}),"\n",(0,o.jsxs)(i.blockquote,{children:["\n",(0,o.jsxs)(i.p,{children:["Vedi anche: ",(0,o.jsx)(i.a,{href:"https://github.com/casbin/casbin/issues/550",children:"casbin#550"})]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Un valore di priorit\xe0 pi\xf9 piccolo indica una priorit\xe0 pi\xf9 alta. Se c'\xe8 un carattere non numerico nella priorit\xe0, verr\xe0 posizionato per ultimo invece di generare un errore."}),"\n",(0,o.jsxs)(i.admonition,{title:"Convenzione del nome del token",type:"info",children:[(0,o.jsxs)(i.p,{children:['Il nome del token di priorit\xe0 comunemente utilizzato nella definizione della politica \xe8 "priority". Per utilizzare un nome personalizzato, \xe8 necessario invocare ',(0,o.jsx)(i.code,{children:"e.SetFieldIndex()"})," e ricaricare le politiche (vedi l'esempio completo su ",(0,o.jsx)(i.a,{href:"https://github.com/casbin/casbin/pull/1044",children:"TestCustomizedFieldIndex"}),")."]}),(0,o.jsx)(i.p,{children:"model.conf:"}),(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-ini",children:"[policy_definition]\np = customized_priority, sub, obj, act, eft\n"})}),(0,o.jsx)(i.p,{children:"Esempio di codice Golang:"}),(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-go",children:'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'})})]}),"\n",(0,o.jsxs)(i.p,{children:["Attualmente, la priorit\xe0 esplicita supporta solo ",(0,o.jsx)(i.code,{children:"AddPolicy"})," e ",(0,o.jsx)(i.code,{children:"AddPolicies"}),". Se ",(0,o.jsx)(i.code,{children:"UpdatePolicy"})," \xe8 stato chiamato, non dovresti cambiare l'attributo di priorit\xe0."]}),"\n",(0,o.jsx)(i.p,{children:"model.conf:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,o.jsx)(i.p,{children:"policy.csv"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n"})}),"\n",(0,o.jsx)(i.p,{children:"richiesta:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority \n"})}),"\n",(0,o.jsx)(i.h2,{id:"carica-politica-con-priorit\xe0-basata-su-ruolo-e-gerarchia-utente",children:"Carica Politica con Priorit\xe0 Basata su Ruolo e Gerarchia Utente"}),"\n",(0,o.jsxs)(i.p,{children:["La struttura ereditata di ruoli e utenti pu\xf2 essere solo un insieme di alberi multipli, non grafi. Se un utente ha pi\xf9 ruoli, devi assicurarti che l'utente abbia lo stesso livello in diversi alberi. Se due ruoli hanno lo stesso livello, la politica (associata al ruolo) che appare prima ha una priorit\xe0 maggiore. Per maggiori dettagli, consulta anche ",(0,o.jsx)(i.a,{href:"https://github.com/casbin/casbin/pull/833",children:"casbin#833"})," e ",(0,o.jsx)(i.a,{href:"https://github.com/casbin/casbin/issues/831",children:"casbin#831"}),"."]}),"\n",(0,o.jsx)(i.p,{children:"model.conf:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n"})}),"\n",(0,o.jsx)(i.p,{children:"policy.csv"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n"})}),"\n",(0,o.jsx)(i.p,{children:"Richiesta:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-csv",children:"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n"})}),"\n",(0,o.jsx)(i.p,{children:"La gerarchia dei ruoli \xe8 simile a questa:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-text",children:"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n"})}),"\n",(0,o.jsx)(i.p,{children:"La priorit\xe0 si presenta automaticamente in questo modo:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-text",children:"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n"})})]})}function p(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,i,r)=>{r.d(i,{R:()=>t,x:()=>l});var n=r(6540);const o={},a=n.createContext(o);function t(e){const i=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),n.createElement(a.Provider,{value:i},e.children)}}}]);