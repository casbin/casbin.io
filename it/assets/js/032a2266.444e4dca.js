"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[9162],{3905:(e,n,i)=>{i.d(n,{Zo:()=>s,kt:()=>u});var t=i(7294);function o(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function a(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function r(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?a(Object(i),!0).forEach((function(n){o(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function l(e,n){if(null==e)return{};var i,t,o=function(e,n){if(null==e)return{};var i,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)i=a[t],n.indexOf(i)>=0||(o[i]=e[i]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)i=a[t],n.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}var d=t.createContext({}),p=function(e){var n=t.useContext(d),i=n;return e&&(i="function"==typeof e?e(n):r(r({},n),e)),i},s=function(e){var n=p(e.components);return t.createElement(d.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var i=e.components,o=e.mdxType,a=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=p(i),u=o,b=m["".concat(d,".").concat(u)]||m[u]||c[u]||a;return i?t.createElement(b,r(r({ref:n},s),{},{components:i})):t.createElement(b,r({ref:n},s))}));function u(e,n){var i=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=i.length,r=new Array(a);r[0]=m;var l={};for(var d in n)hasOwnProperty.call(n,d)&&(l[d]=n[d]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var p=2;p<a;p++)r[p]=i[p];return t.createElement.apply(null,r)}return t.createElement.apply(null,i)}m.displayName="MDXCreateElement"},6950:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var t=i(7462),o=(i(7294),i(3905));const a={id:"rbac-with-domains",title:"RBAC with Domains",description:"Utilizzo di RBAC con domini",keywords:["RBAC with domains"],authors:["hsluoyz"]},r=void 0,l={unversionedId:"rbac-with-domains",id:"rbac-with-domains",title:"RBAC with Domains",description:"Utilizzo di RBAC con domini",source:"@site/i18n/it/docusaurus-plugin-content-docs/current/RBACWithDomains.mdx",sourceDirName:".",slug:"/rbac-with-domains",permalink:"/it/docs/rbac-with-domains",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithDomains.mdx",tags:[],version:"current",frontMatter:{id:"rbac-with-domains",title:"RBAC with Domains",description:"Utilizzo di RBAC con domini",keywords:["RBAC with domains"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"RBAC with Pattern",permalink:"/it/docs/rbac-with-pattern"},next:{title:"RBAC with Conditions",permalink:"/it/docs/rbac-with-conditions"}},d={},p=[{value:"Definizione del Ruolo con Tenant di Dominio",id:"definizione-del-ruolo-con-tenant-di-dominio",level:2}],s={toc:p};function c(e){let{components:n,...i}=e;return(0,o.kt)("wrapper",(0,t.Z)({},s,i,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"definizione-del-ruolo-con-tenant-di-dominio"},"Definizione del Ruolo con Tenant di Dominio"),(0,o.kt)("p",null,"I ruoli RBAC in Casbin possono essere globali o specifici del dominio. I ruoli specifici del dominio significano che i ruoli per un utente possono essere diversi quando l'utente si trova in diversi domini/tenant. Questo \xe8 molto utile per grandi sistemi come un cloud, poich\xe9 gli utenti sono solitamente in diversi tenant."),(0,o.kt)("p",null,"La definizione del ruolo con domini/tenant dovrebbe apparire cos\xec:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"[role_definition]\ng = _, _, _\n")),(0,o.kt)("p",null,"Il terzo ",(0,o.kt)("inlineCode",{parentName:"p"},"_")," rappresenta il nome del dominio/tenant, e questa parte non dovrebbe essere cambiata. Quindi la politica pu\xf2 essere:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-csv"},"p, admin, tenant1, data1, read\np, admin, tenant2, data2, read\n\ng, alice, admin, tenant1\ng, alice, user, tenant2\n")),(0,o.kt)("p",null,"Ci\xf2 significa che il ruolo ",(0,o.kt)("inlineCode",{parentName:"p"},"admin")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"tenant1")," pu\xf2 leggere ",(0,o.kt)("inlineCode",{parentName:"p"},"data1"),". E ",(0,o.kt)("inlineCode",{parentName:"p"},"alice")," ha il ruolo ",(0,o.kt)("inlineCode",{parentName:"p"},"admin")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"tenant1")," e il ruolo ",(0,o.kt)("inlineCode",{parentName:"p"},"user")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"tenant2"),". Pertanto, lei pu\xf2 leggere ",(0,o.kt)("inlineCode",{parentName:"p"},"data1"),". Tuttavia, poich\xe9 ",(0,o.kt)("inlineCode",{parentName:"p"},"alice")," non \xe8 un ",(0,o.kt)("inlineCode",{parentName:"p"},"admin")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"tenant2"),", non pu\xf2 leggere ",(0,o.kt)("inlineCode",{parentName:"p"},"data2"),"."),(0,o.kt)("p",null,"Quindi, in un matcher, dovresti controllare il ruolo come segue:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"[matchers]\nm = g(r.sub, p.sub, r.dom) && r.dom == p.dom && r.obj == p.obj && r.act == p.act\n")),(0,o.kt)("p",null,"Si prega di fare riferimento al ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/examples/rbac_with_domains_model.conf"},"rbac","_","with","_","domains","_","model.conf")," per esempi."),(0,o.kt)("admonition",{title:"Convenzione del Nome del Token",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Nota: Convenzionalmente, il nome del token del dominio nella definizione della politica \xe8 ",(0,o.kt)("inlineCode",{parentName:"p"},"dom")," e viene posizionato come secondo token (",(0,o.kt)("inlineCode",{parentName:"p"},"sub, dom, obj, act"),").\nOra, Golang Casbin supporta nomi di token personalizzati e posizionamento. Se il nome del token del dominio \xe8 ",(0,o.kt)("inlineCode",{parentName:"p"},"dom"),", il token del dominio pu\xf2 essere posizionato in una posizione arbitraria senza alcuna azione aggiuntiva. Se il nome del token di dominio non \xe8 ",(0,o.kt)("inlineCode",{parentName:"p"},"dom"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"e.SetFieldIndex()")," per ",(0,o.kt)("inlineCode",{parentName:"p"},"constant.DomainIndex")," dovrebbe essere chiamato dopo l'inizializzazione dell'enforcer, indipendentemente dalla sua posizione."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-ini"},"# `domain` here for `dom`\n[policy_definition]\np = sub, obj, act, domain\n")),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-go"},'e.SetFieldIndex("p", constant.DomainIndex, 3) // index starts from 0\nusers := e.GetAllUsersByDomain("domain1") // without SetFieldIndex, it will raise an error\n'))))}c.isMDXComponent=!0}}]);