"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[2952],{7860(e,i,t){t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"policy-subset-loading","title":"Policy Subset Loading","description":"Loading filtered policies","source":"@site/docs/PolicySubsetLoading.mdx","sourceDirName":".","slug":"/policy-subset-loading","permalink":"/it/docs/policy-subset-loading","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PolicySubsetLoading.mdx","tags":[],"version":"current","frontMatter":{"id":"policy-subset-loading","title":"Policy Subset Loading","description":"Loading filtered policies","keywords":["filtered policies","policy subset","performance optimization"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Policy Storage","permalink":"/it/docs/policy-storage"},"next":{"title":"Scenarios","permalink":"/it/docs/category/scenarios"}}');var n=t(4848),s=t(8453);const a={id:"policy-subset-loading",title:"Policy Subset Loading",description:"Loading filtered policies",keywords:["filtered policies","policy subset","performance optimization"],authors:["hsluoyz"]},r=void 0,l={},c=[];function d(e){const i={code:"code",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:"Some adapters support filtered policy management. This means that the policy loaded by Casbin is a subset of the policy stored in the database based on a given filter. This allows for efficient policy enforcement in large, multi-tenant environments where parsing the entire policy becomes a performance bottleneck."}),"\n",(0,n.jsxs)(i.p,{children:["To use filtered policies with a supported adapter, simply call the ",(0,n.jsx)(i.code,{children:"LoadFilteredPolicy"})," method. The valid format for the filter parameter depends on the adapter used. To prevent accidental data loss, the ",(0,n.jsx)(i.code,{children:"SavePolicy"})," method is disabled when a filtered policy is loaded."]}),"\n",(0,n.jsxs)(i.p,{children:["For example, the following code snippet uses the built-in filtered file adapter and the RBAC model with domains. In this case, the filter limits the policy to a single domain. Any policy lines for domains other than ",(0,n.jsx)(i.code,{children:'"domain1"'})," are omitted from the loaded policy:"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-go",children:'import (\n    "github.com/casbin/casbin/v3"\n    fileadapter "github.com/casbin/casbin/v3/persist/file-adapter"\n)\n\nenforcer, _ := casbin.NewEnforcer()\n\nadapter := fileadapter.NewFilteredAdapter("examples/rbac_with_domains_policy.csv")\nenforcer.InitWithAdapter("examples/rbac_with_domains_model.conf", adapter)\n\nfilter := &fileadapter.Filter{\n    P: []string{"", "domain1"},\n    G: []string{"", "", "domain1"},\n}\nenforcer.LoadFilteredPolicy(filter)\n\n// The loaded policy now only contains the entries pertaining to "domain1".\n'})}),"\n",(0,n.jsxs)(i.p,{children:["There is another method that supports the subset loading feature: ",(0,n.jsx)(i.code,{children:"LoadIncrementalFilteredPolicy"}),". ",(0,n.jsx)(i.code,{children:"LoadIncrementalFilteredPolicy"})," is similar to ",(0,n.jsx)(i.code,{children:"LoadFilteredPolicy"}),", but it does not clear the previously loaded policy. It only appends the filtered policy to the existing policy."]})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453(e,i,t){t.d(i,{R:()=>a,x:()=>r});var o=t(6540);const n={},s=o.createContext(n);function a(e){const i=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),o.createElement(s.Provider,{value:i},e.children)}}}]);