"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[3164],{3905:(e,i,n)=>{n.d(i,{Zo:()=>u,kt:()=>c});var t=n(7294);function a(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function r(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);i&&(t=t.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?r(Object(n),!0).forEach((function(i){a(e,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))}))}return e}function o(e,i){if(null==e)return{};var n,t,a=function(e,i){if(null==e)return{};var n,t,a={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],i.indexOf(n)>=0||(a[n]=e[n]);return a}(e,i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],i.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=t.createContext({}),d=function(e){var i=t.useContext(s),n=i;return e&&(n="function"==typeof e?e(i):l(l({},i),e)),n},u=function(e){var i=d(e.components);return t.createElement(s.Provider,{value:i},e.children)},p={inlineCode:"code",wrapper:function(e){var i=e.children;return t.createElement(t.Fragment,{},i)}},m=t.forwardRef((function(e,i){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=d(n),c=a,g=m["".concat(s,".").concat(c)]||m[c]||p[c]||r;return n?t.createElement(g,l(l({ref:i},u),{},{components:n})):t.createElement(g,l({ref:i},u))}));function c(e,i){var n=arguments,a=i&&i.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in i)hasOwnProperty.call(i,s)&&(o[s]=i[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var d=2;d<r;d++)l[d]=n[d];return t.createElement.apply(null,l)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2544:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var t=n(7462),a=(n(7294),n(3905));const r={id:"menu-permissions",title:"Menu Permissions",description:"Esempio per i Permessi del Menu",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},l=void 0,o={unversionedId:"menu-permissions",id:"menu-permissions",title:"Menu Permissions",description:"Esempio per i Permessi del Menu",source:"@site/i18n/it/docusaurus-plugin-content-docs/current/MenuPermissions.mdx",sourceDirName:".",slug:"/menu-permissions",permalink:"/it/docs/menu-permissions",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/MenuPermissions.mdx",tags:[],version:"current",frontMatter:{id:"menu-permissions",title:"Menu Permissions",description:"Esempio per i Permessi del Menu",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},sidebar:"docs",previous:{title:"Data Permissions",permalink:"/it/docs/data-permissions"},next:{title:"Extensions",permalink:"/it/docs/category/extensions"}},s={},d=[{value:"1. File di Configurazione",id:"1-file-di-configurazione",level:3},{value:"1.1 Panoramica",id:"11-panoramica",level:4},{value:"1.2 Definizioni delle Autorizzazioni (Politiche)",id:"12-definizioni-delle-autorizzazioni-politiche",level:4},{value:"1.3 Associazioni Ruoli e Utenti",id:"13-associazioni-ruoli-e-utenti",level:4},{value:"1.4 Gerarchia degli Elementi del Menu",id:"14-gerarchia-degli-elementi-del-menu",level:4},{value:"1.5 Ereditariet\xe0 delle Permessi del Menu e Regole Predefinite",id:"15-ereditariet\xe0-delle-permessi-del-menu-e-regole-predefinite",level:4},{value:"1.6 Regole di Ereditariet\xe0 delle Permessi Speciali",id:"16-regole-di-ereditariet\xe0-delle-permessi-speciali",level:4},{value:"1.7 Descrizione dell&#39;Esempio",id:"17-descrizione-dellesempio",level:4},{value:"2. Controllo delle Permessi del Menu",id:"2-controllo-delle-permessi-del-menu",level:3}],u={toc:d};function p(e){let{components:i,...n}=e;return(0,a.kt)("wrapper",(0,t.Z)({},u,n,{components:i,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Iniziamo introducendo un esempio di Spring Boot che presenta un sistema di menu. Questo esempio sfrutta jCasbin per gestire i permessi del menu. In definitiva, mira a astrarre un middleware, specificamente per i permessi del menu, che potrebbe essere esteso ad altre lingue supportate da Casbin, come Go e Python."),(0,a.kt)("h3",{id:"1-file-di-configurazione"},"1. File di Configurazione"),(0,a.kt)("p",null,"\xc8 necessario configurare la gestione dei ruoli e delle autorizzazioni nel file ",(0,a.kt)("inlineCode",{parentName:"p"},"policy.csv"),", insieme alle relazioni padre-figlio tra gli elementi dei menu. Per maggiori dettagli, si prega di consultare ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jcasbin/jcasbin-menu-permission"},"questo repository GitHub"),"."),(0,a.kt)("h4",{id:"11-panoramica"},"1.1 Panoramica"),(0,a.kt)("p",null,"Utilizzando ",(0,a.kt)("inlineCode",{parentName:"p"},"policy.csv"),", \xe8 possibile configurare flessibilmente le autorizzazioni dei ruoli e le strutture dei menu per un controllo di accesso dettagliato. Questo file di configurazione definisce le autorizzazioni di accesso per diversi ruoli su vari elementi dei menu, le associazioni tra utenti e ruoli, e le relazioni gerarchiche tra gli elementi dei menu."),(0,a.kt)("h4",{id:"12-definizioni-delle-autorizzazioni-politiche"},"1.2 Definizioni delle Autorizzazioni (Politiche)"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Regole delle Politiche"),": Le politiche sono definite con un prefisso ",(0,a.kt)("inlineCode",{parentName:"li"},"p"),", specificando i ruoli (",(0,a.kt)("inlineCode",{parentName:"li"},"sub"),") e le loro autorizzazioni (",(0,a.kt)("inlineCode",{parentName:"li"},"act"),") sugli elementi dei menu (",(0,a.kt)("inlineCode",{parentName:"li"},"obj"),"), insieme all'effetto della regola (",(0,a.kt)("inlineCode",{parentName:"li"},"eft"),"), dove ",(0,a.kt)("inlineCode",{parentName:"li"},"allow")," indica che l'autorizzazione \xe8 concessa e ",(0,a.kt)("inlineCode",{parentName:"li"},"deny")," indica che \xe8 negata.")),(0,a.kt)("p",null,"Esempi:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"p, ROLE_ROOT, SystemMenu, read, allow")," significa che il ruolo ",(0,a.kt)("inlineCode",{parentName:"li"},"ROLE_ROOT")," ha accesso in lettura all'elemento del menu ",(0,a.kt)("inlineCode",{parentName:"li"},"SystemMenu"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"p, ROLE_ROOT, UserMenu, read, deny")," significa che il ruolo ",(0,a.kt)("inlineCode",{parentName:"li"},"ROLE_ROOT")," \xe8 negato l'accesso in lettura all'elemento del menu ",(0,a.kt)("inlineCode",{parentName:"li"},"UserMenu"),".")),(0,a.kt)("h4",{id:"13-associazioni-ruoli-e-utenti"},"1.3 Associazioni Ruoli e Utenti"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ereditariet\xe0 del Ruolo"),": Le relazioni utente-ruolo e le gerarchie dei ruoli sono definite con un prefisso ",(0,a.kt)("inlineCode",{parentName:"li"},"g"),". Ci\xf2 consente agli utenti di ereditare permessi da uno o pi\xf9 ruoli.")),(0,a.kt)("p",null,"Esempi:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"g, user, ROLE_USER")," significa che l'utente ",(0,a.kt)("inlineCode",{parentName:"li"},"user")," \xe8 assegnato al ruolo ",(0,a.kt)("inlineCode",{parentName:"li"},"ROLE_USER"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"g, ROLE_ADMIN, ROLE_USER")," significa che ",(0,a.kt)("inlineCode",{parentName:"li"},"ROLE_ADMIN")," eredita i permessi da ",(0,a.kt)("inlineCode",{parentName:"li"},"ROLE_USER"),".")),(0,a.kt)("h4",{id:"14-gerarchia-degli-elementi-del-menu"},"1.4 Gerarchia degli Elementi del Menu"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Relazioni tra Menu"),": Le relazioni genitore-figlio tra gli elementi del menu sono definite con un prefisso ",(0,a.kt)("inlineCode",{parentName:"li"},"g2"),", facilitando la costruzione della struttura di un menu.")),(0,a.kt)("p",null,"Esempi:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"g2, UserSubMenu_allow, UserMenu")," indica che ",(0,a.kt)("inlineCode",{parentName:"li"},"UserSubMenu_allow")," \xe8 un sottomenu di ",(0,a.kt)("inlineCode",{parentName:"li"},"UserMenu"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"g2, (NULL), SystemMenu")," indica che ",(0,a.kt)("inlineCode",{parentName:"li"},"SystemMenu")," non ha un elemento sottomenu, il che significa che \xe8 un elemento di menu di primo livello.")),(0,a.kt)("h4",{id:"15-ereditariet\xe0-delle-permessi-del-menu-e-regole-predefinite"},"1.5 Ereditariet\xe0 delle Permessi del Menu e Regole Predefinite"),(0,a.kt)("p",null,"Quando si gestiscono i permessi dei menu con jCasbin, la relazione di permesso tra menu padre e menu figlio segue regole specifiche di ereditariet\xe0, con due importanti regole predefinite:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Ereditariet\xe0 dei Permessi del Menu Padre"),":"),(0,a.kt)("p",null,"Se un menu padre \xe8 esplicitamente concesso il permesso ",(0,a.kt)("inlineCode",{parentName:"p"},"allow"),", tutti i suoi sottomenu assumono di default il permesso ",(0,a.kt)("inlineCode",{parentName:"p"},"allow")," a meno che non siano specificamente contrassegnati come ",(0,a.kt)("inlineCode",{parentName:"p"},"deny"),". Ci\xf2 significa che una volta che un menu padre \xe8 accessibile, i suoi sottomenu sono accessibili di default."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Gestione dei Menu Padri Senza Impostazioni di Permesso Dirette"),":"),(0,a.kt)("p",null,"Se un menu padre non ha impostazioni di permesso dirette (n\xe9 esplicitamente consentite n\xe9 negate) ma ha almeno un sottomenu esplicitamente concesso il permesso ",(0,a.kt)("inlineCode",{parentName:"p"},"allow"),", allora il menu padre \xe8 implicitamente considerato avere il permesso ",(0,a.kt)("inlineCode",{parentName:"p"},"allow"),". Questo garantisce che gli utenti possano navigare verso questi sottomenu."),(0,a.kt)("h4",{id:"16-regole-di-ereditariet\xe0-delle-permessi-speciali"},"1.6 Regole di Ereditariet\xe0 delle Permessi Speciali"),(0,a.kt)("p",null,"Riguardo l'ereditariet\xe0 delle autorizzazioni tra i ruoli, specialmente in scenari che coinvolgono autorizzazioni di ",(0,a.kt)("inlineCode",{parentName:"p"},"negazione"),", \xe8 necessario seguire le seguenti regole per garantire la sicurezza del sistema e un controllo preciso delle autorizzazioni:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Distinzione tra Negazioni Esplicite e Negazioni Predefinite"),":"),(0,a.kt)("p",null,"Se un ruolo, come ",(0,a.kt)("inlineCode",{parentName:"p"},"ROLE_ADMIN"),", \xe8 esplicitamente negato l'accesso a un elemento di menu, come ",(0,a.kt)("inlineCode",{parentName:"p"},"AdminSubMenu_deny")," (contrassegnato come ",(0,a.kt)("inlineCode",{parentName:"p"},"deny"),"), allora anche se questo ruolo \xe8 ereditato da un altro ruolo (ad esempio, ",(0,a.kt)("inlineCode",{parentName:"p"},"ROLE_ROOT"),"), il ruolo ereditato non \xe8 autorizzato ad accedere all'elemento di menu negato. Questo garantisce che le politiche di sicurezza esplicite non vengano aggirate a causa dell'ereditariet\xe0 del ruolo."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Ereditariet\xe0 delle Autorizzazioni di Negazione Predefinite"),":"),(0,a.kt)("p",null,"Al contrario, se la negazione dell'accesso di un ruolo a un elemento di menu (ad esempio, ",(0,a.kt)("inlineCode",{parentName:"p"},"UserSubMenu_deny"),") \xe8 predefinita (non esplicitamente contrassegnata come ",(0,a.kt)("inlineCode",{parentName:"p"},"deny"),", ma perch\xe9 non \xe8 stata esplicitamente concessa ",(0,a.kt)("inlineCode",{parentName:"p"},"allow"),"), allora quando questo ruolo \xe8 ereditato da un altro ruolo (ad esempio, ",(0,a.kt)("inlineCode",{parentName:"p"},"ROLE_ADMIN"),"), il ruolo ereditato pu\xf2 sovrascrivere lo stato di ",(0,a.kt)("inlineCode",{parentName:"p"},"deny")," predefinito, permettendo l'accesso a questi elementi di menu."),(0,a.kt)("h4",{id:"17-descrizione-dellesempio"},"1.7 Descrizione dell'Esempio"),(0,a.kt)("p",null,"politica:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csv"},"p, ROLE_ROOT, SystemMenu, read, allow\np, ROLE_ROOT, AdminMenu, read, allow\np, ROLE_ROOT, UserMenu, read, deny\np, ROLE_ADMIN, UserMenu, read, allow\np, ROLE_ADMIN, AdminMenu, read, allow\np, ROLE_ADMIN, AdminSubMenu_deny, read, deny\np, ROLE_USER, UserSubMenu_allow, read, allow\n\ng, user, ROLE_USER\ng, admin, ROLE_ADMIN\ng, root, ROLE_ROOT\ng, ROLE_ADMIN, ROLE_USER\n\ng2, UserSubMenu_allow, UserMenu\ng2, UserSubMenu_deny, UserMenu\ng2, UserSubSubMenu, UserSubMenu_allow\ng2, AdminSubMenu_allow, AdminMenu\ng2, AdminSubMenu_deny, AdminMenu\ng2, (NULL), SystemMenu\n")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"NomeMenu"),(0,a.kt)("th",{parentName:"tr",align:"center"},"RUOLO","_","ROOT"),(0,a.kt)("th",{parentName:"tr",align:"center"},"RUOLO","_","AMMINISTRATORE"),(0,a.kt)("th",{parentName:"tr",align:"center"},"RUOLO","_","UTENTE"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"SystemMenu"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"UserMenu"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"UserSubMenu","_","allow"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"UserSubSubMenu"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"UserSubMenu","_","deny"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"AdminMenu"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"AdminSubMenu","_","allow"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"AdminSubMenu","_","deny"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,a.kt)("td",{parentName:"tr",align:"center"},"\u274c")))),(0,a.kt)("h3",{id:"2-controllo-delle-permessi-del-menu"},"2. Controllo delle Permessi del Menu"),(0,a.kt)("p",null,"L'elenco di tutti gli elementi del menu accessibili da un dato nome utente pu\xf2 essere identificato attraverso la funzione ",(0,a.kt)("inlineCode",{parentName:"p"},"findAccessibleMenus()")," disponibile nel ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jcasbin/jcasbin-menu-permission/blob/master/src/main/java/org/casbin/service/MenuService.java"},"MenuService"),". Per verificare se un utente specifico ha i diritti per accedere a un elemento del menu designato, \xe8 possibile utilizzare il metodo ",(0,a.kt)("inlineCode",{parentName:"p"},"checkMenuAccess()"),". Questo approccio garantisce che le autorizzazioni dei menu siano controllate in modo efficace, sfruttando le capacit\xe0 di jCasbin per gestire i diritti di accesso in modo efficiente."))}p.isMDXComponent=!0}}]);