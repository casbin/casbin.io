"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[5217],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return d}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var u=n.createContext({}),l=function(e){var t=n.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,s=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=l(r),d=i,f=m["".concat(u,".").concat(d)]||m[d]||c[d]||s;return r?n.createElement(f,a(a({ref:t},p),{},{components:r})):n.createElement(f,a({ref:t},p))}));function d(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var s=r.length,a=new Array(s);a[0]=m;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:i,a[1]=o;for(var l=2;l<s;l++)a[l]=r[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},9270:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return c}});var n=r(3117),i=r(102),s=(r(7294),r(3905)),a=["components"],o={id:"performance",title:"Optimisation des performances",description:"Casbin performance optimization",keywords:["optimization"]},u=void 0,l={unversionedId:"performance",id:"performance",title:"Optimisation des performances",description:"Casbin performance optimization",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/Performance.mdx",sourceDirName:".",slug:"/performance",permalink:"/fr/docs/performance",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/Performance.mdx",tags:[],version:"current",frontMatter:{id:"performance",title:"Optimisation des performances",description:"Casbin performance optimization",keywords:["optimization"]},sidebar:"docs",previous:{title:"Benchmarks",permalink:"/fr/docs/benchmark"},next:{title:"Autorisation de Kubernetes",permalink:"/fr/docs/k8s"}},p={},c=[{value:"Trafic de volume \xe9lev\xe9",id:"trafic-de-volume-\xe9lev\xe9",level:4},{value:"Nombre \xe9lev\xe9 de r\xe8gles de politique",id:"nombre-\xe9lev\xe9-de-r\xe8gles-de-politique",level:4}],m={toc:c};function d(e){var t=e.components,r=(0,i.Z)(e,a);return(0,s.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"Lorsqu'il est appliqu\xe9 dans un environnement de production avec des millions d'utilisateurs ou des autorisations, vous pouvez rencontrer un downgrade de performance dans l'application de Casbin, il y a g\xe9n\xe9ralement deux causes:"),(0,s.kt)("h4",{id:"trafic-de-volume-\xe9lev\xe9"},"Trafic de volume \xe9lev\xe9"),(0,s.kt)("p",null,"Le nombre de requ\xeates \xe0 venir par seconde est trop important, par exemple 10 000 requ\xeates/s pour une seule instance Casbin. Dans ce cas, une seule instance Casbin ne suffit g\xe9n\xe9ralement pas \xe0 g\xe9rer toutes les requ\xeates. Il y a 2 solutions possibles:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Utilisez plusieurs threads pour activer plusieurs instances Casbin, afin que vous puissiez pleinement utiliser tous les c\u0153urs de la machine. Voir les d\xe9tails \xe0 : ",(0,s.kt)("a",{parentName:"p",href:"/docs/multi-threading"},"Multi-threads"),".")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"D\xe9ployer des instances Casbin sur un cluster (machines multiples). Utilisez Watcher pour garantir la coh\xe9rence de toutes les instances Casbin. Voir les d\xe9tails sur: ",(0,s.kt)("a",{parentName:"p",href:"/docs/watchers"},"Observateurs"),"."))),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"Vous pouvez utiliser les deux m\xe9thodes ci-dessus en m\xeame temps, par exemple, d\xe9ployer Casbin sur une grappe de 10 machines. Chaque machine a 5 fils de discussion simultan\xe9ment pour traiter les demandes d'ex\xe9cution de Casbin.")),(0,s.kt)("h4",{id:"nombre-\xe9lev\xe9-de-r\xe8gles-de-politique"},"Nombre \xe9lev\xe9 de r\xe8gles de politique"),(0,s.kt)("p",null,"Des millions de r\xe8gles politiques peuvent \xeatre requises dans un environnement nuageux ou multi-locataire. Chaque appel de mise en application ou m\xeame le chargement des r\xe8gles de police au moment initial est tr\xe8s lent. Ces cas peuvent g\xe9n\xe9ralement \xeatre att\xe9nu\xe9s de plusieurs mani\xe8res:"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Votre mod\xe8le ou votre politique Casbin n'est pas bien con\xe7u. Un mod\xe8le et une politique bien r\xe9dig\xe9s r\xe9sumeront la logique dupliqu\xe9e pour chaque utilisateur/locataire et r\xe9duiront le nombre de r\xe8gles \xe0 un tr\xe8s petit niveau (< 100): e. ., vous pouvez partager certaines r\xe8gles par d\xe9faut entre tous les locataires et permettre aux utilisateurs de personnaliser leurs r\xe8gles plus tard. Les r\xe8gles personnalis\xe9es peuvent remplacer les r\xe8gles par d\xe9faut. Si vous avez encore des questions, veuillez envoyer un probl\xe8me GitHub aux d\xe9p\xf4ts Casbin.")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Le d\xe9chirage pour laisser un agent de police casbin charger seulement un petit ensemble de r\xe8gles de politique (p. ex. enforcer_0 ne sert que pour le locant_0 au locant_99, enforcer_1 ne sert que pour le locant_100 au locant_199. Pour charger seulement un sous-ensemble de toutes les r\xe8gles de r\xe8gles, voir les d\xe9tails sur: ",(0,s.kt)("a",{parentName:"p",href:"/docs/policy-subset-loading"},"chargement de sous-ensemble de la politique"),".")),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},"Accorder les permissions aux r\xf4les RBAC au lieu des utilisateurs directement. Le RBAC de Casbin's est impl\xe9ment\xe9 par une arborescence d'h\xe9ritage de r\xf4les (en tant que cache). Ainsi, \xe9tant donn\xe9 un utilisateur comme Alice, Casbin n'utilise que O(1) temps pour interroger l'arborescence RBAC pour les relations entre les utilisateurs et faire ex\xe9cution. Si vos r\xe8gles g ne changent pas souvent, l'arborescence RBAC ne devra pas \xeatre mise \xe0 jour. Voir les d\xe9tails de ce dicus: ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/681#issuecomment-763801583"},"https://github.com/casbin/casbin/issues/681#issuecomment-763801583")))),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"Vous pouvez essayer les m\xe9thodes ci-dessus en m\xeame temps.")))}d.isMDXComponent=!0}}]);