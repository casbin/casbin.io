"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[539],{2929:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"performance","title":"Performance Optimization","description":"Optimisation des performances de Casbin","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/Performance.mdx","sourceDirName":".","slug":"/performance","permalink":"/fr/docs/performance","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/Performance.mdx","tags":[],"version":"current","frontMatter":{"id":"performance","title":"Performance Optimization","description":"Optimisation des performances de Casbin","keywords":["optimization"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"Benchmarks","permalink":"/fr/docs/benchmark"},"next":{"title":"Authorization of Kubernetes","permalink":"/fr/docs/k8s"}}');var r=n(4848),t=n(8453);const a={id:"performance",title:"Performance Optimization",description:"Optimisation des performances de Casbin",keywords:["optimization"],authors:["hsluoyz"]},o=void 0,l={},u=[{value:"Trafic \xe0 haut volume",id:"trafic-\xe0-haut-volume",level:4},{value:"Nombre \xe9lev\xe9 de r\xe8gles de politique",id:"nombre-\xe9lev\xe9-de-r\xe8gles-de-politique",level:4}];function c(e){const s={a:"a",admonition:"admonition",h4:"h4",li:"li",ol:"ol",p:"p",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Lorsqu'il est appliqu\xe9 dans un environnement de production avec des millions d'utilisateurs ou de permissions, vous pouvez rencontrer une d\xe9gradation des performances dans l'application de Casbin. Il y a g\xe9n\xe9ralement deux causes :"}),"\n",(0,r.jsx)(s.h4,{id:"trafic-\xe0-haut-volume",children:"Trafic \xe0 haut volume"}),"\n",(0,r.jsx)(s.p,{children:"Le nombre de requ\xeates entrantes par seconde est trop \xe9lev\xe9, par exemple, 10 000 requ\xeates/s pour une seule instance de Casbin. Dans de tels cas, une seule instance de Casbin n'est g\xe9n\xe9ralement pas suffisante pour g\xe9rer toutes les requ\xeates. Il y a deux solutions possibles :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Utilisez le multi-threading pour activer plusieurs instances de Casbin, afin de pouvoir utiliser pleinement tous les c\u0153urs de la machine. Pour plus de d\xe9tails, voir : ",(0,r.jsx)(s.a,{href:"/docs/multi-threading",children:"Multi-threading"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["D\xe9ployez des instances de Casbin sur un cluster (plusieurs machines) et utilisez Watcher pour garantir la coh\xe9rence de toutes les instances de Casbin. Pour plus de d\xe9tails, voir : ",(0,r.jsx)(s.a,{href:"/docs/watchers",children:"Watchers"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Vous pouvez utiliser les deux m\xe9thodes ci-dessus en m\xeame temps, par exemple, d\xe9ployer Casbin sur un cluster de 10 machines o\xf9 chaque machine a 5 threads servant simultan\xe9ment les requ\xeates d'application de Casbin."})}),"\n",(0,r.jsx)(s.h4,{id:"nombre-\xe9lev\xe9-de-r\xe8gles-de-politique",children:"Nombre \xe9lev\xe9 de r\xe8gles de politique"}),"\n",(0,r.jsx)(s.p,{children:"Dans un environnement cloud ou multi-locataire, des millions de r\xe8gles de politique peuvent \xeatre n\xe9cessaires. Chaque appel d'application ou m\xeame le chargement des r\xe8gles de politique au moment initial peut \xeatre tr\xe8s lent. De tels cas peuvent g\xe9n\xe9ralement \xeatre att\xe9nu\xe9s de plusieurs fa\xe7ons :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"V\xe9rifiez si votre mod\xe8le ou votre politique Casbin est bien con\xe7u. Un mod\xe8le et une politique bien \xe9crits r\xe9sument la logique dupliqu\xe9e pour chaque utilisateur/locataire et r\xe9duisent le nombre de r\xe8gles \xe0 un niveau tr\xe8s faible (< 100). Par exemple, vous pouvez partager certaines r\xe8gles par d\xe9faut entre tous les locataires et permettre aux utilisateurs de personnaliser leurs r\xe8gles plus tard. Les r\xe8gles personnalis\xe9es peuvent remplacer les r\xe8gles par d\xe9faut. Si vous avez d'autres questions, veuillez ouvrir un probl\xe8me GitHub sur le d\xe9p\xf4t Casbin."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Faites du sharding pour permettre \xe0 un ex\xe9cuteur Casbin de ne charger qu'un petit ensemble de r\xe8gles de politique. Par exemple, l'ex\xe9cuteur_0 peut servir le locataire_0 au locataire_99, tandis que l'ex\xe9cuteur_1 peut servir le locataire_100 au locataire_199. Pour ne charger qu'un sous-ensemble de toutes les r\xe8gles de politique, voir : ",(0,r.jsx)(s.a,{href:"/docs/policy-subset-loading",children:"Chargement de sous-ensemble de politique"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Accordez des permissions aux r\xf4les RBAC au lieu des utilisateurs directement. Le RBAC de Casbin est mis en \u0153uvre par un arbre d'h\xe9ritage de r\xf4les (comme un cache). Ainsi, pour un utilisateur comme Alice, Casbin ne prend que O(1) temps pour interroger l'arbre RBAC pour la relation r\xf4le-utilisateur et effectuer l'application. Si vos r\xe8gles g ne changent pas souvent, alors l'arbre RBAC n'aura pas besoin d'\xeatre constamment mis \xe0 jour. Voir les d\xe9tails de cette discussion ici : ",(0,r.jsx)(s.a,{href:"https://github.com/casbin/casbin/issues/681#issuecomment-763801583",children:"https://github.com/casbin/casbin/issues/681#issuecomment-763801583"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsx)(s.p,{children:"Vous pouvez essayer toutes les m\xe9thodes ci-dessus en m\xeame temps."})})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var i=n(6540);const r={},t=i.createContext(r);function a(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);