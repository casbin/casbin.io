"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[716],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,b=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(b,s(s({ref:t},c),{},{components:n})):a.createElement(b,s({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var u=2;u<i;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6806:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var a=n(7462),r=(n(7294),n(3905));const i={id:"frontend",title:"Utilisation du frontend",description:"Casbin.js is a Casbin addon that facilites your access-control management in the frontend application",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},s=void 0,o={unversionedId:"frontend",id:"frontend",title:"Utilisation du frontend",description:"Casbin.js is a Casbin addon that facilites your access-control management in the frontend application",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/FrontendUsage.mdx",sourceDirName:".",slug:"/frontend",permalink:"/fr/docs/frontend",draft:!1,editUrl:"https://crowdin.com/project/casbin-website/fr",tags:[],version:"current",frontMatter:{id:"frontend",title:"Utilisation du frontend",description:"Casbin.js is a Casbin addon that facilites your access-control management in the frontend application",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Log & gestion des erreurs",permalink:"/fr/docs/log-error"},next:{title:"Editor",permalink:"/fr/docs/category/editor"}},l={},u=[{value:"Installation",id:"installation",level:2},{value:"Middlewares du frontend",id:"middlewares-du-frontend",level:2},{value:"D\xe9marrage rapide",id:"d\xe9marrage-rapide",level:2},{value:"Utilisation avanc\xe9e",id:"utilisation-avanc\xe9e",level:2},{value:"Liste des API",id:"liste-des-api",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:4},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:4},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:4},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:4},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:4},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:4},{value:"Pourquoi Casbin.js",id:"pourquoi-casbinjs",level:2}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js"},"Casbin.js")," est un addon Casbin qui facilite votre gestion du contr\xf4le d'acc\xe8s dans l'application frontend."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install casbin.js\nnpm install casbin\n")),(0,r.kt)("p",null,"ou"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add casbin.js\n")),(0,r.kt)("h2",{id:"middlewares-du-frontend"},"Middlewares du frontend"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Middleware"),(0,r.kt)("th",{parentName:"tr",align:null},"Type de texte"),(0,r.kt)("th",{parentName:"tr",align:null},"Auteur"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/react-authz"},"authentification-r\xe9action")),(0,r.kt)("td",{parentName:"tr",align:null},"R\xe9agir"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"React wrapper pour Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/daobeng/rbac-react"},"rbac-r\xe9action")),(0,r.kt)("td",{parentName:"tr",align:null},"R\xe9agir"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/daobeng"},"@daobeng")),(0,r.kt)("td",{parentName:"tr",align:null},"Contr\xf4le d'acc\xe8s bas\xe9 sur les r\xf4les dans React \xe0 l'aide de HOCs, CASL et Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/vue-authz"},"authentification-Vie")),(0,r.kt)("td",{parentName:"tr",align:null},"Vue"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Gestionnaire de vue pour Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/angular-authz"},"identificateur-angulaire")),(0,r.kt)("td",{parentName:"tr",align:null},"Angulaire"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Enveloppe Angulaire pour Casbin.js")))),(0,r.kt)("h2",{id:"d\xe9marrage-rapide"},"D\xe9marrage rapide"),(0,r.kt)("p",null,"Vous pouvez utiliser le mode ",(0,r.kt)("inlineCode",{parentName:"p"},"manuel")," dans votre application en frontend et d\xe9finir la permission quand vous le souhaitez."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const casbinjs = require("casbin. s");\n// D\xe9finit la permission de l\'utilisateur :\n// Il/She peut lire les objets `data1` et `data2` et peut \xe9crire l\'objet `data1`\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Ex\xe9cute la casbine. s en mode manuel, ce qui vous oblige \xe0 d\xe9finir les permissions manuellement.\nconst authorizer = new casbinjs.Authorizer("manuel");\n')),(0,r.kt)("p",null,"maintenant nous avons un autorisateur ",(0,r.kt)("inlineCode",{parentName:"p"},"autorisateur"),". Nous pouvons en obtenir les r\xe8gles de permission en utilisant l'API ",(0,r.kt)("inlineCode",{parentName:"p"},"authorzer.can()")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizzer.cannot()"),". Les valeurs de retour de ces 2 API sont des promesses JavaScript (",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises"},"d\xe9tails ici"),"), donc nous devrions utiliser la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"then()")," de la valeur retourn\xe9e comme ceci :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.can("write", "data1");\nr\xe9sultat. hen((succ\xe8s, \xe9chec) => {\n    if (success) {\n        console. og("vous pouvez \xe9crire data1");\n    } autre {\n        console. og("vous ne pouvez pas \xe9crire des donn\xe9es1");\n    }\n});\n// sortie: vous pouvez \xe9crire des donn\xe9es1\n')),(0,r.kt)("p",null,"et ",(0,r.kt)("inlineCode",{parentName:"p"},"cannot()")," est utilis\xe9 de la m\xeame mani\xe8re :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.cannot("read", "data2");\nr\xe9sultat. hen((succ\xe8s, \xe9chec) => {\n    if (success) {\n        console. og("vous ne pouvez pas lire les donn\xe9es2");\n    } autre {\n        console. og("vous pouvez lire data2");\n    }\n});\n// output: you can read data2\n')),(0,r.kt)("p",null,"dans le code ci-dessus, la variable ",(0,r.kt)("inlineCode",{parentName:"p"},"success")," dans les param\xe8tres signifie que la requ\xeate obtient le r\xe9sultat sans \xe9mettre d'erreur, et ne veut pas dire que la r\xe8gle de permission est ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"\xe9chec")," n'est pas aussi li\xe9 aux r\xe8gles d'autorisation. Cela n'a de sens que lorsque quelque chose ne va pas dans le processus de la demande."),(0,r.kt)("p",null,"Vous pouvez vous r\xe9f\xe9rer \xe0 notre ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin-js/examples"},"exemple React")," pour voir une utilisation pratique de Casbin.js"),(0,r.kt)("h2",{id:"utilisation-avanc\xe9e"},"Utilisation avanc\xe9e"),(0,r.kt)("p",null,"Casbin.js offre une solution parfaite pour int\xe9grer votre gestion du contr\xf4le d\u2019acc\xe8s frontal \xe0 votre service Casbin d\u2019arri\xe8re-plan."),(0,r.kt)("p",null,"Utilisez le mode ",(0,r.kt)("inlineCode",{parentName:"p"},"auto")," et sp\xe9cifiez votre point de terminaison lors de l'initialisation de la Casbin. s ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorizer"),", il synchronisera automatiquement les permissions et manipulera l'\xe9tat du frontend."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const casbinjs = require('casbin.js');\n\n// D\xe9finissez votre adresse de service casbin d'arri\xe8re-plan\nconst authorizer = new casbinjs. uthorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// D\xe9finit votre visiteur.\n// Casbin.js synchronisera automatiquement la permission avec votre service Casbin backend.\nauthorizer.setUser(\"Tom\");\n\n// \xc9valuer la permission\nr\xe9sultat = authorizzer.can(\"read\", \"data1\");\nr\xe9sultat. hen(succ\xe8s, failed) => {\n    if (success) {\n        // Proc\xe9dure du frontend ...\n    }\n});\n")),(0,r.kt)("p",null,"En cons\xe9quence, vous devez exposer une interface (par exemple un RestAPI) pour g\xe9n\xe9rer l'objet de permission et le passer au frontend. Dans votre contr\xf4leur API, appelez ",(0,r.kt)("inlineCode",{parentName:"p"},"CasbinJsGetUserPermission")," pour construire l'objet de permission. Voici un exemple dans Beego:"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Votre serveur de point de terminaison devrait renvoyer quelque chose comme"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // R\xe9cup\xe8re le visiteur depuis les param\xe8tres GET. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the fronend.\n    c.ServeJSON()\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Actuellement, l'api ",(0,r.kt)("inlineCode",{parentName:"p"},"CasbinJsGetPermissionForUser")," n'est pris en charge que dans Go Casbin et Node-Casbin. Si vous voulez que cet api soit pris en charge dans d'autres langues, veuillez ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js/issues"},"soulever un probl\xe8me")," ou laisser un commentaire ci-dessous.")),(0,r.kt)("h2",{id:"liste-des-api"},"Liste des API"),(0,r.kt)("h4",{id:"setpermissionpermission-string"},(0,r.kt)("inlineCode",{parentName:"h4"},"setPermission(permission: string)")),(0,r.kt)("p",null,"D\xe9finir l'objet de permission. Toujours utilis\xe9 en mode ",(0,r.kt)("inlineCode",{parentName:"p"},"manuel"),"."),(0,r.kt)("h4",{id:"setuseruser-string"},(0,r.kt)("inlineCode",{parentName:"h4"},"setUser(user: string)")),(0,r.kt)("p",null,"D\xe9finissez l'identit\xe9 du visiteur et mettez \xe0 jour la permission. Toujours utilis\xe9 en mode ",(0,r.kt)("inlineCode",{parentName:"p"},"auto"),"."),(0,r.kt)("h4",{id:"canaction-string-object-string"},(0,r.kt)("inlineCode",{parentName:"h4"},"can(action: string, object: string)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur peut effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur l'objet"),"."),(0,r.kt)("h4",{id:"cannotaction-string-object-string"},(0,r.kt)("inlineCode",{parentName:"h4"},"cannot(action: string, object: string)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur ",(0,r.kt)("strong",{parentName:"p"},"ne peut pas")," effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur l'objet"),"."),(0,r.kt)("h4",{id:"canallaction-string-objects-arrayobject"},(0,r.kt)("inlineCode",{parentName:"h4"},"canAll(action: string, objects: Array<object>)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur peut effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur **tout l'objet** dans les objets"),"."),(0,r.kt)("h4",{id:"cananyaction-string-objects-arrayobject"},(0,r.kt)("inlineCode",{parentName:"h4"},"canAny(action: string, objects: Array<object>)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur peut effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur **n'importe lequel** des objets"),"."),(0,r.kt)("h2",{id:"pourquoi-casbinjs"},"Pourquoi Casbin.js"),(0,r.kt)("p",null,"Les gens peuvent se demander la diff\xe9rence entre Node-Casbin et Casbin.js. En un mot, Node-Casbin est le c\u0153ur de Casbin impl\xe9ment\xe9 dans l'environnement NodeJS, et il est normalement utilis\xe9 comme outil de gestion d'acc\xe8s \xe0 la fin du serveur. Casbin.js est une biblioth\xe8que en frontend qui vous aide \xe0 utiliser Casbin pour autoriser l'utilisateur de votre page Web du c\xf4t\xe9 client."),(0,r.kt)("p",null,"Normalement, il n'est pas appropri\xe9 de construire directement un service Casbin et de faire les t\xe2ches d'autorisation/mise en application sur une application du site web en raison des probl\xe8mes suivants :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Quand quelqu'un allume le client, le responsable est initialis\xe9, et il retirera toutes les r\xe8gles des couches persistantes du backend. Une forte concurrence pourrait entra\xeener une forte pression sur les bases de donn\xe9es et co\xfbter beaucoup de d\xe9bit au r\xe9seau.\xa0"),(0,r.kt)("li",{parentName:"ol"},"Le chargement de toutes les politiques aupr\xe8s des clients pourrait entra\xeener des risques s\xfbrs."),(0,r.kt)("li",{parentName:"ol"},"Difficile pour la s\xe9paration entre le client et le serveur ainsi que pour le d\xe9veloppement agile .")),(0,r.kt)("p",null,"Nous souhaitons un outil qui facilite le processus d'utilisation de Casbin sur le frontend. En fait, le c\u0153ur de Casbin.js est la manipulation de la permission de l'utilisateur actuel du c\xf4t\xe9 client. Comme vous l'avez mentionn\xe9, Casbin.js fait une r\xe9cup\xe9ration \xe0 partir d'un point de terminaison sp\xe9cifi\xe9. Cette proc\xe9dure synchronisera la permission de l'utilisateur avec le service backend Casbin. Apr\xe8s avoir les donn\xe9es d'autorisation, les d\xe9veloppeurs peuvent utiliser les interfaces Casbin.js pour g\xe9rer les comportements de l'utilisateur du c\xf4t\xe9 du frontend."),(0,r.kt)("p",null,"Casbin. s \xe9vitent les deux probl\xe8mes mentionn\xe9s ci-dessus: le service Casbin ne sera plus retir\xe9 \xe0 plusieurs reprises, et la taille des messages pass\xe9s entre le client et le serveur est r\xe9duite. Nous \xe9vitons \xe9galement de stocker toutes les politiques en frontend. L'utilisateur ne peut acc\xe9der qu'\xe0 sa propre autorisation, mais n'a aucune id\xe9e des choses telles que le mod\xe8le de contr\xf4le d'acc\xe8s et les autorisations des autres utilisateurs. De plus, Casbin.js peut \xe9galement d\xe9coupler efficacement le client et le serveur dans la gestion des autorisations."))}d.isMDXComponent=!0}}]);