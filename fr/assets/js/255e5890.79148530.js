"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[5958],{2389(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>m,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"rbac-with-domains","title":"RBAC with Domains","description":"Utilisation de RBAC avec des domaines","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/RBACWithDomains.mdx","sourceDirName":".","slug":"/rbac-with-domains","permalink":"/fr/docs/rbac-with-domains","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithDomains.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-domains","title":"RBAC with Domains","description":"Utilisation de RBAC avec des domaines","keywords":["RBAC with domains"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC with Pattern","permalink":"/fr/docs/rbac-with-pattern"},"next":{"title":"RBAC with Conditions","permalink":"/fr/docs/rbac-with-conditions"}}');var s=i(4848),a=i(8453);const o={id:"rbac-with-domains",title:"RBAC with Domains",description:"Utilisation de RBAC avec des domaines",keywords:["RBAC with domains"],authors:["hsluoyz"]},d=void 0,r={},c=[{value:"D\xe9finition de r\xf4le avec des locataires de domaine",id:"d\xe9finition-de-r\xf4le-avec-des-locataires-de-domaine",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"d\xe9finition-de-r\xf4le-avec-des-locataires-de-domaine",children:"D\xe9finition de r\xf4le avec des locataires de domaine"}),"\n",(0,s.jsx)(n.p,{children:"Les r\xf4les RBAC dans Casbin peuvent \xeatre globaux ou sp\xe9cifiques \xe0 un domaine. Les r\xf4les sp\xe9cifiques \xe0 un domaine signifient que les r\xf4les d'un utilisateur peuvent \xeatre diff\xe9rents lorsque l'utilisateur se trouve dans diff\xe9rents domaines/locataires. Ceci est tr\xe8s utile pour les grands syst\xe8mes comme un cloud, car les utilisateurs sont g\xe9n\xe9ralement dans diff\xe9rents locataires."}),"\n",(0,s.jsx)(n.p,{children:"La d\xe9finition de r\xf4le avec des domaines/locataires devrait ressembler \xe0 ceci :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[role_definition]\ng = _, _, _\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Le troisi\xe8me ",(0,s.jsx)(n.code,{children:"_"})," repr\xe9sente le nom du domaine/locataire, et cette partie ne doit pas \xeatre modifi\xe9e. Ensuite, la politique peut \xeatre :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csv",children:"p, admin, tenant1, data1, read\np, admin, tenant2, data2, read\n\ng, alice, admin, tenant1\ng, alice, user, tenant2\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Cela signifie que le r\xf4le ",(0,s.jsx)(n.code,{children:"admin"})," dans ",(0,s.jsx)(n.code,{children:"tenant1"})," peut lire ",(0,s.jsx)(n.code,{children:"data1"}),". Et ",(0,s.jsx)(n.code,{children:"alice"})," a le r\xf4le ",(0,s.jsx)(n.code,{children:"admin"})," dans ",(0,s.jsx)(n.code,{children:"tenant1"})," et le r\xf4le ",(0,s.jsx)(n.code,{children:"user"})," dans ",(0,s.jsx)(n.code,{children:"tenant2"}),". Par cons\xe9quent, elle peut lire ",(0,s.jsx)(n.code,{children:"data1"}),". Cependant, comme ",(0,s.jsx)(n.code,{children:"alice"})," n'est pas une ",(0,s.jsx)(n.code,{children:"admin"})," dans ",(0,s.jsx)(n.code,{children:"tenant2"}),", elle ne peut pas lire ",(0,s.jsx)(n.code,{children:"data2"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Ensuite, dans un comparateur, vous devriez v\xe9rifier le r\xf4le comme suit :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[matchers]\nm = g(r.sub, p.sub, r.dom) && r.dom == p.dom && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Veuillez vous r\xe9f\xe9rer \xe0 ",(0,s.jsx)(n.a,{href:"https://github.com/casbin/casbin/blob/master/examples/rbac_with_domains_model.conf",children:"rbac_with_domains_model.conf"})," pour des exemples."]}),"\n",(0,s.jsxs)(n.admonition,{title:"Convention de nom de jeton",type:"info",children:[(0,s.jsxs)(n.p,{children:["Note : Conventionnellement, le nom du jeton de domaine dans la d\xe9finition de la politique est ",(0,s.jsx)(n.code,{children:"dom"})," et est plac\xe9 comme le deuxi\xe8me jeton (",(0,s.jsx)(n.code,{children:"sub, dom, obj, act"}),").\nMaintenant, Golang Casbin prend en charge les noms de jetons personnalis\xe9s et leur placement. Si le nom du jeton de domaine est ",(0,s.jsx)(n.code,{children:"dom"}),", le jeton de domaine peut \xeatre plac\xe9 \xe0 une position arbitraire sans aucune action suppl\xe9mentaire. Si le nom du jeton de domaine n'est pas ",(0,s.jsx)(n.code,{children:"dom"}),", ",(0,s.jsx)(n.code,{children:"e.SetFieldIndex()"})," pour ",(0,s.jsx)(n.code,{children:"constant.DomainIndex"})," doit \xeatre appel\xe9 apr\xe8s l'initialisation de l'ex\xe9cuteur, quelle que soit sa position."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"# `domain` here for `dom`\n[policy_definition]\np = sub, obj, act, domain\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'e.SetFieldIndex("p", constant.DomainIndex, 3) // index starts from 0\nusers := e.GetAllUsersByDomain("domain1") // without SetFieldIndex, it will raise an error\n'})})]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>d});var t=i(6540);const s={},a=t.createContext(s);function o(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);