"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[716],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,b=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return n?a.createElement(b,s(s({ref:t},u),{},{components:n})):a.createElement(b,s({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=n[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6806:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const i={id:"frontend",title:"Utilisation du frontend",description:"Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},s=void 0,o={unversionedId:"frontend",id:"frontend",title:"Utilisation du frontend",description:"Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/FrontendUsage.mdx",sourceDirName:".",slug:"/frontend",permalink:"/fr/docs/frontend",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/FrontendUsage.mdx",tags:[],version:"current",frontMatter:{id:"frontend",title:"Utilisation du frontend",description:"Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Log & gestion des erreurs",permalink:"/fr/docs/log-error"},next:{title:"Editor",permalink:"/fr/docs/category/editor"}},l={},c=[{value:"Installation",id:"installation",level:2},{value:"Middlewares du frontend",id:"middlewares-du-frontend",level:2},{value:"D\xe9marrage rapide",id:"d\xe9marrage-rapide",level:2},{value:"Permission Object",id:"permission-object",level:3},{value:"Utilisation avanc\xe9e",id:"utilisation-avanc\xe9e",level:2},{value:"Liste des API",id:"liste-des-api",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:3},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:3},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:3},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:3},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:3},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:3},{value:"Pourquoi Casbin.js",id:"pourquoi-casbinjs",level:2}],u={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js"},"Casbin.js")," is a Casbin addon that facilitates your access-control management in the frontend application."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install casbin.js\nnpm install casbin\n")),(0,r.kt)("p",null,"ou"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add casbin.js\n")),(0,r.kt)("h2",{id:"middlewares-du-frontend"},"Middlewares du frontend"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Middleware"),(0,r.kt)("th",{parentName:"tr",align:null},"Type de texte"),(0,r.kt)("th",{parentName:"tr",align:null},"Auteur"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/react-authz"},"authentification-r\xe9action")),(0,r.kt)("td",{parentName:"tr",align:null},"R\xe9agir"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"React wrapper pour Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/daobeng/rbac-react"},"rbac-r\xe9action")),(0,r.kt)("td",{parentName:"tr",align:null},"R\xe9agir"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/daobeng"},"@daobeng")),(0,r.kt)("td",{parentName:"tr",align:null},"Contr\xf4le d'acc\xe8s bas\xe9 sur les r\xf4les dans React \xe0 l'aide de HOCs, CASL et Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/vue-authz"},"authentification-Vie")),(0,r.kt)("td",{parentName:"tr",align:null},"Vue"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Gestionnaire de vue pour Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/angular-authz"},"identificateur-angulaire")),(0,r.kt)("td",{parentName:"tr",align:null},"Angulaire"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Enveloppe Angulaire pour Casbin.js")))),(0,r.kt)("h2",{id:"d\xe9marrage-rapide"},"D\xe9marrage rapide"),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"manual")," mode in your frontend application and set the permissions whenever you wish."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const casbinjs = require("casbin. s");\n// D\xe9finit la permission de l\'utilisateur :\n// Il/She peut lire les objets `data1` et `data2` et peut \xe9crire l\'objet `data1`\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Ex\xe9cute la casbine. s en mode manuel, ce qui vous oblige \xe0 d\xe9finir les permissions manuellement.\nconst authorizer = new casbinjs.Authorizer("manuel");\n')),(0,r.kt)("p",null,"Now we have an authorizer, ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizer"),". We can get permission rules from it by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizer.can()")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizer.cannot()")," APIs. Les valeurs de retour de ces 2 API sont des promesses JavaScript (",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises"},"d\xe9tails ici"),"), donc nous devrions utiliser la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"then()")," de la valeur retourn\xe9e comme ceci :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.can("write", "data1");\nr\xe9sultat. hen((succ\xe8s, \xe9chec) => {\n    if (success) {\n        console. og("vous pouvez \xe9crire data1");\n    } autre {\n        console. og("vous ne pouvez pas \xe9crire des donn\xe9es1");\n    }\n});\n// sortie: vous pouvez \xe9crire des donn\xe9es1\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"cannot()")," API is used in the same way:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.cannot("read", "data2");\nr\xe9sultat. hen((succ\xe8s, \xe9chec) => {\n    if (success) {\n        console. og("vous ne pouvez pas lire les donn\xe9es2");\n    } autre {\n        console. og("vous pouvez lire data2");\n    }\n});\n// output: you can read data2\n')),(0,r.kt)("p",null,"In the code above, the ",(0,r.kt)("inlineCode",{parentName:"p"},"success")," variable in the parameters means the request gets the result without throwing an error and doesn't mean that the permission rule is ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"failed")," variable is also unrelated to the permission rules. Cela n'a de sens que lorsque quelque chose ne va pas dans le processus de la demande."),(0,r.kt)("p",null,"You can refer to our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin-js/examples"},"React example")," to see a practical usage of Casbin.js."),(0,r.kt)("h3",{id:"permission-object"},"Permission Object"),(0,r.kt)("p",null,"Casbin.js will accept a JSON object to manipulate the corresponding permission of a visitor. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n')),(0,r.kt)("p",null,"The permission object above shows that the visitor can ",(0,r.kt)("inlineCode",{parentName:"p"},"read")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"data1")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"data2")," objects, while they can only ",(0,r.kt)("inlineCode",{parentName:"p"},"write")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"data1")," objects."),(0,r.kt)("h2",{id:"utilisation-avanc\xe9e"},"Utilisation avanc\xe9e"),(0,r.kt)("p",null,"Casbin.js provides a perfect solution for integrating your frontend access-control management with your backend Casbin service."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"auto")," mode and specify your endpoint when initializing the Casbin.js ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorizer"),", it will automatically sync the permission and manipulate the frontend status."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const casbinjs = require('casbin.js');\n\n// Set your backend Casbin service URL\nconst authorizer = new casbinjs.Authorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// Set your visitor.\n// Casbin.js synchronisera automatiquement la permission avec votre service Casbin backend.\nauthorizer.setUser(\"Tom\");\n\n// \xc9valuer la permission\nr\xe9sultat = authorizzer.can(\"read\", \"data1\");\nr\xe9sultat. hen(succ\xe8s, failed) => {\n    if (success) {\n        // Proc\xe9dure du frontend ...\n    }\n});\n")),(0,r.kt)("p",null,"En cons\xe9quence, vous devez exposer une interface (par exemple un RestAPI) pour g\xe9n\xe9rer l'objet de permission et le passer au frontend. Dans votre contr\xf4leur API, appelez ",(0,r.kt)("inlineCode",{parentName:"p"},"CasbinJsGetUserPermission")," pour construire l'objet de permission. Voici un exemple dans Beego:"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Votre serveur de point de terminaison devrait renvoyer quelque chose comme"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // R\xe9cup\xe8re le visiteur depuis les param\xe8tres GET. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the frontend.\n    c.ServeJSON()\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Currently, the ",(0,r.kt)("inlineCode",{parentName:"p"},"CasbinJsGetPermissionForUser")," API is only supported in Go Casbin and Node-Casbin. If you want this API to be supported in other languages, please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js/issues"},"raise an issue")," or leave a comment below.")),(0,r.kt)("h2",{id:"liste-des-api"},"Liste des API"),(0,r.kt)("h3",{id:"setpermissionpermission-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"setPermission(permission: string)")),(0,r.kt)("p",null,"D\xe9finir l'objet de permission. Toujours utilis\xe9 en mode ",(0,r.kt)("inlineCode",{parentName:"p"},"manuel"),"."),(0,r.kt)("h3",{id:"setuseruser-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"setUser(user: string)")),(0,r.kt)("p",null,"D\xe9finissez l'identit\xe9 du visiteur et mettez \xe0 jour la permission. Toujours utilis\xe9 en mode ",(0,r.kt)("inlineCode",{parentName:"p"},"auto"),"."),(0,r.kt)("h3",{id:"canaction-string-object-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"can(action: string, object: string)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur peut effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur l'objet"),"."),(0,r.kt)("h3",{id:"cannotaction-string-object-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"cannot(action: string, object: string)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur ",(0,r.kt)("strong",{parentName:"p"},"ne peut pas")," effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur l'objet"),"."),(0,r.kt)("h3",{id:"canallaction-string-objects-arrayobject"},(0,r.kt)("inlineCode",{parentName:"h3"},"canAll(action: string, objects: Array<object>)")),(0,r.kt)("p",null,"Check if the user can perform ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," on ",(0,r.kt)("strong",{parentName:"p"},"all")," objects in ",(0,r.kt)("inlineCode",{parentName:"p"},"objects"),"."),(0,r.kt)("h3",{id:"cananyaction-string-objects-arrayobject"},(0,r.kt)("inlineCode",{parentName:"h3"},"canAny(action: string, objects: Array<object>)")),(0,r.kt)("p",null,"V\xe9rifie si l'utilisateur peut effectuer l'action ",(0,r.kt)("inlineCode",{parentName:"p"},"sur **n'importe lequel** des objets"),"."),(0,r.kt)("h2",{id:"pourquoi-casbinjs"},"Pourquoi Casbin.js"),(0,r.kt)("p",null,"People may wonder about the difference between Node-Casbin and Casbin.js. In a word, Node-Casbin is the core of Casbin implemented in the NodeJS environment, and it's normally used as an access-controlling management toolkit at the server ends. Casbin.js is a frontend library that helps you use Casbin to authorize your webpage users at the client side."),(0,r.kt)("p",null,"Normalement, il n'est pas appropri\xe9 de construire directement un service Casbin et de faire les t\xe2ches d'autorisation/mise en application sur une application du site web en raison des probl\xe8mes suivants :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"When someone turns on the client, the enforcer will be initialized, and it will pull all the policies from the backend persistent layers. Une forte concurrence pourrait entra\xeener une forte pression sur les bases de donn\xe9es et co\xfbter beaucoup de d\xe9bit au r\xe9seau."),(0,r.kt)("li",{parentName:"ol"},"Loading all policies to the client side could bring security risks."),(0,r.kt)("li",{parentName:"ol"},"It is difficult to separate the client and server as well as facilitate agile development.")),(0,r.kt)("p",null,"We need a tool that eases the process of using Casbin at the frontend. Actually, the core of Casbin.js is the manipulation of the current user's permission at the client side. Comme vous l'avez mentionn\xe9, Casbin.js fait une r\xe9cup\xe9ration \xe0 partir d'un point de terminaison sp\xe9cifi\xe9. Cette proc\xe9dure synchronisera la permission de l'utilisateur avec le service backend Casbin. After having the permission data, developers can use Casbin.js interfaces to manage the behavior of the user at the frontend side."),(0,r.kt)("p",null,"Casbin.js avoids the two problems mentioned above: Casbin service will no longer be pulled up repeatedly, and the size of passing messages between the client and the server is reduced. We also avoid storing all the policies at the frontend. The user can only access their own permission, but has no knowledge about the access-control model and other users' permissions. De plus, Casbin.js peut \xe9galement d\xe9coupler efficacement le client et le serveur dans la gestion des autorisations."))}p.isMDXComponent=!0}}]);