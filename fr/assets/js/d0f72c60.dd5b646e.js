"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[5508],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(t),m=a,b=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return t?r.createElement(b,o(o({ref:n},p),{},{components:t})):r.createElement(b,o({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4270:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=t(7462),a=(t(7294),t(3905));const i={id:"abac",title:"ABAC",description:"ABAC bas\xe9 sur Casbin",keywords:["ABAC","ABAC model"],authors:["hsluoyz"]},o=void 0,l={unversionedId:"abac",id:"abac",title:"ABAC",description:"ABAC bas\xe9 sur Casbin",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/ABAC.mdx",sourceDirName:".",slug:"/abac",permalink:"/fr/docs/abac",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/ABAC.mdx",tags:[],version:"current",frontMatter:{id:"abac",title:"ABAC",description:"ABAC bas\xe9 sur Casbin",keywords:["ABAC","ABAC model"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Casbin RBAC vs. RBAC96",permalink:"/fr/docs/rbac-96"},next:{title:"Priority Model",permalink:"/fr/docs/priority-model"}},s={},u=[{value:"Qu&#39;est-ce que le mod\xe8le ABAC ?",id:"quest-ce-que-le-mod\xe8le-abac-",level:2},{value:"Comment utiliser ABAC ?",id:"comment-utiliser-abac-",level:2},{value:"Mise \xe0 l&#39;\xe9chelle du mod\xe8le pour un grand nombre de r\xe8gles ABAC complexes",id:"mise-\xe0-l\xe9chelle-du-mod\xe8le-pour-un-grand-nombre-de-r\xe8gles-abac-complexes",level:2}],p={toc:u};function c(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"quest-ce-que-le-mod\xe8le-abac-"},"Qu'est-ce que le mod\xe8le ABAC ?"),(0,a.kt)("p",null,"ABAC signifie Contr\xf4le d'Acc\xe8s Bas\xe9 sur les Attributs. Il vous permet de contr\xf4ler l'acc\xe8s en utilisant les attributs (propri\xe9t\xe9s) du sujet, de l'objet ou de l'action au lieu d'utiliser les valeurs de cha\xeene elles-m\xeames. Vous avez peut-\xeatre entendu parler d'un langage de contr\xf4le d'acc\xe8s ABAC compliqu\xe9 appel\xe9 XACML. L'ABAC de Casbin, en revanche, est beaucoup plus simple. Dans l'ABAC de Casbin, vous pouvez utiliser des structures ou des instances de classe au lieu de cha\xeenes pour les \xe9l\xe9ments du mod\xe8le."),(0,a.kt)("p",null,"Jetons un coup d'\u0153il \xe0 l'exemple officiel d'ABAC :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == r.obj.Owner\n")),(0,a.kt)("p",null,"Dans le comparateur, nous utilisons ",(0,a.kt)("inlineCode",{parentName:"p"},"r.obj.Owner")," au lieu de ",(0,a.kt)("inlineCode",{parentName:"p"},"r.obj"),". Le ",(0,a.kt)("inlineCode",{parentName:"p"},"r.obj")," pass\xe9 dans la fonction ",(0,a.kt)("inlineCode",{parentName:"p"},"Enforce()")," sera une structure ou une instance de classe plut\xf4t qu'une cha\xeene. Casbin utilisera la r\xe9flexion pour r\xe9cup\xe9rer la variable membre ",(0,a.kt)("inlineCode",{parentName:"p"},"obj")," dans cette structure ou classe pour vous."),(0,a.kt)("p",null,"Voici une d\xe9finition pour la structure ou la classe ",(0,a.kt)("inlineCode",{parentName:"p"},"r.obj")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"type testResource struct {\n    Name  string\n    Owner string\n}\n")),(0,a.kt)("p",null,"Si vous voulez passer des param\xe8tres \xe0 l'ex\xe9cuteur via JSON, vous devez activer la fonction avec ",(0,a.kt)("inlineCode",{parentName:"p"},"e.EnableAcceptJsonRequest(true)"),"."),(0,a.kt)("p",null,"Par exemple :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'e, _ := NewEnforcer("examples/abac_model.conf")\ne.EnableAcceptJsonRequest(true)\n\ndata1Json := `{ "Name": "data1", "Owner": "bob"}`\n\nok, _ := e.Enforce("alice", data1Json, "read")\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Activer la fonction d'acceptation des param\xe8tres JSON peut entra\xeener une baisse de performance de 1,1 \xe0 1,5 fois.")),(0,a.kt)("h2",{id:"comment-utiliser-abac-"},"Comment utiliser ABAC ?"),(0,a.kt)("p",null,"Pour utiliser ABAC, vous devez faire deux choses :"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Sp\xe9cifiez les attributs dans le comparateur du mod\xe8le."),(0,a.kt)("li",{parentName:"ol"},"Passez l'instance de la structure ou de la classe pour l'\xe9l\xe9ment en argument \xe0 la fonction ",(0,a.kt)("inlineCode",{parentName:"li"},"Enforce()")," de Casbin.")),(0,a.kt)("admonition",{type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"Actuellement, seuls les \xe9l\xe9ments de demande comme ",(0,a.kt)("inlineCode",{parentName:"p"},"r.sub"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"r.obj"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"r.act"),", etc. supportent ABAC. Vous ne pouvez pas l'utiliser sur des \xe9l\xe9ments de politique comme ",(0,a.kt)("inlineCode",{parentName:"p"},"p.sub")," car il n'y a pas moyen de d\xe9finir une structure ou une classe dans la politique de Casbin.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Vous pouvez utiliser plusieurs attributs ABAC dans un comparateur. Par exemple : ",(0,a.kt)("inlineCode",{parentName:"p"},"m = r.sub.Domain == r.obj.Domain"),".")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Si vous devez utiliser une virgule dans une politique qui entre en conflit avec le s\xe9parateur CSV, vous pouvez l'\xe9chapper en entourant l'instruction de guillemets. Par exemple, ",(0,a.kt)("inlineCode",{parentName:"p"},'"keyMatch("bob", r.sub.Role)"')," ne sera pas divis\xe9.")),(0,a.kt)("h2",{id:"mise-\xe0-l\xe9chelle-du-mod\xe8le-pour-un-grand-nombre-de-r\xe8gles-abac-complexes"},"Mise \xe0 l'\xe9chelle du mod\xe8le pour un grand nombre de r\xe8gles ABAC complexes"),(0,a.kt)("p",null,"La mise en \u0153uvre ci-dessus du mod\xe8le ABAC est simple en son c\u0153ur. Cependant, dans de nombreux cas, le syst\xe8me d'autorisation n\xe9cessite un grand nombre de r\xe8gles ABAC complexes. Pour r\xe9pondre \xe0 cette exigence, il est recommand\xe9 d'ajouter les r\xe8gles dans la politique plut\xf4t que dans le mod\xe8le. Cela peut \xeatre fait en introduisant une construction fonctionnelle ",(0,a.kt)("inlineCode",{parentName:"p"},"eval()"),". Voici un exemple:"),(0,a.kt)("p",null,"Ceci est la d\xe9finition du fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"CONF")," utilis\xe9 pour d\xe9finir le mod\xe8le ABAC."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub_rule, obj, act\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = eval(p.sub_rule) && r.obj == p.obj && r.act == p.act\n")),(0,a.kt)("p",null,"Dans cet exemple, ",(0,a.kt)("inlineCode",{parentName:"p"},"p.sub_rule")," est une structure ou une classe (type d\xe9fini par l'utilisateur) qui contient les attributs n\xe9cessaires \xe0 utiliser dans la politique."),(0,a.kt)("p",null,"Ceci est la politique qui est utilis\xe9e contre le mod\xe8le pour ",(0,a.kt)("inlineCode",{parentName:"p"},"l'application"),". Maintenant, vous pouvez utiliser l'instance d'objet pass\xe9e \xe0 ",(0,a.kt)("inlineCode",{parentName:"p"},"eval()")," en tant que param\xe8tre pour d\xe9finir certaines contraintes ABAC."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csv"},"p, r.sub.Age > 18, /data1, read\np, r.sub.Age < 60, /data2, write\n")))}c.isMDXComponent=!0}}]);