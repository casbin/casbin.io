"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[9259],{4235(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"menu-permissions","title":"Menu Permissions","description":"Exemple pour les permissions de menu","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/MenuPermissions.mdx","sourceDirName":".","slug":"/menu-permissions","permalink":"/fr/docs/menu-permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/MenuPermissions.mdx","tags":[],"version":"current","frontMatter":{"id":"menu-permissions","title":"Menu Permissions","description":"Exemple pour les permissions de menu","keywords":["Menu Permissions","example"],"authors":["amikecoXu"]},"sidebar":"docs","previous":{"title":"Data Permissions","permalink":"/fr/docs/data-permissions"},"next":{"title":"Plugin Overview","permalink":"/fr/docs/plugins-overview"}}');var r=s(4848),l=s(8453);const t={id:"menu-permissions",title:"Menu Permissions",description:"Exemple pour les permissions de menu",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},d=void 0,c={},o=[{value:"1. Configuration",id:"1-configuration",level:3},{value:"1.1 Vue d&#39;ensemble",id:"11-vue-densemble",level:4},{value:"1.2 Permission rules (p)",id:"12-permission-rules-p",level:4},{value:"1.3 User\u2013role assignments (g)",id:"13-userrole-assignments-g",level:4},{value:"1.4 Menu hierarchy (g2)",id:"14-menu-hierarchy-g2",level:4},{value:"1.5 Menu permission inheritance",id:"15-menu-permission-inheritance",level:4},{value:"1.6 Deny and role inheritance",id:"16-deny-and-role-inheritance",level:4},{value:"1.7 Example policy",id:"17-example-policy",level:4},{value:"2. Enforcing menu permissions",id:"2-enforcing-menu-permissions",level:3}];function h(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["This page shows a ",(0,r.jsx)(n.strong,{children:"Spring Boot"})," example that uses jCasbin for menu-based access control. The same pattern (policy + role assignments + menu hierarchy) can be applied in other languages supported by Casbin."]}),"\n",(0,r.jsx)(n.h3,{id:"1-configuration",children:"1. Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Define role\u2013menu permissions, user\u2013role assignments, and menu hierarchy in ",(0,r.jsx)(n.code,{children:"policy.csv"}),". Full example: ",(0,r.jsx)(n.a,{href:"https://github.com/jcasbin/jcasbin-menu-permission",children:"jCasbin menu permission"}),"."]}),"\n",(0,r.jsx)(n.h4,{id:"11-vue-densemble",children:"1.1 Vue d'ensemble"}),"\n",(0,r.jsx)(n.p,{children:"The policy file defines: (1) which roles can access which menu items, (2) which users have which roles, and (3) parent\u2013child relationships between menu items. Together this gives role-based, hierarchical menu visibility."}),"\n",(0,r.jsx)(n.h4,{id:"12-permission-rules-p",children:"1.2 Permission rules (p)"}),"\n",(0,r.jsxs)(n.p,{children:["Lines starting with ",(0,r.jsx)(n.code,{children:"p"})," define whether a role (",(0,r.jsx)(n.code,{children:"sub"}),") may perform an action (",(0,r.jsx)(n.code,{children:"act"}),") on a menu item (",(0,r.jsx)(n.code,{children:"obj"}),"). The effect (",(0,r.jsx)(n.code,{children:"eft"}),") is ",(0,r.jsx)(n.code,{children:"allow"})," or ",(0,r.jsx)(n.code,{children:"deny"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Exemples :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"p, ROLE_ROOT, SystemMenu, read, allow"})," grants ",(0,r.jsx)(n.code,{children:"ROLE_ROOT"})," read access to ",(0,r.jsx)(n.code,{children:"SystemMenu"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"p, ROLE_ROOT, UserMenu, read, deny"})," denies ",(0,r.jsx)(n.code,{children:"ROLE_ROOT"})," read access to ",(0,r.jsx)(n.code,{children:"UserMenu"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"13-userrole-assignments-g",children:"1.3 User\u2013role assignments (g)"}),"\n",(0,r.jsxs)(n.p,{children:["Lines starting with ",(0,r.jsx)(n.code,{children:"g"})," assign users to roles and define role inheritance. Users get the union of permissions from all their roles."]}),"\n",(0,r.jsx)(n.p,{children:"Exemples :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"g, user, ROLE_USER"})," assigns the user named ",(0,r.jsx)(n.code,{children:"user"})," to ",(0,r.jsx)(n.code,{children:"ROLE_USER"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"g, ROLE_ADMIN, ROLE_USER"})," makes ",(0,r.jsx)(n.code,{children:"ROLE_ADMIN"})," inherit all permissions from ",(0,r.jsx)(n.code,{children:"ROLE_USER"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"14-menu-hierarchy-g2",children:"1.4 Menu hierarchy (g2)"}),"\n",(0,r.jsxs)(n.p,{children:["Lines starting with ",(0,r.jsx)(n.code,{children:"g2"})," define parent\u2013child menu structure."]}),"\n",(0,r.jsx)(n.p,{children:"Exemples :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"g2, UserSubMenu_allow, UserMenu"})," makes ",(0,r.jsx)(n.code,{children:"UserSubMenu_allow"})," a child of ",(0,r.jsx)(n.code,{children:"UserMenu"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"g2, (NULL), SystemMenu"})," marks ",(0,r.jsx)(n.code,{children:"SystemMenu"})," as a top-level menu with no parent."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"15-menu-permission-inheritance",children:"1.5 Menu permission inheritance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If a ",(0,r.jsx)(n.strong,{children:"parent"})," menu has explicit ",(0,r.jsx)(n.code,{children:"allow"}),", its ",(0,r.jsx)(n.strong,{children:"children"})," inherit ",(0,r.jsx)(n.code,{children:"allow"})," unless a child has explicit ",(0,r.jsx)(n.code,{children:"deny"}),". So allowing a parent allows its children."]}),"\n",(0,r.jsxs)(n.li,{children:["If a parent has no explicit permission but at least one child has ",(0,r.jsx)(n.code,{children:"allow"}),", the parent is treated as ",(0,r.jsx)(n.code,{children:"allow"})," so users can reach that child."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"16-deny-and-role-inheritance",children:"1.6 Deny and role inheritance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Explicit deny"})," wins: if a role is explicitly denied a menu, any role that inherits from it is also denied. Deny is not overridden by inheritance."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implicit deny"})," (no ",(0,r.jsx)(n.code,{children:"allow"})," rule) is overridable: a more privileged role can add an explicit ",(0,r.jsx)(n.code,{children:"allow"})," for that menu."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"17-example-policy",children:"1.7 Example policy"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csv",children:"p, ROLE_ROOT, SystemMenu, read, allow\np, ROLE_ROOT, AdminMenu, read, allow\np, ROLE_ROOT, UserMenu, read, deny\np, ROLE_ADMIN, UserMenu, read, allow\np, ROLE_ADMIN, AdminMenu, read, allow\np, ROLE_ADMIN, AdminSubMenu_deny, read, deny\np, ROLE_USER, UserSubMenu_allow, read, allow\n\ng, user, ROLE_USER\ng, admin, ROLE_ADMIN\ng, root, ROLE_ROOT\ng, ROLE_ADMIN, ROLE_USER\n\ng2, UserSubMenu_allow, UserMenu\ng2, UserSubMenu_deny, UserMenu\ng2, UserSubSubMenu, UserSubMenu_allow\ng2, AdminSubMenu_allow, AdminMenu\ng2, AdminSubMenu_deny, AdminMenu\ng2, (NULL), SystemMenu\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"NomDuMenu"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"ROLE_ROOT"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"ROLE_ADMIN"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"ROLE_USER"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"SystemMenu"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"UserMenu"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"UserSubMenu_allow"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"UserSubSubMenu"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"UserSubMenu_deny"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"AdminMenu"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"AdminSubMenu_allow"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"AdminSubMenu_deny"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"2-enforcing-menu-permissions",children:"2. Enforcing menu permissions"}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.a,{href:"https://github.com/jcasbin/jcasbin-menu-permission",children:"jCasbin menu permission"})," example, ",(0,r.jsx)(n.a,{href:"https://github.com/jcasbin/jcasbin-menu-permission/blob/master/src/main/java/org/casbin/service/MenuService.java",children:"MenuService"})," provides ",(0,r.jsx)(n.code,{children:"findAccessibleMenus()"})," (all menus a user can see) and ",(0,r.jsx)(n.code,{children:"checkMenuAccess()"})," (check one menu). Both use the jCasbin enforcer under the hood."]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);