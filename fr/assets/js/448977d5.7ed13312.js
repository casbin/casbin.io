"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[1],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),c=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),m=c(a),u=r,h=m["".concat(p,".").concat(u)]||m[u]||d[u]||i;return a?n.createElement(h,o(o({ref:t},s),{},{components:a})):n.createElement(h,o({ref:t},s))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2452:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const i={id:"rbac-with-pattern",title:"RBAC avec motif",description:"RBAC with Pattern",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},o=void 0,l={unversionedId:"rbac-with-pattern",id:"rbac-with-pattern",title:"RBAC avec motif",description:"RBAC with Pattern",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx",sourceDirName:".",slug:"/rbac-with-pattern",permalink:"/fr/docs/rbac-with-pattern",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx",tags:[],version:"current",frontMatter:{id:"rbac-with-pattern",title:"RBAC avec motif",description:"RBAC with Pattern",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"RBAC",permalink:"/fr/docs/rbac"},next:{title:"RBAC avec domaines",permalink:"/fr/docs/rbac-with-domains"}},p={},c=[{value:"D\xe9marrage rapide",id:"d\xe9marrage-rapide",level:2},{value:"Utiliser la correspondance de motif dans RBAC",id:"utiliser-la-correspondance-de-motif-dans-rbac",level:2}],s=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},d=s("Tabs"),m=s("TabItem"),u={toc:c};function h(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"d\xe9marrage-rapide"},"D\xe9marrage rapide"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Use pattern in ",(0,r.kt)("inlineCode",{parentName:"p"},"g(_, _)"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Use pattern with domain."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Use all patterns."),(0,r.kt)("p",{parentName:"li"},"Just combine the use of both APIs."))),(0,r.kt)("p",null,"As shown above, after you create the ",(0,r.kt)("inlineCode",{parentName:"p"},"enforcer")," instance, you need to activate pattern matching via the ",(0,r.kt)("inlineCode",{parentName:"p"},"AddNamedMatchingFunc")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"AddNamedDomainMatchingFunc")," APIs, which determine how the pattern matches."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Si vous utilisez l'\xe9diteur en ligne, il sp\xe9cifie la fonction de recherche de motifs dans le coin inf\xe9rieur gauche. ",(0,r.kt)("img",{alt:"editor-tips",src:a(9523).Z,width:"480",height:"272"}))),(0,r.kt)("h2",{id:"utiliser-la-correspondance-de-motif-dans-rbac"},"Utiliser la correspondance de motif dans RBAC"),(0,r.kt)("p",null,"Sometimes, you want certain subjects, objects, or domains/tenants with a specific pattern to be automatically granted a role. Les fonctions de masquage dans RBAC peuvent vous aider \xe0 le faire. Une fonction de correspondance de patron partage les m\xeames param\xe8tres et la m\xeame valeur de retour que la fonction de recherche ",(0,r.kt)("a",{parentName:"p",href:"/docs/syntax-for-models#functions-in-matchers"},"pr\xe9c\xe9dente"),"."),(0,r.kt)("p",null,"The pattern matching function supports each parameter of ",(0,r.kt)("inlineCode",{parentName:"p"},"g"),"."),(0,r.kt)("p",null,"We know that normally RBAC is expressed as ",(0,r.kt)("inlineCode",{parentName:"p"},"g(r.sub, p.sub)")," in a matcher. Then we can use a policy like:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n")),(0,r.kt)("p",null,"Ainsi, ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," peut lire tous les livres y compris le ",(0,r.kt)("inlineCode",{parentName:"p"},"livre 1")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"livre 2"),". But there can be thousands of books, and it's very tedious to add each book to the book role (or group) with one ",(0,r.kt)("inlineCode",{parentName:"p"},"g")," policy rule."),(0,r.kt)("p",null,"Mais avec les fonctions de recherche de masques, vous pouvez \xe9crire la politique avec une seule ligne :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"g, /book/:id, book_group\n")),(0,r.kt)("p",null,"Casbin will automatically match ",(0,r.kt)("inlineCode",{parentName:"p"},"/book/1")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"/book/2")," into the pattern ",(0,r.kt)("inlineCode",{parentName:"p"},"/book/:id")," for you. Vous devez seulement enregistrer la fonction avec le responsable comme :"),(0,r.kt)(d,{groupId:"langs",mdxType:"Tabs"},(0,r.kt)(m,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)(m,{value:"Node.js",label:"Node.js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n")))),(0,r.kt)("p",null,"When using a pattern matching function in domains/tenants, you need to register the function with the enforcer and model."),(0,r.kt)(d,{groupId:"langs",mdxType:"Tabs"},(0,r.kt)(m,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'))),(0,r.kt)(m,{value:"Node.js",label:"Node.js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n")))),(0,r.kt)("p",null,"Si vous ne comprenez pas ce que signifie ",(0,r.kt)("inlineCode",{parentName:"p"},"g(r.sub, p.sub, r.dom)")," , veuillez lire ",(0,r.kt)("a",{parentName:"p",href:"/docs/rbac-with-domains"},"rbac-with-domains"),". En bref, ",(0,r.kt)("inlineCode",{parentName:"p"},"g(r.sub, p.sub, r.dom)")," v\xe9rifiera si l'utilisateur ",(0,r.kt)("inlineCode",{parentName:"p"},"r. ub")," a un r\xf4le ",(0,r.kt)("inlineCode",{parentName:"p"},"p.sub")," dans le domaine ",(0,r.kt)("inlineCode",{parentName:"p"},"r.dom"),". So this is how the matcher works. Vous pouvez voir l'exemple complet ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307"},"ici"),"."),(0,r.kt)("p",null,"En dehors de la syntaxe de masques correspondant \xe0 la syntaxe ci-dessus, nous pouvons \xe9galement utiliser un motif de domaine pur."),(0,r.kt)("p",null,"For example, if we want ",(0,r.kt)("inlineCode",{parentName:"p"},"sub")," to have access in different domains, ",(0,r.kt)("inlineCode",{parentName:"p"},"domain1")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"domain2"),", we can use the pure domain pattern:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n")),(0,r.kt)("p",null,"In this example, we want ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," to read and write ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," in domain1 and domain2. Pattern matching ",(0,r.kt)("inlineCode",{parentName:"p"},"*")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"g")," makes ",(0,r.kt)("inlineCode",{parentName:"p"},"alice")," have access to two domains."),(0,r.kt)("p",null,"By using pattern matching, especially in scenarios that are more complicated and have a lot of domains or objects to consider, we can implement the ",(0,r.kt)("inlineCode",{parentName:"p"},"policy_definition")," in a more elegant and effective way."))}h.isMDXComponent=!0},9523:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/editor-tips-4f3fd45a1ea048f308e3e31da355ff79.png"}}]);