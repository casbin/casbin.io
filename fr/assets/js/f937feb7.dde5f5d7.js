"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[9370],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,f=c["".concat(s,".").concat(m)]||c[m]||d[m]||i;return n?a.createElement(f,l(l({ref:t},u),{},{components:n})):a.createElement(f,l({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(7294),r=n(6010),i="tabItem_Ymn6";function l(e){var t=e.children,n=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i,l),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(3117),r=n(7294),i=n(6010),l=n(2389),o=n(7392),s=n(7094),p=n(2466),u="tabList__CuJ",d="tabItem_LNqP";function c(e){var t,n,l=e.lazy,c=e.block,m=e.defaultValue,f=e.values,k=e.groupId,v=e.className,b=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=f?f:b.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),N=(0,o.l)(g,(function(e,t){return e.value===t.value}));if(N.length>0)throw new Error('Docusaurus error: Duplicate values "'+N.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var h=null===m?m:null!=(t=null!=m?m:null==(n=b.find((function(e){return e.props.default})))?void 0:n.props.value)?t:b[0].props.value;if(null!==h&&!g.some((function(e){return e.value===h})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+h+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=(0,s.U)(),x=y.tabGroupChoices,C=y.setTabGroupChoices,q=(0,r.useState)(h),T=q[0],w=q[1],E=[],j=(0,p.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var _=x[k];null!=_&&_!==T&&g.some((function(e){return e.value===_}))&&w(_)}var P=function(e){var t=e.currentTarget,n=E.indexOf(t),a=g[n].value;a!==T&&(j(t),w(a),null!=k&&C(k,String(a)))},z=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,r=E.indexOf(e.currentTarget)+1;n=null!=(a=E[r])?a:E[0];break;case"ArrowLeft":var i,l=E.indexOf(e.currentTarget)-1;n=null!=(i=E[l])?i:E[E.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",u)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":c},v)},g.map((function(e){var t=e.value,n=e.label,l=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:function(e){return E.push(e)},onKeyDown:z,onFocus:P,onClick:P},l,{className:(0,i.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),l?(0,r.cloneElement)(b.filter((function(e){return e.props.value===T}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},b.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function m(e){var t=(0,l.Z)();return r.createElement(c,(0,a.Z)({key:String(t)},e))}},5437:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return u},default:function(){return k},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return m}});var a=n(3117),r=n(102),i=(n(7294),n(3905)),l=n(5488),o=n(5162),s=["components"],p={id:"syntax-for-models",title:"Syntaxe pour les mod\xe8les"},u=void 0,d={unversionedId:"syntax-for-models",id:"syntax-for-models",title:"Syntaxe pour les mod\xe8les",description:"- Un mod\xe8le CONF doit avoir au moins quatre sections : [requestdefinition], [policydefinition], [policy_effect], [matchers].",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/SyntaxForModels.mdx",sourceDirName:".",slug:"/syntax-for-models",permalink:"/fr/docs/syntax-for-models",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/SyntaxForModels.mdx",tags:[],version:"current",frontMatter:{id:"syntax-for-models",title:"Syntaxe pour les mod\xe8les"},sidebar:"docs",previous:{title:"Mod\xe8les pris en charge",permalink:"/fr/docs/supported-models"},next:{title:"Effet",permalink:"/fr/docs/effector"}},c={},m=[{value:"D\xe9finition de la requ\xeate",id:"d\xe9finition-de-la-requ\xeate",level:2},{value:"D\xe9finition de la politique",id:"d\xe9finition-de-la-politique",level:2},{value:"Effet de la politique",id:"effet-de-la-politique",level:2},{value:"Matchs",id:"matchs",level:2},{value:"Type de sections multiples",id:"type-de-sections-multiples",level:2},{value:"Special Grammer",id:"special-grammer",level:3},{value:"\xc9valuateur d&#39;expressions",id:"\xe9valuateur-dexpressions",level:3}],f={toc:m};function k(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Un mod\xe8le CONF doit avoir au moins quatre sections : ",(0,i.kt)("inlineCode",{parentName:"p"},"[request_definition], [policy_definition], [policy_effect], [matchers]"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Si un mod\xe8le utilise RBAC, il devrait \xe9galement ajouter la section ",(0,i.kt)("inlineCode",{parentName:"p"},"[role_definition]"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Un mod\xe8le CONF peut contenir des commentaires. Les commentaires commencent par ",(0,i.kt)("inlineCode",{parentName:"p"},"#"),", et ",(0,i.kt)("inlineCode",{parentName:"p"},"#")," commentera le reste de la ligne."))),(0,i.kt)("h2",{id:"d\xe9finition-de-la-requ\xeate"},"D\xe9finition de la requ\xeate"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"[request_definition]")," est la d\xe9finition de la demande d'acc\xe8s. Il d\xe9finit les arguments dans la fonction ",(0,i.kt)("inlineCode",{parentName:"p"},"e.Enforce(...)"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"sub, obj, act")," repr\xe9sente le triple classique : acc\xe8s \xe0 l'entit\xe9 (Sujet), ressource acc\xe9d\xe9e (Objet) et la m\xe9thode d'acc\xe8s (Action). Cependant, vous pouvez personnaliser votre propre formulaire de requ\xeate, comme ",(0,i.kt)("inlineCode",{parentName:"p"},"sub, agir")," si vous n'avez pas besoin de sp\xe9cifier une ressource particuli\xe8re, ou ",(0,i.kt)("inlineCode",{parentName:"p"},"sub, sub2, obj, act")," si vous avez deux entit\xe9s d'acc\xe8s."),(0,i.kt)("h2",{id:"d\xe9finition-de-la-politique"},"D\xe9finition de la politique"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"[policy_definition]")," est la d\xe9finition de la politique. Il d\xe9finit le sens de la politique. Par exemple, nous avons le mod\xe8le suivant :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_definition]\np = sub, obj, act\np2 = sub, act\n")),(0,i.kt)("p",null,"Et nous avons la politique suivante (si dans un fichier de politiques)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"p, alice, data1, read\np2, bob, write-all-objects\n")),(0,i.kt)("p",null,"Chaque ligne dans une politique est appel\xe9e r\xe8gle de police. Chaque r\xe8gle de politique commence par un ",(0,i.kt)("inlineCode",{parentName:"p"},"type de politique"),", par exemple ",(0,i.kt)("inlineCode",{parentName:"p"},"p"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"p2"),". Il est utilis\xe9 pour correspondre \xe0 la d\xe9finition de la politique s'il y a plusieurs d\xe9finitions. La politique ci-dessus montre le caract\xe8re contraignant suivant. La reliure peut \xeatre utilis\xe9e dans le matcher."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"(alice, data1, read) -> (p.sub, p.obj, p.act)\n(bob, write-all-objects) -> (p2.sub, p2.act)\n")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Les \xe9l\xe9ments d'une r\xe8gle de politique sont toujours consid\xe9r\xe9s comme",(0,i.kt)("inlineCode",{parentName:"p"},"cha\xeene"),". Si vous avez des questions \xe0 ce sujet, veuillez consulter la discussion sur: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/113"},"https://github.com/casbin/casbin/issues/113")))),(0,i.kt)("h2",{id:"effet-de-la-politique"},"Effet de la politique"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"[policy_effect]")," est la d\xe9finition de l'effet de politique. Il d\xe9finit si la requ\xeate d'acc\xe8s doit \xeatre approuv\xe9e si plusieurs r\xe8gles de politique correspondent \xe0 la requ\xeate. Par exemple, une r\xe8gle autorise et l'autre refuse."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_effect]\ne = some(where (p.eft == allow))\n")),(0,i.kt)("p",null,"L'effet de la politique ci-dessus signifie s'il y a une r\xe8gle de politique correspondante de ",(0,i.kt)("inlineCode",{parentName:"p"},"autoriser"),", l'effet final est ",(0,i.kt)("inlineCode",{parentName:"p"},"autoriser")," (aka allow-override). ",(0,i.kt)("inlineCode",{parentName:"p"},"p.eft")," est l'effet d'une politique, il peut \xeatre ",(0,i.kt)("inlineCode",{parentName:"p"},"autoriser")," ou ",(0,i.kt)("inlineCode",{parentName:"p"},"refuser"),". C'est optionnel et la valeur par d\xe9faut est ",(0,i.kt)("inlineCode",{parentName:"p"},"autoriser"),". Donc, comme nous ne l'avons pas sp\xe9cifi\xe9 ci-dessus, il utilise la valeur par d\xe9faut."),(0,i.kt)("p",null,"Un autre exemple d'effet de politique est :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_effect]\ne = !some(where (p.eft == deny))\n")),(0,i.kt)("p",null,"Cela signifie que s'il n'y a pas de r\xe8gles de politique correspondantes de",(0,i.kt)("inlineCode",{parentName:"p"},"refus"),", l'effet final est ",(0,i.kt)("inlineCode",{parentName:"p"},"autoriser")," (aka refus de remplacement). ",(0,i.kt)("inlineCode",{parentName:"p"},"certains")," signifient : s'il existe une r\xe8gle de politique correspondante. ",(0,i.kt)("inlineCode",{parentName:"p"},"n'importe quel")," signifie : toutes les r\xe8gles de politique correspondantes (non utilis\xe9es ici). L'effet de la politique peut m\xeame \xeatre li\xe9 aux expressions logiques:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_effect]\ne = some(where (p.eft == allow)) && !some(where (p.eft == deny))\n")),(0,i.kt)("p",null,"Cela signifie qu'au moins une r\xe8gle de politique correspondante de",(0,i.kt)("inlineCode",{parentName:"p"},"autorise"),", et qu'il n'y a pas de r\xe8gle de politique correspondante de",(0,i.kt)("inlineCode",{parentName:"p"},"refus"),". Donc, de cette fa\xe7on, les autorisations d\u2019autorisation et de refus sont soutenues et les d\xe9rogations de refus."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Bien que nous ayons con\xe7u la syntaxe de l'effet de politique comme ci-dessus, les impl\xe9mentations actuelles n'utilisent que des effets de politique cod\xe9e en dur. Comme nous avons trouv\xe9 qu'il n'y avait pas grand besoin de ce genre de flexibilit\xe9. Donc, pour l'instant, vous devez utiliser l'un des effets de la politique int\xe9gr\xe9e au lieu de personnaliser le v\xf4tre."))),(0,i.kt)("p",null,"Les effets de politique int\xe9gr\xe9e pris en charge sont :"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Effet de la politique"),(0,i.kt)("th",{parentName:"tr",align:null},"Sens"),(0,i.kt)("th",{parentName:"tr",align:null},"Exemple"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"some(where (p.eft == allow))"),(0,i.kt)("td",{parentName:"tr",align:null},"autoriser-substituer"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/supported-models#examples"},"ACL, RBAC, etc."))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"!some(where (p.eft == deny))"),(0,i.kt)("td",{parentName:"tr",align:null},"refus de surcharger"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/supported-models#examples"},"Refuser la substitution"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"some(where (p.eft == allow)) && !some(where (p.eft == deny))"),(0,i.kt)("td",{parentName:"tr",align:null},"autoriser/refuser"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/supported-models#examples"},"Allumer et refuser"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"priority(p.eft) ","|","|"," deny"),(0,i.kt)("td",{parentName:"tr",align:null},"priorit\xe9"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/supported-models#examples"},"Priorit\xe9"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"subjectPriority(p.eft)"),(0,i.kt)("td",{parentName:"tr",align:null},"base de priorit\xe9 sur le r\xf4le"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/supported-models#examples"},"Sujet-Priorit\xe9"))))),(0,i.kt)("h2",{id:"matchs"},"Matchs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"[matchers]")," est la d\xe9finition pour les correspondants de politique. Les correspondants sont des expressions. Il d\xe9finit comment les r\xe8gles de politique sont \xe9valu\xe9es en fonction de la demande."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[matchers]\nm = r.sub == p.sub && r.obj == p.obj && r.act == p.act\n")),(0,i.kt)("p",null,"Le r\xe9sultat ci-dessus est le plus simple, cela signifie que le sujet, l'objet et l'action dans une requ\xeate doivent correspondre \xe0 ceux d'une r\xe8gle de police."),(0,i.kt)("p",null,"Vous pouvez utiliser l'arithm\xe9tique comme ",(0,i.kt)("inlineCode",{parentName:"p"},"+, -, *, /")," et les op\xe9rateurs logiques comme ",(0,i.kt)("inlineCode",{parentName:"p"},"&&, ||, !")," dans les matchers."),(0,i.kt)("h2",{id:"type-de-sections-multiples"},"Type de sections multiples"),(0,i.kt)("p",null,"Si vous avez besoin de plusieurs d\xe9finitions de politique ou de plusieurs correspondants, vous pouvez utiliser comme ",(0,i.kt)("inlineCode",{parentName:"p"},"p2"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"m2"),". En fait, toutes les quatre sections ci-dessus peuvent utiliser plusieurs types et la syntaxe est ",(0,i.kt)("inlineCode",{parentName:"p"},"r"),"+ num\xe9ro, comme ",(0,i.kt)("inlineCode",{parentName:"p"},"r2"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"e2"),". Par d\xe9faut, ces quatre sections doivent correspondre \xe0 une seule. Comme votre ",(0,i.kt)("inlineCode",{parentName:"p"},"r2")," n'utilisera que le matcher ",(0,i.kt)("inlineCode",{parentName:"p"},"m2")," pour correspondre aux politiques ",(0,i.kt)("inlineCode",{parentName:"p"},"p2"),"."),(0,i.kt)("p",null,"Vous pouvez passer dans ",(0,i.kt)("inlineCode",{parentName:"p"},"EnforceContext")," en tant que premier param\xe8tre de la m\xe9thode ",(0,i.kt)("inlineCode",{parentName:"p"},"enforce")," pour sp\xe9cifier les types, le ",(0,i.kt)("inlineCode",{parentName:"p"},"EnforceContext")," est comme ceci"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'EnforceContext{"r2","p2","e2","m2"}\ntype EnforceContext struct {\n    RType string\n    PType string\n    EType string\n    MType string\n}\n'))),(0,i.kt)(o.Z,{value:"Node.js",label:"Node.js",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const enforceContext = new EnforceContext('r2', 'p2', 'e2', 'm2');\nclass EnforceContext {\n  constructor(rType, pType, eType, mType) {\n    this.pType = pType;\n    this.eType = eType;\n    this.mType = mType;\n    this.rType = rType;\n  }\n}\n"))),(0,i.kt)(o.Z,{value:"Java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'EnforceContext enforceContext = new EnforceContext("2");\npublic class EnforceContext {\n    private String pType;\n    private String eType;\n    private String mType;\n    private String rType;\n    public EnforceContext(String suffix) {\n      this.pType = "p" + suffix;\n      this.eType = "e" + suffix;\n      this.mType = "m" + suffix;\n      this.rType = "r" + suffix;\n    }\n}\n')))),(0,i.kt)("p",null,"Exemple d'utilisation, voir ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/examples/multiple_policy_definitions_model.conf"},"mod\xe8le")," et ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/examples/multiple_policy_definitions_policy.csv"},"politique"),", la requ\xeate est la suivante"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"Go",label:"Go",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'// Passez dans un suffixe en tant que param\xe8tre \xe0 NewEnforceContext,comme 2 ou 3 et il cr\xe9era r2,p2,etc..\nenforceContext := NewEnforceContext("2")\n// Vous pouvez \xe9galement sp\xe9cifier un certain type individuellement\nenforceContext. Type = "e"\n// Ne pas passer dans EnforceContext,le d\xe9faut est r,p,e,m\ne. nforce("alice", "data2", "read") // true\n// passe dans EnforceContext\ne. nforce(enforceContext, struct{ Age int }{Age: 70}, "/data1", "read") //false\ne. nforce(enforceContext, struct{ Age int }{Age: 30}, "/data1", "read") //true\n'))),(0,i.kt)(o.Z,{value:"Node.js",label:"Node.js",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'// Passez dans un suffixe en tant que param\xe8tre \xe0 NewEnforceContext,comme 2 ou 3 et il cr\xe9era r2,p2,etc..\nconst enforceContext = new NewEnforceContext(\'2\');\n// Vous pouvez \xe9galement sp\xe9cifier un certain type individuellement\nenforceContext. Type = "e"\n// Ne pas passer dans EnforceContext,le d\xe9faut est r,p,e,m\ne. nforce("alice", "data2", "read") // true\n// passe dans EnforceContext\ne. nforce(enforceContext, {Age: 70}, "/data1", "read") //false\ne.Enforce(enforceContext, {Age: 30}, "/data1", "read") //true\n'))),(0,i.kt)(o.Z,{value:"Java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// Passez dans un suffixe comme param\xe8tre \xe0 NewEnforceContext,comme 2 ou 3 et il cr\xe9era r2, p2, etc.\nEnforceContext enforceContext = new EnforceContext("2");\n// Vous pouvez \xe9galement sp\xe9cifier un certain type individuellement\nenforceContext. eteType("e");\n// Ne passe pas dans EnforceContext, la valeur par d\xe9faut est r, p, e, m\ne. nforce("alice", "data2", "read"); // true\n// Pass in EnforceContext\n// TestEvalRule est situ\xe9 sur https://github. om/casbin/jcasbin/blob/master/src/test/java/org/casbin/jcasbin/main/AbacAPIUnitTest.java#L56\ne.enforce(enforceContext, new AbacAPIUnitTest.TestEvalRule("alice", 70), "/data1", "read"); // false\ne.enforce(enforceContext, new AbacAPIUnitTest.TestEvalRule("alice", 30), "/data1", "read"); // true\n')))),(0,i.kt)("h3",{id:"special-grammer"},"Special Grammer"),(0,i.kt)("p",null,"Vous pouvez \xe9galement utiliser ",(0,i.kt)("inlineCode",{parentName:"p"},"dans"),", le seul op\xe9rateur avec un nom de texte. Cet op\xe9rateur v\xe9rifie le tableau \xe0 droite pour voir s'il contient une valeur \xe9gale \xe0 la valeur \xe0 gauche. L'\xe9galit\xe9 est d\xe9termin\xe9e par l'utilisation de l'op\xe9rateur == et cette biblioth\xe8que ne v\xe9rifie pas les types entre les valeurs. Toutes les deux valeurs, lorsqu'elles sont converties en interface{}, et peuvent toujours \xeatre v\xe9rifi\xe9es si l'\xe9galit\xe9 avec == agit comme pr\xe9vu. Notez que vous pouvez utiliser un param\xe8tre pour le tableau, mais ce doit \xeatre une ",(0,i.kt)("inlineCode",{parentName:"p"},"[]interface{}"),"."),(0,i.kt)("p",null,"Reportez-vous \xe9galement \xe0 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/examples/rbac_model_matcher_using_in_op.conf"},"rbac_model_matcher_using_in_op"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/examples/keyget2_model.conf"},"keyget2_model")," et ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/examples/keyget_model.conf"},"keyget_model")),(0,i.kt)("p",null,"Exemple:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj\n...\n[matchers]\nm = r.sub.Name in (r.obj.Admins)\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'e.Enforce(Sub{Name: "alice"}, Obj{Name: "a book", Admins: []interface{}{"alice", "bob"}})\n')),(0,i.kt)("h3",{id:"\xe9valuateur-dexpressions"},"\xc9valuateur d'expressions"),(0,i.kt)("p",null,"L'\xe9valuation de la correspondance \xe0 Casbin est impl\xe9ment\xe9e par des \xe9valuateurs d'expressions dans chaque langue. Casbin int\xe8gre ses pouvoirs pour fournir le langage PERM unifi\xe9. En plus de toute la syntaxe de mod\xe8le fournie ici, ces \xe9valuateurs d'expressions peuvent fournir des fonctionnalit\xe9s suppl\xe9mentaires, qui peuvent ne pas \xeatre support\xe9es par un autre langage ou une impl\xe9mentation. Utilisez-la \xe0 vos propres risques."),(0,i.kt)("p",null,"L'expression utilis\xe9e par chaque impl\xe9mentation de Casbin est :"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Impl\xe9mentation"),(0,i.kt)("th",{parentName:"tr",align:null},"Langue"),(0,i.kt)("th",{parentName:"tr",align:null},"\xc9valuateur d'expressions"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Golang"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/Knetic/govaluate"},"https://github.com/Knetic/govaluate"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"jCasbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Java"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/killme2008/aviator"},"https://github.com/killme2008/aviator"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Node-Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Node.js"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/donmccurdy/expression-eval"},"https://github.com/donmccurdy/expression-eval"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PHP-Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"PHP"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/symfony/expression-language"},"https://github.com/symfony/expression-language"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PyCasbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Python"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/danthedeckie/simpleeval"},"https://github.com/danthedeckie/simpleeval"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Casbin.NET"),(0,i.kt)("td",{parentName:"tr",align:null},"N\xb0 C"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/davideicardi/DynamicExpresso"},"https://github.com/davideicardi/DynamicExpresso"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Casbin4D"),(0,i.kt)("td",{parentName:"tr",align:null},"Delphi"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin4d/Casbin4D/tree/master/SourceCode/Common/Troisi%C3%A8me%20Party/TExpressionParser"},"https://github.com/casbin4d/Casbin4D/tree/master/SourceCode/Common/Troisi\xe8me%20Party/TExpressionParser"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"casbin-rs"),(0,i.kt)("td",{parentName:"tr",align:null},"Rouille"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/jonathandturner/rhai"},"https://github.com/jonathandturner/rhai"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"casbin-cpp"),(0,i.kt)("td",{parentName:"tr",align:null},"C++"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/ArashPartow/exprtk"},"https://github.com/ArashPartow/exprtk"))))),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Si vous rencontrez un probl\xe8me de performance au sujet de Casbin, il est probablement d\xfb \xe0 la faible efficacit\xe9 de l'\xe9valuateur d'expression. Vous pouvez tous les deux envoyer un probl\xe8me \xe0 Casbin ou \xe0 l\u2019\xe9valuateur d\u2019expression directement pour obtenir des conseils pour acc\xe9l\xe9rer. Voir la section ",(0,i.kt)("a",{parentName:"p",href:"/docs/benchmark"},"Benchmarks")," pour plus de d\xe9tails."))))}k.isMDXComponent=!0}}]);