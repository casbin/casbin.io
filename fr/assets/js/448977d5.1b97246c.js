"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[2177],{591(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/editor-tips-2c4bf3155a73f079c976e5ad118d5518.png"},3666(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC avec Motif","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx","sourceDirName":".","slug":"/rbac-with-pattern","permalink":"/fr/docs/rbac-with-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC avec Motif","keywords":["RBAC with pattern","pattern matching"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC","permalink":"/fr/docs/rbac"},"next":{"title":"RBAC with Domains","permalink":"/fr/docs/rbac-with-domains"}}');var o=i(4848),r=i(8453);const a={id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC avec Motif",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},t=void 0,c={},d=[{value:"D\xe9marrage Rapide",id:"d\xe9marrage-rapide",level:2},{value:"Utiliser la correspondance de motifs dans RBAC",id:"utiliser-la-correspondance-de-motifs-dans-rbac",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{TabItem:s,Tabs:a}=n;return s||m("TabItem",!0),a||m("Tabs",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"d\xe9marrage-rapide",children:"D\xe9marrage Rapide"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Utiliser le motif dans ",(0,o.jsx)(n.code,{children:"g(_, _)"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Utiliser le motif avec domaine."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Utiliser tous les motifs."}),"\n",(0,o.jsx)(n.p,{children:"Il suffit de combiner l'utilisation des deux APIs."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Comme indiqu\xe9 ci-dessus, apr\xe8s avoir cr\xe9\xe9 l'instance ",(0,o.jsx)(n.code,{children:"enforcer"}),", vous devez activer la correspondance de motifs via les APIs ",(0,o.jsx)(n.code,{children:"AddNamedMatchingFunc"})," et ",(0,o.jsx)(n.code,{children:"AddNamedDomainMatchingFunc"}),", qui d\xe9terminent comment le motif correspond."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:['If you use the online editor, You can add a pattern matching function by clicking the "Add Role Matching" button in the lower left corner.\n',(0,o.jsx)(n.img,{alt:"conseils-\xe9diteur",src:i(591).A+"",width:"690",height:"480"})]})}),"\n",(0,o.jsx)(n.h2,{id:"utiliser-la-correspondance-de-motifs-dans-rbac",children:"Utiliser la correspondance de motifs dans RBAC"}),"\n",(0,o.jsxs)(n.p,{children:["Parfois, vous souhaitez que certains sujets, objets ou domaines/locataires avec un motif sp\xe9cifique soient automatiquement attribu\xe9s \xe0 un r\xf4le. Les fonctions de correspondance de motifs dans RBAC peuvent vous aider \xe0 le faire. Une fonction de correspondance de motifs partage les m\xeames param\xe8tres et valeur de retour que la fonction de correspondance pr\xe9c\xe9dente ",(0,o.jsx)(n.a,{href:"/docs/syntax-for-models#functions-in-matchers",children:"matcher function"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["La fonction de correspondance de motifs prend en charge chaque param\xe8tre de ",(0,o.jsx)(n.code,{children:"g"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Nous savons qu'habituellement, RBAC est exprim\xe9 comme ",(0,o.jsx)(n.code,{children:"g(r.sur, p.sur)"})," dans un match\xe9. Ensuite, nous pouvons utiliser une politique comme :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-csv",children:"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Ainsi, ",(0,o.jsx)(n.code,{children:"alice"})," peut lire tous les livres, y compris ",(0,o.jsx)(n.code,{children:"livre 1"})," et ",(0,o.jsx)(n.code,{children:"livre 2"}),". Mais il peut y avoir des milliers de livres, et il est tr\xe8s fastidieux d'ajouter chaque livre au r\xf4le (ou groupe) de livre avec une seule r\xe8gle de politique `g'."]}),"\n",(0,o.jsx)(n.p,{children:"Mais avec les fonctions de correspondance de motifs, vous pouvez \xe9crire la politique en une seule ligne :"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-csv",children:"g, /book/:id, book_group\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Casbin fera automatiquement correspondre ",(0,o.jsx)(n.code,{children:"/book/1"})," et ",(0,o.jsx)(n.code,{children:"/book/2"})," au motif ",(0,o.jsx)(n.code,{children:"/book/:id"})," pour vous. Vous devez simplement enregistrer la fonction avec l'ex\xe9cuteur comme suit :"]}),"\n",(0,o.jsxs)(a,{groupId:"langs",children:[(0,o.jsx)(s,{value:"Go",label:"Go",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,o.jsx)(s,{value:"Node.js",label:"Node.js",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,o.jsx)(n.p,{children:"Lors de l'utilisation d'une fonction de correspondance de motifs dans les domaines/locataires, vous devez enregistrer la fonction avec l'ex\xe9cuteur et le mod\xe8le."}),"\n",(0,o.jsxs)(a,{groupId:"langs",children:[(0,o.jsx)(s,{value:"Go",label:"Go",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,o.jsx)(s,{value:"Node.js",label:"Node.js",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,o.jsxs)(n.p,{children:["Si vous ne comprenez pas ce que ",(0,o.jsx)(n.code,{children:"g(r.sub, p.sub, r.dom)"})," signifie, veuillez lire ",(0,o.jsx)(n.a,{href:"/docs/rbac-with-domains",children:"rbac-with-domains"}),". En bref, ",(0,o.jsx)(n.code,{children:"g(r.sub, p.sub, r.dom)"})," v\xe9rifiera si l'utilisateur ",(0,o.jsx)(n.code,{children:"r.sub"})," a un r\xf4le ",(0,o.jsx)(n.code,{children:"p.sub"})," dans le domaine ",(0,o.jsx)(n.code,{children:"r.dom"}),". Voici donc comment fonctionne le comparateur. Vous pouvez voir l'exemple complet ",(0,o.jsx)(n.a,{href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307",children:"ici"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"En plus de la syntaxe de correspondance de motifs ci-dessus, nous pouvons \xe9galement utiliser un motif de domaine pur."}),"\n",(0,o.jsxs)(n.p,{children:["Par exemple, si nous voulons que ",(0,o.jsx)(n.code,{children:"sub"})," ait acc\xe8s dans diff\xe9rents domaines, ",(0,o.jsx)(n.code,{children:"domain1"})," et ",(0,o.jsx)(n.code,{children:"domain2"}),", nous pouvons utiliser le motif de domaine pur :"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-csv",children:"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Dans cet exemple, nous voulons que ",(0,o.jsx)(n.code,{children:"alice"})," puisse lire et \xe9crire ",(0,o.jsx)(n.code,{children:"data"})," dans domain1 et domain2. La correspondance de motif ",(0,o.jsx)(n.code,{children:"*"})," dans ",(0,o.jsx)(n.code,{children:"g"})," permet \xe0 ",(0,o.jsx)(n.code,{children:"alice"})," d'acc\xe9der \xe0 deux domaines."]}),"\n",(0,o.jsxs)(n.p,{children:["En utilisant la correspondance de motifs, surtout dans des sc\xe9narios plus complexes et comportant de nombreux domaines ou objets \xe0 prendre en compte, nous pouvons mettre en \u0153uvre la ",(0,o.jsx)(n.code,{children:"policy_definition"})," de mani\xe8re plus \xe9l\xe9gante et efficace."]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var s=i(6540);const o={},r=s.createContext(o);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);