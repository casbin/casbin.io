"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[9259],{4235(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>l,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"menu-permissions","title":"Menu Permissions","description":"Exemple pour les permissions de menu","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/MenuPermissions.mdx","sourceDirName":".","slug":"/menu-permissions","permalink":"/fr/docs/menu-permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/MenuPermissions.mdx","tags":[],"version":"current","frontMatter":{"id":"menu-permissions","title":"Menu Permissions","description":"Exemple pour les permissions de menu","keywords":["Menu Permissions","example"],"authors":["amikecoXu"]},"sidebar":"docs","previous":{"title":"Data Permissions","permalink":"/fr/docs/data-permissions"},"next":{"title":"Extensions","permalink":"/fr/docs/category/extensions"}}');var r=n(4848),t=n(8453);const l={id:"menu-permissions",title:"Menu Permissions",description:"Exemple pour les permissions de menu",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},d=void 0,c={},u=[{value:"1. Fichiers de configuration",id:"1-fichiers-de-configuration",level:3},{value:"1.1 Vue d&#39;ensemble",id:"11-vue-densemble",level:4},{value:"1.2 D\xe9finitions des permissions (Politiques)",id:"12-d\xe9finitions-des-permissions-politiques",level:4},{value:"1.3 R\xf4les et associations d&#39;utilisateurs",id:"13-r\xf4les-et-associations-dutilisateurs",level:4},{value:"1.4 Hi\xe9rarchie des \xe9l\xe9ments de menu",id:"14-hi\xe9rarchie-des-\xe9l\xe9ments-de-menu",level:4},{value:"1.5 H\xe9ritage des permissions de menu et r\xe8gles par d\xe9faut",id:"15-h\xe9ritage-des-permissions-de-menu-et-r\xe8gles-par-d\xe9faut",level:4},{value:"1.6 R\xe8gles sp\xe9ciales d&#39;h\xe9ritage des permissions",id:"16-r\xe8gles-sp\xe9ciales-dh\xe9ritage-des-permissions",level:4},{value:"1.7 Description de l&#39;exemple",id:"17-description-de-lexemple",level:4},{value:"2. Contr\xf4le des permissions du menu",id:"2-contr\xf4le-des-permissions-du-menu",level:3}];function o(e){const s={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Nous commen\xe7ons par introduire un exemple Spring Boot pr\xe9sentant un syst\xe8me de menu. Cet exemple utilise jCasbin pour g\xe9rer les permissions de menu. En fin de compte, il vise \xe0 abstraire un middleware, sp\xe9cifiquement pour les permissions de menu, qui pourrait \xeatre \xe9tendu \xe0 d'autres langages pris en charge par Casbin, tels que Go et Python."}),"\n",(0,r.jsx)(s.h3,{id:"1-fichiers-de-configuration",children:"1. Fichiers de configuration"}),"\n",(0,r.jsxs)(s.p,{children:["Vous devez configurer la gestion des r\xf4les et des permissions dans le fichier ",(0,r.jsx)(s.code,{children:"policy.csv"}),", ainsi que les relations parent-enfant entre les \xe9l\xe9ments de menu. Pour plus de d\xe9tails, veuillez vous r\xe9f\xe9rer \xe0 ",(0,r.jsx)(s.a,{href:"https://github.com/jcasbin/jcasbin-menu-permission",children:"ce d\xe9p\xf4t GitHub"}),"."]}),"\n",(0,r.jsx)(s.h4,{id:"11-vue-densemble",children:"1.1 Vue d'ensemble"}),"\n",(0,r.jsxs)(s.p,{children:["En utilisant ",(0,r.jsx)(s.code,{children:"policy.csv"}),", vous pouvez configurer de mani\xe8re flexible les permissions de r\xf4le et les structures de menu pour un contr\xf4le d'acc\xe8s \xe0 grain fin. Ce fichier de configuration d\xe9finit les permissions d'acc\xe8s pour diff\xe9rents r\xf4les sur divers \xe9l\xe9ments de menu, les associations entre utilisateurs et r\xf4les, et les relations hi\xe9rarchiques entre les \xe9l\xe9ments de menu."]}),"\n",(0,r.jsx)(s.h4,{id:"12-d\xe9finitions-des-permissions-politiques",children:"1.2 D\xe9finitions des permissions (Politiques)"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"R\xe8gles de politique"})," : Les politiques sont d\xe9finies avec un pr\xe9fixe ",(0,r.jsx)(s.code,{children:"p"}),", sp\xe9cifiant les r\xf4les (",(0,r.jsx)(s.code,{children:"sub"}),") et leurs permissions (",(0,r.jsx)(s.code,{children:"act"}),") sur les \xe9l\xe9ments de menu (",(0,r.jsx)(s.code,{children:"obj"}),"), ainsi que l'effet de la r\xe8gle (",(0,r.jsx)(s.code,{children:"eft"}),"), o\xf9 ",(0,r.jsx)(s.code,{children:"allow"})," indique que la permission est accord\xe9e, et ",(0,r.jsx)(s.code,{children:"deny"})," indique qu'elle est refus\xe9e."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Exemples :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"p, ROLE_ROOT, SystemMenu, read, allow"})," signifie que le r\xf4le ",(0,r.jsx)(s.code,{children:"ROLE_ROOT"})," a un acc\xe8s en lecture \xe0 l'\xe9l\xe9ment de menu ",(0,r.jsx)(s.code,{children:"SystemMenu"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"p, ROLE_ROOT, UserMenu, read, deny"})," signifie que le r\xf4le ",(0,r.jsx)(s.code,{children:"ROLE_ROOT"})," est refus\xe9 l'acc\xe8s en lecture \xe0 l'\xe9l\xe9ment de menu ",(0,r.jsx)(s.code,{children:"UserMenu"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"13-r\xf4les-et-associations-dutilisateurs",children:"1.3 R\xf4les et associations d'utilisateurs"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"H\xe9ritage de r\xf4le"})," : Les relations utilisateur-r\xf4le et les hi\xe9rarchies de r\xf4les sont d\xe9finies avec un pr\xe9fixe ",(0,r.jsx)(s.code,{children:"g"}),". Cela permet aux utilisateurs d'h\xe9riter des permissions d'un ou de plusieurs r\xf4les."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Exemples :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"g, user, ROLE_USER"})," signifie que l'utilisateur ",(0,r.jsx)(s.code,{children:"user"})," est assign\xe9 le r\xf4le ",(0,r.jsx)(s.code,{children:"ROLE_USER"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"g, ROLE_ADMIN, ROLE_USER"})," signifie que ",(0,r.jsx)(s.code,{children:"ROLE_ADMIN"})," h\xe9rite des permissions de ",(0,r.jsx)(s.code,{children:"ROLE_USER"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"14-hi\xe9rarchie-des-\xe9l\xe9ments-de-menu",children:"1.4 Hi\xe9rarchie des \xe9l\xe9ments de menu"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Relations de menu"})," : Les relations parent-enfant entre les \xe9l\xe9ments de menu sont d\xe9finies avec un pr\xe9fixe ",(0,r.jsx)(s.code,{children:"g2"}),", aidant \xe0 la construction de la structure d'un menu."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Exemples :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"g2, UserSubMenu_allow, UserMenu"})," indique que ",(0,r.jsx)(s.code,{children:"UserSubMenu_allow"})," est un sous-menu de ",(0,r.jsx)(s.code,{children:"UserMenu"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"g2, (NULL), SystemMenu"})," indique que ",(0,r.jsx)(s.code,{children:"SystemMenu"})," n'a pas de sous-menu, ce qui signifie qu'il s'agit d'un \xe9l\xe9ment de menu de niveau sup\xe9rieur."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"15-h\xe9ritage-des-permissions-de-menu-et-r\xe8gles-par-d\xe9faut",children:"1.5 H\xe9ritage des permissions de menu et r\xe8gles par d\xe9faut"}),"\n",(0,r.jsx)(s.p,{children:"Lors de la gestion des permissions de menu avec jCasbin, la relation de permission entre les menus parent et enfant suit des r\xe8gles d'h\xe9ritage sp\xe9cifiques, avec deux r\xe8gles par d\xe9faut importantes :"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"H\xe9ritage des permissions de menu parent :"})}),"\n",(0,r.jsxs)(s.p,{children:["Si un menu parent est explicitement accord\xe9 la permission ",(0,r.jsx)(s.code,{children:"allow"}),", tous ses sous-menus sont \xe9galement par d\xe9faut sur la permission ",(0,r.jsx)(s.code,{children:"allow"})," \xe0 moins qu'ils ne soient sp\xe9cifiquement marqu\xe9s comme ",(0,r.jsx)(s.code,{children:"deny"}),". Cela signifie qu'une fois qu'un menu parent est accessible, ses sous-menus sont \xe9galement accessibles par d\xe9faut."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Gestion des menus parents sans param\xe8tres de permission directs"}),":"]}),"\n",(0,r.jsxs)(s.p,{children:["Si un menu parent n'a pas de param\xe8tres de permission directs (ni explicitement autoris\xe9s ni refus\xe9s) mais a au moins un sous-menu explicitement accord\xe9 la permission ",(0,r.jsx)(s.code,{children:"allow"}),", alors le menu parent est implicitement consid\xe9r\xe9 comme ayant la permission ",(0,r.jsx)(s.code,{children:"allow"}),". Cela garantit que les utilisateurs peuvent naviguer vers ces sous-menus."]}),"\n",(0,r.jsx)(s.h4,{id:"16-r\xe8gles-sp\xe9ciales-dh\xe9ritage-des-permissions",children:"1.6 R\xe8gles sp\xe9ciales d'h\xe9ritage des permissions"}),"\n",(0,r.jsxs)(s.p,{children:["Concernant l'h\xe9ritage des permissions entre les r\xf4les, surtout dans les sc\xe9narios impliquant des permissions ",(0,r.jsx)(s.code,{children:"deny"}),", les r\xe8gles suivantes doivent \xeatre suivies pour assurer la s\xe9curit\xe9 du syst\xe8me et un contr\xf4le pr\xe9cis des permissions :"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Distinction entre les refus explicites et par d\xe9faut"}),":"]}),"\n",(0,r.jsxs)(s.p,{children:["Si un r\xf4le, comme ",(0,r.jsx)(s.code,{children:"ROLE_ADMIN"}),", est explicitement refus\xe9 l'acc\xe8s \xe0 un \xe9l\xe9ment de menu, comme ",(0,r.jsx)(s.code,{children:"AdminSubMenu_deny"})," (marqu\xe9 comme ",(0,r.jsx)(s.code,{children:"deny"}),"), alors m\xeame si ce r\xf4le est h\xe9rit\xe9 par un autre r\xf4le (par exemple, ",(0,r.jsx)(s.code,{children:"ROLE_ROOT"}),"), le r\xf4le h\xe9ritier n'est pas autoris\xe9 \xe0 acc\xe9der \xe0 l'\xe9l\xe9ment de menu refus\xe9. Cela garantit que les politiques de s\xe9curit\xe9 explicites ne sont pas contourn\xe9es en raison de l'h\xe9ritage des r\xf4les."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"H\xe9ritage des permissions de refus par d\xe9faut"}),":"]}),"\n",(0,r.jsxs)(s.p,{children:["Inversement, si le refus d'un r\xf4le d'acc\xe9der \xe0 un \xe9l\xe9ment de menu (par exemple, ",(0,r.jsx)(s.code,{children:"UserSubMenu_deny"}),") est par d\xe9faut (non explicitement marqu\xe9 comme ",(0,r.jsx)(s.code,{children:"deny"}),", mais parce qu'il n'a pas \xe9t\xe9 explicitement accord\xe9 ",(0,r.jsx)(s.code,{children:"allow"}),"), alors lorsque ce r\xf4le est h\xe9rit\xe9 par un autre r\xf4le (par exemple, ",(0,r.jsx)(s.code,{children:"ROLE_ADMIN"}),"), le r\xf4le h\xe9ritier peut outrepasser le statut ",(0,r.jsx)(s.code,{children:"deny"})," par d\xe9faut, permettant l'acc\xe8s \xe0 ces \xe9l\xe9ments de menu."]}),"\n",(0,r.jsx)(s.h4,{id:"17-description-de-lexemple",children:"1.7 Description de l'exemple"}),"\n",(0,r.jsx)(s.p,{children:"politique:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-csv",children:"p, ROLE_ROOT, SystemMenu, read, allow\np, ROLE_ROOT, AdminMenu, read, allow\np, ROLE_ROOT, UserMenu, read, deny\np, ROLE_ADMIN, UserMenu, read, allow\np, ROLE_ADMIN, AdminMenu, read, allow\np, ROLE_ADMIN, AdminSubMenu_deny, read, deny\np, ROLE_USER, UserSubMenu_allow, read, allow\n\ng, user, ROLE_USER\ng, admin, ROLE_ADMIN\ng, root, ROLE_ROOT\ng, ROLE_ADMIN, ROLE_USER\n\ng2, UserSubMenu_allow, UserMenu\ng2, UserSubMenu_deny, UserMenu\ng2, UserSubSubMenu, UserSubMenu_allow\ng2, AdminSubMenu_allow, AdminMenu\ng2, AdminSubMenu_deny, AdminMenu\ng2, (NULL), SystemMenu\n"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{style:{textAlign:"left"},children:"NomDuMenu"}),(0,r.jsx)(s.th,{style:{textAlign:"center"},children:"ROLE_ROOT"}),(0,r.jsx)(s.th,{style:{textAlign:"center"},children:"ROLE_ADMIN"}),(0,r.jsx)(s.th,{style:{textAlign:"center"},children:"ROLE_USER"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"SystemMenu"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"UserMenu"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"UserSubMenu_allow"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"UserSubSubMenu"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"UserSubMenu_deny"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AdminMenu"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AdminSubMenu_allow"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{style:{textAlign:"left"},children:"AdminSubMenu_deny"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u2705"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"}),(0,r.jsx)(s.td,{style:{textAlign:"center"},children:"\u274c"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"2-contr\xf4le-des-permissions-du-menu",children:"2. Contr\xf4le des permissions du menu"}),"\n",(0,r.jsxs)(s.p,{children:["La liste de tous les \xe9l\xe9ments de menu accessibles par un nom d'utilisateur donn\xe9 peut \xeatre identifi\xe9e gr\xe2ce \xe0 la fonction ",(0,r.jsx)(s.code,{children:"findAccessibleMenus()"})," disponible dans le ",(0,r.jsx)(s.a,{href:"https://github.com/jcasbin/jcasbin-menu-permission/blob/master/src/main/java/org/casbin/service/MenuService.java",children:"MenuService"}),". Pour v\xe9rifier si un utilisateur sp\xe9cifique a le droit d'acc\xe9der \xe0 un \xe9l\xe9ment de menu d\xe9sign\xe9, la m\xe9thode ",(0,r.jsx)(s.code,{children:"checkMenuAccess()"})," peut \xeatre utilis\xe9e. Cette approche garantit que les permissions de menu sont efficacement contr\xf4l\xe9es, en exploitant les capacit\xe9s de jCasbin pour g\xe9rer efficacement les droits d'acc\xe8s."]})]})}function a(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,s,n){n.d(s,{R:()=>l,x:()=>d});var i=n(6540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);