"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[4850],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var i=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=i.createContext({}),c=function(e){var t=i.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=c(e.components);return i.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},s=i.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=c(r),m=n,b=s["".concat(p,".").concat(m)]||s[m]||u[m]||a;return r?i.createElement(b,o(o({ref:t},d),{},{components:r})):i.createElement(b,o({ref:t},d))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,o=new Array(a);o[0]=s;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var c=2;c<a;c++)o[c]=r[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,r)}s.displayName="MDXCreateElement"},8040:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=r(7462),n=(r(7294),r(3905));const a={id:"priority-model",title:"Mod\xe8le de priorit\xe9",description:"Priority Model",keywords:["priority model"]},o=void 0,l={unversionedId:"priority-model",id:"priority-model",title:"Mod\xe8le de priorit\xe9",description:"Priority Model",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/PriorityModel.mdx",sourceDirName:".",slug:"/priority-model",permalink:"/fr/docs/priority-model",draft:!1,editUrl:"https://crowdin.com/project/casbin-website/fr",tags:[],version:"current",frontMatter:{id:"priority-model",title:"Mod\xe8le de priorit\xe9",description:"Priority Model",keywords:["priority model"]},sidebar:"docs",previous:{title:"ABAC",permalink:"/fr/docs/abac"},next:{title:"Super Admin",permalink:"/fr/docs/superadmin"}},p={},c=[{value:"Politique de charge avec priorit\xe9 implicitement",id:"politique-de-charge-avec-priorit\xe9-implicitement",level:2},{value:"Charger la politique avec la priorit\xe9 explicite",id:"charger-la-politique-avec-la-priorit\xe9-explicite",level:2},{value:"Politique de charge avec priorit\xe9 bas\xe9e sur le r\xf4le et la hi\xe9rarchie des utilisateurs",id:"politique-de-charge-avec-priorit\xe9-bas\xe9e-sur-le-r\xf4le-et-la-hi\xe9rarchie-des-utilisateurs",level:2}],d={toc:c};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,i.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Casbin supporte les politiques de chargement avec priorit\xe9."),(0,n.kt)("h2",{id:"politique-de-charge-avec-priorit\xe9-implicitement"},"Politique de charge avec priorit\xe9 implicitement"),(0,n.kt)("p",null,"C'est assez simple, l'ordre d\xe9termine la priorit\xe9, la politique apparue plus t\xf4t a une plus grande priorit\xe9."),(0,n.kt)("p",null,"model.conf :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_effect]\ne = priorit\xe9(p.eft) || nier\n")),(0,n.kt)("h2",{id:"charger-la-politique-avec-la-priorit\xe9-explicite"},"Charger la politique avec la priorit\xe9 explicite"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Voir aussi : ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/550"},"casbin#550"))),(0,n.kt)("p",null,"The smaller priority value will have a higher priority. If there's a non-numerical character in priority, it will be in the last, rather than throw an error."),(0,n.kt)("admonition",{title:"Token name convention",type:"info"},(0,n.kt)("p",{parentName:"admonition"},'The priority token name in policy definition is  "priority" conventionally. A customized one requires invoking ',(0,n.kt)("inlineCode",{parentName:"p"},"e.SetFieldIndex()")," and reload policies (full example on ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/pull/1044"},"TestCustomizedFieldIndex")," )."),(0,n.kt)("p",{parentName:"admonition"},"model.conf :"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_definition]\np = customized_priority, sub, obj, act, eft\n")),(0,n.kt)("p",{parentName:"admonition"},"Golang code example:"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre",className:"language-go"},'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer failed to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'))),(0,n.kt)("p",null,"Maintenant, la priorit\xe9 explicite ne prend en charge que ",(0,n.kt)("inlineCode",{parentName:"p"},"AddPolicy")," & ",(0,n.kt)("inlineCode",{parentName:"p"},"AddPolicies"),", si ",(0,n.kt)("inlineCode",{parentName:"p"},"UpdatePolicy")," a \xe9t\xe9 appel\xe9e, vous ne devriez pas changer l'attribut prioritaire."),(0,n.kt)("p",null,"model.conf :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n")),(0,n.kt)("p",null,"Politique.csv"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-csv"},"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n")),(0,n.kt)("p",null,"Requ\xeate:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"alice, data1, write --\x3e true // pour `p, 1, alice, data1, write, allow` a la plus haute priorit\xe9\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // for bob has role of `data2_allow_group` which has right to write data2, et il n'y a pas de politique de refus avec une priorit\xe9 plus \xe9lev\xe9e \n")),(0,n.kt)("h2",{id:"politique-de-charge-avec-priorit\xe9-bas\xe9e-sur-le-r\xf4le-et-la-hi\xe9rarchie-des-utilisateurs"},"Politique de charge avec priorit\xe9 bas\xe9e sur le r\xf4le et la hi\xe9rarchie des utilisateurs"),(0,n.kt)("p",null,"La structure h\xe9rit\xe9e des r\xf4les et des utilisateurs ne peut \xeatre que de multiples arborescences et non des graphiques. Si un utilisateur a plusieurs r\xf4les, vous devez vous assurer que l'utilisateur a le m\xeame niveau dans diff\xe9rentes arborescences. Si deux r\xf4les ont le m\xeame niveau, la politique (le r\xf4le correspondant) est apparue plus t\xf4t a une plus grande priorit\xe9. plus de d\xe9tails voir aussi ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/pull/833"},"casbin#833")," ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/831"},"casbin#831")),(0,n.kt)("p",null,"model.conf:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n")),(0,n.kt)("p",null,"Politique.csv"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-csv"},"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n")),(0,n.kt)("p",null,"Requ\xeate:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"jane, data1, read --\x3e true // jane est en bas, donc la priorit\xe9 est sup\xe9rieure \xe0 l'\xe9diteur, admin et racine\nalice, data1, read --\x3e true\n")),(0,n.kt)("p",null," La hi\xe9rarchie des r\xf4les comme ceci:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: john\n")),(0,n.kt)("p",null,"La priorit\xe9 ressemble automatiquement \xe0 ceci:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n")))}u.isMDXComponent=!0}}]);