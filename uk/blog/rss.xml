<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Apache Casbin Blog</title>
        <link>https://casbin.org/uk/blog</link>
        <description>Apache Casbin Blog</description>
        <lastBuildDate>Thu, 11 Dec 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>uk</language>
        <item>
            <title><![CDATA[Casbin in 2025: Authorization for the AI Agent Era]]></title>
            <link>https://casbin.org/uk/blog/casbin-2025-ai-agent-era</link>
            <guid>https://casbin.org/uk/blog/casbin-2025-ai-agent-era</guid>
            <pubDate>Thu, 11 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[2024 was the year AI agents went from demos to production. With the Model Context Protocol (MCP) gaining adoption from Google, OpenAI, Microsoft, and countless others, we're seeing a fundamental shift in how applications interact with external services. And with that shift comes a whole new set of authorization challenges that we at Casbin have been thinking about.]]></description>
            <content:encoded><![CDATA[<p>2024 was the year AI agents went from demos to production. With the Model Context Protocol (MCP) gaining adoption from Google, OpenAI, Microsoft, and countless others, we're seeing a fundamental shift in how applications interact with external services. And with that shift comes a whole new set of authorization challenges that we at Casbin have been thinking about.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="the-world-has-changed">The World Has Changed<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#the-world-has-changed" class="hash-link" aria-label="Пряме посилання на The World Has Changed" title="Пряме посилання на The World Has Changed" translate="no">​</a></h2>
<p>When we started Casbin back in 2017, the typical authorization scenario was straightforward: a user makes a request, we check if they have permission, done. Today? An AI agent might be acting on behalf of a user, calling multiple MCP servers, each with their own tool permissions, and the whole thing needs to happen in milliseconds at the edge.</p>
<p>The MCP specification now explicitly classifies MCP servers as OAuth 2.0 Resource Servers (as of the June 2025 update), requiring fine-grained scopes like <code>mcp:tools:weather</code> or <code>mcp:resources:customer-data:read</code>. This is exactly the kind of granular permission model Casbin was built for - but the integration story needs work.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="what-were-working-on">What We're Working On<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#what-were-working-on" class="hash-link" aria-label="Пряме посилання на What We're Working On" title="Пряме посилання на What We're Working On" translate="no">​</a></h2>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="mcp-server-authorization">MCP Server Authorization<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#mcp-server-authorization" class="hash-link" aria-label="Пряме посилання на MCP Server Authorization" title="Пряме посилання на MCP Server Authorization" translate="no">​</a></h3>
<p>This is probably the most exciting area for us right now. When an AI agent calls an MCP server, that server needs to decide: can this agent, acting on behalf of this user, invoke this specific tool with these parameters?</p>
<p>Traditional RBAC falls short here. You need something more like ABAC - checking not just "is alice an admin" but "is this agent authorized to access customer data for alice's region during business hours." We're exploring how Casbin's policy model can express these constraints naturally.</p>
<p>The challenge is that MCP servers need to make these decisions fast. Really fast. We're looking at lightweight policy evaluation that can run in the MCP server process itself, rather than making network calls to a separate authorization service.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="edge-first-authorization">Edge-First Authorization<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#edge-first-authorization" class="hash-link" aria-label="Пряме посилання на Edge-First Authorization" title="Пряме посилання на Edge-First Authorization" translate="no">​</a></h3>
<p>Cloudflare Workers, Deno Deploy, Vercel Edge Functions - the edge computing space has exploded. In 2025, sub-50ms response times are table stakes, and you can't afford to add 100ms for an authorization check to some central server.</p>
<p>This is pushing us to think differently about how Casbin works. Can we compile policies to WebAssembly and run them directly in V8 isolates? Can we do smart policy caching at the edge while maintaining consistency? These are hard problems, and we don't have all the answers yet, but it's where things are heading.</p>
<p>We're particularly interested in the Cloudflare Workers ecosystem - they've built out a whole platform for MCP servers with built-in OAuth support. A native Casbin integration there could be powerful.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="rag-pipeline-authorization">RAG Pipeline Authorization<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#rag-pipeline-authorization" class="hash-link" aria-label="Пряме посилання на RAG Pipeline Authorization" title="Пряме посилання на RAG Pipeline Authorization" translate="no">​</a></h3>
<p>Here's something that keeps coming up: companies building RAG systems where the LLM needs access to internal documents, but different users should see different documents in their responses.</p>
<p>The OWASP Top 10 for LLM Applications 2025 lists "Sensitive Information Disclosure" as a major risk. The solution isn't just filtering outputs - it's ensuring the LLM never sees documents the user shouldn't have access to in the first place.</p>
<p>This means authorization checks need to happen at the vector store query level. We're thinking about how Casbin policies can translate into metadata filters for vector databases - essentially, turning a permission check into a WHERE clause that gets pushed down to the retrieval layer.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="multi-agent-scenarios">Multi-Agent Scenarios<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#multi-agent-scenarios" class="hash-link" aria-label="Пряме посилання на Multi-Agent Scenarios" title="Пряме посилання на Multi-Agent Scenarios" translate="no">​</a></h3>
<p>When you have multiple AI agents collaborating - think a coding agent that calls a deployment agent that calls a monitoring agent - permission delegation gets tricky. Each agent in the chain might have different capabilities, and you need to track the full chain of custody.</p>
<p>The OAuth On-Behalf-Of (OBO) flow handles some of this, but the authorization logic for "can agent B do X on behalf of agent A on behalf of user alice" needs a proper model. Casbin's support for role hierarchies and domain-based RBAC could extend naturally to agent hierarchies, but we need to think through the semantics carefully.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="the-traditional-roadmap-stuff">The Traditional Roadmap Stuff<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#the-traditional-roadmap-stuff" class="hash-link" aria-label="Пряме посилання на The Traditional Roadmap Stuff" title="Пряме посиланн�я на The Traditional Roadmap Stuff" translate="no">​</a></h2>
<p>Of course, we're not abandoning the basics. Some practical things on our list:</p>
<p><strong>Language implementations catching up</strong> - SwiftCasbin and Lua-Casbin are still behind on features compared to the Go and Node.js versions. The <code>in</code> operator, WatcherEx, better caching for the <code>g</code> function - these need to be consistent everywhere.</p>
<p><strong>New framework middlewares</strong> - go-zero has been requested repeatedly. Poem for Rust is gaining traction. Play Framework for Java has been on the wishlist forever.</p>
<p><strong>Performance work</strong> - As policies get more complex for these new use cases, evaluation speed matters more. We need better benchmarking, profiling, and optimization across all implementations.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="what-we-dont-know-yet">What We Don't Know Yet<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#what-we-dont-know-yet" class="hash-link" aria-label="Пряме посилання на What We Don't Know Yet" title="Пряме посилання на What We Don't Know Yet" translate="no">​</a></h2>
<p>Honestly, the AI agent authorization space is moving so fast that we're learning as we go. Some open questions:</p>
<ul>
<li class="">Should Casbin have first-class primitives for "agent identity" vs "user identity"?</li>
<li class="">How do you handle authorization for tools that are dynamically discovered via MCP?</li>
<li class="">What's the right caching strategy when policies might depend on real-time context?</li>
</ul>
<p>If you're building in this space and running into authorization problems, we want to hear about it. The best features come from real use cases.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="getting-involved">Getting Involved<a href="https://casbin.org/uk/blog/casbin-2025-ai-agent-era#getting-involved" class="hash-link" aria-label="Пряме посилання на Getting Involved" title="Пряме посилання на Getting Involved" translate="no">​</a></h2>
<p>We've been a GSoC organization for years, and these AI-related projects are exactly the kind of thing that makes for interesting summer projects. But you don't need to wait for GSoC - if any of this sounds interesting, come chat with us on Discord or open an issue on GitHub.</p>
<p>The next few years are going to be wild for authorization. The problems are harder, but also more interesting. We're excited to figure them out together.</p>]]></content:encoded>
            <category>casbin</category>
            <category>roadmap</category>
            <category>AI</category>
            <category>MCP</category>
            <category>edge-computing</category>
            <category>LLM</category>
        </item>
        <item>
            <title><![CDATA[Understanding How Casbin Matching Works in Detail]]></title>
            <link>https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail</link>
            <guid>https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail</guid>
            <pubDate>Fri, 08 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[In this post, I will explain the design and implementation of RBAC using the Casbin library. For a SaaS platform dealing with multiple resource hierarchies and roles that inherit permissions from higher levels, Casbin provides a performant alternative to consider.]]></description>
            <content:encoded><![CDATA[<p>In this post, I will explain the design and implementation of RBAC using the <a href="https://casbin.org/" target="_blank" rel="noopener noreferrer" class="">Casbin</a> library. For a SaaS platform dealing with multiple resource hierarchies and roles that inherit permissions from higher levels, Casbin provides a performant alternative to consider.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="introduction-to-rbac">Introduction to RBAC<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#introduction-to-rbac" class="hash-link" aria-label="Пряме посилання на Introduction to RBAC" title="Пряме посилання на Introduction to RBAC" translate="no">​</a></h2>
<p>RBAC is a method of restricting access to resources based on the roles that individuals hold. To better understand how hierarchical RBAC works, let's take a look at Azure's RBAC system in the next section and then attempt to implement a similar system.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="understanding-azures-hierarchical-rbac">Understanding Azure's Hierarchical RBAC<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#understanding-azures-hierarchical-rbac" class="hash-link" aria-label="Пряме посилання на Understanding Azure's Hierarchical RBAC" title="Пряме посилання на Understanding Azure's Hierarchical RBAC" translate="no">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-setup-guide/media/organize-resources/scope-levels.png" alt="Azure Hierarchy" class="img_ev3q"></p>
<p>There is a role called <strong>Owner</strong> for all resources in Azure. Suppose if I have the <strong>Owner</strong> role assigned to me at the
subscription level, that means I am the <strong>Owner</strong> of all the resource groups and resources under that subscription. If I have
<strong>Owner</strong> at the resource group level, then I am the <strong>Owner</strong> of all the resources under that resource group.</p>
<p>This image shows that I have <strong>Owner</strong> access at the subscription level. <img decoding="async" loading="lazy" alt="Subscription Owner" src="https://casbin.org/uk/assets/images/subscription-owner-f1a7e1c9c03d7c587ce910ae5e6d8a35.png" width="3456" height="1836" class="img_ev3q"></p>
<p>When I check the IAM of a Resource Group under this Subscription, you can see that I have inherited <strong>Owner</strong> access from the
subscription. <img decoding="async" loading="lazy" alt="RG Owner" src="https://casbin.org/uk/assets/images/rg-owner-9c6cd2ae5997a5fba717c445f43130e6.png" width="3456" height="1836" class="img_ev3q"></p>
<p>So, this is how Azure's RBAC is hierarchical. Most enterprise software uses hierarchical RBAC because of the hierarchical
nature of the resource levels. In this tutorial, we'll try to implement a similar system using Casbin.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="how-does-casbin-work">How Does Casbin Work?<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#how-does-casbin-work" class="hash-link" aria-label="Пряме посилання на How Does Casbin Work?" title="Пряме посилання на How Does Casbin Work?" translate="no">​</a></h2>
<p>Before diving into the implementation, it is important to understand what Casbin is and how it functions at a high level. This understanding is necessary because each Role-Based Access Control (RBAC) system may vary based on specific requirements. By grasping the workings of Casbin, we can effectively fine-tune the model.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="what-is-acl">What is ACL?<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#what-is-acl" class="hash-link" aria-label="Пряме посилання на What is ACL?" title="Пряме посилання на What is ACL?" translate="no">​</a></h2>
<p>ACL stands for Access Control List. It is a method in which users are mapped to actions and actions to resources.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="the-model-definition">The model definition<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#the-model-definition" class="hash-link" aria-label="Пряме посилання на The model definition" title="Пряме посилання на The model definition" translate="no">​</a></h3>
<p>Let's consider a simple example of an ACL model.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[request_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r = sub, act, obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p = sub, act, obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_effect]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e = some(where (p.eft == allow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[matchers]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m = r.sub == p.sub &amp;&amp; r.obj == p.obj &amp;&amp; r.act == p.act</span><br></span></code></pre></div></div>
<ol>
<li class="">
<p>The <strong>request_definition</strong> is the query template of the system. For example, a request <code>alice, write, data1</code> can be
interpreted as "Can subject Alice perform the action 'write' on object 'data1'?".</p>
</li>
<li class="">
<p>The <strong>policy_definition</strong> is the assignment template of the system. For example, by creating a policy <code>alice, write, data1</code>, you are
assigning permission to subject Alice to perform the action 'write' on object 'data1'.</p>
</li>
<li class="">
<p>The <strong>policy_effect</strong> defines the effect of the policy.</p>
</li>
<li class="">
<p>In the <strong>matchers</strong> section, the request is matched with the policy using the conditions <code>r.sub == p.sub &amp;&amp; r.obj == p.obj &amp;&amp; r.act == p.act</code>.</p>
</li>
</ol>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="now-lets-test-the-model-on-the-casbin-editor">Now let's test the model on the Casbin editor<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#now-lets-test-the-model-on-the-casbin-editor" class="hash-link" aria-label="Пряме посилання на Now let's test the model on the Casbin editor" title="Пряме посилання на Now let's test the model on the Casbin editor" translate="no">​</a></h3>
<p>Open the <a href="https://casbin.org/editor" target="_blank" rel="noopener noreferrer" class="">editor</a> and paste the above model in the Model editor.</p>
<p>Paste the following in the Policy editor:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> write</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data2</span><br></span></code></pre></div></div>
<p>and the following in the Request editor:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data1</span><br></span></code></pre></div></div>
<p>The result will be:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="visual-representation-of-the-acl-model-policy-and-request-matching">Visual representation of the ACL model, policy, and request matching<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#visual-representation-of-the-acl-model-policy-and-request-matching" class="hash-link" aria-label="Пряме посилання на Visual representation of the ACL model, policy, and request matching" title="Пряме посилання на Visual representation of the ACL model, policy, and request matching" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="acl" src="https://casbin.org/uk/assets/images/acl-704097c47b27a1f2235c82f593af469e.png" width="6968" height="3096" class="img_ev3q"></p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="what-is-rbac">What is RBAC?<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#what-is-rbac" class="hash-link" aria-label="Пряме посилання на What is RBAC?" title="Пряме посилання на What is RBAC?" translate="no">​</a></h2>
<p>RBAC stands for Role-Based Access Control. In RBAC, a user is assigned a role for a resource, and a role can contain arbitrary actions. The request then checks if the user has the permission to perform the action on the resource.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="the-model-definition-1">The model definition<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#the-model-definition-1" class="hash-link" aria-label="Пряме посилання на The model definition" title="Пряме посилання на The model definition" translate="no">​</a></h3>
<p>Let's consider a simple example RBAC model:</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[request_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r = sub, act, obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p = sub, act, obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[role_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g = _, _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g2 = _, _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_effect]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e = some(where (p.eft == allow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[matchers]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m = r.sub == p.sub &amp;&amp; g(p.act, r.act) &amp;&amp; r.obj == p.obj</span><br></span></code></pre></div></div>
<ol>
<li class="">The <strong>role_definition</strong> is a graph relation builder that uses a Graph to compare the request object with the policy object.</li>
</ol>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="now-lets-test-the-model-on-casbin-editor">Now let's test the model on Casbin editor<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#now-lets-test-the-model-on-casbin-editor" class="hash-link" aria-label="Пряме посилання на Now let's test the model on Casbin editor" title="Пряме посилання на Now let's test the model on Casbin editor" translate="no">​</a></h3>
<p>Open the <a href="https://casbin.org/editor" target="_blank" rel="noopener noreferrer" class="">editor</a> and paste the above model in the Model editor.</p>
<p>Paste the following in the Policy editor:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> write</span><br></span></code></pre></div></div>
<p>and the following in the Request editor:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> write</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> write</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> write</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> data1</span><br></span></code></pre></div></div>
<p>The result will be:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">false</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="visual-representation-of-the-rbac-model-policy-and-request-matching">Visual representation of the RBAC model, policy, and request matching<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#visual-representation-of-the-rbac-model-policy-and-request-matching" class="hash-link" aria-label="Пряме посилання на Visual representation of the RBAC model, policy, and request matching" title="Пряме посилання на Visual representation of the RBAC model, policy, and request matching" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="rbac" src="https://casbin.org/uk/assets/images/rbac-4c8e405408b9e4df554f7cd619eae897.png" width="7016" height="2844" class="img_ev3q"></p>
<p>The <strong>g - Role to action mapping</strong> table has a Graph mapping the role to action. This Graph can be coded as a list of edges, as shown in the policy which is a common way of representing a Graph:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> write</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>інформація</div><div class="admonitionContent_BuS1"><p><strong>p</strong> indicates a normal policy that can be compared using the <strong>==</strong> operator. <strong>g</strong> is a Graph-based comparison function. You can define multiple Graph comparators by adding a numerical suffix like <strong>g, g2, g3, ...</strong> and so on.</p></div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="what-is-hierarchical-rbac">What is Hierarchical RBAC?<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#what-is-hierarchical-rbac" class="hash-link" aria-label="Пряме посилання на What is Hierarchical RBAC?" title="Пряме посилання на What is Hierarchical RBAC?" translate="no">​</a></h2>
<p>In Hierarchical RBAC, there are more than one type of resources and there is an inheritance relationship between the resource types. For example, "subscription" is one type and "resourceGroup" is another type. A sub1 of type <strong>Subscription</strong> can contain multiple resourceGroups (rg1, rg2) of type <strong>ResourceGroup</strong>.</p>
<p>Similar to the resource hierarchy, there will be two types of roles and actions: Subscription roles and actions, and ResourceGroup roles and actions. There is an arbitrary relationship between the Subscription role and ResourceGroup role. For example, consider a Subscription Role <strong>sub-owner</strong>. This role is inherited by a ResourceGroup Role <strong>rg-owner</strong>, which means that if I am assigned the <strong>sub-owner</strong> role on Subscription <strong>sub1</strong>, then I automatically also get the <strong>rg-owner</strong> role on <strong>rg1 and rg2</strong>.</p>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="the-model-definition-2">The model definition<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#the-model-definition-2" class="hash-link" aria-label="Пряме посилання на The model definition" title="Пряме посилання на The model definition" translate="no">​</a></h3>
<p>Let's take a simple example of the <strong>Hierarchical RBAC</strong> model:</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[request_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r = sub, act, obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p = sub, act, obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[role_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g = _, _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g2 = _, _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_effect]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e = some(where (p.eft == allow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[matchers]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m = r.sub == p.sub &amp;&amp; g(p.act, r.act) &amp;&amp; g2(p.obj, r.obj)</span><br></span></code></pre></div></div>
<ol>
<li class="">The <strong>role_definition</strong> is a graph relation builder which uses a Graph to compare the request object with the policy object.</li>
</ol>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="now-lets-test-the-model-on-the-casbin-editor-1">Now let's test the model on the Casbin editor<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#now-lets-test-the-model-on-the-casbin-editor-1" class="hash-link" aria-label="Пряме посилання на Now let's test the model on the Casbin editor" title="Пряме посилання на Now let's test the model on the Casbin editor" translate="no">​</a></h3>
<p>Open the <a href="https://casbin.org/editor" target="_blank" rel="noopener noreferrer" class="">editor</a> and paste the above model in the Model editor.</p>
<p>Paste the following in the Policy editor:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">// subscription role to subscription action mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">// resourceGroup role to resourceGroup action mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">// subscription role to resourceGroup role mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-reader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">// subscription resource to resourceGroup resource mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg2</span><br></span></code></pre></div></div>
<p>And paste the following in the Request editor:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-read</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg1</span><br></span></code></pre></div></div>
<p>The result will be:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="visual-representation-of-the-rbac-model-policy-and-request-matching-1">Visual representation of the RBAC model, policy, and request matching<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#visual-representation-of-the-rbac-model-policy-and-request-matching-1" class="hash-link" aria-label="Пряме посилання на Visual representation of the RBAC model, policy, and request matching" title="Пряме посилання на Visual representation of the RBAC model, policy, and request matching" translate="no">​</a></h3>
<p><img decoding="async" loading="lazy" alt="hrbac" src="https://casbin.org/uk/assets/images/hrbac-1350d755e04234a34394996344d2b259.png" width="7968" height="4204" class="img_ev3q"></p>
<p>The <strong>g - Role to (Action, Role) Mapping</strong> table has a graph mapping the role to the action, role mapping. This graph can be coded as a list of edges, as shown in the policy, which is a common way of representing a graph:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">// subscription role to subscription action mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">// resourceGroup role to resourceGroup action mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">// subscription role to resourceGroup role mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-reader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub-owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg-owner</span><br></span></code></pre></div></div>
<p>The <strong>g2 - Sub to RG Mapping</strong> table has a graph mapping subscription to resourceGroup:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">// subscription resource to resourceGroup resource mapping</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> sub2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> rg2</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="subject-matching-visual-representation">Subject Matching Visual representation<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#subject-matching-visual-representation" class="hash-link" aria-label="Пряме посилання на Subject Matching Visual representation" title="Пряме посилання на Subject Matching Visual representation" translate="no">​</a></h4>
<p><img decoding="async" loading="lazy" alt="hrbac-sub-match" src="https://casbin.org/uk/assets/images/hrbac-sub-match-55dffd4e5fadb9773658dc90bacbb091.png" width="8176" height="4336" class="img_ev3q"></p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="action-matching-visual-representation">Action Matching Visual representation<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#action-matching-visual-representation" class="hash-link" aria-label="Пряме посилання на Action Matching Visual representation" title="Пряме посилання на Action Matching Visual representation" translate="no">​</a></h4>
<p><img decoding="async" loading="lazy" alt="hrbac-act-match" src="https://casbin.org/uk/assets/images/hrbac-act-match-bbb086158782591771f2df01419dc4b8.png" width="7964" height="4376" class="img_ev3q"></p>
<h4 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="object-matching-visual-representation">Object Matching Visual representation<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#object-matching-visual-representation" class="hash-link" aria-label="Пряме посилання на Object Matching Visual representation" title="Пряме посилання на Object Matching Visual representation" translate="no">​</a></h4>
<p><img decoding="async" loading="lazy" alt="hrbac-obj-match" src="https://casbin.org/uk/assets/images/hrbac-obj-match-aad370d5cbfe1020ec108b9242f8d4bd.png" width="7964" height="4296" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>інформація</div><div class="admonitionContent_BuS1"><p>When a request is submitted to Casbin, this matching happens for all the policies. If at least one policy matches, then the result of the request is true. If no policy matches the request, then the result is false.</p></div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="conclusion">Conclusion<a href="https://casbin.org/uk/blog/2023/12/08/understanding-casbin-matching-in-detail#conclusion" class="hash-link" aria-label="Пряме посилання на Conclusion" title="Пряме посилання на Conclusion" translate="no">​</a></h2>
<p>In this tutorial, we learned about how different authorization models work and how they can be modeled using Casbin. In the second part of this tutorial, we will implement this in a demo Spring Boot Application and secure the APIs using Casbin.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Авторизація в APISIX за допомогою Casbin]]></title>
            <link>https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization</link>
            <guid>https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization</guid>
            <pubDate>Thu, 19 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Вступ]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="вступ">Вступ<a href="https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization#%D0%B2%D1%81%D1%82%D1%83%D0%BF" class="hash-link" aria-label="Пряме посилання на Вступ" title="Пряме посилання на Вступ" translate="no">​</a></h2>
<p><a href="https://apisix.apache.org/" target="_blank" rel="noopener noreferrer" class="">APISIX</a> - це високопродуктивний та масштабований хмарний нативний API шлюз на основі Nginx та etcd. Це відкритий проект Фонду Apache Software. Крім того, те, що робить APISIX таким хорошим, - це підтримка багатьох вбудованих плагінів, які можна використовувати для реалізації функцій, таких як аутентифікація, моніторинг, маршрутизація тощо. І той факт, що плагіни в APISIX можна гаряче перезавантажувати (без перезапусків), робить його дуже динамічним.</p>
<p>Але, використовуючи APISIX, можуть виникнути сценарії, коли вам може знадобитися додати складну логіку авторизації у ваш додаток. Саме тут може допомогти authz-casbin, authz-casbin - це плагін APISIX на основі <a href="https://github.com/casbin/lua-casbin/" target="_blank" rel="noopener noreferrer" class="">Lua Casbin</a>, який забезпечує потужну авторизацію на основі різних моделей контролю доступу. <a class="" href="https://casbin.org/uk/">Casbin</a> - це бібліотека авторизації, яка підтримує моделі контролю доступу, такі як ACL, RBAC, ABAC. Спочатку написаний на Go, він був портований на багато мов, і Lua Casbin - це реалізація Casbin на Lua. Розробка authz-casbin почалася, коли ми запропонували новий плагін для авторизації в репозиторії APISIX (<a href="https://github.com/apache/apisix/issues/4674" target="_blank" rel="noopener noreferrer" class="">#4674</a>), з яким погодилися основні члени. І після корисних відгуків, які призвели до деяких важливих змін та поліпшень, PR (<a href="https://github.com/apache/apisix/pull/4710" target="_blank" rel="noopener noreferrer" class="">#4710</a>) було нарешті злито.</p>
<p>У цьому блозі ми використаємо плагін authz-casbin, щоб показати, як ви можете реалізувати модель авторизації на основі контролю доступу на основі ролей (RBAC) в APISIX.</p>
<p><strong>ПРИМІТКА</strong>: Вам потрібно буде використовувати якийсь інший плагін або власний робочий процес для аутентифікації користувача, оскільки Casbin здійснює лише авторизацію, а не аутентифікацію.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="створення-моделі">Створення моделі<a href="https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization#%D1%81%D1%82%D0%B2%D0%BE%D1%80%D0%B5%D0%BD%D0%BD%D1%8F-%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%96" class="hash-link" aria-label="Пряме посилання на Створення моделі" title="Пряме посилання на Створення моделі" translate="no">​</a></h2>
<p>Плагін використовує три параметри для авторизації будь-якого запиту - суб'єкт, об'єкт та дія. Тут суб'єкт - це значення заголовка username, яке може бути чимось на кшталт <code>[username: alice]</code>. Тоді об'єкт - це URL-шлях, який доступний, а дія - це використовуваний метод запиту.</p>
<p>Припустимо, ми хочемо створити модель з трьома ресурсами на шляхах - <code>/</code>, <code>/res1</code> та <code>/res2</code>. І ми хочемо мати модель наступного вигляду:</p>
<p><img decoding="async" loading="lazy" alt="зображення" src="https://casbin.org/uk/assets/images/model-1c0c2441dd19f8b957744635985283eb.png" width="4520" height="1720" class="img_ev3q"></p>
<p>Це означало б, що всі користувачі (<code>*</code>), наприклад <code>jack</code>, можуть отримати доступ до домашньої сторінки (<code>/</code>). І користувачі з дозволами <code>admin</code>, такі як <code>alice</code> та <code>bob</code>, можуть отримати доступ до всіх сторінок та ресурсів (наприклад, <code>res1</code> та <code>res2</code>). Також давайте обмежимо користувачів без дозволів адміністратора використанням лише методу запиту <code>GET</code>. Для цього сценарію ми могли б визначити модель як:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">request_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">r</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">sub, obj, act</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">p</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">sub, obj, act</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">role_definition</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">g</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">_, _</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">policy_effect</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">e</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">some(where (p.eft == allow))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token section punctuation" style="color:#393A34">[</span><span class="token section section-name selector" style="color:#00009f">matchers</span><span class="token section punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key attr-name" style="color:#00a4db">m</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token value attr-value" style="color:#e3116c">(g(r.sub, p.sub) || keyMatch(r.sub, p.sub)) &amp;&amp; keyMatch(r.obj, p.obj) &amp;&amp; keyMatch(r.act, p.act)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="створення-політики">Створення політики<a href="https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization#%D1%81%D1%82%D0%B2%D0%BE%D1%80%D0%B5%D0%BD%D0%BD%D1%8F-%D0%BF%D0%BE%D0%BB%D1%96%D1%82%D0%B8%D0%BA%D0%B8" class="hash-link" aria-label="Пряме посилання на Створення політики" title="Пряме посилання на Створення політики" translate="no">​</a></h2>
<p>Згідно з вищезазначеним сценарієм, політика була б такою:</p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> *</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> /</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> GET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> admin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> *</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> *</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> alice</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> admin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token value">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> bob</span><span class="token punctuation" style="color:#393A34">,</span><span class="token value"> admin</span><br></span></code></pre></div></div>
<p>Матчер з моделі означає:</p>
<ol>
<li class=""><code>(g(r.sub, p.sub) || keyMatch(r.sub, p.sub))</code>: Або суб'єкт запиту має роль, як у суб'єкта політики, або суб'єкт запиту відповідає суб'єкту політики у <code>keyMatch</code>. <code>keyMatch</code> - це вбудована функція в Lua Casbin, ви можете ознайомитися з описом функції та іншими корисними функціями <a href="https://github.com/casbin/lua-casbin/blob/master/src/util/BuiltInFunctions.lua" target="_blank" rel="noopener noreferrer" class="">тут</a>.</li>
<li class=""><code>keyMatch(r.obj, p.obj)</code>: Об'єкт запиту відповідає об'єкту політики (тут URL-шлях).</li>
<li class=""><code>keyMatch(r.act, p.act)</code>: Дія запиту відповідає дії політики (тут метод HTTP-запиту).</li>
</ol>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="увімкнення-плагіна-на-маршруті">Увімкнення плагіна на маршруті<a href="https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization#%D1%83%D0%B2%D1%96%D0%BC%D0%BA%D0%BD%D0%B5%D0%BD%D0%BD%D1%8F-%D0%BF%D0%BB%D0%B0%D0%B3%D1%96%D0%BD%D0%B0-%D0%BD%D0%B0-%D0%BC%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%D1%96" class="hash-link" aria-label="Пряме посилання на Увімкнення плагіна на маршруті" title="Пряме посилання на Увімкнення плагіна на маршруті" translate="no">​</a></h2>
<p>Після створення моделі та політики ви можете увімкнути їх на маршруті, використовуючи APISIX Admin API. Щоб увімкнути їх, використовуючи шляхи до файлів моделі та політики:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://127.0.0.1:9080/apisix/admin/routes/1 -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d '</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "plugins": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "authz-casbin": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "model_path": "/path/to/model.conf",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "policy_path": "/path/to/policy.csv",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "username": "username"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "upstream": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "nodes": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "127.0.0.1:1980": 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "type": "roundrobin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "uri": "/*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}'</span><br></span></code></pre></div></div>
<p>Тут поле username - це назва заголовка, яку ви будете використовувати для передачі суб'єкта. Наприклад, якщо ви будете передавати заголовок username як <code>user: alice</code>, ви використовували б <code>"username": "user"</code>.</p>
<p>Для використання тексту моделі/політики замість файлів, ви можете використовувати поля <code>model</code> та <code>policy</code>:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://127.0.0.1:9080/apisix/admin/routes/1 -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d '</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "plugins": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "authz-casbin": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "model": "[request_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            r = sub, obj, act</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [policy_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            p = sub, obj, act</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [role_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            g = _, _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [policy_effect]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e = some(where (p.eft == allow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [matchers]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            m = (g(r.sub, p.sub) || keyMatch(r.sub, p.sub)) &amp;&amp; keyMatch(r.obj, p.obj) &amp;&amp; keyMatch(r.act, p.act)",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "policy": "p, *, /, GET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            p, admin, *, *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            g, alice, admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            g, bob, admin",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "username": "username"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "upstream": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "nodes": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "127.0.0.1:1980": 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "type": "roundrobin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "uri": "/*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}'</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="увімкнення-плагіна-за-допомогою-глобальної-моделіполітики">Увімкнення плагіна за допомогою глобальної моделі/політики<a href="https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization#%D1%83%D0%B2%D1%96%D0%BC%D0%BA%D0%BD%D0%B5%D0%BD%D0%BD%D1%8F-%D0%BF%D0%BB%D0%B0%D0%B3%D1%96%D0%BD%D0%B0-%D0%B7%D0%B0-%D0%B4%D0%BE%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%BE%D1%8E-%D0%B3%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%97-%D0%BC%D0%BE%D0%B4%D0%B5%D0%BB%D1%96%D0%BF%D0%BE%D0%BB%D1%96%D1%82%D0%B8%D0%BA%D0%B8" class="hash-link" aria-label="Пряме посилання на Увімкнення плагіна за допомогою глобальної моделі/політики" title="Пряме посилання на Увімкнення плагіна за допомогою глобальної моделі/політики" translate="no">​</a></h2>
<p>Можуть бути ситуації, коли ви захочете використовувати одну модель та конфігурацію політики для кількох маршрутів. Ви можете зробити це, спочатку надіславши запит <code>PUT</code>, щоб додати конфігурацію моделі та політики до метаданих плагіна:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://127.0.0.1:9080/apisix/admin/plugin_metadata/authz-casbin -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -i -X PUT -d '</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"model": "[request_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">r = sub, obj, act</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p = sub, obj, act</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[role_definition]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g = _, _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[policy_effect]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e = some(where (p.eft == allow))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[matchers]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m = (g(r.sub, p.sub) || keyMatch(r.sub, p.sub)) &amp;&amp; keyMatch(r.obj, p.obj) &amp;&amp; keyMatch(r.act, p.act)",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"policy": "p, *, /, GET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p, admin, *, *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g, alice, admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">g, bob, admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}'</span><br></span></code></pre></div></div>
<p>А потім, щоб увімкнути ту саму конфігурацію на деякому маршруті, надішліть запит за допомогою Admin API:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl http://127.0.0.1:9080/apisix/admin/routes/1 -H 'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1' -X PUT -d '</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "plugins": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "authz-casbin": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "username": "username"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "upstream": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "nodes": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "127.0.0.1:1980": 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "type": "roundrobin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "uri": "/route1/*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}'</span><br></span></code></pre></div></div>
<p>Це додасть конфігурацію метаданих плагіна до маршруту. Ви також можете легко оновити конфігурацію метаданих плагіна, повторно надіславши запит до метаданих плагіна з оновленою моделлю та конфігурацією політики, плагін автоматично оновить усі маршрути, які використовують метадані плагіна.</p>
<h2 class="anchor anchorTargetHideOnScrollNavbar_vjPI" id="сценарії-використання">Сценарії використання<a href="https://casbin.org/uk/blog/2021/08/19/apisix-casbin-authorization#%D1%81%D1%86%D0%B5%D0%BD%D0%B0%D1%80%D1%96%D1%97-%D0%B2%D0%B8%D0%BA%D0%BE%D1%80%D0%B8%D1%81%D1%82%D0%B0%D0%BD%D0%BD%D1%8F" class="hash-link" aria-label="Пряме посилання на Сценарії використання" title="Пряме посилання на Сценарії використання" translate="no">​</a></h2>
<ul>
<li class="">Основний сценарій використання цього плагіна - це реалізація авторизації у ваших API. Ви можете легко додати цей плагін на будь-який маршрут API, який ви використовуєте з вашою моделлю авторизації та конфігурацією політики.</li>
<li class="">Якщо ви хочете мати одну модель авторизації для всіх ваших API, ви можете використовувати метод глобальної моделі/політики. Це полегшує оновлення політики для всіх маршрутів, оскільки вам потрібно лише оновити метадані в etcd.</li>
<li class="">Тоді як, якщо ви хочете використовувати різну модель для кожного окремого маршруту, ви можете використовувати метод маршруту. Це корисно, коли різні маршрути API мають різні набори дозволів користувачів. Ви також можете використовувати це, коли маєте справу з більшими політиками, оскільки це прискорить авторизацію, коли вона фільтрується на кілька маршрутів.</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Ян Луо - переможець Google Open Source Peer Bonus]]></title>
            <link>https://casbin.org/uk/blog/2020/04/21/google-award</link>
            <guid>https://casbin.org/uk/blog/2020/04/21/google-award</guid>
            <pubDate>Tue, 21 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Сьогодні ми раді оголосити, що засновник Casbin, Ян Луо отримав нагороду "Переможці Google Open Source Peer Bonus" за свою роботу над Casbin, Npcap та Nmap у 2019 Q3.]]></description>
            <content:encoded><![CDATA[<p>Сьогодні ми раді оголосити, що засновник Casbin, <a href="https://github.com/hsluoyz" target="_blank" rel="noopener noreferrer" class="">Ян Луо</a> отримав нагороду "Переможці Google Open Source Peer Bonus" за свою роботу над <a class="" href="https://casbin.org/uk/">Casbin</a>, <a href="https://nmap.org/npcap/" target="_blank" rel="noopener noreferrer" class="">Npcap</a> та <a href="https://nmap.org/" target="_blank" rel="noopener noreferrer" class="">Nmap</a> у 2019 Q3.</p>
<p><img decoding="async" loading="lazy" src="https://hsluoyz.github.io/download/Open%20Source%20Peer%20Bonus%20Q3%202019%20-%20Yang%20Luo%20-%20OSPB%20Award%20Letter.png" alt="ospb" class="img_ev3q"></p>
<blockquote>
<p>Оригінальний лист з нагородою можна переглянути <a href="https://github.com/hsluoyz/hsluoyz.github.io/blob/master/download/Open%20Source%20Peer%20Bonus%20Q3%202019%20-%20Yang%20Luo%20-%20OSPB%20Award%20Letter.pdf" target="_blank" rel="noopener noreferrer" class="">тут</a>.</p>
</blockquote>
<p>Програма <a href="https://opensource.google.com/docs/growing/peer-bonus/" target="_blank" rel="noopener noreferrer" class="">Google Open Source Peer Bonus</a> описана так:</p>
<blockquote>
<p><em>Так само, як Google Peer Bonus використовується для визнання колеги з Google, який зробив більше ніж очікувалося, Open Source Peer Bonus визнає зовнішніх людей, які зробили винятковий внесок у відкрите програмне забезпечення.</em></p>
</blockquote>
<p>Оголошення переможців за 2019 рік доступне за посиланням: <a href="https://opensource.googleblog.com/2020/01/announcing-2019-second-cycle-google.html" target="_blank" rel="noopener noreferrer" class="">announcement for the 2019 winners</a></p>
<blockquote>
<p><a href="https://opensource.googleblog.com/2020/01/announcing-2019-second-cycle-google.html" target="_blank" rel="noopener noreferrer" class="">https://opensource.googleblog.com/2020/01/announcing-2019-second-cycle-google.html</a></p>
</blockquote>
<p>Ян та Casbin згадані серед розробників відкритого коду та проектів, які мають значний вплив, таких як Git, TensorFlow, V8, CPython, LLVM, проекти Apache, Angular або Jenkins.</p>
<p>Ми раді бачити, що Casbin визнаний таким чином за його внесок у відкрите програмне забезпечення та безпеку хмарних обчислень!</p>
<p><em>Дякуємо, що літаєте з Casbin!</em></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Переробка нашої документації]]></title>
            <link>https://casbin.org/uk/blog/2018/09/23/new-website</link>
            <guid>https://casbin.org/uk/blog/2018/09/23/new-website</guid>
            <pubDate>Sun, 23 Sep 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Сьогодні ми перенесли документацію Casbin з GitHub Wiki на Docs цього веб-сайту, який працює на Docusaurus. Docusaurus надає багато чудових функцій, таких як кращі стилі Markdown, повнотекстовий пошук, версіонування, переклад.]]></description>
            <content:encoded><![CDATA[<p>Сьогодні ми перенесли документацію Casbin з GitHub Wiki на <code>Docs</code> цього веб-сайту, який працює на Docusaurus. Docusaurus надає багато чудових функцій, таких як кращі стилі Markdown, повнотекстовий пошук, версіонування, переклад.</p>
<p>Документація ще не ідеальна і потребує допрацювання. Вихідний код розміщено на GitHub: <a href="https://github.com/casbin/casbin-website-v2" target="_blank" rel="noopener noreferrer" class="">https://github.com/casbin/casbin-website-v2</a> .</p>
<p>Будь-який внесок або пропозиція вітається!</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[node-Casbin: Новий член сім'ї Casbin]]></title>
            <link>https://casbin.org/uk/blog/2018/08/27/node-casbin</link>
            <guid>https://casbin.org/uk/blog/2018/08/27/node-casbin</guid>
            <pubDate>Mon, 27 Aug 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Сьогодні ми успішно портували Casbin на Node.js, який називається: node-Casbin.]]></description>
            <content:encoded><![CDATA[<p>Сьогодні ми успішно портували Casbin на Node.js, який називається: <a href="https://github.com/casbin/node-casbin" target="_blank" rel="noopener noreferrer" class="">node-Casbin</a>.</p>
<p><strong>node-Casbin</strong> має схожий спосіб використання та API з іншими реалізаціями Casbin. Проміжне програмне забезпечення для Express, Koa2 та Egg.js готове до використання. Також підготовлено адаптер зберігання для Sequelize.</p>
<p>Сподіваємося, що воно добре задовольнить ваші потреби :)</p>
<p>GitHub: <a href="https://github.com/casbin/node-casbin" target="_blank" rel="noopener noreferrer" class="">https://github.com/casbin/node-casbin</a></p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Запущено Casbin Server!]]></title>
            <link>https://casbin.org/uk/blog/2018/08/07/launching-casbin-server</link>
            <guid>https://casbin.org/uk/blog/2018/08/07/launching-casbin-server</guid>
            <pubDate>Tue, 07 Aug 2018 00:00:00 GMT</pubDate>
            <description><![CDATA[Деякі наші клієнти запитують, чи можна використовувати Casbin як сервіс замість бібліотеки. Відповідь - ТАК. Сьогодні ми запустили проект Casbin Server як конкретне рішення для Контролю Доступу як Сервісу.]]></description>
            <content:encoded><![CDATA[<p>Деякі наші клієнти запитують, чи можна використовувати Casbin як сервіс замість бібліотеки. Відповідь - <strong>ТАК</strong>. Сьогодні ми запустили проект <a href="https://github.com/casbin/casbin-server" target="_blank" rel="noopener noreferrer" class="">Casbin Server</a> як конкретне рішення для <strong>Контролю Доступу як Сервісу</strong>.</p>
<p><strong>Casbin Server</strong> активно розробляється нашою основною командою. Він має кілька особливостей:</p>
<ul>
<li class="">Розроблений виключно на Golang.</li>
<li class="">Може управляти тисячами інстанцій Casbin, тому ви можете перенести логіку контролю політик з кількох сервісів в один Casbin Server.</li>
<li class=""><strong>gRPC</strong> використовується для зв'язку з Casbin Server. Ми також розглядаємо можливість додати підтримку <strong>RESTful</strong> у найближчому майбутньому.</li>
<li class="">Дружній веб-портал адміністратора надається для адміністраторів, які не є розробниками, для управління всіма деталями, такими як інстанції Casbin, моделі, зберігання політик та балансування навантаження.</li>
</ul>
<p>Вихідний код розміщено на GitHub: <a href="https://github.com/casbin/casbin-server" target="_blank" rel="noopener noreferrer" class="">https://github.com/casbin/casbin-server</a></p>
<p>Будь-які проблеми чи запити на злиття вітаються :)</p>]]></content:encoded>
        </item>
    </channel>
</rss>