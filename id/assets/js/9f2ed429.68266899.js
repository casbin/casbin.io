"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[4434],{4701:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"priority-model","title":"Priority Model","description":"Model Prioritas Casbin untuk mengelola kebijakan dengan prioritas berbeda","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/PriorityModel.mdx","sourceDirName":".","slug":"/priority-model","permalink":"/id/docs/priority-model","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx","tags":[],"version":"current","frontMatter":{"id":"priority-model","title":"Priority Model","description":"Model Prioritas Casbin untuk mengelola kebijakan dengan prioritas berbeda","keywords":["priority model"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"OrBAC","permalink":"/id/docs/orbac"},"next":{"title":"Usage Control (UCON)","permalink":"/id/docs/ucon"}}');var r=n(4848),t=n(8453);const o={id:"priority-model",title:"Priority Model",description:"Model Prioritas Casbin untuk mengelola kebijakan dengan prioritas berbeda",keywords:["priority model"],authors:["hsluoyz"]},s=void 0,d={},l=[{value:"Muat Kebijakan dengan Prioritas Implisit",id:"muat-kebijakan-dengan-prioritas-implisit",level:2},{value:"Muat Kebijakan dengan Prioritas Eksplisit",id:"muat-kebijakan-dengan-prioritas-eksplisit",level:2},{value:"Muat Kebijakan dengan Prioritas Berdasarkan Peran dan Hierarki Pengguna",id:"muat-kebijakan-dengan-prioritas-berdasarkan-peran-dan-hierarki-pengguna",level:2}];function c(e){const a={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{children:"Casbin mendukung pemuatan kebijakan dengan prioritas."}),"\n",(0,r.jsx)(a.h2,{id:"muat-kebijakan-dengan-prioritas-implisit",children:"Muat Kebijakan dengan Prioritas Implisit"}),"\n",(0,r.jsx)(a.p,{children:"Ini cukup sederhana: urutan menentukan prioritas; kebijakan yang muncul lebih awal memiliki prioritas lebih tinggi."}),"\n",(0,r.jsx)(a.p,{children:"model.conf:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ini",children:"[policy_effect]\ne = priority(p.eft) || deny\n"})}),"\n",(0,r.jsx)(a.h2,{id:"muat-kebijakan-dengan-prioritas-eksplisit",children:"Muat Kebijakan dengan Prioritas Eksplisit"}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsxs)(a.p,{children:["Lihat juga: ",(0,r.jsx)(a.a,{href:"https://github.com/casbin/casbin/issues/550",children:"casbin#550"})]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"Nilai prioritas yang lebih kecil menunjukkan prioritas yang lebih tinggi. Jika ada karakter non-numerik dalam prioritas, itu akan ditempatkan terakhir alih-alih melempar kesalahan."}),"\n",(0,r.jsxs)(a.admonition,{title:"Konvensi nama token",type:"info",children:[(0,r.jsxs)(a.p,{children:['Nama token prioritas yang biasa digunakan dalam definisi kebijakan adalah "priority". Untuk menggunakan yang kustom, Anda perlu memanggil ',(0,r.jsx)(a.code,{children:"e.SetFieldIndex()"})," dan memuat ulang kebijakan (lihat contoh lengkap di ",(0,r.jsx)(a.a,{href:"https://github.com/casbin/casbin/pull/1044",children:"TestCustomizedFieldIndex"}),")."]}),(0,r.jsx)(a.p,{children:"model.conf:"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ini",children:"[policy_definition]\np = customized_priority, sub, obj, act, eft\n"})}),(0,r.jsx)(a.p,{children:"Contoh kode Golang:"}),(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-go",children:'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'})})]}),"\n",(0,r.jsxs)(a.p,{children:["Saat ini, prioritas eksplisit hanya mendukung ",(0,r.jsx)(a.code,{children:"AddPolicy"})," & ",(0,r.jsx)(a.code,{children:"AddPolicies"}),". Jika ",(0,r.jsx)(a.code,{children:"UpdatePolicy"})," telah dipanggil, Anda sebaiknya tidak mengubah atribut prioritas."]}),"\n",(0,r.jsx)(a.p,{children:"model.conf:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n"})}),"\n",(0,r.jsx)(a.p,{children:"policy.csv"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-csv",children:"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n"})}),"\n",(0,r.jsx)(a.p,{children:"permintaan:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-csv",children:"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority \n"})}),"\n",(0,r.jsx)(a.h2,{id:"muat-kebijakan-dengan-prioritas-berdasarkan-peran-dan-hierarki-pengguna",children:"Muat Kebijakan dengan Prioritas Berdasarkan Peran dan Hierarki Pengguna"}),"\n",(0,r.jsxs)(a.p,{children:["Struktur yang diwariskan dari peran dan pengguna hanya bisa berupa beberapa pohon, bukan graf. Jika seorang pengguna memiliki beberapa peran, Anda harus memastikan bahwa pengguna tersebut memiliki tingkat yang sama dalam pohon yang berbeda. Jika dua peran memiliki tingkat yang sama, kebijakan (yang terkait dengan peran) yang muncul lebih awal memiliki prioritas lebih tinggi. Untuk detail lebih lanjut, lihat juga ",(0,r.jsx)(a.a,{href:"https://github.com/casbin/casbin/pull/833",children:"casbin#833"})," dan ",(0,r.jsx)(a.a,{href:"https://github.com/casbin/casbin/issues/831",children:"casbin#831"}),"."]}),"\n",(0,r.jsx)(a.p,{children:"model.conf:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n"})}),"\n",(0,r.jsx)(a.p,{children:"policy.csv"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-csv",children:"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n"})}),"\n",(0,r.jsx)(a.p,{children:"Permintaan:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-csv",children:"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n"})}),"\n",(0,r.jsx)(a.p,{children:"Hierarki peran tampak seperti ini:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-text",children:"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n"})}),"\n",(0,r.jsx)(a.p,{children:"Prioritas otomatis tampak seperti ini:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-text",children:"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n"})})]})}function p(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>o,x:()=>s});var i=n(6540);const r={},t=i.createContext(r);function o(e){const a=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:a},e.children)}}}]);