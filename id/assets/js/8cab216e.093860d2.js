"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[2530],{3905:(a,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>k});var i=n(7294);function t(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function r(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.push.apply(n,i)}return n}function l(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){t(a,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))}))}return a}function p(a,e){if(null==a)return{};var n,i,t=function(a,e){if(null==a)return{};var n,i,t={},r=Object.keys(a);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(t[n]=a[n]);return t}(a,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}var m=i.createContext({}),d=function(a){var e=i.useContext(m),n=e;return a&&(n="function"==typeof a?a(e):l(l({},e),a)),n},u=function(a){var e=d(a.components);return i.createElement(m.Provider,{value:e},a.children)},o={inlineCode:"code",wrapper:function(a){var e=a.children;return i.createElement(i.Fragment,{},e)}},s=i.forwardRef((function(a,e){var n=a.components,t=a.mdxType,r=a.originalType,m=a.parentName,u=p(a,["components","mdxType","originalType","parentName"]),s=d(n),k=t,g=s["".concat(m,".").concat(k)]||s[k]||o[k]||r;return n?i.createElement(g,l(l({ref:e},u),{},{components:n})):i.createElement(g,l({ref:e},u))}));function k(a,e){var n=arguments,t=e&&e.mdxType;if("string"==typeof a||t){var r=n.length,l=new Array(r);l[0]=s;var p={};for(var m in e)hasOwnProperty.call(e,m)&&(p[m]=e[m]);p.originalType=a,p.mdxType="string"==typeof a?a:t,l[1]=p;for(var d=2;d<r;d++)l[d]=n[d];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}s.displayName="MDXCreateElement"},4727:(a,e,n)=>{n.r(e),n.d(e,{assets:()=>m,contentTitle:()=>l,default:()=>o,frontMatter:()=>r,metadata:()=>p,toc:()=>d});var i=n(7462),t=(n(7294),n(3905));const r={id:"rbac",title:"RBAC",description:"Penggunaan Casbin RBAC",keywords:["RBAC","role definition","role hierarchy"],authors:["hsluoyz"]},l=void 0,p={unversionedId:"rbac",id:"rbac",title:"RBAC",description:"Penggunaan Casbin RBAC",source:"@site/i18n/id/docusaurus-plugin-content-docs/current/RBAC.mdx",sourceDirName:".",slug:"/rbac",permalink:"/id/docs/rbac",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBAC.mdx",tags:[],version:"current",frontMatter:{id:"rbac",title:"RBAC",description:"Penggunaan Casbin RBAC",keywords:["RBAC","role definition","role hierarchy"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Functions",permalink:"/id/docs/function"},next:{title:"RBAC with Pattern",permalink:"/id/docs/rbac-with-pattern"}},m={},d=[{value:"Definisi Peran",id:"definisi-peran",level:2},{value:"Hierarki Peran",id:"hierarki-peran",level:2},{value:"Bagaimana Membedakan Peran dari Pengguna?",id:"bagaimana-membedakan-peran-dari-pengguna",level:2},{value:"Bagaimana Meminta Peran atau Izin Implisit?",id:"bagaimana-meminta-peran-atau-izin-implisit",level:2},{value:"Menggunakan Pencocokan Pola dalam RBAC",id:"menggunakan-pencocokan-pola-dalam-rbac",level:2},{value:"Manajer Peran",id:"manajer-peran",level:2}],u={toc:d};function o(a){let{components:e,...n}=a;return(0,t.kt)("wrapper",(0,i.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,t.kt)("h2",{id:"definisi-peran"},"Definisi Peran"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"[role_definition]")," digunakan untuk mendefinisikan hubungan pewarisan peran RBAC. Casbin mendukung beberapa instance sistem RBAC, di mana pengguna dapat memiliki peran dan hubungan pewarisannya, dan sumber daya juga dapat memiliki peran dan hubungan pewarisannya. Kedua sistem RBAC ini tidak akan mengganggu satu sama lain."),(0,t.kt)("p",null,"Bagian ini bersifat opsional. Jika Anda tidak menggunakan peran RBAC dalam model, maka lewati bagian ini."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-ini"},"[role_definition]\ng = _, _\ng2 = _, _\n")),(0,t.kt)("p",null,"Definisi peran di atas menunjukkan bahwa ",(0,t.kt)("inlineCode",{parentName:"p"},"g")," adalah sistem RBAC, dan ",(0,t.kt)("inlineCode",{parentName:"p"},"g2")," adalah sistem RBAC lainnya. ",(0,t.kt)("inlineCode",{parentName:"p"},"_,_")," berarti ada dua pihak yang terlibat dalam hubungan pewarisan. Dalam kasus yang paling umum, Anda biasanya menggunakan ",(0,t.kt)("inlineCode",{parentName:"p"},"g")," sendiri jika Anda hanya memerlukan peran untuk pengguna. Anda juga dapat menggunakan ",(0,t.kt)("inlineCode",{parentName:"p"},"g")," dan ",(0,t.kt)("inlineCode",{parentName:"p"},"g2")," ketika Anda memerlukan peran (atau grup) untuk pengguna dan sumber daya. Silakan lihat ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/examples/rbac_model.conf"},"rbac","_","model.conf")," dan ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/examples/rbac_with_resource_roles_model.conf"},"rbac","_","model","_","with","_","resource","_","roles.conf")," untuk contoh."),(0,t.kt)("p",null,"Casbin menyimpan pemetaan peran pengguna aktual (atau pemetaan peran sumber daya jika Anda menggunakan peran pada sumber daya) dalam kebijakan. Sebagai contoh:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-csv"},"p, data2_admin, data2, read\ng, alice, data2_admin\n")),(0,t.kt)("p",null,"Ini berarti bahwa ",(0,t.kt)("inlineCode",{parentName:"p"},"alice")," mewarisi/menjadi anggota dari peran ",(0,t.kt)("inlineCode",{parentName:"p"},"data2_admin"),". Di sini, ",(0,t.kt)("inlineCode",{parentName:"p"},"alice")," bisa menjadi pengguna, sumber daya, atau peran. Casbin hanya mengenali itu sebagai sebuah string."),(0,t.kt)("p",null,"Kemudian, dalam sebuah matcher, Anda harus memeriksa peran seperti yang ditunjukkan di bawah ini:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-ini"},"[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n")),(0,t.kt)("p",null,"Ini berarti bahwa ",(0,t.kt)("inlineCode",{parentName:"p"},"sub")," dalam permintaan harus memiliki peran ",(0,t.kt)("inlineCode",{parentName:"p"},"sub")," dalam kebijakan."),(0,t.kt)("admonition",{type:"note"},(0,t.kt)("ol",{parentName:"admonition"},(0,t.kt)("li",{parentName:"ol"},"Casbin hanya menyimpan pemetaan pengguna-peran."),(0,t.kt)("li",{parentName:"ol"},"Casbin tidak memverifikasi apakah seorang pengguna adalah pengguna yang valid atau peran adalah peran yang valid. Itu harus diurus oleh autentikasi."),(0,t.kt)("li",{parentName:"ol"},"Jangan gunakan nama yang sama untuk pengguna dan peran dalam sistem RBAC, karena Casbin mengenali pengguna dan peran sebagai string, dan tidak ada cara bagi Casbin untuk mengetahui apakah Anda menentukan pengguna ",(0,t.kt)("inlineCode",{parentName:"li"},"alice")," atau peran ",(0,t.kt)("inlineCode",{parentName:"li"},"alice"),". Anda bisa menyelesaikannya dengan mudah dengan menggunakan ",(0,t.kt)("inlineCode",{parentName:"li"},"role_alice"),"."),(0,t.kt)("li",{parentName:"ol"},"Jika ",(0,t.kt)("inlineCode",{parentName:"li"},"A")," memiliki peran ",(0,t.kt)("inlineCode",{parentName:"li"},"B"),", dan ",(0,t.kt)("inlineCode",{parentName:"li"},"B")," memiliki peran ",(0,t.kt)("inlineCode",{parentName:"li"},"C"),", maka ",(0,t.kt)("inlineCode",{parentName:"li"},"A")," memiliki peran ",(0,t.kt)("inlineCode",{parentName:"li"},"C"),". Transitivity ini tak terbatas untuk saat ini."))),(0,t.kt)("admonition",{title:"Konvensi Nama Token",type:"info"},(0,t.kt)("p",{parentName:"admonition"},"Secara konvensional, nama token subjek dalam definisi kebijakan adalah ",(0,t.kt)("inlineCode",{parentName:"p"},"sub")," dan ditempatkan di awal. Sekarang, Golang Casbin mendukung nama token dan posisi yang disesuaikan. Jika nama token subjek adalah ",(0,t.kt)("inlineCode",{parentName:"p"},"sub"),", token subjek dapat ditempatkan di tempat yang sewenang-wenang tanpa perlu tindakan ekstra. Jika nama token subjek bukan ",(0,t.kt)("inlineCode",{parentName:"p"},"sub"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"e.SetFieldIndex()")," untuk ",(0,t.kt)("inlineCode",{parentName:"p"},"constant.SubjectIndex")," harus dipanggil setelah enforcer diinisialisasi, terlepas dari posisinya."),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre",className:"language-ini"},"# `subject` here is for sub\n[policy_definition]\np =  obj, act, subject\n")),(0,t.kt)("pre",{parentName:"admonition"},(0,t.kt)("code",{parentName:"pre",className:"language-go"},'e.SetFieldIndex("p", constant.SubjectIndex, 2) // index starts from 0\nok, err := e.DeleteUser("alice") // without SetFieldIndex, it will raise an error\n'))),(0,t.kt)("h2",{id:"hierarki-peran"},"Hierarki Peran"),(0,t.kt)("p",null,"RBAC Casbin mendukung fitur hierarki peran RBAC1, yang berarti jika ",(0,t.kt)("inlineCode",{parentName:"p"},"alice")," memiliki ",(0,t.kt)("inlineCode",{parentName:"p"},"role1"),", dan ",(0,t.kt)("inlineCode",{parentName:"p"},"role1")," memiliki ",(0,t.kt)("inlineCode",{parentName:"p"},"role2"),", maka ",(0,t.kt)("inlineCode",{parentName:"p"},"alice")," juga akan memiliki ",(0,t.kt)("inlineCode",{parentName:"p"},"role2")," dan mewarisi izin-izinnya."),(0,t.kt)("p",null,"Di sini, kita memiliki konsep yang disebut tingkat hierarki. Jadi, dalam contoh ini, tingkat hierarki adalah 2. Untuk manajer peran bawaan di Casbin, Anda dapat menentukan tingkat hierarki maksimum. Nilai defaultnya adalah 10. Ini berarti bahwa pengguna akhir seperti ",(0,t.kt)("inlineCode",{parentName:"p"},"alice")," hanya dapat mewarisi 10 tingkat peran."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-go"},"// NewRoleManager is the constructor for creating an instance of the\n// default RoleManager implementation.\nfunc NewRoleManager(maxHierarchyLevel int) rbac.RoleManager {\n    rm := RoleManager{}\n    rm.allRoles = &sync.Map{}\n    rm.maxHierarchyLevel = maxHierarchyLevel\n    rm.hasPattern = false\n\n    return &rm\n}\n")),(0,t.kt)("h2",{id:"bagaimana-membedakan-peran-dari-pengguna"},"Bagaimana Membedakan Peran dari Pengguna?"),(0,t.kt)("p",null,"Casbin tidak membedakan antara peran dan pengguna dalam RBAC-nya. Keduanya diperlakukan sebagai string. Jika Anda hanya menggunakan RBAC satu tingkat (di mana sebuah peran tidak akan pernah menjadi anggota dari peran lain), Anda dapat menggunakan ",(0,t.kt)("inlineCode",{parentName:"p"},"e.GetAllSubjects()")," untuk mendapatkan semua pengguna dan ",(0,t.kt)("inlineCode",{parentName:"p"},"e.GetAllRoles()")," untuk mendapatkan semua peran. Mereka akan mencantumkan semua ",(0,t.kt)("inlineCode",{parentName:"p"},"u")," dan semua ",(0,t.kt)("inlineCode",{parentName:"p"},"r"),", masing-masing, dalam semua aturan ",(0,t.kt)("inlineCode",{parentName:"p"},"g, u, r"),"."),(0,t.kt)("p",null,"Tetapi jika Anda menggunakan RBAC multi-tingkat (dengan hierarki peran) dan aplikasi Anda tidak mencatat apakah sebuah nama (string) adalah pengguna atau peran, atau Anda memiliki pengguna dan peran dengan nama yang sama, Anda dapat menambahkan awalan ke peran seperti ",(0,t.kt)("inlineCode",{parentName:"p"},"role::admin")," sebelum meneruskannya ke Casbin. Dengan cara ini, Anda akan tahu apakah itu adalah peran dengan memeriksa awalan ini."),(0,t.kt)("h2",{id:"bagaimana-meminta-peran-atau-izin-implisit"},"Bagaimana Meminta Peran atau Izin Implisit?"),(0,t.kt)("p",null,'Ketika pengguna mewarisi peran atau izin melalui hierarki RBAC alih-alih ditetapkan secara langsung dalam aturan kebijakan, kami menyebut jenis penetapan ini sebagai "implisit". Untuk menanyakan hubungan implisit tersebut, Anda perlu menggunakan dua API ini: ',(0,t.kt)("inlineCode",{parentName:"p"},"GetImplicitRolesForUser()")," dan ",(0,t.kt)("inlineCode",{parentName:"p"},"GetImplicitPermissionsForUser()")," alih-alih ",(0,t.kt)("inlineCode",{parentName:"p"},"GetRolesForUser()")," dan ",(0,t.kt)("inlineCode",{parentName:"p"},"GetPermissionsForUser()"),". Untuk detail lebih lanjut, silakan lihat ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/137"},"issue GitHub ini"),"."),(0,t.kt)("h2",{id:"menggunakan-pencocokan-pola-dalam-rbac"},"Menggunakan Pencocokan Pola dalam RBAC"),(0,t.kt)("p",null,"Lihat ",(0,t.kt)("a",{parentName:"p",href:"/docs/rbac-with-pattern"},"RBAC dengan Pola")),(0,t.kt)("h2",{id:"manajer-peran"},"Manajer Peran"),(0,t.kt)("p",null,"Lihat bagian ",(0,t.kt)("a",{parentName:"p",href:"/docs/role-managers"},"Manajer Peran")," untuk detailnya."))}o.isMDXComponent=!0}}]);