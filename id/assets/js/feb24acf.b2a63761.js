"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[7306],{591:(a,n,e)=>{e.d(n,{A:()=>i});const i=e.p+"assets/images/editor-tips-2c4bf3155a73f079c976e5ad118d5518.png"},4928:(a,n,e)=>{e.r(n),e.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC dengan Pola","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx","sourceDirName":".","slug":"/rbac-with-pattern","permalink":"/id/docs/rbac-with-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC dengan Pola","keywords":["RBAC with pattern","pattern matching"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC","permalink":"/id/docs/rbac"},"next":{"title":"RBAC with Domains","permalink":"/id/docs/rbac-with-domains"}}');var d=e(4848),c=e(8453);const t={id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC dengan Pola",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},o=void 0,s={},r=[{value:"Mulai Cepat",id:"mulai-cepat",level:2},{value:"Gunakan pencocokan pola dalam RBAC",id:"gunakan-pencocokan-pola-dalam-rbac",level:2}];function l(a){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...a.components},{TabItem:i,Tabs:t}=n;return i||p("TabItem",!0),t||p("Tabs",!0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"mulai-cepat",children:"Mulai Cepat"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Gunakan pola dalam ",(0,d.jsx)(n.code,{children:"g(_, _)"}),"."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Gunakan pola dengan domain."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"Gunakan semua pola."}),"\n",(0,d.jsx)(n.p,{children:"Gabungkan penggunaan kedua API tersebut."}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Seperti yang ditunjukkan di atas, setelah Anda membuat instance ",(0,d.jsx)(n.code,{children:"enforcer"}),", Anda perlu mengaktifkan pencocokan pola melalui API ",(0,d.jsx)(n.code,{children:"AddNamedMatchingFunc"})," dan ",(0,d.jsx)(n.code,{children:"AddNamedDomainMatchingFunc"}),", yang menentukan bagaimana pola dicocokkan."]}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.p,{children:['If you use the online editor, You can add a pattern matching function by clicking the "Add Role Matching" button in the lower left corner.\n',(0,d.jsx)(n.img,{alt:"editor-tips",src:e(591).A+"",width:"690",height:"480"})]})}),"\n",(0,d.jsx)(n.h2,{id:"gunakan-pencocokan-pola-dalam-rbac",children:"Gunakan pencocokan pola dalam RBAC"}),"\n",(0,d.jsxs)(n.p,{children:["Terkadang, Anda ingin subjek, objek, atau domain/penyewa tertentu dengan pola tertentu secara otomatis diberikan peran. Fungsi pencocokan pola dalam RBAC dapat membantu Anda melakukannya. Fungsi pencocokan pola memiliki parameter dan nilai kembali yang sama dengan fungsi pencocok sebelumnya ",(0,d.jsx)(n.a,{href:"/docs/syntax-for-models#functions-in-matchers",children:"matcher function"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Fungsi pencocokan pola mendukung setiap parameter dari ",(0,d.jsx)(n.code,{children:"g"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Kita tahu bahwa biasanya RBAC diekspresikan sebagai ",(0,d.jsx)(n.code,{children:"g(r.sub, p.sub)"})," dalam pencocok. Kemudian kita dapat menggunakan kebijakan seperti:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csv",children:"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Jadi ",(0,d.jsx)(n.code,{children:"alice"})," dapat membaca semua buku termasuk ",(0,d.jsx)(n.code,{children:"book 1"})," dan ",(0,d.jsx)(n.code,{children:"book 2"}),". Tetapi bisa ada ribuan buku, dan sangat membosankan untuk menambahkan setiap buku ke peran buku (atau grup) dengan satu aturan kebijakan ",(0,d.jsx)(n.code,{children:"g"}),"."]}),"\n",(0,d.jsx)(n.p,{children:"Tetapi dengan fungsi pencocokan pola, Anda dapat menulis kebijakan hanya dengan satu baris:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csv",children:"g, /book/:id, book_group\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Casbin akan secara otomatis mencocokkan ",(0,d.jsx)(n.code,{children:"/book/1"})," dan ",(0,d.jsx)(n.code,{children:"/book/2"})," ke pola ",(0,d.jsx)(n.code,{children:"/book/:id"})," untuk Anda. Anda hanya perlu mendaftarkan fungsi dengan enforcer seperti:"]}),"\n",(0,d.jsxs)(t,{groupId:"langs",children:[(0,d.jsx)(i,{value:"Go",label:"Go",default:!0,children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,d.jsx)(i,{value:"Node.js",label:"Node.js",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,d.jsx)(n.p,{children:"Saat menggunakan fungsi pencocokan pola dalam domain/penyewa, Anda perlu mendaftarkan fungsi dengan enforcer dan model."}),"\n",(0,d.jsxs)(t,{groupId:"langs",children:[(0,d.jsx)(i,{value:"Go",label:"Go",default:!0,children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,d.jsx)(i,{value:"Node.js",label:"Node.js",children:(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-typescript",children:"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,d.jsxs)(n.p,{children:["Jika Anda tidak mengerti apa arti ",(0,d.jsx)(n.code,{children:"g(r.sub, p.sub, r.dom)"}),", silakan baca ",(0,d.jsx)(n.a,{href:"/docs/rbac-with-domains",children:"rbac-with-domains"}),". Singkatnya, ",(0,d.jsx)(n.code,{children:"g(r.sub, p.sub, r.dom)"})," akan memeriksa apakah pengguna ",(0,d.jsx)(n.code,{children:"r.sub"})," memiliki peran ",(0,d.jsx)(n.code,{children:"p.sub"})," dalam domain ",(0,d.jsx)(n.code,{children:"r.dom"}),". Jadi beginilah cara kerja matcher. Anda dapat melihat contoh lengkap ",(0,d.jsx)(n.a,{href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307",children:"di sini"}),"."]}),"\n",(0,d.jsx)(n.p,{children:"Selain sintaks pencocokan pola di atas, kita juga dapat menggunakan pola domain murni."}),"\n",(0,d.jsxs)(n.p,{children:["Misalnya, jika kita ingin ",(0,d.jsx)(n.code,{children:"sub"})," memiliki akses di berbagai domain, ",(0,d.jsx)(n.code,{children:"domain1"})," dan ",(0,d.jsx)(n.code,{children:"domain2"}),", kita dapat menggunakan pola domain murni:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-csv",children:"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Dalam contoh ini, kita ingin ",(0,d.jsx)(n.code,{children:"alice"})," membaca dan menulis ",(0,d.jsx)(n.code,{children:"data"})," di domain1 dan domain2. Pencocokan pola ",(0,d.jsx)(n.code,{children:"*"})," di ",(0,d.jsx)(n.code,{children:"g"})," membuat ",(0,d.jsx)(n.code,{children:"alice"})," memiliki akses ke dua domain."]}),"\n",(0,d.jsxs)(n.p,{children:["Dengan menggunakan pencocokan pola, terutama dalam skenario yang lebih rumit dan memiliki banyak domain atau objek untuk dipertimbangkan, kita dapat mengimplementasikan ",(0,d.jsx)(n.code,{children:"policy_definition"})," dengan cara yang lebih elegan dan efektif."]})]})}function u(a={}){const{wrapper:n}={...(0,c.R)(),...a.components};return n?(0,d.jsx)(n,{...a,children:(0,d.jsx)(l,{...a})}):l(a)}function p(a,n){throw new Error("Expected "+(n?"component":"object")+" `"+a+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(a,n,e)=>{e.d(n,{R:()=>t,x:()=>o});var i=e(6540);const d={},c=i.createContext(d);function t(a){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof a?a(n):{...n,...a}},[n,a])}function o(a){let n;return n=a.disableParentContext?"function"==typeof a.components?a.components(d):a.components||d:t(a.components),i.createElement(c.Provider,{value:n},a.children)}}}]);