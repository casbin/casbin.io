"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[4850],{3905:(a,n,e)=>{e.d(n,{Zo:()=>u,kt:()=>m});var t=e(7294);function i(a,n,e){return n in a?Object.defineProperty(a,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[n]=e,a}function r(a,n){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable}))),e.push.apply(e,t)}return e}function s(a){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?r(Object(e),!0).forEach((function(n){i(a,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(e,n))}))}return a}function l(a,n){if(null==a)return{};var e,t,i=function(a,n){if(null==a)return{};var e,t,i={},r=Object.keys(a);for(t=0;t<r.length;t++)e=r[t],n.indexOf(e)>=0||(i[e]=a[e]);return i}(a,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);for(t=0;t<r.length;t++)e=r[t],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(a,e)&&(i[e]=a[e])}return i}var o=t.createContext({}),d=function(a){var n=t.useContext(o),e=n;return a&&(e="function"==typeof a?a(n):s(s({},n),a)),e},u=function(a){var n=d(a.components);return t.createElement(o.Provider,{value:n},a.children)},p={inlineCode:"code",wrapper:function(a){var n=a.children;return t.createElement(t.Fragment,{},n)}},k=t.forwardRef((function(a,n){var e=a.components,i=a.mdxType,r=a.originalType,o=a.parentName,u=l(a,["components","mdxType","originalType","parentName"]),k=d(e),m=i,c=k["".concat(o,".").concat(m)]||k[m]||p[m]||r;return e?t.createElement(c,s(s({ref:n},u),{},{components:e})):t.createElement(c,s({ref:n},u))}));function m(a,n){var e=arguments,i=n&&n.mdxType;if("string"==typeof a||i){var r=e.length,s=new Array(r);s[0]=k;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=a,l.mdxType="string"==typeof a?a:i,s[1]=l;for(var d=2;d<r;d++)s[d]=e[d];return t.createElement.apply(null,s)}return t.createElement.apply(null,e)}k.displayName="MDXCreateElement"},5420:(a,n,e)=>{e.r(n),e.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var t=e(7462),i=(e(7294),e(3905));const r={id:"frontend",title:"Frontend Usage",description:"Casbin.js adalah addon Casbin yang memudahkan manajemen kontrol akses Anda dalam aplikasi frontend.",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},s=void 0,l={unversionedId:"frontend",id:"frontend",title:"Frontend Usage",description:"Casbin.js adalah addon Casbin yang memudahkan manajemen kontrol akses Anda dalam aplikasi frontend.",source:"@site/i18n/id/docusaurus-plugin-content-docs/current/FrontendUsage.mdx",sourceDirName:".",slug:"/frontend",permalink:"/id/docs/frontend",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/FrontendUsage.mdx",tags:[],version:"current",frontMatter:{id:"frontend",title:"Frontend Usage",description:"Casbin.js adalah addon Casbin yang memudahkan manajemen kontrol akses Anda dalam aplikasi frontend.",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Log & Error Handling",permalink:"/id/docs/log-error"},next:{title:"Editor",permalink:"/id/docs/category/editor"}},o={},d=[{value:"Instalasi",id:"instalasi",level:2},{value:"Middleware Frontend",id:"middleware-frontend",level:2},{value:"Mulai Cepat",id:"mulai-cepat",level:2},{value:"Objek Izin",id:"objek-izin",level:3},{value:"Penggunaan Lanjutan",id:"penggunaan-lanjutan",level:2},{value:"Daftar API",id:"daftar-api",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:3},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:3},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:3},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:3},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:3},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:3},{value:"Mengapa Casbin.js",id:"mengapa-casbinjs",level:2}],u={toc:d};function p(a){let{components:n,...e}=a;return(0,i.kt)("wrapper",(0,t.Z)({},u,e,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js"},"Casbin.js")," adalah addon Casbin yang memudahkan manajemen kontrol akses Anda dalam aplikasi frontend."),(0,i.kt)("h2",{id:"instalasi"},"Instalasi"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install casbin.js\nnpm install casbin\n")),(0,i.kt)("p",null,"atau"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add casbin.js\n")),(0,i.kt)("h2",{id:"middleware-frontend"},"Middleware Frontend"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Middleware"),(0,i.kt)("th",{parentName:"tr",align:null},"Tipe"),(0,i.kt)("th",{parentName:"tr",align:null},"Penulis"),(0,i.kt)("th",{parentName:"tr",align:null},"Deskripsi"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/react-authz"},"react-authz")),(0,i.kt)("td",{parentName:"tr",align:null},"React"),(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Pembungkus React untuk Casbin.js")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/daobeng/rbac-react"},"rbac-react")),(0,i.kt)("td",{parentName:"tr",align:null},"React"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/daobeng"},"@daobeng")),(0,i.kt)("td",{parentName:"tr",align:null},"Kontrol Akses Berbasis Peran di React menggunakan HOCs, CASL, dan Casbin.js")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/vue-authz"},"vue-authz")),(0,i.kt)("td",{parentName:"tr",align:null},"Vue"),(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Pembungkus Vue untuk Casbin.js")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/angular-authz"},"angular-authz")),(0,i.kt)("td",{parentName:"tr",align:null},"Angular"),(0,i.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,i.kt)("td",{parentName:"tr",align:null},"Pembungkus Angular untuk Casbin.js")))),(0,i.kt)("h2",{id:"mulai-cepat"},"Mulai Cepat"),(0,i.kt)("p",null,"Anda dapat menggunakan mode ",(0,i.kt)("inlineCode",{parentName:"p"},"manual")," di aplikasi frontend Anda dan mengatur izin kapan saja Anda inginkan."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'const casbinjs = require("casbin.js");\n// Set the user\'s permission:\n// He/She can read `data1` and `data2` objects and can write `data1` object\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Run casbin.js in manual mode, which requires you to set the permission manually.\nconst authorizer = new casbinjs.Authorizer("manual");\n')),(0,i.kt)("p",null,"Sekarang kita memiliki otorisator, ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizer"),". Kita dapat mendapatkan aturan izin dari itu dengan menggunakan API ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizer.can()")," dan ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizer.cannot()"),". Nilai kembalian dari kedua API ini adalah JavaScript Promises (",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises"},"detail di sini"),"), jadi kita harus menggunakan metode ",(0,i.kt)("inlineCode",{parentName:"p"},"then()")," dari nilai kembalian seperti ini:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.can("write", "data1");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you can write data1");\n    } else {\n        console.log("you cannot write data1");\n    }\n});\n// output: you can write data1\n')),(0,i.kt)("p",null,"API ",(0,i.kt)("inlineCode",{parentName:"p"},"cannot()")," digunakan dengan cara yang sama:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.cannot("read", "data2");\nresult.then((success, failed) => {\n    if (success) {\n        console.log("you cannot read data2");\n    } else {\n        console.log("you can read data2");\n    }\n});\n// output: you can read data2\n')),(0,i.kt)("p",null,"Dalam kode di atas, variabel ",(0,i.kt)("inlineCode",{parentName:"p"},"success")," dalam parameter berarti permintaan mendapatkan hasil tanpa melempar kesalahan dan tidak berarti bahwa aturan izin adalah ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),". Variabel ",(0,i.kt)("inlineCode",{parentName:"p"},"failed")," juga tidak terkait dengan aturan izin. Ini hanya masuk akal ketika ada yang salah dalam proses permintaan."),(0,i.kt)("p",null,"Anda dapat merujuk ke ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin-js/examples"},"contoh React")," kami untuk melihat penggunaan praktis Casbin.js."),(0,i.kt)("h3",{id:"objek-izin"},"Objek Izin"),(0,i.kt)("p",null,"Casbin.js akan menerima objek JSON untuk memanipulasi izin yang sesuai dengan pengunjung. Contohnya:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n')),(0,i.kt)("p",null,"Objek izin di atas menunjukkan bahwa pengunjung dapat ",(0,i.kt)("inlineCode",{parentName:"p"},"membaca")," objek ",(0,i.kt)("inlineCode",{parentName:"p"},"data1")," dan ",(0,i.kt)("inlineCode",{parentName:"p"},"data2"),", sedangkan mereka hanya dapat ",(0,i.kt)("inlineCode",{parentName:"p"},"menulis")," objek ",(0,i.kt)("inlineCode",{parentName:"p"},"data1"),"."),(0,i.kt)("h2",{id:"penggunaan-lanjutan"},"Penggunaan Lanjutan"),(0,i.kt)("p",null,"Casbin.js menyediakan solusi yang sempurna untuk mengintegrasikan manajemen akses-kontrol frontend Anda dengan layanan backend Casbin Anda."),(0,i.kt)("p",null,"Gunakan mode ",(0,i.kt)("inlineCode",{parentName:"p"},"auto")," dan tentukan titik akhir Anda saat menginisialisasi ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorizer")," Casbin.js, ini akan secara otomatis menyinkronkan izin dan memanipulasi status frontend."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const casbinjs = require('casbin.js');\n\n// Set your backend Casbin service URL\nconst authorizer = new casbinjs.Authorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// Set your visitor.\n// Casbin.js will automatically sync the permission with your backend Casbin service.\nauthorizer.setUser(\"Tom\");\n\n// Evaluate the permission\nresult = authorizer.can(\"read\", \"data1\");\nresult.then((success, failed) => {\n    if (success) {\n        // Some frontend procedure ...\n    }\n});\n")),(0,i.kt)("p",null,"Sejalan dengan itu, Anda perlu mengekspos antarmuka (misalnya RestAPI) untuk menghasilkan objek izin dan meneruskannya ke frontend. Di pengontrol API Anda, panggil ",(0,i.kt)("inlineCode",{parentName:"p"},"CasbinJsGetUserPermission")," untuk membangun objek izin. Berikut adalah contoh dalam Beego:"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Server endpoint Anda seharusnya mengembalikan sesuatu seperti"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // Get the visitor from the GET parameters. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the frontend.\n    c.ServeJSON()\n}\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Saat ini, API ",(0,i.kt)("inlineCode",{parentName:"p"},"CasbinJsGetPermissionForUser")," hanya didukung di Go Casbin dan Node-Casbin. Jika Anda ingin API ini didukung dalam bahasa lain, silakan ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js/issues"},"ajukan masalah")," atau tinggalkan komentar di bawah.")),(0,i.kt)("h2",{id:"daftar-api"},"Daftar API"),(0,i.kt)("h3",{id:"setpermissionpermission-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"setPermission(permission: string)")),(0,i.kt)("p",null,"Atur objek izin. Selalu digunakan dalam mode ",(0,i.kt)("inlineCode",{parentName:"p"},"manual"),"."),(0,i.kt)("h3",{id:"setuseruser-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"setUser(user: string)")),(0,i.kt)("p",null,"Atur identitas pengunjung dan perbarui izin. Selalu digunakan dalam mode ",(0,i.kt)("inlineCode",{parentName:"p"},"auto"),"."),(0,i.kt)("h3",{id:"canaction-string-object-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"can(action: string, object: string)")),(0,i.kt)("p",null,"Periksa apakah pengguna dapat melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,i.kt)("h3",{id:"cannotaction-string-object-string"},(0,i.kt)("inlineCode",{parentName:"h3"},"cannot(action: string, object: string)")),(0,i.kt)("p",null,"Periksa apakah pengguna ",(0,i.kt)("strong",{parentName:"p"},"tidak dapat")," melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,i.kt)("h3",{id:"canallaction-string-objects-arrayobject"},(0,i.kt)("inlineCode",{parentName:"h3"},"canAll(action: string, objects: Array<object>)")),(0,i.kt)("p",null,"Periksa apakah pengguna dapat melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("strong",{parentName:"p"},"semua")," objek dalam ",(0,i.kt)("inlineCode",{parentName:"p"},"objects"),"."),(0,i.kt)("h3",{id:"cananyaction-string-objects-arrayobject"},(0,i.kt)("inlineCode",{parentName:"h3"},"canAny(action: string, objects: Array<object>)")),(0,i.kt)("p",null,"Periksa apakah pengguna dapat melakukan ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," pada ",(0,i.kt)("strong",{parentName:"p"},"salah satu")," dari ",(0,i.kt)("inlineCode",{parentName:"p"},"objects"),"."),(0,i.kt)("h2",{id:"mengapa-casbinjs"},"Mengapa Casbin.js"),(0,i.kt)("p",null,"Orang-orang mungkin bertanya-tanya tentang perbedaan antara Node-Casbin dan Casbin.js. Singkatnya, Node-Casbin adalah inti dari Casbin yang diimplementasikan dalam lingkungan NodeJS, dan biasanya digunakan sebagai toolkit manajemen kontrol akses di ujung server. Casbin.js adalah pustaka frontend yang membantu Anda menggunakan Casbin untuk mengotorisasi pengguna halaman web Anda di sisi klien."),(0,i.kt)("p",null,"Biasanya, tidak tepat untuk langsung membangun layanan Casbin dan melakukan tugas otorisasi/penegakan di aplikasi web frontend karena masalah-masalah berikut:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Ketika seseorang menyalakan klien, enforcer akan diinisialisasi, dan akan menarik semua kebijakan dari lapisan persisten backend. Konkurensi tinggi dapat memberikan tekanan yang keras pada database dan menghabiskan banyak throughput jaringan."),(0,i.kt)("li",{parentName:"ol"},"Memuat semua kebijakan ke sisi klien dapat membawa risiko keamanan."),(0,i.kt)("li",{parentName:"ol"},"Sulit untuk memisahkan klien dan server serta memudahkan pengembangan yang lincah.")),(0,i.kt)("p",null,"Kita membutuhkan alat yang mempermudah proses penggunaan Casbin di frontend. Sebenarnya, inti dari Casbin.js adalah manipulasi izin pengguna saat ini di sisi klien. Seperti yang Anda sebutkan, Casbin.js melakukan fetch dari endpoint yang ditentukan. Prosedur ini akan menyinkronkan izin pengguna dengan layanan backend Casbin. Setelah memiliki data izin, pengembang dapat menggunakan antarmuka Casbin.js untuk mengelola perilaku pengguna di sisi frontend."),(0,i.kt)("p",null,"Casbin.js menghindari dua masalah yang disebutkan di atas: layanan Casbin tidak akan ditarik secara berulang, dan ukuran pesan yang dilewatkan antara klien dan server dikurangi. Kami juga menghindari menyimpan semua kebijakan di frontend. Pengguna hanya dapat mengakses izin mereka sendiri, tetapi tidak mengetahui tentang model kontrol akses dan izin pengguna lain. Selain itu, Casbin.js juga dapat secara efisien memisahkan klien dan server dalam manajemen otorisasi."))}p.isMDXComponent=!0}}]);