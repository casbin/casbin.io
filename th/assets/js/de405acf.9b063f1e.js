"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[7215],{2427(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>f,frontMatter:()=>r,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"effector","title":"Effector","description":"The Effector interface in Casbin","source":"@site/docs/Effector.mdx","sourceDirName":".","slug":"/effector","permalink":"/th/docs/effector","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/Effector.mdx","tags":[],"version":"current","frontMatter":{"id":"effector","title":"Effector","description":"The Effector interface in Casbin","keywords":["effector","Effect","MergeEffects"],"authors":["ErikQQY"]},"sidebar":"docs","previous":{"title":"Syntax for Models","permalink":"/th/docs/syntax-for-models"},"next":{"title":"Functions","permalink":"/th/docs/function"}}');var s=n(4848),i=n(8453);const r={id:"effector",title:"Effector",description:"The Effector interface in Casbin",keywords:["effector","Effect","MergeEffects"],authors:["ErikQQY"]},o=void 0,d={},l=[{value:"<code>MergeEffects()</code>",id:"mergeeffects",level:2}];function h(e){const t={admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{TabItem:n,Tabs:c}=t;return n||a("TabItem",!0),c||a("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"Effect"})," represents the result of a policy rule, and the ",(0,s.jsx)(t.code,{children:"Effector"})," is the interface for handling effects in Casbin."]}),"\n",(0,s.jsx)(t.h2,{id:"mergeeffects",children:(0,s.jsx)(t.code,{children:"MergeEffects()"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"MergeEffects()"})," function is used to merge all matching results collected by the enforcer into a single decision."]}),"\n",(0,s.jsx)(t.p,{children:"For example:"}),"\n",(0,s.jsx)(c,{groupId:"langs",children:(0,s.jsx)(n,{value:"Go",label:"Go",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-go",children:"Effect, explainIndex, err = e.MergeEffects(expr, effects, matches, policyIndex, policyLength)\n"})})})}),"\n",(0,s.jsx)(t.p,{children:"In this example:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"Effect"})," is the final decision that is merged by this function (initialized as ",(0,s.jsx)(t.code,{children:"Indeterminate"}),")."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"explainIndex"})," is the index of ",(0,s.jsx)(t.code,{children:"eft"})," (",(0,s.jsx)(t.code,{children:"Allow"})," or ",(0,s.jsx)(t.code,{children:"Deny"}),"), and it is initialized as ",(0,s.jsx)(t.code,{children:"-1"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"err"})," is used to check if the effect is supported."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"expr"})," is the string representation of the policy effects."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"effects"})," is an array of effects, which can be ",(0,s.jsx)(t.code,{children:"Allow"}),", ",(0,s.jsx)(t.code,{children:"Indeterminate"}),", or ",(0,s.jsx)(t.code,{children:"Deny"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"matches"})," is an array that indicates whether the result matches the policy."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"policyIndex"})," is the index of the policy in the model."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"policyLength"})," is the length of the policy."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The code above illustrates how to pass the parameters to the ",(0,s.jsx)(t.code,{children:"MergeEffects()"})," function, and the function will process the effects and matches based on the ",(0,s.jsx)(t.code,{children:"expr"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["To use the ",(0,s.jsx)(t.code,{children:"Effector"}),", follow these steps:"]}),"\n",(0,s.jsx)(c,{groupId:"langs",children:(0,s.jsx)(n,{value:"Go",label:"Go",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-go",children:"var e Effector\nEffect, explainIndex, err = e.MergeEffects(expr, effects, matches, policyIndex, policyLength)\n"})})})}),"\n",(0,s.jsxs)(t.p,{children:["The basic idea of ",(0,s.jsx)(t.code,{children:"MergeEffects()"})," is that if the ",(0,s.jsx)(t.code,{children:"expr"})," can match the results, indicating that the ",(0,s.jsx)(t.code,{children:"p_eft"})," is ",(0,s.jsx)(t.code,{children:"allow"}),", then all effects can be merged. If no deny rules are matched, then the decision is allow."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["If the ",(0,s.jsx)(t.code,{children:"expr"})," does not match the condition ",(0,s.jsx)(t.code,{children:'"priority(p_eft) || deny"'}),", and the ",(0,s.jsx)(t.code,{children:"policyIndex"})," is shorter than ",(0,s.jsx)(t.code,{children:"policyLength-1"}),", it will ",(0,s.jsx)(t.strong,{children:"short-circuit"})," some effects in the middle."]})})]})}function f(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}function a(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453(e,t,n){n.d(t,{R:()=>r,x:()=>o});var c=n(6540);const s={},i=c.createContext(s);function r(e){const t=c.useContext(i);return c.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(i.Provider,{value:t},e.children)}}}]);