"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[4145],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>m});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),c=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=c(t),m=r,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return t?a.createElement(h,s(s({ref:n},d),{},{components:t})):a.createElement(h,s({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,s=new Array(i);s[0]=p;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var c=2;c<i;c++)s[c]=t[c];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},9369:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=t(7462),r=(t(7294),t(3905));const i={id:"frontend",title:"Frontend-Nutzung",description:"Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},s=void 0,o={unversionedId:"frontend",id:"frontend",title:"Frontend-Nutzung",description:"Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/FrontendUsage.mdx",sourceDirName:".",slug:"/frontend",permalink:"/de/docs/frontend",draft:!1,editUrl:"https://crowdin.com/project/casbin-website/de",tags:[],version:"current",frontMatter:{id:"frontend",title:"Frontend-Nutzung",description:"Casbin.js is a Casbin addon that facilitates your access-control management in the frontend application",keywords:["Casbin.js","react-authz","rbac-react","vue-authz","angular-authz"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"Log- & Fehlerbehandlung",permalink:"/de/docs/log-error"},next:{title:"Editor",permalink:"/de/docs/category/editor"}},l={},c=[{value:"Installation",id:"installation",level:2},{value:"Frontend Middlewares",id:"frontend-middlewares",level:2},{value:"Schnellstart",id:"schnellstart",level:2},{value:"Permission Object",id:"permission-object",level:3},{value:"Erweiterte Nutzung",id:"erweiterte-nutzung",level:2},{value:"API-Liste",id:"api-liste",level:2},{value:"<code>setPermission(permission: string)</code>",id:"setpermissionpermission-string",level:3},{value:"<code>setUser(user: string)</code>",id:"setuseruser-string",level:3},{value:"<code>can(action: string, object: string)</code>",id:"canaction-string-object-string",level:3},{value:"<code>cannot(action: string, object: string)</code>",id:"cannotaction-string-object-string",level:3},{value:"<code>canAll(action: string, objects: Array&lt;object&gt;)</code>",id:"canallaction-string-objects-arrayobject",level:3},{value:"<code>canAny(action: string, objects: Array&lt;object&gt;)</code>",id:"cananyaction-string-objects-arrayobject",level:3},{value:"Warum Casbin.js",id:"warum-casbinjs",level:2}],d={toc:c};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js"},"Casbin.js")," is a Casbin addon that facilitates your access-control management in the frontend application."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install casbin.js\nnpm install casbin\n")),(0,r.kt)("p",null,"oder"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add casbin.js\n")),(0,r.kt)("h2",{id:"frontend-middlewares"},"Frontend Middlewares"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Middleware"),(0,r.kt)("th",{parentName:"tr",align:null},"Typ"),(0,r.kt)("th",{parentName:"tr",align:null},"Autor"),(0,r.kt)("th",{parentName:"tr",align:null},"Beschreibung"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/react-authz"},"reakt-authz")),(0,r.kt)("td",{parentName:"tr",align:null},"Reagieren"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Reagiere Wrapper f\xfcr Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/daobeng/rbac-react"},"rbac-Reaktion")),(0,r.kt)("td",{parentName:"tr",align:null},"Reagieren"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/daobeng"},"@daobeng")),(0,r.kt)("td",{parentName:"tr",align:null},"Rollenbasierte Zugriffskontrolle in React mit HOCs, CASL und Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/vue-authz"},"vue-authz")),(0,r.kt)("td",{parentName:"tr",align:null},"Vue"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Vue wrapper f\xfcr Casbin.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/casbin-js/angular-authz"},"angular-authz")),(0,r.kt)("td",{parentName:"tr",align:null},"Winkel"),(0,r.kt)("td",{parentName:"tr",align:null},"Casbin"),(0,r.kt)("td",{parentName:"tr",align:null},"Winkelwickeln f\xfcr Casbin.js")))),(0,r.kt)("h2",{id:"schnellstart"},"Schnellstart"),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"manual")," mode in your frontend application and set the permissions whenever you wish."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const casbinjs = require("casbin. s");\n// Benutzerberechtigung:\n// Er/Sie kann `data1` und `data2` Objekte lesen und `data1` Objekt schreiben\nconst permission = {\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n\n// Casbin ausf\xfchren. s im manuellen Modus, was erfordert, dass Sie die Berechtigung manuell festlegen.\nconst authorizer = new casbinjs.Authorizer("manual");\n')),(0,r.kt)("p",null,"Now we have an authorizer, ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizer"),". We can get permission rules from it by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizer.can()")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"authorizer.cannot()")," APIs. Die R\xfcckgabewerte dieser 2 APIs sind JavaScript-Versprechen (",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises"},"Details hier"),"), also sollten wir die ",(0,r.kt)("inlineCode",{parentName:"p"},"then()")," Methode des R\xfcckgabewertes wie folgt verwenden:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.can("write", "data1");\nErgebnis. hen(Erfolg, fehlgeschlagen) => {\n    if (success) {\n        console. og("Sie k\xf6nnen data1");\n    } else {\n        console. og("Sie k\xf6nnen Daten nicht schreiben1");\n    }\n});\n// Ausgabe: Sie k\xf6nnen Daten 1 schreiben\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"cannot()")," API is used in the same way:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'result = authorizer.cannot("read", "data2");\nErgebnis. hen(Erfolg, fehlgeschlagen) => {\n    if (success) {\n        console. og("Sie k\xf6nnen nicht data2");\n    } else {\n        console. og("Sie k\xf6nnen data2");\n    }\n});\n// Ausgabe: Sie k\xf6nnen data2 lesen\n')),(0,r.kt)("p",null,"In the code above, the ",(0,r.kt)("inlineCode",{parentName:"p"},"success")," variable in the parameters means the request gets the result without throwing an error and doesn't mean that the permission rule is ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"failed")," variable is also unrelated to the permission rules. Das macht nur Sinn, wenn im Antragsprozess etwas schief l\xe4uft."),(0,r.kt)("p",null,"You can refer to our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin-js/examples"},"React example")," to see a practical usage of Casbin.js."),(0,r.kt)("h3",{id:"permission-object"},"Permission Object"),(0,r.kt)("p",null,"Casbin.js will accept a JSON object to manipulate the corresponding permission of a visitor. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "read": ["data1", "data2"],\n    "write": ["data1"]\n}\n')),(0,r.kt)("p",null,"The permission object above shows that the visitor can ",(0,r.kt)("inlineCode",{parentName:"p"},"read")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"data1")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"data2")," objects, while they can only ",(0,r.kt)("inlineCode",{parentName:"p"},"write")," the ",(0,r.kt)("inlineCode",{parentName:"p"},"data1")," objects."),(0,r.kt)("h2",{id:"erweiterte-nutzung"},"Erweiterte Nutzung"),(0,r.kt)("p",null,"Casbin.js provides a perfect solution for integrating your frontend access-control management with your backend Casbin service."),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"auto")," mode and specify your endpoint when initializing the Casbin.js ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorizer"),", it will automatically sync the permission and manipulate the frontend status."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const casbinjs = require('casbin.js');\n\n// Set your backend Casbin service URL\nconst authorizer = new casbinjs.Authorizer(\n    'auto', // mode\n    {endpoint: 'http://your_endpoint/api/casbin'}\n);\n\n// Set your visitor.\n// Casbin.js wird die Berechtigung automatisch mit Ihrem Backend Casbin Service synchronisieren.\nauthorizer.setUser(\"Tom\");\n\n// Berechtigung auswerten\nresult = authorizer.can(\"read\", \"data1\");\nErgebnis. Sie(Erfolgreich fehlgeschlagen) => {\n    if (success) {\n        // Einige Frontend-Prozeduren ...\n    }\n});\n")),(0,r.kt)("p",null,"Entsprechend m\xfcssen Sie eine Schnittstelle (z.B. eine RestAPI), um das Berechtigungsobjekt zu generieren und an das Frontend zu \xfcbergeben. Rufen Sie in Ihrem API-Controller ",(0,r.kt)("inlineCode",{parentName:"p"},"CasbinJsGetUserPermission")," auf, um das Berechtigungsobjekt zu erstellen. Hier ist ein Beispiel in Beego:"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Dein Endpunkt-Server sollte so etwas wie"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "other":"other",\n    "data": "What you get from `CasbinJsGetPermissionForUser`"\n}\n'))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'// Router\nbeego.Router("api/casbin", &controllers.APIController{}, "GET:GetFrontendPermission")\n\n// Controller\nfunc (c *APIController) GetFrontendPermission() {\n    // Besucher von den GET-Parametern holen. (The key is "casbin_subject")\n    visitor := c.Input().Get("casbin_subject")\n    // `e` is an initialized instance of Casbin Enforcer\n    c.Data["perm"] = casbin.CasbinJsGetPermissionForUser(e, visitor)\n    // Pass the data to the frontend.\n    c.ServeJSON()\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Currently, the ",(0,r.kt)("inlineCode",{parentName:"p"},"CasbinJsGetPermissionForUser")," API is only supported in Go Casbin and Node-Casbin. If you want this API to be supported in other languages, please ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin.js/issues"},"raise an issue")," or leave a comment below.")),(0,r.kt)("h2",{id:"api-liste"},"API-Liste"),(0,r.kt)("h3",{id:"setpermissionpermission-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"setPermission(permission: string)")),(0,r.kt)("p",null,"Berechtigungsobjekt festlegen. Immer im ",(0,r.kt)("inlineCode",{parentName:"p"},"manuellen")," Modus verwendet."),(0,r.kt)("h3",{id:"setuseruser-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"setUser(user: string)")),(0,r.kt)("p",null,"Legen Sie die Besucheridentit\xe4t fest und aktualisieren Sie die Berechtigung. Immer im ",(0,r.kt)("inlineCode",{parentName:"p"},"Auto-")," Modus verwendet."),(0,r.kt)("h3",{id:"canaction-string-object-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"can(action: string, object: string)")),(0,r.kt)("p",null,"Pr\xfcfen Sie, ob der Benutzer ",(0,r.kt)("inlineCode",{parentName:"p"},"Aktion")," auf ",(0,r.kt)("inlineCode",{parentName:"p"},"Objekt")," ausf\xfchren kann."),(0,r.kt)("h3",{id:"cannotaction-string-object-string"},(0,r.kt)("inlineCode",{parentName:"h3"},"cannot(action: string, object: string)")),(0,r.kt)("p",null,"Check if the user ",(0,r.kt)("strong",{parentName:"p"},"cannot")," perform ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," on ",(0,r.kt)("inlineCode",{parentName:"p"},"object"),"."),(0,r.kt)("h3",{id:"canallaction-string-objects-arrayobject"},(0,r.kt)("inlineCode",{parentName:"h3"},"canAll(action: string, objects: Array<object>)")),(0,r.kt)("p",null,"Check if the user can perform ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," on ",(0,r.kt)("strong",{parentName:"p"},"all")," objects in ",(0,r.kt)("inlineCode",{parentName:"p"},"objects"),"."),(0,r.kt)("h3",{id:"cananyaction-string-objects-arrayobject"},(0,r.kt)("inlineCode",{parentName:"h3"},"canAny(action: string, objects: Array<object>)")),(0,r.kt)("p",null,"Pr\xfcfen Sie, ob der Benutzer ",(0,r.kt)("inlineCode",{parentName:"p"},"Aktion")," auf ",(0,r.kt)("strong",{parentName:"p"},"eines")," der ",(0,r.kt)("inlineCode",{parentName:"p"},"Objekte")," ausf\xfchren kann."),(0,r.kt)("h2",{id:"warum-casbinjs"},"Warum Casbin.js"),(0,r.kt)("p",null,"People may wonder about the difference between Node-Casbin and Casbin.js. In a word, Node-Casbin is the core of Casbin implemented in the NodeJS environment, and it's normally used as an access-controlling management toolkit at the server ends. Casbin.js is a frontend library that helps you use Casbin to authorize your webpage users at the client side."),(0,r.kt)("p",null,"Normalerweise es ist nicht angemessen, direkt einen Casbin-Dienst aufzubauen und die Autorisierung/Vollstreckungsaufgaben an einer Web-Frontend-Anwendung zu erledigen, da folgende Probleme auftreten:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"When someone turns on the client, the enforcer will be initialized, and it will pull all the policies from the backend persistent layers. Eine hohe Koncurrenz k\xf6nnte die Datenbanken stark unter Druck setzen und einen hohen Netzwerkdurchsatz kosten."),(0,r.kt)("li",{parentName:"ol"},"Loading all policies to the client side could bring security risks."),(0,r.kt)("li",{parentName:"ol"},"It is difficult to separate the client and server as well as facilitate agile development.")),(0,r.kt)("p",null,"We need a tool that eases the process of using Casbin at the frontend. Actually, the core of Casbin.js is the manipulation of the current user's permission at the client side. Wie Sie bereits erw\xe4hnt haben, holt Casbin.js einen bestimmten Endpunkt. Diese Prozedur wird die Berechtigung des Benutzers mit dem Backend Casbin Service synchronisieren. After having the permission data, developers can use Casbin.js interfaces to manage the behavior of the user at the frontend side."),(0,r.kt)("p",null,"Casbin.js avoids the two problems mentioned above: Casbin service will no longer be pulled up repeatedly, and the size of passing messages between the client and the server is reduced. We also avoid storing all the policies at the frontend. The user can only access their own permission, but has no knowledge about the access-control model and other users' permissions. Au\xdferdem kann Casbin.js auch den Client und den Server im Autorisierungsmanagement effizient entkoppeln."))}u.isMDXComponent=!0}}]);