"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[6562],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return p}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),c=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=c(n),p=r,b=m["".concat(u,".").concat(p)]||m[p]||d[p]||i;return n?a.createElement(b,l(l({ref:t},s),{},{components:n})):a.createElement(b,l({ref:t},s))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(7294),r=n(6010),i="tabItem_Ymn6";function l(e){var t=e.children,n=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i,l),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(3117),r=n(7294),i=n(6010),l=n(2389),o=n(7392),u=n(7094),c=n(2466),s="tabList__CuJ",d="tabItem_LNqP";function m(e){var t,n,l=e.lazy,m=e.block,p=e.defaultValue,b=e.values,k=e.groupId,f=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=b?b:h.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),N=(0,o.l)(g,(function(e,t){return e.value===t.value}));if(N.length>0)throw new Error('Docusaurus error: Duplicate values "'+N.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===p?p:null!=(t=null!=p?p:null==(n=h.find((function(e){return e.props.default})))?void 0:n.props.value)?t:h[0].props.value;if(null!==y&&!g.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var v=(0,u.U)(),_=v.tabGroupChoices,w=v.setTabGroupChoices,C=(0,r.useState)(y),P=C[0],x=C[1],O=[],E=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var L=_[k];null!=L&&L!==P&&g.some((function(e){return e.value===L}))&&x(L)}var M=function(e){var t=e.currentTarget,n=O.indexOf(t),a=g[n].value;a!==P&&(E(t),x(a),null!=k&&w(k,String(a)))},F=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,r=O.indexOf(e.currentTarget)+1;n=null!=(a=O[r])?a:O[0];break;case"ArrowLeft":var i,l=O.indexOf(e.currentTarget)-1;n=null!=(i=O[l])?i:O[O.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,i.Z)("tabs-container",s)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":m},f)},g.map((function(e){var t=e.value,n=e.label,l=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:P===t?0:-1,"aria-selected":P===t,key:t,ref:function(e){return O.push(e)},onKeyDown:F,onFocus:M,onClick:M},l,{className:(0,i.Z)("tabs__item",d,null==l?void 0:l.className,{"tabs__item--active":P===t})}),null!=n?n:t)}))),l?(0,r.cloneElement)(h.filter((function(e){return e.props.value===P}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},h.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==P})}))))}function p(e){var t=(0,l.Z)();return r.createElement(m,(0,a.Z)({key:String(t)},e))}},6902:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return u},default:function(){return p},frontMatter:function(){return o},metadata:function(){return c},toc:function(){return d}});var a=n(3117),r=n(102),i=(n(7294),n(3905)),l=(n(5488),n(5162),["components"]),o={id:"function",title:"Funktion"},u=void 0,c={unversionedId:"function",id:"function",title:"Funktion",description:"Funktionen in Matchern",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/Function.mdx",sourceDirName:".",slug:"/function",permalink:"/de/docs/function",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/Function.mdx",tags:[],version:"current",frontMatter:{id:"function",title:"Funktion"},sidebar:"docs",previous:{title:"Effektor",permalink:"/de/docs/effector"},next:{title:"RBAC",permalink:"/de/docs/rbac"}},s={},d=[{value:"Funktionen in Matchern",id:"funktionen-in-matchern",level:2},{value:"So f\xfcgen Sie eine benutzerdefinierte Funktion hinzu",id:"so-f\xfcgen-sie-eine-benutzerdefinierte-funktion-hinzu",level:2}],m={toc:d};function p(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"funktionen-in-matchern"},"Funktionen in Matchern"),(0,i.kt)("p",null,"Sie k\xf6nnen sogar Funktionen in einem Matcher angeben, um diese m\xe4chtiger zu machen. Sie k\xf6nnen die eingebauten Funktionen verwenden oder Ihre eigene Funktion angeben. Alle eingebauten Funktionen verwenden ein solches Format (au\xdfer ",(0,i.kt)("inlineCode",{parentName:"p"},"keyGet")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"keyGet2"),"):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-C"},"bool function_name(string arg1, string arg2)\n")),(0,i.kt)("p",null,"Gibt zur\xfcck, ob ",(0,i.kt)("inlineCode",{parentName:"p"},"arg1")," ",(0,i.kt)("inlineCode",{parentName:"p"},"arg2")," entspricht."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"keyGet")," und ",(0,i.kt)("inlineCode",{parentName:"p"},"keyGet2")," gibt den String zur\xfcck, der mit dem Platzhalter \xfcbereinstimmt, und gibt ",(0,i.kt)("inlineCode",{parentName:"p"},'""')," zur\xfcck, falls nichts \xfcbereinstimmt."),(0,i.kt)("p",null,"Die unterst\xfctzten Funktionen sind:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Funktion"),(0,i.kt)("th",{parentName:"tr",align:null},"arg1"),(0,i.kt)("th",{parentName:"tr",align:null},"arg2"),(0,i.kt)("th",{parentName:"tr",align:null},"Beispiel"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"keymatch"),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/resource1")),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad oder ein ",(0,i.kt)("inlineCode",{parentName:"td"},"*")," Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/*")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch_model.conf"},"keymatch_model.conf"),"/",(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch_policy.csv"},"keymatch_policy.csv"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"keyGet"),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/resource1")),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad oder ein ",(0,i.kt)("inlineCode",{parentName:"td"},"*")," Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/*")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keyget_model.conf"},"keyget_model.conf"),"/",(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch_policy.csv"},"keymatch_policy.csv"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"keyMatch2"),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/resource1")),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad oder ein ",(0,i.kt)("inlineCode",{parentName:"td"},":")," Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/:resource")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch2_model.conf"},"keymatch2_model.conf"),"/",(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch2_policy.csv"},"keymatch2_policy.csv"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"keyGet2"),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/resource1")),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad oder ",(0,i.kt)("inlineCode",{parentName:"td"},":")," Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/:resource")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keyget2_model.conf"},"keyget2_model.conf"),"/",(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch2_policy.csv"},"keymatch2_policy.csv"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"keyMatch3"),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/resource1")),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad oder ein ",(0,i.kt)("inlineCode",{parentName:"td"},"{}")," Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/{resource}")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/util/builtin_operators_test.go#L171-L196"},"https://github.com/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/util/builtin_operators_test.go#L171-L196"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"keyMatch4"),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/123/book/123")),(0,i.kt)("td",{parentName:"tr",align:null},"ein URL-Pfad oder ein ",(0,i.kt)("inlineCode",{parentName:"td"},"{}")," Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/{id}/book/{id}")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://de.github.com/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/util/builtin_operators_test.go#L208-L222"},"https://de.github.com/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/util/builtin_operators_test.go#L208-L222"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"regexMatch"),(0,i.kt)("td",{parentName:"tr",align:null},"jede Zeichenkette"),(0,i.kt)("td",{parentName:"tr",align:null},"ein Muster f\xfcr regul\xe4re Ausdr\xfccke"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch_model.conf"},"keymatch_model.conf"),"/",(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/keymatch_policy.csv"},"keymatch_policy.csv"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ipMatch"),(0,i.kt)("td",{parentName:"tr",align:null},"eine IP-Adresse wie ",(0,i.kt)("inlineCode",{parentName:"td"},"192.168.2.123")),(0,i.kt)("td",{parentName:"tr",align:null},"eine IP-Adresse oder ein CIDR wie ",(0,i.kt)("inlineCode",{parentName:"td"},"192.168.2.0/24")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/ipmatch_model.conf"},"ipmatch_model.conf"),"/",(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/casbin/blob/master/examples/ipmatch_policy.csv"},"ipmatch_policy.csv"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"globMatch"),(0,i.kt)("td",{parentName:"tr",align:null},"ein pfad\xe4hnlicher Pfad wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/resource1")),(0,i.kt)("td",{parentName:"tr",align:null},"ein Glob-Muster wie ",(0,i.kt)("inlineCode",{parentName:"td"},"/alice_data/*")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"https://github.com/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/util/builtin_operators_test.go#L426-L466"},"https://github.com/casbin/blob/277c1a2b85698272f764d71a94d2595a8d425915/util/builtin_operators_test.go#L426-L466"))))),(0,i.kt)("p",null,"Details zu obigen Funktionen finden Sie unter: ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/blob/master/util/builtin_operators_test.go"},"https://github.com/casbin/casbin/blob/master/util/builtin_operators_test.go")),(0,i.kt)("h2",{id:"so-f\xfcgen-sie-eine-benutzerdefinierte-funktion-hinzu"},"So f\xfcgen Sie eine benutzerdefinierte Funktion hinzu"),(0,i.kt)("p",null,"Bereiten Sie zuerst Ihre Funktion vor. Es ben\xf6tigt mehrere Parameter und gibt einen Bool zur\xfcck:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'func KeyMatch(key1 string, key2 string) bool {\n    i := strings.Index(key2, "*")\n    if i == -1 {\n        return key1 == key2\n    }\n\n    if len(key1) > i {\n        return key1[:i] == key2[:i]\n    }\n    return key1 == key2[:i]\n}\n')),(0,i.kt)("p",null,"Dann wickeln Sie es mit ",(0,i.kt)("inlineCode",{parentName:"p"},"Schnittstelle{}")," Typen:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},"func KeyMatchFunc(args ...interface{}) (interface{}, error) {\n    name1 := args[0].(string)\n    name2 := args[1].(string)\n\n    return (bool)(KeyMatch(name1, name2)), nil\n}\n")),(0,i.kt)("p",null,"Endlich registrieren Sie die Funktion beim Casbin Enforcer:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'e.AddFunction("my_func", KeyMatchFunc)\n')),(0,i.kt)("p",null,"Jetzt k\xf6nnen Sie die Funktion in Ihrem Modell CONF wie folgt verwenden:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[matchers]\nm = r.sub == p.sub && my_func(r.obj, p.obj) && r.act == p.act\n")))}p.isMDXComponent=!0}}]);