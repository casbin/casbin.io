"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[5578],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=i.createContext({}),c=function(e){var t=i.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=c(e.components);return i.createElement(d.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,h=u["".concat(d,".").concat(m)]||u[m]||p[m]||a;return n?i.createElement(h,o(o({ref:t},s),{},{components:n})):i.createElement(h,o({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=u;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8238:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var i=n(7462),r=(n(7294),n(3905));const a={id:"priority-model",title:"Priority Model",description:"Casbins Priorit\xe4tsmodell zur Verwaltung von Richtlinien mit unterschiedlichen Priorit\xe4ten",keywords:["priority model"],authors:["hsluoyz"]},o=void 0,l={unversionedId:"priority-model",id:"priority-model",title:"Priority Model",description:"Casbins Priorit\xe4tsmodell zur Verwaltung von Richtlinien mit unterschiedlichen Priorit\xe4ten",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/PriorityModel.mdx",sourceDirName:".",slug:"/priority-model",permalink:"/de/docs/priority-model",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/PriorityModel.mdx",tags:[],version:"current",frontMatter:{id:"priority-model",title:"Priority Model",description:"Casbins Priorit\xe4tsmodell zur Verwaltung von Richtlinien mit unterschiedlichen Priorit\xe4ten",keywords:["priority model"],authors:["hsluoyz"]},sidebar:"docs",previous:{title:"OrBAC",permalink:"/de/docs/orbac"},next:{title:"Usage Control (UCON)",permalink:"/de/docs/ucon"}},d={},c=[{value:"Richtlinie mit impliziter Priorit\xe4t laden",id:"richtlinie-mit-impliziter-priorit\xe4t-laden",level:2},{value:"Richtlinie mit expliziter Priorit\xe4t laden",id:"richtlinie-mit-expliziter-priorit\xe4t-laden",level:2},{value:"Richtlinie mit Priorit\xe4t basierend auf Rollen- und Benutzerhierarchie laden",id:"richtlinie-mit-priorit\xe4t-basierend-auf-rollen--und-benutzerhierarchie-laden",level:2}],s={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Casbin unterst\xfctzt das Laden von Richtlinien mit Priorit\xe4t."),(0,r.kt)("h2",{id:"richtlinie-mit-impliziter-priorit\xe4t-laden"},"Richtlinie mit impliziter Priorit\xe4t laden"),(0,r.kt)("p",null,"Es ist ganz einfach: Die Reihenfolge bestimmt die Priorit\xe4t; Richtlinien, die fr\xfcher erscheinen, haben eine h\xf6here Priorit\xe4t."),(0,r.kt)("p",null,"model.conf:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_effect]\ne = priority(p.eft) || deny\n")),(0,r.kt)("h2",{id:"richtlinie-mit-expliziter-priorit\xe4t-laden"},"Richtlinie mit expliziter Priorit\xe4t laden"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Siehe auch: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/550"},"casbin#550"))),(0,r.kt)("p",null,"Ein kleinerer Priorit\xe4tswert zeigt eine h\xf6here Priorit\xe4t an. Wenn es ein nicht-numerisches Zeichen in der Priorit\xe4t gibt, wird es an letzter Stelle platziert, anstatt einen Fehler auszul\xf6sen."),(0,r.kt)("admonition",{title:"Token-Namen-Konvention",type:"info"},(0,r.kt)("p",{parentName:"admonition"},'Der konventionell verwendete Priorit\xe4tstoken-Name in der Richtliniendefinition ist "priority". Um einen benutzerdefinierten zu verwenden, m\xfcssen Sie ',(0,r.kt)("inlineCode",{parentName:"p"},"e.SetFieldIndex()")," aufrufen und die Richtlinien neu laden (siehe das vollst\xe4ndige Beispiel auf ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/pull/1044"},"TestCustomizedFieldIndex"),")."),(0,r.kt)("p",{parentName:"admonition"},"model.conf:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[policy_definition]\np = customized_priority, sub, obj, act, eft\n")),(0,r.kt)("p",{parentName:"admonition"},"Golang Codebeispiel:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-go"},'e, _ := NewEnforcer("./example/priority_model_explicit_customized.conf",\n                    "./example/priority_policy_explicit_customized.csv")\n// Due to the customized priority token, the enforcer fails to handle the priority.\nok, err := e.Enforce("bob", "data2", "read") // the result will be `true, nil`\n// Set PriorityIndex and reload\ne.SetFieldIndex("p", constant.PriorityIndex, 0)\nerr := e.LoadPolicy()\nif err != nil {\n    log.Fatalf("LoadPolicy: %v", err)\n}\nok, err := e.Enforce("bob", "data2", "read") // the result will be `false, nil`\n'))),(0,r.kt)("p",null,"Derzeit unterst\xfctzt die explizite Priorit\xe4t nur ",(0,r.kt)("inlineCode",{parentName:"p"},"AddPolicy")," & ",(0,r.kt)("inlineCode",{parentName:"p"},"AddPolicies"),". Wenn ",(0,r.kt)("inlineCode",{parentName:"p"},"UpdatePolicy")," aufgerufen wurde, sollten Sie das Priorit\xe4tsattribut nicht \xe4ndern."),(0,r.kt)("p",null,"model.conf:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = priority, sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = priority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act\n")),(0,r.kt)("p",null,"policy.csv"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, 10, data1_deny_group, data1, read, deny\np, 10, data1_deny_group, data1, write, deny\np, 10, data2_allow_group, data2, read, allow\np, 10, data2_allow_group, data2, write, allow\n\n\np, 1, alice, data1, write, allow\np, 1, alice, data1, read, allow\np, 1, bob, data2, read, deny\n\ng, bob, data2_allow_group\ng, alice, data1_deny_group\n")),(0,r.kt)("p",null,"Anfrage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, data1, write --\x3e true // because `p, 1, alice, data1, write, allow` has the highest priority\nbob, data2, read --\x3e false\nbob, data2, write --\x3e true // because bob has the role of `data2_allow_group` which has the right to write data2, and there's no deny policy with higher priority \n")),(0,r.kt)("h2",{id:"richtlinie-mit-priorit\xe4t-basierend-auf-rollen--und-benutzerhierarchie-laden"},"Richtlinie mit Priorit\xe4t basierend auf Rollen- und Benutzerhierarchie laden"),(0,r.kt)("p",null,"Die vererbte Struktur von Rollen und Benutzern kann nur mehrere B\xe4ume sein, keine Graphen. Wenn ein Benutzer mehrere Rollen hat, m\xfcssen Sie sicherstellen, dass der Benutzer auf verschiedenen B\xe4umen das gleiche Level hat. Wenn zwei Rollen das gleiche Level haben, hat die Richtlinie (die mit der Rolle verbunden ist), die fr\xfcher erschienen ist, eine h\xf6here Priorit\xe4t. F\xfcr weitere Details siehe auch ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/pull/833"},"casbin#833")," und ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/casbin/casbin/issues/831"},"casbin#831"),"."),(0,r.kt)("p",null,"model.conf:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act, eft\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = subjectPriority(p.eft) || deny\n\n[matchers]\nm = g(r.sub, p.sub) && r.obj == p.obj && r.act == p.act \n")),(0,r.kt)("p",null,"policy.csv"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, root, data1, read, deny\np, admin, data1, read, deny\n\np, editor, data1, read, deny\np, subscriber, data1, read, deny\n\np, jane, data1, read, allow\np, alice, data1, read, allow\n\ng, admin, root\n\ng, editor, admin\ng, subscriber, admin\n\ng, jane, editor\ng, alice, subscriber \n")),(0,r.kt)("p",null,"Anfrage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"jane, data1, read --\x3e true // because jane is at the bottom, her priority is higher than that of editor, admin, and root\nalice, data1, read --\x3e true\n")),(0,r.kt)("p",null,"Die Rollenhierarchie sieht so aus:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"role: root\n \u2514\u2500 role: admin\n    \u251c\u2500 role editor\n    \u2502  \u2514\u2500 user: jane\n    \u2502\n    \u2514\u2500 role: subscriber\n       \u2514\u2500 user: alice\n")),(0,r.kt)("p",null,"Die Priorit\xe4t sieht automatisch so aus:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"role: root                 # auto priority: 30\n \u2514\u2500 role: admin            # auto priority: 20\n     \u251c\u2500 role: editor       # auto priority: 10\n     \u2514\u2500 role: subscriber   # auto priority: 10\n")))}p.isMDXComponent=!0}}]);