"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[5304],{3905:(e,n,t)=>{t.d(n,{Zo:()=>o,kt:()=>m});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var d=r.createContext({}),s=function(e){var n=r.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},o=function(e){var n=s(e.components);return r.createElement(d.Provider,{value:n},e.children)},g={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,d=e.parentName,o=u(e,["components","mdxType","originalType","parentName"]),p=s(t),m=i,c=p["".concat(d,".").concat(m)]||p[m]||g[m]||a;return t?r.createElement(c,l(l({ref:n},o),{},{components:t})):r.createElement(c,l({ref:n},o))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,l=new Array(a);l[0]=p;var u={};for(var d in n)hasOwnProperty.call(n,d)&&(u[d]=n[d]);u.originalType=e,u.mdxType="string"==typeof e?e:i,l[1]=u;for(var s=2;s<a;s++)l[s]=t[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},7689:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>a,metadata:()=>u,toc:()=>s});var r=t(7462),i=(t(7294),t(3905));const a={id:"menu-permissions",title:"Menu Permissions",description:"Beispiel f\xfcr Men\xfcberechtigungen",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},l=void 0,u={unversionedId:"menu-permissions",id:"menu-permissions",title:"Menu Permissions",description:"Beispiel f\xfcr Men\xfcberechtigungen",source:"@site/i18n/de/docusaurus-plugin-content-docs/current/MenuPermissions.mdx",sourceDirName:".",slug:"/menu-permissions",permalink:"/de/docs/menu-permissions",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/MenuPermissions.mdx",tags:[],version:"current",frontMatter:{id:"menu-permissions",title:"Menu Permissions",description:"Beispiel f\xfcr Men\xfcberechtigungen",keywords:["Menu Permissions","example"],authors:["amikecoXu"]},sidebar:"docs",previous:{title:"Data Permissions",permalink:"/de/docs/data-permissions"},next:{title:"Extensions",permalink:"/de/docs/category/extensions"}},d={},s=[{value:"1. Konfigurationsdateien",id:"1-konfigurationsdateien",level:3},{value:"1.1 \xdcbersicht",id:"11-\xfcbersicht",level:4},{value:"1.2 Berechtigungsdefinitionen (Richtlinien)",id:"12-berechtigungsdefinitionen-richtlinien",level:4},{value:"1.3 Rollen und Benutzerzuordnungen",id:"13-rollen-und-benutzerzuordnungen",level:4},{value:"1.4 Hierarchie der Men\xfcpunkte",id:"14-hierarchie-der-men\xfcpunkte",level:4},{value:"1.5 Vererbung von Men\xfcberechtigungen und Standardregeln",id:"15-vererbung-von-men\xfcberechtigungen-und-standardregeln",level:4},{value:"1.6 Spezielle Regeln zur Berechtigungsvererbung",id:"16-spezielle-regeln-zur-berechtigungsvererbung",level:4},{value:"1.7 Beispielbeschreibung",id:"17-beispielbeschreibung",level:4},{value:"2. Men\xfcberechtigungskontrolle",id:"2-men\xfcberechtigungskontrolle",level:3}],o={toc:s};function g(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},o,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Wir beginnen mit der Vorstellung eines Spring Boot-Beispiels mit einem Men\xfcsystem. Dieses Beispiel nutzt jCasbin zur Verwaltung von Men\xfcberechtigungen. Letztendlich zielt es darauf ab, eine Middleware zu abstrahieren, speziell f\xfcr Men\xfcberechtigungen, die auf andere von Casbin unterst\xfctzte Sprachen, wie Go und Python, erweitert werden k\xf6nnte."),(0,i.kt)("h3",{id:"1-konfigurationsdateien"},"1. Konfigurationsdateien"),(0,i.kt)("p",null,"Sie m\xfcssen die Rollen- und Berechtigungsverwaltung in der ",(0,i.kt)("inlineCode",{parentName:"p"},"policy.csv"),"-Datei einrichten, zusammen mit den Eltern-Kind-Beziehungen zwischen Men\xfcpunkten. F\xfcr weitere Details verweisen Sie bitte auf ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/jcasbin/jcasbin-menu-permission"},"dieses GitHub-Repo"),"."),(0,i.kt)("h4",{id:"11-\xfcbersicht"},"1.1 \xdcbersicht"),(0,i.kt)("p",null,"Mit ",(0,i.kt)("inlineCode",{parentName:"p"},"policy.csv")," k\xf6nnen Sie flexibel Rollenberechtigungen und Men\xfcstrukturen f\xfcr feink\xf6rnige Zugriffskontrolle konfigurieren. Diese Konfigurationsdatei definiert Zugriffsberechtigungen f\xfcr verschiedene Rollen auf verschiedene Men\xfcpunkte, Verbindungen zwischen Benutzern und Rollen und die hierarchischen Beziehungen zwischen Men\xfcpunkten."),(0,i.kt)("h4",{id:"12-berechtigungsdefinitionen-richtlinien"},"1.2 Berechtigungsdefinitionen (Richtlinien)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Richtlinienregeln"),": Richtlinien werden mit einem ",(0,i.kt)("inlineCode",{parentName:"li"},"p"),"-Pr\xe4fix definiert, das Rollen (",(0,i.kt)("inlineCode",{parentName:"li"},"sub"),") und ihre Berechtigungen (",(0,i.kt)("inlineCode",{parentName:"li"},"act"),") auf Men\xfcpunkten (",(0,i.kt)("inlineCode",{parentName:"li"},"obj"),") angibt, zusammen mit der Wirkung der Regel (",(0,i.kt)("inlineCode",{parentName:"li"},"eft"),"), wobei ",(0,i.kt)("inlineCode",{parentName:"li"},"allow")," die Gew\xe4hrung der Berechtigung anzeigt und ",(0,i.kt)("inlineCode",{parentName:"li"},"deny")," ihre Ablehnung.")),(0,i.kt)("p",null,"Beispiele:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"p, ROLE_ROOT, SystemMenu, read, allow")," bedeutet, dass die Rolle ",(0,i.kt)("inlineCode",{parentName:"li"},"ROLE_ROOT")," Lesezugriff auf den Men\xfcpunkt ",(0,i.kt)("inlineCode",{parentName:"li"},"SystemMenu")," hat."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"p, ROLE_ROOT, UserMenu, read, deny")," bedeutet, dass der Rolle ",(0,i.kt)("inlineCode",{parentName:"li"},"ROLE_ROOT")," der Lesezugriff auf den Men\xfcpunkt ",(0,i.kt)("inlineCode",{parentName:"li"},"UserMenu")," verweigert wird.")),(0,i.kt)("h4",{id:"13-rollen-und-benutzerzuordnungen"},"1.3 Rollen und Benutzerzuordnungen"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Rollenvererbung"),": Benutzer-Rollen-Beziehungen und Rollenhierarchien werden mit einem ",(0,i.kt)("inlineCode",{parentName:"li"},"g"),"-Pr\xe4fix definiert. Dies erm\xf6glicht es Benutzern, Berechtigungen von einer oder mehreren Rollen zu erben.")),(0,i.kt)("p",null,"Beispiele:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"g, user, ROLE_USER")," bedeutet, dass dem Benutzer ",(0,i.kt)("inlineCode",{parentName:"li"},"user")," die Rolle ",(0,i.kt)("inlineCode",{parentName:"li"},"ROLE_USER")," zugewiesen wird."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"g, ROLE_ADMIN, ROLE_USER")," bedeutet, dass ",(0,i.kt)("inlineCode",{parentName:"li"},"ROLE_ADMIN")," Berechtigungen von ",(0,i.kt)("inlineCode",{parentName:"li"},"ROLE_USER")," erbt.")),(0,i.kt)("h4",{id:"14-hierarchie-der-men\xfcpunkte"},"1.4 Hierarchie der Men\xfcpunkte"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Men\xfcbeziehungen"),": Eltern-Kind-Beziehungen zwischen Men\xfcpunkten werden mit einem ",(0,i.kt)("inlineCode",{parentName:"li"},"g2"),"-Pr\xe4fix definiert, um beim Aufbau der Men\xfcstruktur zu helfen.")),(0,i.kt)("p",null,"Beispiele:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"g2, UserSubMenu_allow, UserMenu")," zeigt an, dass ",(0,i.kt)("inlineCode",{parentName:"li"},"UserSubMenu_allow")," ein Untermen\xfc von ",(0,i.kt)("inlineCode",{parentName:"li"},"UserMenu")," ist."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"g2, (NULL), SystemMenu")," zeigt an, dass ",(0,i.kt)("inlineCode",{parentName:"li"},"SystemMenu")," keinen Untermen\xfcpunkt hat, was bedeutet, dass es sich um einen obersten Men\xfcpunkt handelt.")),(0,i.kt)("h4",{id:"15-vererbung-von-men\xfcberechtigungen-und-standardregeln"},"1.5 Vererbung von Men\xfcberechtigungen und Standardregeln"),(0,i.kt)("p",null,"Bei der Verwaltung von Men\xfcberechtigungen mit jCasbin folgt die Berechtigungsbeziehung zwischen Eltern- und Kindermen\xfcs spezifischen Vererbungsregeln, mit zwei wichtigen Standardregeln:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Vererbung von Elternmen\xfcberechtigungen"),":"),(0,i.kt)("p",null,"Wenn einem \xfcbergeordneten Men\xfc explizit die ",(0,i.kt)("inlineCode",{parentName:"p"},"allow")," Berechtigung erteilt wird, haben alle seine Untermen\xfcs standardm\xe4\xdfig auch die ",(0,i.kt)("inlineCode",{parentName:"p"},"allow")," Berechtigung, es sei denn, sie sind speziell als ",(0,i.kt)("inlineCode",{parentName:"p"},"deny")," gekennzeichnet. Das bedeutet, dass sobald ein \xfcbergeordnetes Men\xfc zug\xe4nglich ist, auch seine Untermen\xfcs standardm\xe4\xdfig zug\xe4nglich sind."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Behandlung von \xfcbergeordneten Men\xfcs ohne direkte Berechtigungseinstellungen"),":"),(0,i.kt)("p",null,"Wenn ein \xfcbergeordnetes Men\xfc keine direkten Berechtigungseinstellungen hat (weder explizit erlaubt noch verweigert), aber mindestens ein Untermen\xfc explizit die ",(0,i.kt)("inlineCode",{parentName:"p"},"allow")," Berechtigung hat, dann wird das \xfcbergeordnete Men\xfc implizit als ",(0,i.kt)("inlineCode",{parentName:"p"},"allow")," Berechtigung betrachtet. Dies stellt sicher, dass Benutzer zu diesen Untermen\xfcs navigieren k\xf6nnen."),(0,i.kt)("h4",{id:"16-spezielle-regeln-zur-berechtigungsvererbung"},"1.6 Spezielle Regeln zur Berechtigungsvererbung"),(0,i.kt)("p",null,"Bez\xfcglich der Vererbung von Berechtigungen zwischen Rollen, insbesondere in Szenarien mit ",(0,i.kt)("inlineCode",{parentName:"p"},"deny")," Berechtigungen, m\xfcssen die folgenden Regeln eingehalten werden, um die Systemsicherheit und die pr\xe4zise Kontrolle von Berechtigungen zu gew\xe4hrleisten:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Unterscheidung zwischen expliziten und standardm\xe4\xdfigen Verweigerungen"),":"),(0,i.kt)("p",null,"Wenn einer Rolle, wie ",(0,i.kt)("inlineCode",{parentName:"p"},"ROLE_ADMIN"),", explizit der Zugriff auf einen Men\xfcpunkt, wie ",(0,i.kt)("inlineCode",{parentName:"p"},"AdminSubMenu_deny")," (als ",(0,i.kt)("inlineCode",{parentName:"p"},"deny")," gekennzeichnet), verweigert wird, dann ist selbst wenn diese Rolle von einer anderen Rolle (z.B. ",(0,i.kt)("inlineCode",{parentName:"p"},"ROLE_ROOT"),") geerbt wird, der ererbenden Rolle der Zugriff auf den verweigerten Men\xfcpunkt nicht gestattet. Dies stellt sicher, dass explizite Sicherheitsrichtlinien nicht aufgrund von Rollenvererbung umgangen werden."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Vererbung von standardm\xe4\xdfigen Verweigerungsberechtigungen"),":"),(0,i.kt)("p",null,"Umgekehrt, wenn die Verweigerung einer Rolle des Zugriffs auf einen Men\xfcpunkt (z.B. ",(0,i.kt)("inlineCode",{parentName:"p"},"UserSubMenu_deny"),") standardm\xe4\xdfig ist (nicht explizit als ",(0,i.kt)("inlineCode",{parentName:"p"},"deny")," gekennzeichnet, sondern weil sie nicht explizit ",(0,i.kt)("inlineCode",{parentName:"p"},"allow")," gew\xe4hrt wurde), dann kann, wenn diese Rolle von einer anderen Rolle (z.B. ",(0,i.kt)("inlineCode",{parentName:"p"},"ROLE_ADMIN"),") geerbt wird, die ererbende Rolle den standardm\xe4\xdfigen ",(0,i.kt)("inlineCode",{parentName:"p"},"deny")," Status \xfcberschreiben und den Zugriff auf diese Men\xfcpunkte erlauben."),(0,i.kt)("h4",{id:"17-beispielbeschreibung"},"1.7 Beispielbeschreibung"),(0,i.kt)("p",null,"Richtlinie:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csv"},"p, ROLE_ROOT, SystemMenu, read, allow\np, ROLE_ROOT, AdminMenu, read, allow\np, ROLE_ROOT, UserMenu, read, deny\np, ROLE_ADMIN, UserMenu, read, allow\np, ROLE_ADMIN, AdminMenu, read, allow\np, ROLE_ADMIN, AdminSubMenu_deny, read, deny\np, ROLE_USER, UserSubMenu_allow, read, allow\n\ng, user, ROLE_USER\ng, admin, ROLE_ADMIN\ng, root, ROLE_ROOT\ng, ROLE_ADMIN, ROLE_USER\n\ng2, UserSubMenu_allow, UserMenu\ng2, UserSubMenu_deny, UserMenu\ng2, UserSubSubMenu, UserSubMenu_allow\ng2, AdminSubMenu_allow, AdminMenu\ng2, AdminSubMenu_deny, AdminMenu\ng2, (NULL), SystemMenu\n")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Men\xfcName"),(0,i.kt)("th",{parentName:"tr",align:"center"},"ROLE","_","ROOT"),(0,i.kt)("th",{parentName:"tr",align:"center"},"ROLE","_","ADMIN"),(0,i.kt)("th",{parentName:"tr",align:"center"},"ROLE","_","USER"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"SystemMenu"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"UserMenu"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"UserSubMenu","_","allow"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"UserSubSubMenu"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"UserSubMenu","_","deny"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"AdminMenu"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"AdminSubMenu","_","allow"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"AdminSubMenu","_","deny"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u2705"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c"),(0,i.kt)("td",{parentName:"tr",align:"center"},"\u274c")))),(0,i.kt)("h3",{id:"2-men\xfcberechtigungskontrolle"},"2. Men\xfcberechtigungskontrolle"),(0,i.kt)("p",null,"Die Liste aller Men\xfcpunkte, auf die ein bestimmter Benutzername Zugriff hat, kann \xfcber die Funktion ",(0,i.kt)("inlineCode",{parentName:"p"},"findAccessibleMenus()")," identifiziert werden, die im ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/jcasbin/jcasbin-menu-permission/blob/master/src/main/java/org/casbin/service/MenuService.java"},"MenuService")," verf\xfcgbar ist. Um zu \xfcberpr\xfcfen, ob ein bestimmter Benutzer die Rechte hat, auf einen bestimmten Men\xfcpunkt zuzugreifen, kann die Methode ",(0,i.kt)("inlineCode",{parentName:"p"},"checkMenuAccess()")," verwendet werden. Dieser Ansatz stellt sicher, dass Men\xfcberechtigungen effektiv kontrolliert werden und nutzt die F\xe4higkeiten von jCasbin zur effizienten Verwaltung von Zugriffsrechten."))}g.isMDXComponent=!0}}]);