"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[505],{591:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/editor-tips-2c4bf3155a73f079c976e5ad118d5518.png"},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>a});var s=i(6540);const t={},r=s.createContext(t);function d(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(r.Provider,{value:n},e.children)}},9672:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC mit Muster","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/RBACWithPattern.mdx","sourceDirName":".","slug":"/rbac-with-pattern","permalink":"/de/docs/rbac-with-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/RBACWithPattern.mdx","tags":[],"version":"current","frontMatter":{"id":"rbac-with-pattern","title":"RBAC with Pattern","description":"RBAC mit Muster","keywords":["RBAC with pattern","pattern matching"],"authors":["hsluoyz"]},"sidebar":"docs","previous":{"title":"RBAC","permalink":"/de/docs/rbac"},"next":{"title":"RBAC with Domains","permalink":"/de/docs/rbac-with-domains"}}');var t=i(4848),r=i(8453);const d={id:"rbac-with-pattern",title:"RBAC with Pattern",description:"RBAC mit Muster",keywords:["RBAC with pattern","pattern matching"],authors:["hsluoyz"]},a=void 0,c={},o=[{value:"Schnellstart",id:"schnellstart",level:2},{value:"Verwenden Sie Musterabgleich in RBAC",id:"verwenden-sie-musterabgleich-in-rbac",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{TabItem:s,Tabs:d}=n;return s||u("TabItem",!0),d||u("Tabs",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"schnellstart",children:"Schnellstart"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Verwenden Sie das Muster in ",(0,t.jsx)(n.code,{children:"g(_, _)"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e, _ := NewEnforcer("./example.conf", "./example.csv")\ne.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verwenden Sie das Muster mit Domain."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verwenden Sie alle Muster."}),"\n",(0,t.jsx)(n.p,{children:"Kombinieren Sie einfach die Verwendung beider APIs."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Wie oben gezeigt, m\xfcssen Sie nach dem Erstellen der ",(0,t.jsx)(n.code,{children:"enforcer"}),"-Instanz das Musterabgleich \xfcber die APIs ",(0,t.jsx)(n.code,{children:"AddNamedMatchingFunc"})," und ",(0,t.jsx)(n.code,{children:"AddNamedDomainMatchingFunc"})," aktivieren, die bestimmen, wie das Muster abgeglichen wird."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:['If you use the online editor, You can add a pattern matching function by clicking the "Add Role Matching" button in the lower left corner.\n',(0,t.jsx)(n.img,{alt:"editor-tips",src:i(591).A+"",width:"690",height:"480"})]})}),"\n",(0,t.jsx)(n.h2,{id:"verwenden-sie-musterabgleich-in-rbac",children:"Verwenden Sie Musterabgleich in RBAC"}),"\n",(0,t.jsxs)(n.p,{children:["Manchmal m\xf6chten Sie, dass bestimmte Subjekte, Objekte oder Domains/Mandanten mit einem bestimmten Muster automatisch eine Rolle zugewiesen bekommen. Musterabgleichsfunktionen in RBAC k\xf6nnen Ihnen dabei helfen. Eine Musterabgleichsfunktion teilt die gleichen Parameter und R\xfcckgabewert wie die vorherige ",(0,t.jsx)(n.a,{href:"/docs/syntax-for-models#functions-in-matchers",children:"Matcher-Funktion"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Die Musterabgleichsfunktion unterst\xfctzt jeden Parameter von ",(0,t.jsx)(n.code,{children:"g"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Wir wissen, dass RBAC normalerweise als ",(0,t.jsx)(n.code,{children:"g(r.sub, p.sub)"})," in einem Matcher ausgedr\xfcckt wird. Dann k\xf6nnen wir eine Richtlinie wie folgt verwenden:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"p, alice, book_group, read\ng, /book/1, book_group\ng, /book/2, book_group\n"})}),"\n",(0,t.jsxs)(n.p,{children:["So kann ",(0,t.jsx)(n.code,{children:"alice"})," alle B\xfccher einschlie\xdflich ",(0,t.jsx)(n.code,{children:"book 1"})," und ",(0,t.jsx)(n.code,{children:"book 2"})," lesen. Aber es kann Tausende von B\xfcchern geben, und es ist sehr m\xfchsam, jedes Buch zur Buchrolle (oder Gruppe) mit einer ",(0,t.jsx)(n.code,{children:"g"}),"-Richtlinienregel hinzuzuf\xfcgen."]}),"\n",(0,t.jsx)(n.p,{children:"Mit Musterabgleichsfunktionen k\xf6nnen Sie die Richtlinie jedoch mit nur einer Zeile schreiben:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"g, /book/:id, book_group\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Casbin wird automatisch ",(0,t.jsx)(n.code,{children:"/book/1"})," und ",(0,t.jsx)(n.code,{children:"/book/2"})," in das Muster ",(0,t.jsx)(n.code,{children:"/book/:id"})," f\xfcr Sie abgleichen. Sie m\xfcssen die Funktion nur mit dem Enforcer registrieren wie:"]}),"\n",(0,t.jsxs)(d,{groupId:"langs",children:[(0,t.jsx)(s,{value:"Go",label:"Go",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e.AddNamedMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,t.jsx)(s,{value:"Node.js",label:"Node.js",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"await e.addNamedMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"Wenn Sie eine Musterabgleichsfunktion in Domains/Mandanten verwenden, m\xfcssen Sie die Funktion mit dem Enforcer und Modell registrieren."}),"\n",(0,t.jsxs)(d,{groupId:"langs",children:[(0,t.jsx)(s,{value:"Go",label:"Go",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'e.AddNamedDomainMatchingFunc("g", "KeyMatch2", util.KeyMatch2)\n'})})}),(0,t.jsx)(s,{value:"Node.js",label:"Node.js",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"await e.addNamedDomainMatchingFunc('g', Util.keyMatch2Func);\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Wenn Sie nicht verstehen, was ",(0,t.jsx)(n.code,{children:"g(r.sub, p.sub, r.dom)"})," bedeutet, lesen Sie bitte ",(0,t.jsx)(n.a,{href:"/docs/rbac-with-domains",children:"rbac-with-domains"}),". Kurz gesagt, ",(0,t.jsx)(n.code,{children:"g(r.sub, p.sub, r.dom)"})," \xfcberpr\xfcft, ob der Benutzer ",(0,t.jsx)(n.code,{children:"r.sub"})," eine Rolle ",(0,t.jsx)(n.code,{children:"p.sub"})," in der Domain ",(0,t.jsx)(n.code,{children:"r.dom"})," hat. So funktioniert der Matcher. Das vollst\xe4ndige Beispiel finden Sie ",(0,t.jsx)(n.a,{href:"https://github.com/casbin/casbin/blob/dbdb6cbe2e7a80863e4951f9ff36da07fef01b75/model_test.go#L278-L307",children:"hier"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Neben der oben genannten Musterabgleichssyntax k\xf6nnen wir auch reines Domain-Muster verwenden."}),"\n",(0,t.jsxs)(n.p,{children:["Zum Beispiel, wenn wir m\xf6chten, dass ",(0,t.jsx)(n.code,{children:"sub"})," Zugriff in verschiedenen Domains hat, ",(0,t.jsx)(n.code,{children:"domain1"})," und ",(0,t.jsx)(n.code,{children:"domain2"}),", k\xf6nnen wir das reine Domain-Muster verwenden:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csv",children:"p, admin, domain1, data1, read\np, admin, domain1, data1, write\np, admin, domain2, data2, read\np, admin, domain2, data2, write\n\ng, alice, admin, *\ng, bob, admin, domain2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In diesem Beispiel m\xf6chten wir, dass ",(0,t.jsx)(n.code,{children:"alice"})," ",(0,t.jsx)(n.code,{children:"data"})," in domain1 und domain2 lesen und schreiben kann. Musterabgleich ",(0,t.jsx)(n.code,{children:"*"})," in ",(0,t.jsx)(n.code,{children:"g"})," erm\xf6glicht ",(0,t.jsx)(n.code,{children:"alice"})," Zugriff auf zwei Domains."]}),"\n",(0,t.jsxs)(n.p,{children:["By using pattern matching, especially in scenarios that are more complicated and have a lot of domains or objects to consider, we can implement the ",(0,t.jsx)(n.code,{children:"policy_definition"})," in a more elegant and effective way."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);