"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[3445],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(n),g=r,b=d["".concat(o,".").concat(g)]||d[g]||u[g]||i;return n?a.createElement(b,l(l({ref:t},c),{},{components:n})):a.createElement(b,l({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8211:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={id:"understanding-casbin-detail",title:"Understanding How Casbin Matching Works in Detail",description:"Casbin \u5b98\u65b9\u7db2\u7ad9\u9000\u6b3e\u653f\u7b56",keywords:["RBAC","ACL"],authors:["aravindarc"]},l=void 0,s={unversionedId:"understanding-casbin-detail",id:"understanding-casbin-detail",title:"Understanding How Casbin Matching Works in Detail",description:"Casbin \u5b98\u65b9\u7db2\u7ad9\u9000\u6b3e\u653f\u7b56",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/UnderstandingCasbinMatchingInDetail.mdx",sourceDirName:".",slug:"/understanding-casbin-detail",permalink:"/zh/docs/understanding-casbin-detail",draft:!1,editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/docs/UnderstandingCasbinMatchingInDetail.mdx",tags:[],version:"current",frontMatter:{id:"understanding-casbin-detail",title:"Understanding How Casbin Matching Works in Detail",description:"Casbin \u5b98\u65b9\u7db2\u7ad9\u9000\u6b3e\u653f\u7b56",keywords:["RBAC","ACL"],authors:["aravindarc"]},sidebar:"docs",previous:{title:"Tutorials",permalink:"/zh/docs/tutorials"},next:{title:"Model",permalink:"/zh/docs/category/model"}},o={},p=[{value:"\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236\uff08RBAC\uff09\u4ecb\u7d39",id:"\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236rbac\u4ecb\u7d39",level:2},{value:"\u7406\u89e3 Azure \u7684\u5206\u5c64 RBAC",id:"\u7406\u89e3-azure-\u7684\u5206\u5c64-rbac",level:2},{value:"Casbin \u662f\u5982\u4f55\u904b\u4f5c\u7684\uff1f",id:"casbin-\u662f\u5982\u4f55\u904b\u4f5c\u7684",level:2},{value:"\u4ec0\u9ebc\u662f ACL\uff1f",id:"\u4ec0\u9ebc\u662f-acl",level:2},{value:"\u6a21\u578b\u5b9a\u7fa9",id:"\u6a21\u578b\u5b9a\u7fa9",level:3},{value:"\u73fe\u5728\u8b93\u6211\u5011\u5728 Casbin \u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b",id:"\u73fe\u5728\u8b93\u6211\u5011\u5728-casbin-\u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b",level:3},{value:"ACL \u6a21\u578b\u3001\u653f\u7b56\u53ca\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u5448\u73fe",id:"acl-\u6a21\u578b\u653f\u7b56\u53ca\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u5448\u73fe",level:3},{value:"\u4ec0\u9ebc\u662f RBAC\uff1f",id:"\u4ec0\u9ebc\u662f-rbac",level:2},{value:"\u6a21\u578b\u5b9a\u7fa9",id:"\u6a21\u578b\u5b9a\u7fa9-1",level:3},{value:"\u73fe\u5728\u8b93\u6211\u5011\u5728 Casbin \u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b",id:"\u73fe\u5728\u8b93\u6211\u5011\u5728-casbin-\u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b-1",level:3},{value:"RBAC \u6a21\u578b\u3001\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u8868\u793a",id:"rbac-\u6a21\u578b\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u8868\u793a",level:3},{value:"\u4ec0\u9ebc\u662f\u5c64\u6b21\u5f0f RBAC\uff1f",id:"\u4ec0\u9ebc\u662f\u5c64\u6b21\u5f0f-rbac",level:2},{value:"\u6a21\u578b\u5b9a\u7fa9",id:"\u6a21\u578b\u5b9a\u7fa9-2",level:3},{value:"\u73fe\u5728\u8b93\u6211\u5011\u5728 Casbin \u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b",id:"\u73fe\u5728\u8b93\u6211\u5011\u5728-casbin-\u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b-2",level:3},{value:"RBAC \u6a21\u578b\u7684\u8996\u89ba\u8868\u793a\uff0c\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d",id:"rbac-\u6a21\u578b\u7684\u8996\u89ba\u8868\u793a\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d",level:3},{value:"\u4e3b\u9ad4\u5339\u914d\u8996\u89ba\u8868\u793a",id:"\u4e3b\u9ad4\u5339\u914d\u8996\u89ba\u8868\u793a",level:4},{value:"\u52d5\u4f5c\u5339\u914d\u8996\u89ba\u8868\u793a",id:"\u52d5\u4f5c\u5339\u914d\u8996\u89ba\u8868\u793a",level:4},{value:"\u5c0d\u8c61\u5339\u914d\u8996\u89ba\u8868\u793a",id:"\u5c0d\u8c61\u5339\u914d\u8996\u89ba\u8868\u793a",level:4},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2}],c={toc:p};function u(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u5728\u9019\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u5c07\u89e3\u91cb\u5982\u4f55\u4f7f\u7528 ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/"},"Casbin")," \u5eab\u4f86\u8a2d\u8a08\u548c\u5be6\u73fe\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236\uff08RBAC\uff09\u3002 \u5c0d\u65bc\u8655\u7406\u591a\u500b\u8cc7\u6e90\u5c64\u6b21\u7d50\u69cb\u548c\u89d2\u8272\u5f9e\u66f4\u9ad8\u5c64\u6b21\u7e7c\u627f\u6b0a\u9650\u7684 SaaS \u5e73\u53f0\uff0cCasbin \u63d0\u4f9b\u4e86\u4e00\u500b\u9ad8\u6548\u7684\u66ff\u4ee3\u65b9\u6848\u4f86\u8003\u616e\u3002"),(0,r.kt)("h2",{id:"\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236rbac\u4ecb\u7d39"},"\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236\uff08RBAC\uff09\u4ecb\u7d39"),(0,r.kt)("p",null,"\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236\uff08RBAC\uff09\u662f\u4e00\u7a2e\u6839\u64da\u500b\u4eba\u6240\u64d4\u4efb\u7684\u89d2\u8272\u4f86\u9650\u5236\u5c0d\u8cc7\u6e90\u7684\u8a2a\u554f\u7684\u65b9\u6cd5\u3002 \u70ba\u4e86\u66f4\u597d\u5730\u7406\u89e3\u5206\u5c64 RBAC \u7684\u5de5\u4f5c\u539f\u7406\uff0c\u8b93\u6211\u5011\u5728\u4e0b\u4e00\u7bc0\u4e2d\u770b\u770b Azure \u7684 RBAC \u7cfb\u7d71\uff0c\u7136\u5f8c\u5617\u8a66\u5be6\u73fe\u4e00\u500b\u985e\u4f3c\u7684\u7cfb\u7d71\u3002"),(0,r.kt)("h2",{id:"\u7406\u89e3-azure-\u7684\u5206\u5c64-rbac"},"\u7406\u89e3 Azure \u7684\u5206\u5c64 RBAC"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-setup-guide/media/organize-resources/scope-levels.png",alt:"Azure \u5c64\u6b21\u7d50\u69cb"})),(0,r.kt)("p",null,"\u5728 Azure \u4e2d\uff0c\u6240\u6709\u8cc7\u6e90\u90fd\u6709\u4e00\u500b\u540d\u70ba ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005")," \u7684\u89d2\u8272\u3002 \u5047\u8a2d\u6211\u5728\u8a02\u95b1\u5c64\u7d1a\u88ab\u5206\u914d\u4e86 ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005")," \u89d2\u8272\uff0c\u9019\u610f\u5473\u8457\u6211\u662f\u8a72\u8a02\u95b1\u4e0b\u6240\u6709\u8cc7\u6e90\u7fa4\u7d44\u548c\u8cc7\u6e90\u7684 ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005"),"\u3002 \u5982\u679c\u6211\u5728\u8cc7\u6e90\u7fa4\u7d44\u5c64\u7d1a\u64c1\u6709 ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005")," \u89d2\u8272\uff0c\u90a3\u9ebc\u6211\u5c31\u662f\u8a72\u8cc7\u6e90\u7fa4\u7d44\u4e0b\u6240\u6709\u8cc7\u6e90\u7684 ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005"),"\u3002"),(0,r.kt)("p",null,"\u9019\u5f35\u5716\u7247\u986f\u793a\u6211\u5728\u8a02\u95b1\u5c64\u7d1a\u64c1\u6709 ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005")," \u8a2a\u554f\u6b0a\u9650\u3002 ",(0,r.kt)("img",{alt:"\u8a02\u95b1\u64c1\u6709\u8005",src:n(6970).Z,width:"3456",height:"1836"})),(0,r.kt)("p",null,"\u7576\u6211\u67e5\u770b\u6b64\u8a02\u95b1\u4e0b\u67d0\u500b\u8cc7\u6e90\u7fa4\u7d44\u7684 IAM \u6642\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u6211\u5f9e\u8a02\u95b1\u7e7c\u627f\u4e86 ",(0,r.kt)("strong",{parentName:"p"},"\u64c1\u6709\u8005")," \u8a2a\u554f\u6b0a\u9650\u3002 ",(0,r.kt)("img",{alt:"\u8cc7\u6e90\u7fa4\u7d44\u64c1\u6709\u8005",src:n(9742).Z,width:"3456",height:"1836"})),(0,r.kt)("p",null,"\u56e0\u6b64\uff0c\u9019\u5c31\u662f Azure \u7684 RBAC \u5177\u6709\u5c64\u6b21\u7d50\u69cb\u7684\u65b9\u5f0f\u3002 \u5927\u591a\u6578\u4f01\u696d\u8edf\u4ef6\u4f7f\u7528\u5c64\u6b21\u7d50\u69cb\u7684 RBAC\uff0c\u56e0\u70ba\u8cc7\u6e90\u5c64\u7d1a\u5177\u6709\u5c64\u6b21\u7d50\u69cb\u7684\u672c\u8cea\u3002 \u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u5011\u5c07\u5617\u8a66\u4f7f\u7528 Casbin \u5be6\u73fe\u4e00\u500b\u985e\u4f3c\u7684\u7cfb\u7d71\u3002"),(0,r.kt)("h2",{id:"casbin-\u662f\u5982\u4f55\u904b\u4f5c\u7684"},"Casbin \u662f\u5982\u4f55\u904b\u4f5c\u7684\uff1f"),(0,r.kt)("p",null,"\u5728\u6df1\u5165\u5be6\u65bd\u4e4b\u524d\uff0c\u4e86\u89e3 Casbin \u662f\u4ec0\u9ebc\u4ee5\u53ca\u5b83\u5728\u9ad8\u5c64\u6b21\u4e0a\u5982\u4f55\u904b\u4f5c\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002 \u9019\u7a2e\u7406\u89e3\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u70ba\u6bcf\u500b\u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u63a7\u5236\uff08RBAC\uff09\u7cfb\u7d71\u53ef\u80fd\u6703\u6839\u64da\u5177\u9ad4\u9700\u6c42\u800c\u6709\u6240\u4e0d\u540c\u3002 \u901a\u904e\u638c\u63e1 Casbin \u7684\u904b\u4f5c\u65b9\u5f0f\uff0c\u6211\u5011\u53ef\u4ee5\u6709\u6548\u5730\u5fae\u8abf\u6a21\u578b\u3002"),(0,r.kt)("h2",{id:"\u4ec0\u9ebc\u662f-acl"},"\u4ec0\u9ebc\u662f ACL\uff1f"),(0,r.kt)("p",null,"ACL \u4ee3\u8868\u8a2a\u554f\u63a7\u5236\u5217\u8868\u3002 \u5b83\u662f\u4e00\u7a2e\u5c07\u7528\u6236\u6620\u5c04\u5230\u64cd\u4f5c\uff0c\u4e26\u5c07\u64cd\u4f5c\u6620\u5c04\u5230\u8cc7\u6e90\u7684\u65b9\u6cd5\u3002"),(0,r.kt)("h3",{id:"\u6a21\u578b\u5b9a\u7fa9"},"\u6a21\u578b\u5b9a\u7fa9"),(0,r.kt)("p",null,"\u8b93\u6211\u5011\u8003\u616e\u4e00\u500b\u7c21\u55ae\u7684 ACL \u6a21\u578b\u793a\u4f8b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[request_definition]\nr = sub, act, obj\n\n[policy_definition]\np = sub, act, obj\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == p.sub && r.obj == p.obj && r.act == p.act\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"request","_","definition")," \u662f\u7cfb\u7d71\u7684\u67e5\u8a62\u6a21\u677f\u3002 \u8209\u4f8b\u4f86\u8aaa\uff0c\u8acb\u6c42 ",(0,r.kt)("inlineCode",{parentName:"p"},"alice, write, data1")," \u53ef\u4ee5\u88ab\u89e3\u8b80\u70ba \"\u4e3b\u9ad4 Alice \u80fd\u5426\u57f7\u884c\u5c0d\u7269\u4ef6 'data1' \u7684 'write' \u52d5\u4f5c\uff1f\"\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"policy","_","definition")," \u662f\u7cfb\u7d71\u7684\u5206\u914d\u6a21\u677f\u3002 \u4f8b\u5982\uff0c\u900f\u904e\u5275\u5efa\u4e00\u500b\u7b56\u7565 ",(0,r.kt)("inlineCode",{parentName:"p"},"alice, write, data1"),"\uff0c\u60a8\u6b63\u5728\u6388\u4e88\u4e3b\u9ad4 Alice \u5c0d\u7269\u4ef6 'data1' \u57f7\u884c 'write' \u52d5\u4f5c\u7684\u6b0a\u9650\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"policy","_","effect")," \u5b9a\u7fa9\u4e86\u7b56\u7565\u7684\u6548\u679c\u3002")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5728 ",(0,r.kt)("strong",{parentName:"p"},"matchers")," \u90e8\u5206\uff0c\u8acb\u6c42\u6703\u6839\u64da\u689d\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"r.sub == p.sub && r.obj == p.obj && r.act == p.act")," \u8207\u7b56\u7565\u9032\u884c\u5339\u914d\u3002"))),(0,r.kt)("h3",{id:"\u73fe\u5728\u8b93\u6211\u5011\u5728-casbin-\u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b"},"\u73fe\u5728\u8b93\u6211\u5011\u5728 Casbin \u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b"),(0,r.kt)("p",null,"\u6253\u958b ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/editor"},"\u7de8\u8f2f\u5668")," \u4e26\u5c07\u4e0a\u8ff0\u6a21\u578b\u8cbc\u5230\u6a21\u578b\u7de8\u8f2f\u5668\u4e2d\u3002"),(0,r.kt)("p",null,"\u5728\u7b56\u7565\u7de8\u8f2f\u5668\u4e2d\u8cbc\u4e0a\u4ee5\u4e0b\u5167\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, read, data1\np, bob, write, data2\n")),(0,r.kt)("p",null,"\u4ee5\u53ca\u5728\u8acb\u6c42\u7de8\u8f2f\u5668\u4e2d\u8cbc\u4e0a\u4ee5\u4e0b\u5167\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, read, data1\n")),(0,r.kt)("p",null,"\u7d50\u679c\u5c07\u6703\u662f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"true\n")),(0,r.kt)("h3",{id:"acl-\u6a21\u578b\u653f\u7b56\u53ca\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u5448\u73fe"},"ACL \u6a21\u578b\u3001\u653f\u7b56\u53ca\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u5448\u73fe"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"acl",src:n(3353).Z,width:"6968",height:"3096"})),(0,r.kt)("h2",{id:"\u4ec0\u9ebc\u662f-rbac"},"\u4ec0\u9ebc\u662f RBAC\uff1f"),(0,r.kt)("p",null,"RBAC \u4ee3\u8868\u57fa\u65bc\u89d2\u8272\u7684\u5b58\u53d6\u63a7\u5236\u3002 \u5728 RBAC \u4e2d\uff0c\u7528\u6236\u88ab\u5206\u914d\u4e00\u500b\u8cc7\u6e90\u7684\u89d2\u8272\uff0c\u800c\u89d2\u8272\u53ef\u4ee5\u5305\u542b\u4efb\u610f\u64cd\u4f5c\u3002 \u7136\u5f8c\u8acb\u6c42\u6703\u6aa2\u67e5\u7528\u6236\u662f\u5426\u6709\u6b0a\u9650\u57f7\u884c\u8a72\u64cd\u4f5c\u65bc\u8a72\u8cc7\u6e90\u4e0a\u3002"),(0,r.kt)("h3",{id:"\u6a21\u578b\u5b9a\u7fa9-1"},"\u6a21\u578b\u5b9a\u7fa9"),(0,r.kt)("p",null,"\u8b93\u6211\u5011\u8003\u616e\u4e00\u500b\u7c21\u55ae\u7684 RBAC \u6a21\u578b\u4f8b\u5b50\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[request_definition]\nr = sub, act, obj\n\n[policy_definition]\np = sub, act, obj\n\n[role_definition]\ng = _, _\ng2 = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == p.sub && g(p.act, r.act) && r.obj == p.obj\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"role","_","definition")," \u662f\u4e00\u500b\u5716\u5f62\u95dc\u4fc2\u69cb\u5efa\u5668\uff0c\u4f7f\u7528\u5716\u5f62\u4f86\u6bd4\u8f03\u8acb\u6c42\u5c0d\u8c61\u8207\u653f\u7b56\u5c0d\u8c61\u3002")),(0,r.kt)("h3",{id:"\u73fe\u5728\u8b93\u6211\u5011\u5728-casbin-\u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b-1"},"\u73fe\u5728\u8b93\u6211\u5011\u5728 Casbin \u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b"),(0,r.kt)("p",null,"\u6253\u958b",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/editor"},"\u7de8\u8f2f\u5668"),"\u4e26\u5c07\u4e0a\u8ff0\u6a21\u578b\u8cbc\u5230\u6a21\u578b\u7de8\u8f2f\u5668\u4e2d\u3002"),(0,r.kt)("p",null,"\u5728\u7b56\u7565\u7de8\u8f2f\u5668\u4e2d\u8cbc\u4e0a\u4ee5\u4e0b\u5167\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, reader, data1\np, bob, owner, data2\n\ng, reader, read\ng, owner, read\ng, owner, write\n")),(0,r.kt)("p",null,"\u4ee5\u53ca\u5728\u8acb\u6c42\u7de8\u8f2f\u5668\u4e2d\u8cbc\u4e0a\u4ee5\u4e0b\u5167\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, read, data1\nalice, write, data1\nbob, write, data2\nbob, read, data2\nbob, write, data1\n")),(0,r.kt)("p",null,"\u7d50\u679c\u5c07\u662f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"true\nfalse\ntrue\ntrue\nfalse\n")),(0,r.kt)("h3",{id:"rbac-\u6a21\u578b\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u8868\u793a"},"RBAC \u6a21\u578b\u3001\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d\u7684\u8996\u89ba\u8868\u793a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"rbac",src:n(3859).Z,width:"7016",height:"2844"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"g - \u89d2\u8272\u5230\u64cd\u4f5c\u7684\u6620\u5c04"),"\u8868\u683c\u6709\u4e00\u500b\u5716\u8868\u5c07\u89d2\u8272\u6620\u5c04\u5230\u64cd\u4f5c\u3002 \u9019\u500b\u5716\u8868\u53ef\u4ee5\u7de8\u78bc\u70ba\u4e00\u7d44\u908a\u7de3\u5217\u8868\uff0c\u5982\u7b56\u7565\u4e2d\u6240\u793a\uff0c\u9019\u662f\u8868\u793a\u5716\u8868\u7684\u5e38\u898b\u65b9\u5f0f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"g, reader, read\ng, owner, read\ng, owner, write\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"p")," \u8868\u793a\u4e00\u500b\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("strong",{parentName:"p"},"==")," \u904b\u7b97\u7b26\u9032\u884c\u6bd4\u8f03\u7684\u666e\u901a\u7b56\u7565\u3002 ",(0,r.kt)("strong",{parentName:"p"},"g")," \u662f\u4e00\u500b\u57fa\u65bc\u5716\u8868\u7684\u6bd4\u8f03\u51fd\u6578\u3002 \u60a8\u53ef\u4ee5\u900f\u904e\u6dfb\u52a0\u6578\u5b57\u5f8c\u7db4\uff08\u5982 ",(0,r.kt)("strong",{parentName:"p"},"g, g2, g3, ...")," \u7b49\uff09\u4f86\u5b9a\u7fa9\u591a\u500b\u5716\u5f62\u6bd4\u8f03\u5668\u3002")),(0,r.kt)("h2",{id:"\u4ec0\u9ebc\u662f\u5c64\u6b21\u5f0f-rbac"},"\u4ec0\u9ebc\u662f\u5c64\u6b21\u5f0f RBAC\uff1f"),(0,r.kt)("p",null,"\u5728\u5c64\u6b21\u5f0f RBAC \u4e2d\uff0c\u5b58\u5728\u591a\u7a2e\u985e\u578b\u7684\u8cc7\u6e90\uff0c\u4e26\u4e14\u8cc7\u6e90\u985e\u578b\u4e4b\u9593\u5b58\u5728\u7e7c\u627f\u95dc\u4fc2\u3002 \u4f8b\u5982\uff0c\u300c\u8a02\u95b1\u300d\u662f\u4e00\u7a2e\u985e\u578b\uff0c\u800c\u300c\u8cc7\u6e90\u7fa4\u7d44\u300d\u662f\u53e6\u4e00\u7a2e\u985e\u578b\u3002 \u4e00\u500b\u985e\u578b\u70ba ",(0,r.kt)("strong",{parentName:"p"},"\u8a02\u95b1")," \u7684 sub1 \u53ef\u4ee5\u5305\u542b\u591a\u500b\u985e\u578b\u70ba ",(0,r.kt)("strong",{parentName:"p"},"\u8cc7\u6e90\u7fa4\u7d44")," \u7684 rg1 \u548c rg2\u3002"),(0,r.kt)("p",null,"\u985e\u4f3c\u65bc\u8cc7\u6e90\u5c64\u6b21\u7d50\u69cb\uff0c\u5c07\u5b58\u5728\u5169\u7a2e\u985e\u578b\u7684\u89d2\u8272\u548c\u64cd\u4f5c\uff1a\u8a02\u95b1\u89d2\u8272\u548c\u64cd\u4f5c\uff0c\u4ee5\u53ca\u8cc7\u6e90\u7fa4\u7d44\u89d2\u8272\u548c\u64cd\u4f5c\u3002 \u8a02\u95b1\u89d2\u8272\u548c\u8cc7\u6e90\u7fa4\u7d44\u89d2\u8272\u4e4b\u9593\u5b58\u5728\u4efb\u610f\u95dc\u4fc2\u3002 \u4f8b\u5982\uff0c\u8003\u616e\u4e00\u500b\u8a02\u95b1\u89d2\u8272 ",(0,r.kt)("strong",{parentName:"p"},"sub-owner"),"\u3002 \u9019\u500b\u89d2\u8272\u88ab\u8cc7\u6e90\u7fa4\u7d44\u89d2\u8272 ",(0,r.kt)("strong",{parentName:"p"},"rg-owner")," \u7e7c\u627f\uff0c\u9019\u610f\u5473\u8457\u5982\u679c\u6211\u5728\u8a02\u95b1 ",(0,r.kt)("strong",{parentName:"p"},"sub1")," \u4e0a\u88ab\u5206\u914d\u4e86 ",(0,r.kt)("strong",{parentName:"p"},"sub-owner")," \u89d2\u8272\uff0c\u90a3\u9ebc\u6211\u4e5f\u81ea\u52d5\u7372\u5f97\u5728 ",(0,r.kt)("strong",{parentName:"p"},"rg1 \u548c rg2")," \u4e0a\u7684 ",(0,r.kt)("strong",{parentName:"p"},"rg-owner")," \u89d2\u8272\u3002"),(0,r.kt)("h3",{id:"\u6a21\u578b\u5b9a\u7fa9-2"},"\u6a21\u578b\u5b9a\u7fa9"),(0,r.kt)("p",null,"\u8b93\u6211\u5011\u4ee5\u4e00\u500b\u7c21\u55ae\u7684 ",(0,r.kt)("strong",{parentName:"p"},"\u5c64\u6b21\u5f0fRBAC")," \u6a21\u578b\u70ba\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[request_definition]\nr = sub, act, obj\n\n[policy_definition]\np = sub, act, obj\n\n[role_definition]\ng = _, _\ng2 = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = r.sub == p.sub && g(p.act, r.act) && g2(p.obj, r.obj)\n")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\u89d2\u8272\u5b9a\u7fa9")," \u662f\u4e00\u500b\u5716\u95dc\u4fc2\u69cb\u5efa\u5668\uff0c\u5b83\u4f7f\u7528\u4e00\u500b\u5716\u4f86\u6bd4\u8f03\u8acb\u6c42\u5c0d\u8c61\u8207\u7b56\u7565\u5c0d\u8c61\u3002")),(0,r.kt)("h3",{id:"\u73fe\u5728\u8b93\u6211\u5011\u5728-casbin-\u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b-2"},"\u73fe\u5728\u8b93\u6211\u5011\u5728 Casbin \u7de8\u8f2f\u5668\u4e0a\u6e2c\u8a66\u9019\u500b\u6a21\u578b"),(0,r.kt)("p",null,"\u6253\u958b ",(0,r.kt)("a",{parentName:"p",href:"https://casbin.org/editor"},"\u7de8\u8f2f\u5668")," \u4e26\u5c07\u4e0a\u8ff0\u6a21\u578b\u8cbc\u5230\u6a21\u578b\u7de8\u8f2f\u5668\u4e2d\u3002"),(0,r.kt)("p",null,"\u5728\u7b56\u7565\u7de8\u8f2f\u5668\u4e2d\u8cbc\u4e0a\u4ee5\u4e0b\u5167\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"p, alice, sub-reader, sub1\np, bob, rg-owner, rg2\n\n// subscription role to subscription action mapping\ng, sub-reader, sub-read\ng, sub-owner, sub-read\ng, sub-owner, sub-write\n\n// resourceGroup role to resourceGroup action mapping\ng, rg-reader, rg-read\ng, rg-owner, rg-read\ng, rg-owner, rg-write\n\n// subscription role to resourceGroup role mapping\ng, sub-reader, rg-reader\ng, sub-owner, rg-owner\n\n// subscription resource to resourceGroup resource mapping\ng2, sub1, rg1\ng2, sub2, rg2\n")),(0,r.kt)("p",null,"\u5728\u8acb\u6c42\u7de8\u8f2f\u5668\u4e2d\u8cbc\u4e0a\u4ee5\u4e0b\u5167\u5bb9\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"alice, rg-read, rg1\n")),(0,r.kt)("p",null,"\u7d50\u679c\u5c07\u662f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"true\n")),(0,r.kt)("h3",{id:"rbac-\u6a21\u578b\u7684\u8996\u89ba\u8868\u793a\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d"},"RBAC \u6a21\u578b\u7684\u8996\u89ba\u8868\u793a\uff0c\u7b56\u7565\u548c\u8acb\u6c42\u5339\u914d"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac",src:n(4492).Z,width:"7968",height:"4204"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"g - \u89d2\u8272\u5230\uff08\u52d5\u4f5c\uff0c\u89d2\u8272\uff09\u6620\u5c04")," \u8868\u6709\u4e00\u500b\u5716\uff0c\u5c07\u89d2\u8272\u6620\u5c04\u5230\u52d5\u4f5c\uff0c\u89d2\u8272\u6620\u5c04\u3002 \u6b64\u5716\u53ef\u4ee5\u7de8\u78bc\u70ba\u4e00\u500b\u908a\u5217\u8868\uff0c\u5982\u653f\u7b56\u6240\u793a\uff0c\u9019\u662f\u8868\u793a\u5716\u7684\u5e38\u898b\u65b9\u5f0f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"// subscription role to subscription action mapping\ng, sub-reader, sub-read\ng, sub-owner, sub-read\ng, sub-owner, sub-write\n\n// resourceGroup role to resourceGroup action mapping\ng, rg-reader, rg-read\ng, rg-owner, rg-read\ng, rg-owner, rg-write\n\n// subscription role to resourceGroup role mapping\ng, sub-reader, rg-reader\ng, sub-owner, rg-owner\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"g2 - Sub to RG Mapping")," \u8868\u683c\u5177\u6709\u5c07\u8a02\u95b1\u6620\u5c04\u5230\u8cc7\u6e90\u7d44\u7684\u5716\u5f62\u6620\u5c04\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"// subscription resource to resourceGroup resource mapping\ng2, sub1, rg1\ng2, sub2, rg2\n")),(0,r.kt)("h4",{id:"\u4e3b\u9ad4\u5339\u914d\u8996\u89ba\u8868\u793a"},"\u4e3b\u9ad4\u5339\u914d\u8996\u89ba\u8868\u793a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac-sub-match",src:n(3541).Z,width:"8176",height:"4336"})),(0,r.kt)("h4",{id:"\u52d5\u4f5c\u5339\u914d\u8996\u89ba\u8868\u793a"},"\u52d5\u4f5c\u5339\u914d\u8996\u89ba\u8868\u793a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac-act-match",src:n(8303).Z,width:"7964",height:"4376"})),(0,r.kt)("h4",{id:"\u5c0d\u8c61\u5339\u914d\u8996\u89ba\u8868\u793a"},"\u5c0d\u8c61\u5339\u914d\u8996\u89ba\u8868\u793a"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"hrbac-obj-match",src:n(6879).Z,width:"7964",height:"4296"})),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u7576\u5411 Casbin \u63d0\u4ea4\u8acb\u6c42\u6642\uff0c\u6240\u6709\u653f\u7b56\u90fd\u6703\u9032\u884c\u6b64\u5339\u914d\u3002 \u5982\u679c\u81f3\u5c11\u6709\u4e00\u500b\u653f\u7b56\u5339\u914d\uff0c\u5247\u8acb\u6c42\u7684\u7d50\u679c\u70ba\u771f\u3002 \u5982\u679c\u6c92\u6709\u4efb\u4f55\u653f\u7b56\u7b26\u5408\u8acb\u6c42\uff0c\u5247\u7d50\u679c\u70ba\u5047\u3002")),(0,r.kt)("h2",{id:"\u7d50\u8ad6"},"\u7d50\u8ad6"),(0,r.kt)("p",null,"\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u5011\u5b78\u7fd2\u4e86\u4e0d\u540c\u7684\u6388\u6b0a\u6a21\u578b\u5982\u4f55\u904b\u4f5c\uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528Casbin\u5c0d\u5176\u9032\u884c\u5efa\u6a21\u3002 \u5728\u672c\u6559\u7a0b\u7684\u7b2c\u4e8c\u90e8\u5206\u4e2d\uff0c\u6211\u5011\u5c07\u5728\u4e00\u500b\u6f14\u793a\u7684Spring Boot\u61c9\u7528\u7a0b\u5e8f\u4e2d\u5be6\u73fe\u9019\u4e00\u9ede\uff0c\u4e26\u4f7f\u7528Casbin\u4fdd\u8b77API\u3002"))}u.isMDXComponent=!0},3353:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/acl-704097c47b27a1f2235c82f593af469e.png"},8303:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/hrbac-act-match-bbb086158782591771f2df01419dc4b8.png"},6879:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/hrbac-obj-match-aad370d5cbfe1020ec108b9242f8d4bd.png"},3541:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/hrbac-sub-match-55dffd4e5fadb9773658dc90bacbb091.png"},4492:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/hrbac-1350d755e04234a34394996344d2b259.png"},3859:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rbac-4c8e405408b9e4df554f7cd619eae897.png"},9742:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rg-owner-9c6cd2ae5997a5fba717c445f43130e6.png"},6970:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/subscription-owner-f1a7e1c9c03d7c587ce910ae5e6d8a35.png"}}]);