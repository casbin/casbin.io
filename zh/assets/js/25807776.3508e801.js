"use strict";(globalThis.webpackChunkcasbin_website_v2=globalThis.webpackChunkcasbin_website_v2||[]).push([[9205],{968(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"pbac","title":"PBAC","description":"Policy-Based Access Control model in Casbin","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/PBAC.mdx","sourceDirName":".","slug":"/pbac","permalink":"/zh/docs/pbac","draft":false,"unlisted":false,"editUrl":"https://github.com/casbin/casbin-website-v2/edit/master/docs/PBAC.mdx","tags":[],"version":"current","frontMatter":{"id":"pbac","title":"PBAC","description":"Policy-Based Access Control model in Casbin","keywords":["pbac","policy-based access control","dynamic policies","rule-based authorization"],"authors":["casbin"]},"sidebar":"docs","previous":{"title":"ABAC","permalink":"/zh/docs/abac"},"next":{"title":"MAC Overview","permalink":"/zh/docs/mac-overview"}}');var l=s(4848),r=s(8453);const c={id:"pbac",title:"PBAC",description:"Policy-Based Access Control model in Casbin",keywords:["pbac","policy-based access control","dynamic policies","rule-based authorization"],authors:["casbin"]},t=void 0,o={},a=[{value:"What is PBAC?",id:"what-is-pbac",level:2},{value:"Model",id:"model",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic Policy",id:"basic-policy",level:3},{value:"Complex Policy",id:"complex-policy",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"what-is-pbac",children:"What is PBAC?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"PBAC (Policy-Based Access Control)"})," decides authorization from ",(0,l.jsx)(n.strong,{children:"rules stored in policy"}),", evaluated at runtime with ",(0,l.jsx)(n.code,{children:"eval()"}),". Unlike fixed role or attribute checks, PBAC can express complex, context-dependent conditions."]}),"\n",(0,l.jsx)(n.p,{children:"Policies can include:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dynamic expressions"})," \u2014 evaluated per request (e.g. ",(0,l.jsx)(n.code,{children:"r.sub.Age >= 18"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Complex logic"})," \u2014 boolean and comparison operators, attribute access"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Context"})," \u2014 user, resource, and environment attributes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Business rules"})," \u2014 domain-specific logic in policy"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"model",children:"Model"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub_rule, obj_rule, act\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = eval(p.sub_rule) && eval(p.obj_rule) && r.act == p.act\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"p.sub_rule"})," / ",(0,l.jsx)(n.code,{children:"p.obj_rule"})," \u2014 expressions over the request (e.g. ",(0,l.jsx)(n.code,{children:"r.sub.Age >= 18"}),", ",(0,l.jsx)(n.code,{children:"r.obj.Level >= 1"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"eval()"})," \u2014 evaluates these expressions at enforce time"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsx)(n.h3,{id:"basic-policy",children:"Basic Policy"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Policy:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csv",children:"p, r.sub.Age >= 18, r.obj.Level >= 1, play\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Request Examples:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{"Age":25}, {"Level":2}, play    # ALLOWED (Age >= 18 and Level >= 1)\n{"Age":16}, {"Level":2}, play    # DENIED (Age < 18)\n{"Age":20}, {"Level":0}, play    # DENIED (Level < 1)\n{"Age":25}, {"Level":2}, read    # DENIED (action doesn\'t match policy)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"complex-policy",children:"Complex Policy"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Policy:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-csv",children:'p, r.sub.Department == "IT" && r.sub.Level >= 3, r.obj.Confidential == false, read\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Request Examples:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'{"Department":"IT","Level":3}, {"Confidential":false}, read    # ALLOWED\n{"Department":"IT","Level":2}, {"Confidential":false}, read    # DENIED (Level < 3)\n{"Department":"HR","Level":3}, {"Confidential":false}, read    # DENIED (Department != "IT")\n{"Department":"IT","Level":3}, {"Confidential":true}, read     # DENIED (Confidential == true)\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Code Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'e, _ := NewEnforcer("examples/pbac_model.conf", "examples/pbac_policy.csv")\n\n// Enable JSON request support\ne.EnableAcceptJsonRequest(true)\n\n// Define subject and object with attributes\nsubject := `{"Department": "IT", "Level": 3}`\nobject := `{"Confidential": false}`\naction := "read"\n\n// Check permission\nok, err := e.Enforce(subject, object, action)\nif err != nil {\n    fmt.Printf("Enforcement error: %v\\n", err)\n    return\n}\nif ok {\n    fmt.Println("Permission granted")\n} else {\n    fmt.Println("Permission denied")\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["With ",(0,l.jsx)(n.code,{children:"EnableAcceptJsonRequest(true)"}),", parameters that look like JSON (",(0,l.jsx)(n.code,{children:"{"})," or ",(0,l.jsx)(n.code,{children:"["}),") are parsed automatically; invalid JSON returns a clear error."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>t});var i=s(6540);const l={},r=i.createContext(l);function c(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);