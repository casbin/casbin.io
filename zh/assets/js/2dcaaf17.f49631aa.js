"use strict";(self.webpackChunkcasbin_website_v2=self.webpackChunkcasbin_website_v2||[]).push([[6596],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>b});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),u=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=u(e.components);return a.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=u(t),b=i,d=m["".concat(l,".").concat(b)]||m[b]||c[b]||r;return t?a.createElement(d,o(o({ref:n},s),{},{components:t})):a.createElement(d,o({ref:n},s))}));function b(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=m;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p.mdxType="string"==typeof e?e:i,o[1]=p;for(var u=2;u<r;u++)o[u]=t[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5763:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>p,toc:()=>u});var a=t(7462),i=(t(7294),t(3905));const r={title:"\u5728 APISIX \u4e2d\u4f7f\u7528 Casbin \u9032\u884c\u6388\u6b0a",author:"Rushikesh Tote",authorTitle:"Casbin \u6210\u54e1",authorURL:"http://github.com/rushitote",authorImageURL:"https://avatars.githubusercontent.com/rushitote"},o=void 0,p={permalink:"/zh/blog/2021/08/19/apisix-casbin-authorization",editUrl:"https://github.com/casbin/casbin-website-v2/edit/master/i18n/zh/docusaurus-plugin-content-blog/2021-08-19-apisix-casbin-authorization.md",source:"@site/i18n/zh/docusaurus-plugin-content-blog/2021-08-19-apisix-casbin-authorization.md",title:"\u5728 APISIX \u4e2d\u4f7f\u7528 Casbin \u9032\u884c\u6388\u6b0a",description:"\u4ecb\u7d39",date:"2021-08-19T00:00:00.000Z",formattedDate:"2021\u5e748\u670819\u65e5",tags:[],readingTime:7.405,hasTruncateMarker:!1,authors:[{name:"Rushikesh Tote",title:"Casbin \u6210\u54e1",url:"http://github.com/rushitote",imageURL:"https://avatars.githubusercontent.com/rushitote"}],frontMatter:{title:"\u5728 APISIX \u4e2d\u4f7f\u7528 Casbin \u9032\u884c\u6388\u6b0a",author:"Rushikesh Tote",authorTitle:"Casbin \u6210\u54e1",authorURL:"http://github.com/rushitote",authorImageURL:"https://avatars.githubusercontent.com/rushitote"},nextItem:{title:"\u694a\u7f85 - Google \u958b\u6e90\u540c\u884c\u734e\u91d1\u5f97\u4e3b",permalink:"/zh/blog/2020/04/21/google-award"}},l={authorsImageUrls:[void 0]},u=[{value:"\u4ecb\u7d39",id:"\u4ecb\u7d39",level:2},{value:"\u5275\u5efa\u6a21\u578b",id:"\u5275\u5efa\u6a21\u578b",level:2},{value:"\u5275\u5efa\u7b56\u7565",id:"\u5275\u5efa\u7b56\u7565",level:2},{value:"\u5728\u8def\u7531\u4e0a\u555f\u7528\u63d2\u4ef6",id:"\u5728\u8def\u7531\u4e0a\u555f\u7528\u63d2\u4ef6",level:2},{value:"\u4f7f\u7528\u5168\u5c40\u6a21\u578b/\u7b56\u7565\u555f\u7528\u63d2\u4ef6",id:"\u4f7f\u7528\u5168\u5c40\u6a21\u578b\u7b56\u7565\u555f\u7528\u63d2\u4ef6",level:2},{value:"\u4f7f\u7528\u6848\u4f8b",id:"\u4f7f\u7528\u6848\u4f8b",level:2}],s={toc:u};function c(e){let{components:n,...r}=e;return(0,i.kt)("wrapper",(0,a.Z)({},s,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"\u4ecb\u7d39"},"\u4ecb\u7d39"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://apisix.apache.org/"},"APISIX")," \u662f\u4e00\u500b\u57fa\u65bc Nginx \u548c etcd \u7684\u9ad8\u6027\u80fd\u548c\u53ef\u64f4\u5c55\u7684\u96f2\u539f\u751f API \u7db2\u95dc\u3002 \u5b83\u662f\u7531 Apache \u8edf\u4ef6\u57fa\u91d1\u6703\u652f\u6301\u7684\u958b\u6e90\u9805\u76ee\u3002 APISIX \u4e4b\u6240\u4ee5\u51fa\u8272\uff0c\u9664\u4e86\u5176\u57fa\u790e\u67b6\u69cb\u5916\uff0c\u9084\u5728\u65bc\u5b83\u652f\u6301\u8a31\u591a\u5167\u5efa\u7684\u512a\u79c0\u63d2\u4ef6\uff0c\u53ef\u4ee5\u7528\u65bc\u5be6\u73fe\u8a8d\u8b49\u3001\u76e3\u63a7\u3001\u8def\u7531\u7b49\u529f\u80fd\u3002 \u800c\u4e14\uff0cAPISIX \u4e2d\u7684\u63d2\u4ef6\u662f\u71b1\u52a0\u8f09\u7684\uff08\u7121\u9700\u91cd\u555f\uff09\uff0c\u9019\u4f7f\u5f97\u5b83\u975e\u5e38\u52d5\u614b\u3002"),(0,i.kt)("p",null,"\u4f46\u5728\u4f7f\u7528 APISIX \u6642\uff0c\u53ef\u80fd\u6703\u9047\u5230\u9700\u8981\u5728\u61c9\u7528\u7a0b\u5e8f\u4e2d\u6dfb\u52a0\u8907\u96dc\u6388\u6b0a\u908f\u8f2f\u7684\u5834\u666f\u3002 \u9019\u6642\uff0cauthz-casbin \u63d2\u4ef6\u53ef\u80fd\u6703\u5c0d\u4f60\u6709\u6240\u5e6b\u52a9\u3002 authz-casbin \u662f\u4e00\u500b\u57fa\u65bc ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/casbin/lua-casbin/"},"Lua Casbin")," \u7684 APISIX \u63d2\u4ef6\uff0c\u5b83\u652f\u6301\u57fa\u65bc\u5404\u7a2e\u8a2a\u554f\u63a7\u5236\u6a21\u578b\u7684\u5f37\u5927\u6388\u6b0a\u529f\u80fd\u3002 ",(0,i.kt)("a",{parentName:"p",href:"/"},"Casbin")," \u662f\u4e00\u500b\u6388\u6b0a\u5eab\uff0c\u652f\u6301 ACL\u3001RBAC\u3001ABAC \u7b49\u8a2a\u554f\u63a7\u5236\u6a21\u578b\u3002 \u6700\u521d\u7528 Go \u7de8\u5beb\uff0c\u5b83\u5df2\u88ab\u79fb\u690d\u5230\u8a31\u591a\u8a9e\u8a00\uff0cLua Casbin \u662f Casbin \u7684 Lua \u5be6\u73fe\u3002 authz-casbin \u7684\u958b\u767c\u59cb\u65bc\u6211\u5011\u5728 APISIX \u5009\u5eab\u4e2d\u63d0\u51fa\u4e86\u4e00\u500b\u65b0\u7684\u6388\u6b0a\u63d2\u4ef6\u63d0\u6848\uff08","[","#4674","]","(",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/issues/4674%EF%BC%89%EF%BC%8C%E6%A0%B8%E5%BF%83%E6%88%90%E5%93%A1%E5%90%8C%E6%84%8F%E4%BA%86%E9%80%99%E4%B8%80%E6%8F%90%E6%A1%88%E3%80%82"},"https://github.com/apache/apisix/issues/4674\uff09\uff0c\u6838\u5fc3\u6210\u54e1\u540c\u610f\u4e86\u9019\u4e00\u63d0\u6848\u3002")," \u7d93\u904e\u4e00\u4e9b\u6709\u76ca\u7684\u8a55\u5be9\uff0c\u5c0e\u81f4\u4e86\u4e00\u4e9b\u91cd\u5927\u8b8a\u66f4\u548c\u6539\u9032\uff0c\u6700\u7d42 PR\uff08","[","#4710","]","(",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/apisix/pull/4710%EF%BC%89%E8%A2%AB%E5%90%88%E4%BD%B5%E3%80%82"},"https://github.com/apache/apisix/pull/4710\uff09\u88ab\u5408\u4f75\u3002")),(0,i.kt)("p",null,"\u5728\u9019\u7bc7\u535a\u5ba2\u4e2d\uff0c\u6211\u5011\u5c07\u4f7f\u7528 authz-casbin \u63d2\u4ef6\u4f86\u5c55\u793a\u5982\u4f55\u5728 APISIX \u4e2d\u5be6\u73fe\u57fa\u65bc\u89d2\u8272\u8a2a\u554f\u63a7\u5236\uff08RBAC\uff09\u7684\u6388\u6b0a\u6a21\u578b\u3002"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u6ce8\u610f"),"\uff1a\u4f60\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u63d2\u4ef6\u6216\u81ea\u5b9a\u7fa9\u5de5\u4f5c\u6d41\u7a0b\u4f86\u9a57\u8b49\u7528\u6236\uff0c\u56e0\u70ba Casbin \u50c5\u8ca0\u8cac\u6388\u6b0a\uff0c\u4e0d\u8ca0\u8cac\u9a57\u8b49\u3002"),(0,i.kt)("h2",{id:"\u5275\u5efa\u6a21\u578b"},"\u5275\u5efa\u6a21\u578b"),(0,i.kt)("p",null,"\u8a72\u63d2\u4ef6\u4f7f\u7528\u4e09\u500b\u53c3\u6578\u4f86\u6388\u6b0a\u4efb\u4f55\u8acb\u6c42 - \u4e3b\u9ad4\u3001\u5c0d\u8c61\u548c\u52d5\u4f5c\u3002 \u5728\u9019\u88e1\uff0c\u4e3b\u9ad4\u662f username \u6a19\u982d\u7684\u503c\uff0c\u53ef\u80fd\u662f\u985e\u4f3c ",(0,i.kt)("inlineCode",{parentName:"p"},"[username: alice]")," \u7684\u5167\u5bb9\u3002 \u7136\u5f8c\uff0c\u5c0d\u8c61\u662f\u6b63\u5728\u8a2a\u554f\u7684 URL \u8def\u5f91\uff0c\u52d5\u4f5c\u662f\u6b63\u5728\u4f7f\u7528\u7684\u8acb\u6c42\u65b9\u6cd5\u3002"),(0,i.kt)("p",null,"\u5047\u8a2d\u6211\u5011\u60f3\u8981\u5275\u5efa\u4e00\u500b\u6a21\u578b\uff0c\u5176\u4e2d\u6709\u4e09\u500b\u8cc7\u6e90\u4f4d\u65bc\u8def\u5f91 - ",(0,i.kt)("inlineCode",{parentName:"p"},"/"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"/res1")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"/res2"),"\u3002 \u6211\u5011\u5e0c\u671b\u6a21\u578b\u5982\u4e0b\uff1a"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:t(8478).Z,width:"4520",height:"1720"})),(0,i.kt)("p",null,"\u9019\u610f\u5473\u8457\u6240\u6709\u7528\u6236\uff08",(0,i.kt)("inlineCode",{parentName:"p"},"*"),"\uff09\u4f8b\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"jack")," \u53ef\u4ee5\u8a2a\u554f\u4e3b\u9801\uff08",(0,i.kt)("inlineCode",{parentName:"p"},"/"),"\uff09\u3002 \u5177\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"admin")," \u6b0a\u9650\u7684\u7528\u6236\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"alice")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"bob")," \u53ef\u4ee5\u8a2a\u554f\u6240\u6709\u9801\u9762\u548c\u8cc7\u6e90\uff08\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"res1")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"res2"),"\uff09\u3002 \u6b64\u5916\uff0c\u8b93\u6211\u5011\u9650\u5236\u6c92\u6709\u4efb\u4f55\u7ba1\u7406\u6b0a\u9650\u7684\u7528\u6236\u50c5\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"GET")," \u8acb\u6c42\u65b9\u6cd5\u3002 \u5c0d\u65bc\u9019\u7a2e\u60c5\u6cc1\uff0c\u6211\u5011\u53ef\u4ee5\u5b9a\u7fa9\u6a21\u578b\u70ba\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ini"},"[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = (g(r.sub, p.sub) || keyMatch(r.sub, p.sub)) && keyMatch(r.obj, p.obj) && keyMatch(r.act, p.act)\n")),(0,i.kt)("h2",{id:"\u5275\u5efa\u7b56\u7565"},"\u5275\u5efa\u7b56\u7565"),(0,i.kt)("p",null,"\u6839\u64da\u4e0a\u8ff0\u5834\u666f\uff0c\u7b56\u7565\u5c07\u662f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csv"},"p, *, /, GET\np, admin, *, *\ng, alice, admin\ng, bob, admin\n")),(0,i.kt)("p",null,"\u6a21\u578b\u4e2d\u7684\u5339\u914d\u5668\u610f\u5473\u8457\uff1a"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"(g(r.sub, p.sub) || keyMatch(r.sub, p.sub))"),": \u8acb\u6c42\u7684\u4e3b\u9ad4\u5177\u6709\u7b56\u7565\u7684\u4e3b\u9ad4\u89d2\u8272\uff0c\u6216\u8005\u8acb\u6c42\u7684\u4e3b\u9ad4\u5728 keyMatch \u4e2d\u5339\u914d\u7b56\u7565\u7684\u4e3b\u9ad4\u3002 keyMatch \u662f Lua Casbin \u4e2d\u7684\u5167\u5efa\u51fd\u6578, \u4f60\u53ef\u4ee5\u5728",(0,i.kt)("a",{parentName:"li",href:"https://github.com/casbin/lua-casbin/blob/master/src/util/BuiltInFunctions.lua"},"\u9019\u88e1"),".\u67e5\u770b\u8a72\u51fd\u6578\u7684\u63cf\u8ff0\u548c\u5176\u4ed6\u53ef\u80fd\u6709\u7528\u7684\u51fd\u6578\u3002"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"keyMatch(r.obj, p.obj)"),": \u8acb\u6c42\u7684\u5c0d\u8c61\u5339\u914d\u7b56\u7565\u7684\u5c0d\u8c61\uff08\u6b64\u8655\u70ba URL \u8def\u5f91\uff09\u3002"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"keyMatch(r.act, p.act)"),": \u8acb\u6c42\u7684\u52d5\u4f5c\u5339\u914d\u7b56\u7565\u7684\u52d5\u4f5c\uff08\u6b64\u8655\u70ba HTTP \u8acb\u6c42\u65b9\u6cd5\uff09\u3002")),(0,i.kt)("h2",{id:"\u5728\u8def\u7531\u4e0a\u555f\u7528\u63d2\u4ef6"},"\u5728\u8def\u7531\u4e0a\u555f\u7528\u63d2\u4ef6"),(0,i.kt)("p",null,"\u4e00\u65e6\u4f60\u5275\u5efa\u4e86\u6a21\u578b\u548c\u7b56\u7565\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 APISIX Admin API \u5728\u8def\u7531\u4e0a\u555f\u7528\u5b83\u3002 \u8981\u4f7f\u7528\u6a21\u578b\u548c\u7b56\u7565\u6587\u4ef6\u8def\u5f91\u555f\u7528\u5b83\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl http://127.0.0.1:9080/apisix/admin/routes/1 -H \'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1\' -X PUT -d \'\n{\n    "plugins": {\n        "authz-casbin": {\n            "model_path": "/path/to/model.conf",\n            "policy_path": "/path/to/policy.csv",\n            "username": "username"\n        }\n    },\n    "upstream": {\n        "nodes": {\n            "127.0.0.1:1980": 1\n        },\n        "type": "roundrobin"\n    },\n    "uri": "/*"\n}\'\n')),(0,i.kt)("p",null,"\u5728\u9019\u88e1\uff0cusername \u5b57\u6bb5\u662f\u4f60\u5c07\u7528\u65bc\u50b3\u905e\u4e3b\u9ad4\u7684\u6a19\u982d\u540d\u7a31\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u4f60\u5c07\u50b3\u905e username \u6a19\u982d\u70ba ",(0,i.kt)("inlineCode",{parentName:"p"},"user: alice"),"\uff0c\u4f60\u5c07\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},'"username": "user"'),"\u3002"),(0,i.kt)("p",null,"\u5c0d\u65bc\u4f7f\u7528\u6a21\u578b/\u7b56\u7565\u6587\u672c\u800c\u4e0d\u662f\u6587\u4ef6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"model")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"policy")," \u5b57\u6bb5\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl http://127.0.0.1:9080/apisix/admin/routes/1 -H \'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1\' -X PUT -d \'\n{\n    "plugins": {\n        "authz-casbin": {\n            "model": "[request_definition]\n            r = sub, obj, act\n\n            [policy_definition]\n            p = sub, obj, act\n\n            [role_definition]\n            g = _, _\n\n            [policy_effect]\n            e = some(where (p.eft == allow))\n\n            [matchers]\n            m = (g(r.sub, p.sub) || keyMatch(r.sub, p.sub)) && keyMatch(r.obj, p.obj) && keyMatch(r.act, p.act)",\n\n            "policy": "p, *, /, GET\n            p, admin, *, *\n            g, alice, admin\n            g, bob, admin",\n\n            "username": "username"\n        }\n    },\n    "upstream": {\n        "nodes": {\n            "127.0.0.1:1980": 1\n        },\n        "type": "roundrobin"\n    },\n    "uri": "/*"\n}\'\n')),(0,i.kt)("h2",{id:"\u4f7f\u7528\u5168\u5c40\u6a21\u578b\u7b56\u7565\u555f\u7528\u63d2\u4ef6"},"\u4f7f\u7528\u5168\u5c40\u6a21\u578b/\u7b56\u7565\u555f\u7528\u63d2\u4ef6"),(0,i.kt)("p",null,"\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u591a\u500b\u8def\u7531\u4e0a\u4f7f\u7528\u55ae\u4e00\u7684\u6a21\u578b\u548c\u7b56\u7565\u914d\u7f6e\u3002 \u4f60\u53ef\u4ee5\u901a\u904e\u9996\u5148\u767c\u9001\u4e00\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"PUT")," \u8acb\u6c42\uff0c\u5c07\u6a21\u578b\u548c\u7b56\u7565\u914d\u7f6e\u6dfb\u52a0\u5230\u63d2\u4ef6\u7684\u5143\u6578\u64da\u4e2d\u4f86\u5be6\u73fe\u9019\u4e00\u9ede\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl http://127.0.0.1:9080/apisix/admin/plugin_metadata/authz-casbin -H \'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1\' -i -X PUT -d \'\n{\n"model": "[request_definition]\nr = sub, obj, act\n\n[policy_definition]\np = sub, obj, act\n\n[role_definition]\ng = _, _\n\n[policy_effect]\ne = some(where (p.eft == allow))\n\n[matchers]\nm = (g(r.sub, p.sub) || keyMatch(r.sub, p.sub)) && keyMatch(r.obj, p.obj) && keyMatch(r.act, p.act)",\n\n"policy": "p, *, /, GET\np, admin, *, *\ng, alice, admin\ng, bob, admin"\n}\'\n')),(0,i.kt)("p",null,"\u7136\u5f8c\uff0c\u8981\u5728\u67d0\u500b\u8def\u7531\u4e0a\u555f\u7528\u76f8\u540c\u7684\u914d\u7f6e\uff0c\u4f7f\u7528 Admin API \u767c\u9001\u8acb\u6c42\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl http://127.0.0.1:9080/apisix/admin/routes/1 -H \'X-API-KEY: edd1c9f034335f136f87ad84b625c8f1\' -X PUT -d \'\n{\n    "plugins": {\n        "authz-casbin": {\n            "username": "username"\n        }\n    },\n    "upstream": {\n        "nodes": {\n            "127.0.0.1:1980": 1\n        },\n        "type": "roundrobin"\n    },\n    "uri": "/route1/*"\n}\'\n')),(0,i.kt)("p",null,"\u9019\u5c07\u628a\u63d2\u4ef6\u5143\u6578\u64da\u914d\u7f6e\u6dfb\u52a0\u5230\u8def\u7531\u4e2d\u3002 \u4f60\u9084\u53ef\u4ee5\u901a\u904e\u91cd\u65b0\u767c\u9001\u5e36\u6709\u66f4\u65b0\u6a21\u578b\u548c\u7b56\u7565\u914d\u7f6e\u7684\u8acb\u6c42\u5230\u63d2\u4ef6\u7684\u5143\u6578\u64da\u4f86\u8f15\u9b06\u66f4\u65b0\u63d2\u4ef6\u5143\u6578\u64da\u914d\u7f6e\uff0c\u63d2\u4ef6\u5c07\u81ea\u52d5\u66f4\u65b0\u6240\u6709\u4f7f\u7528\u63d2\u4ef6\u5143\u6578\u64da\u7684\u8def\u7531\u3002"),(0,i.kt)("h2",{id:"\u4f7f\u7528\u6848\u4f8b"},"\u4f7f\u7528\u6848\u4f8b"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u8a72\u63d2\u4ef6\u7684\u4e3b\u8981\u4f7f\u7528\u6848\u4f8b\u662f\u5728\u4f60\u7684 API \u4e2d\u5be6\u73fe\u6388\u6b0a\u3002 \u4f60\u53ef\u4ee5\u8f15\u9b06\u5730\u5728\u4efb\u4f55\u4f7f\u7528\u6388\u6b0a\u6a21\u578b\u548c\u7b56\u7565\u914d\u7f6e\u7684 API \u8def\u7531\u4e0a\u6dfb\u52a0\u6b64\u63d2\u4ef6\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f60\u5e0c\u671b\u70ba\u6240\u6709 API \u4f7f\u7528\u55ae\u4e00\u7684\u6388\u6b0a\u6a21\u578b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5168\u5c40\u6a21\u578b/\u7b56\u7565\u65b9\u6cd5\u3002 \u9019\u4f7f\u5f97\u66f4\u65b0\u6240\u6709\u8def\u7531\u7684\u7b56\u7565\u8b8a\u5f97\u5bb9\u6613\uff0c\u56e0\u70ba\u4f60\u53ea\u9700\u8981\u5728 etcd \u4e2d\u66f4\u65b0\u5143\u6578\u64da\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f60\u5e0c\u671b\u70ba\u6bcf\u500b\u4e0d\u540c\u7684\u8def\u7531\u4f7f\u7528\u4e0d\u540c\u7684\u6a21\u578b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u8def\u7531\u65b9\u6cd5\u3002 \u7576\u4e0d\u540c\u7684 API \u8def\u7531\u6709\u4e0d\u540c\u7684\u7528\u6236\u6b0a\u9650\u96c6\u6642\uff0c\u9019\u5f88\u6709\u5e6b\u52a9\u3002 \u7576\u4f60\u8655\u7406\u8f03\u5927\u7684\u7b56\u7565\u6642\uff0c\u9019\u4e5f\u5f88\u6709\u7528\uff0c\u56e0\u70ba\u5b83\u5c07\u6388\u6b0a\u904e\u6ffe\u5230\u591a\u500b\u8def\u7531\u4e2d\uff0c\u5f9e\u800c\u4f7f\u6388\u6b0a\u66f4\u5feb\u3002")))}c.isMDXComponent=!0},8478:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/model-1c0c2441dd19f8b957744635985283eb.png"}}]);